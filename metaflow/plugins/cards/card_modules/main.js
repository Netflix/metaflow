(function(ie,Pe){typeof exports=="object"&&typeof module<"u"?module.exports=Pe():typeof define=="function"&&define.amd?define(Pe):(ie=typeof globalThis<"u"?globalThis:ie||self,ie["Outerbounds Cards"]=Pe())})(this,function(){"use strict";var s7e=Object.defineProperty;var Ez=ie=>{throw TypeError(ie)};var o7e=(ie,Pe,xi)=>Pe in ie?s7e(ie,Pe,{enumerable:!0,configurable:!0,writable:!0,value:xi}):ie[Pe]=xi;var Lt=(ie,Pe,xi)=>o7e(ie,typeof Pe!="symbol"?Pe+"":Pe,xi),a7e=(ie,Pe,xi)=>Pe.has(ie)||Ez("Cannot "+xi);var Cz=(ie,Pe,xi)=>Pe.has(ie)?Ez("Cannot add the same private member more than once"):Pe instanceof WeakSet?Pe.add(ie):Pe.set(ie,xi);var s2=(ie,Pe,xi)=>(a7e(ie,Pe,"access private method"),xi);var Yu,g5,kz,_z,wz;function ie(){}function Pe(e,t){for(const n in t)e[n]=t[n];return e}function xi(e){return e()}function m5(){return Object.create(null)}function Xu(e){e.forEach(xi)}function y5(e){return typeof e=="function"}function ye(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let Lh;function Ih(e,t){return e===t?!0:(Lh||(Lh=document.createElement("a")),Lh.href=t,e===Lh.href)}function Az(e){return Object.keys(e).length===0}function $z(e,...t){if(e==null){for(const i of t)i(void 0);return ie}const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function Ph(e,t,n){e.$$.on_destroy.push($z(t,n))}function mt(e,t,n,i){if(e){const r=b5(e,t,n,i);return e[0](r)}}function b5(e,t,n,i){return e[1]&&i?Pe(n.ctx.slice(),e[1](i(t))):n.ctx}function yt(e,t,n,i){return e[2],t.dirty}function bt(e,t,n,i,r,s){if(r){const o=b5(t,n,i,s);e.p(o,r)}}function vt(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let i=0;i<n;i++)t[i]=-1;return t}return-1}function o2(e){const t={};for(const n in e)n[0]!=="$"&&(t[n]=e[n]);return t}function v5(e,t){const n={};t=new Set(t);for(const i in e)!t.has(i)&&i[0]!=="$"&&(n[i]=e[i]);return n}const Sz=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function V(e,t){e.appendChild(t)}function I(e,t,n){e.insertBefore(t,n||null)}function L(e){e.parentNode&&e.parentNode.removeChild(e)}function jt(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function G(e){return document.createElement(e)}function Pi(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function Be(e){return document.createTextNode(e)}function He(){return Be(" ")}function Ne(){return Be("")}function Ku(e,t,n,i){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n,i)}function M(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}const Fz=["width","height"];function x5(e,t){const n=Object.getOwnPropertyDescriptors(e.__proto__);for(const i in t)t[i]==null?e.removeAttribute(i):i==="style"?e.style.cssText=t[i]:i==="__value"?e.value=e[i]=t[i]:n[i]&&n[i].set&&Fz.indexOf(i)===-1?e[i]=t[i]:M(e,i,t[i])}function _5(e,t){for(const n in t)M(e,n,t[n])}function Dz(e){return Array.from(e.childNodes)}function ft(e,t){t=""+t,e.data!==t&&(e.data=t)}function _i(e,t,n,i){n==null?e.style.removeProperty(t):e.style.setProperty(t,n,"")}function ni(e,t,n){e.classList.toggle(t,!!n)}function Tz(e,t,{bubbles:n=!1,cancelable:i=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:i})}class Mz{constructor(t=!1){Lt(this,"is_svg",!1);Lt(this,"e");Lt(this,"n");Lt(this,"t");Lt(this,"a");this.is_svg=t,this.e=this.n=null}c(t){this.h(t)}m(t,n,i=null){this.e||(this.is_svg?this.e=Pi(n.nodeName):this.e=G(n.nodeType===11?"TEMPLATE":n.nodeName),this.t=n.tagName!=="TEMPLATE"?n:n.content,this.c(t)),this.i(i)}h(t){this.e.innerHTML=t,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(t){for(let n=0;n<this.n.length;n+=1)I(this.t,this.n[n],t)}p(t){this.d(),this.h(t),this.i(this.a)}d(){this.n.forEach(L)}}function Ke(e,t){return new e(t)}let Uc;function jc(e){Uc=e}function qc(){if(!Uc)throw new Error("Function called outside component initialization");return Uc}function Wc(e){qc().$$.on_mount.push(e)}function w5(e){qc().$$.on_destroy.push(e)}function a2(){const e=qc();return(t,n,{cancelable:i=!1}={})=>{const r=e.$$.callbacks[t];if(r){const s=Tz(t,n,{cancelable:i});return r.slice().forEach(o=>{o.call(e,s)}),!s.defaultPrevented}return!0}}function E5(e,t){return qc().$$.context.set(e,t),t}function C5(e){return qc().$$.context.get(e)}function k5(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach(i=>i.call(this,t))}const Zu=[],zi=[];let Ju=[];const u2=[],Nz=Promise.resolve();let l2=!1;function Rz(){l2||(l2=!0,Nz.then(A5))}function c2(e){Ju.push(e)}function f2(e){u2.push(e)}const d2=new Set;let Qu=0;function A5(){if(Qu!==0)return;const e=Uc;do{try{for(;Qu<Zu.length;){const t=Zu[Qu];Qu++,jc(t),Oz(t.$$)}}catch(t){throw Zu.length=0,Qu=0,t}for(jc(null),Zu.length=0,Qu=0;zi.length;)zi.pop()();for(let t=0;t<Ju.length;t+=1){const n=Ju[t];d2.has(n)||(d2.add(n),n())}Ju.length=0}while(Zu.length);for(;u2.length;)u2.pop()();l2=!1,d2.clear(),jc(e)}function Oz(e){if(e.fragment!==null){e.update(),Xu(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(c2)}}function Lz(e){const t=[],n=[];Ju.forEach(i=>e.indexOf(i)===-1?t.push(i):n.push(i)),n.forEach(i=>i()),Ju=t}const zh=new Set;let _a;function Se(){_a={r:0,c:[],p:_a}}function Fe(){_a.r||Xu(_a.c),_a=_a.p}function D(e,t){e&&e.i&&(zh.delete(e),e.i(t))}function N(e,t,n,i){if(e&&e.o){if(zh.has(e))return;zh.add(e),_a.c.push(()=>{zh.delete(e),i&&(n&&e.d(1),i())}),e.o(t)}else i&&i()}function Ue(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function wi(e,t){const n={},i={},r={$$scope:1};let s=e.length;for(;s--;){const o=e[s],a=t[s];if(a){for(const u in o)u in a||(i[u]=1);for(const u in a)r[u]||(n[u]=a[u],r[u]=1);e[s]=a}else for(const u in o)r[u]=1}for(const o in i)o in n||(n[o]=void 0);return n}function ar(e){return typeof e=="object"&&e!==null?e:{}}function h2(e,t,n){const i=e.$$.props[t];i!==void 0&&(e.$$.bound[i]=n,n(e.$$.ctx[i]))}function he(e){e&&e.c()}function ce(e,t,n){const{fragment:i,after_update:r}=e.$$;i&&i.m(t,n),c2(()=>{const s=e.$$.on_mount.map(xi).filter(y5);e.$$.on_destroy?e.$$.on_destroy.push(...s):Xu(s),e.$$.on_mount=[]}),r.forEach(c2)}function fe(e,t){const n=e.$$;n.fragment!==null&&(Lz(n.after_update),Xu(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Iz(e,t){e.$$.dirty[0]===-1&&(Zu.push(e),Rz(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function ve(e,t,n,i,r,s,o=null,a=[-1]){const u=Uc;jc(e);const l=e.$$={fragment:null,ctx:[],props:s,update:ie,not_equal:r,bound:m5(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(u?u.$$.context:[])),callbacks:m5(),dirty:a,skip_bound:!1,root:t.target||u.$$.root};o&&o(l.root);let c=!1;if(l.ctx=n?n(e,t.props||{},(f,d,...h)=>{const p=h.length?h[0]:d;return l.ctx&&r(l.ctx[f],l.ctx[f]=p)&&(!l.skip_bound&&l.bound[f]&&l.bound[f](p),c&&Iz(e,f)),d}):[],l.update(),c=!0,Xu(l.before_update),l.fragment=i?i(l.ctx):!1,t.target){if(t.hydrate){const f=Dz(t.target);l.fragment&&l.fragment.l(f),f.forEach(L)}else l.fragment&&l.fragment.c();t.intro&&D(e.$$.fragment),ce(e,t.target,t.anchor),A5()}jc(u)}class xe{constructor(){Lt(this,"$$");Lt(this,"$$set")}$destroy(){fe(this,1),this.$destroy=ie}$on(t,n){if(!y5(n))return ie;const i=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return i.push(n),()=>{const r=i.indexOf(n);r!==-1&&i.splice(r,1)}}$set(t){this.$$set&&!Az(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Pz="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Pz);var zz=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{},Br=function(e){var t=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,n=0,i={},r={manual:e.Prism&&e.Prism.manual,disableWorkerMessageHandler:e.Prism&&e.Prism.disableWorkerMessageHandler,util:{encode:function h(p){return p instanceof s?new s(p.type,h(p.content),p.alias):Array.isArray(p)?p.map(h):p.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(h){return Object.prototype.toString.call(h).slice(8,-1)},objId:function(h){return h.__id||Object.defineProperty(h,"__id",{value:++n}),h.__id},clone:function h(p,g){var m,y;switch(g=g||{},r.util.type(p)){case"Object":if(y=r.util.objId(p),g[y])return g[y];for(var b in m={},g[y]=m,p)p.hasOwnProperty(b)&&(m[b]=h(p[b],g));return m;case"Array":return y=r.util.objId(p),g[y]?g[y]:(m=[],g[y]=m,p.forEach(function(v,x){m[x]=h(v,g)}),m);default:return p}},getLanguage:function(h){for(;h;){var p=t.exec(h.className);if(p)return p[1].toLowerCase();h=h.parentElement}return"none"},setLanguage:function(h,p){h.className=h.className.replace(RegExp(t,"gi"),""),h.classList.add("language-"+p)},currentScript:function(){if(typeof document>"u")return null;if("currentScript"in document)return document.currentScript;try{throw new Error}catch(m){var h=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(m.stack)||[])[1];if(h){var p=document.getElementsByTagName("script");for(var g in p)if(p[g].src==h)return p[g]}return null}},isActive:function(h,p,g){for(var m="no-"+p;h;){var y=h.classList;if(y.contains(p))return!0;if(y.contains(m))return!1;h=h.parentElement}return!!g}},languages:{plain:i,plaintext:i,text:i,txt:i,extend:function(h,p){var g=r.util.clone(r.languages[h]);for(var m in p)g[m]=p[m];return g},insertBefore:function(h,p,g,m){var y=(m=m||r.languages)[h],b={};for(var v in y)if(y.hasOwnProperty(v)){if(v==p)for(var x in g)g.hasOwnProperty(x)&&(b[x]=g[x]);g.hasOwnProperty(v)||(b[v]=y[v])}var _=m[h];return m[h]=b,r.languages.DFS(r.languages,function(E,w){w===_&&E!=h&&(this[E]=b)}),b},DFS:function h(p,g,m,y){y=y||{};var b=r.util.objId;for(var v in p)if(p.hasOwnProperty(v)){g.call(p,v,p[v],m||v);var x=p[v],_=r.util.type(x);_!=="Object"||y[b(x)]?_!=="Array"||y[b(x)]||(y[b(x)]=!0,h(x,g,v,y)):(y[b(x)]=!0,h(x,g,null,y))}}},plugins:{},highlightAll:function(h,p){r.highlightAllUnder(document,h,p)},highlightAllUnder:function(h,p,g){var m={callback:g,container:h,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};r.hooks.run("before-highlightall",m),m.elements=Array.prototype.slice.apply(m.container.querySelectorAll(m.selector)),r.hooks.run("before-all-elements-highlight",m);for(var y,b=0;y=m.elements[b++];)r.highlightElement(y,p===!0,m.callback)},highlightElement:function(h,p,g){var m=r.util.getLanguage(h),y=r.languages[m];r.util.setLanguage(h,m);var b=h.parentElement;b&&b.nodeName.toLowerCase()==="pre"&&r.util.setLanguage(b,m);var v={element:h,language:m,grammar:y,code:h.textContent};function x(E){v.highlightedCode=E,r.hooks.run("before-insert",v),v.element.innerHTML=v.highlightedCode,r.hooks.run("after-highlight",v),r.hooks.run("complete",v),g&&g.call(v.element)}if(r.hooks.run("before-sanity-check",v),(b=v.element.parentElement)&&b.nodeName.toLowerCase()==="pre"&&!b.hasAttribute("tabindex")&&b.setAttribute("tabindex","0"),!v.code)return r.hooks.run("complete",v),void(g&&g.call(v.element));if(r.hooks.run("before-highlight",v),v.grammar)if(p&&e.Worker){var _=new Worker(r.filename);_.onmessage=function(E){x(E.data)},_.postMessage(JSON.stringify({language:v.language,code:v.code,immediateClose:!0}))}else x(r.highlight(v.code,v.grammar,v.language));else x(r.util.encode(v.code))},highlight:function(h,p,g){var m={code:h,grammar:p,language:g};return r.hooks.run("before-tokenize",m),m.tokens=r.tokenize(m.code,m.grammar),r.hooks.run("after-tokenize",m),s.stringify(r.util.encode(m.tokens),m.language)},tokenize:function(h,p){var g=p.rest;if(g){for(var m in g)p[m]=g[m];delete p.rest}var y=new a;return u(y,y.head,h),function b(v,x,_,E,w,C){for(var k in _)if(_.hasOwnProperty(k)&&_[k]){var S=_[k];S=Array.isArray(S)?S:[S];for(var $=0;$<S.length;++$){if(C&&C.cause==k+","+$)return;var O=S[$],R=O.inside,F=!!O.lookbehind,A=!!O.greedy,T=O.alias;if(A&&!O.pattern.global){var B=O.pattern.toString().match(/[imsuy]*$/)[0];O.pattern=RegExp(O.pattern.source,B+"g")}for(var H=O.pattern||O,z=E.next,ne=w;z!==x.tail&&!(C&&ne>=C.reach);ne+=z.value.length,z=z.next){var be=z.value;if(x.length>v.length)return;if(!(be instanceof s)){var de,Te=1;if(A){if(!(de=o(H,ne,v,F))||de.index>=v.length)break;var or=de.index,ct=de.index+de[0].length,$e=ne;for($e+=z.value.length;$e<=or;)z=z.next,$e+=z.value.length;if($e-=z.value.length,ne=$e,z.value instanceof s)continue;for(var Ot=z;Ot!==x.tail&&($e<ct||typeof Ot.value=="string");Ot=Ot.next)Te++,$e+=Ot.value.length;Te--,be=v.slice(ne,$e),de.index-=ne}else if(!(de=o(H,0,be,F)))continue;var or=de.index,Ii=de[0],le=be.slice(0,or),Re=be.slice(or+Ii.length),Le=ne+be.length;C&&Le>C.reach&&(C.reach=Le);var K=z.prev;le&&(K=u(x,K,le),ne+=le.length),l(x,K,Te);var Kt=new s(k,R?r.tokenize(Ii,R):Ii,T,Ii);if(z=u(x,K,Kt),Re&&u(x,z,Re),1<Te){var Xe={cause:k+","+$,reach:Le};b(v,x,_,z.prev,ne,Xe),C&&Xe.reach>C.reach&&(C.reach=Xe.reach)}}}}}}(h,y,p,y.head,0),function(b){for(var v=[],x=b.head.next;x!==b.tail;)v.push(x.value),x=x.next;return v}(y)},hooks:{all:{},add:function(h,p){var g=r.hooks.all;g[h]=g[h]||[],g[h].push(p)},run:function(h,p){var g=r.hooks.all[h];if(g&&g.length)for(var m,y=0;m=g[y++];)m(p)}},Token:s};function s(h,p,g,m){this.type=h,this.content=p,this.alias=g,this.length=0|(m||"").length}function o(h,p,g,m){h.lastIndex=p;var y=h.exec(g);if(y&&m&&y[1]){var b=y[1].length;y.index+=b,y[0]=y[0].slice(b)}return y}function a(){var h={value:null,prev:null,next:null},p={value:null,prev:h,next:null};h.next=p,this.head=h,this.tail=p,this.length=0}function u(h,p,g){var m=p.next,y={value:g,prev:p,next:m};return p.next=y,m.prev=y,h.length++,y}function l(h,p,g){for(var m=p.next,y=0;y<g&&m!==h.tail;y++)m=m.next;(p.next=m).prev=p,h.length-=y}if(e.Prism=r,s.stringify=function h(p,g){if(typeof p=="string")return p;if(Array.isArray(p)){var m="";return p.forEach(function(_){m+=h(_,g)}),m}var y={type:p.type,content:h(p.content,g),tag:"span",classes:["token",p.type],attributes:{},language:g},b=p.alias;b&&(Array.isArray(b)?Array.prototype.push.apply(y.classes,b):y.classes.push(b)),r.hooks.run("wrap",y);var v="";for(var x in y.attributes)v+=" "+x+'="'+(y.attributes[x]||"").replace(/"/g,"&quot;")+'"';return"<"+y.tag+' class="'+y.classes.join(" ")+'"'+v+">"+y.content+"</"+y.tag+">"},!e.document)return e.addEventListener&&(r.disableWorkerMessageHandler||e.addEventListener("message",function(h){var p=JSON.parse(h.data),g=p.language,m=p.code,y=p.immediateClose;e.postMessage(r.highlight(m,r.languages[g],g)),y&&e.close()},!1)),r;var c=r.util.currentScript();function f(){r.manual||r.highlightAll()}if(c&&(r.filename=c.src,c.hasAttribute("data-manual")&&(r.manual=!0)),!r.manual){var d=document.readyState;d==="loading"||d==="interactive"&&c&&c.defer?document.addEventListener("DOMContentLoaded",f):window.requestAnimationFrame?window.requestAnimationFrame(f):window.setTimeout(f,16)}return r}(zz);typeof module<"u"&&module.exports&&(module.exports=Br),typeof global<"u"&&(global.Prism=Br),Br.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},Br.languages.log={string:{pattern:/"(?:[^"\\\r\n]|\\.)*"|'(?![st] | \w)(?:[^'\\\r\n]|\\.)*'/,greedy:!0},exception:{pattern:/(^|[^\w.])[a-z][\w.]*(?:Error|Exception):.*(?:(?:\r\n?|\n)[ \t]*(?:at[ \t].+|\.{3}.*|Caused by:.*))+(?:(?:\r\n?|\n)[ \t]*\.\.\. .*)?/,lookbehind:!0,greedy:!0,alias:["javastacktrace","language-javastacktrace"],inside:Br.languages.javastacktrace||{keyword:/\bat\b/,function:/[a-z_][\w$]*(?=\()/,punctuation:/[.:()]/}},level:[{pattern:/\b(?:ALERT|CRIT|CRITICAL|EMERG|EMERGENCY|ERR|ERROR|FAILURE|FATAL|SEVERE)\b/,alias:["error","important"]},{pattern:/\b(?:WARN|WARNING|WRN)\b/,alias:["warning","important"]},{pattern:/\b(?:DISPLAY|INF|INFO|NOTICE|STATUS)\b/,alias:["info","keyword"]},{pattern:/\b(?:DBG|DEBUG|FINE)\b/,alias:["debug","keyword"]},{pattern:/\b(?:FINER|FINEST|TRACE|TRC|VERBOSE|VRB)\b/,alias:["trace","comment"]}],property:{pattern:/((?:^|[\]|])[ \t]*)[a-z_](?:[\w-]|\b\/\b)*(?:[. ]\(?\w(?:[\w-]|\b\/\b)*\)?)*:(?=\s)/im,lookbehind:!0},separator:{pattern:/(^|[^-+])-{3,}|={3,}|\*{3,}|- - /m,lookbehind:!0,alias:"comment"},url:/\b(?:file|ftp|https?):\/\/[^\s|,;'"]*[^\s|,;'">.]/,email:{pattern:/(^|\s)[-\w+.]+@[a-z][a-z0-9-]*(?:\.[a-z][a-z0-9-]*)+(?=\s)/,lookbehind:!0,alias:"url"},"ip-address":{pattern:/\b(?:\d{1,3}(?:\.\d{1,3}){3})\b/,alias:"constant"},"mac-address":{pattern:/\b[a-f0-9]{2}(?::[a-f0-9]{2}){5}\b/i,alias:"constant"},domain:{pattern:/(^|\s)[a-z][a-z0-9-]*(?:\.[a-z][a-z0-9-]*)*\.[a-z][a-z0-9-]+(?=\s)/,lookbehind:!0,alias:"constant"},uuid:{pattern:/\b[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}\b/i,alias:"constant"},hash:{pattern:/\b(?:[a-f0-9]{32}){1,2}\b/i,alias:"constant"},"file-path":{pattern:/\b[a-z]:[\\/][^\s|,;:(){}\[\]"']+|(^|[\s:\[\](>|])\.{0,2}\/\w[^\s|,;:(){}\[\]"']*/i,lookbehind:!0,greedy:!0,alias:"string"},date:{pattern:RegExp("\\b\\d{4}[-/]\\d{2}[-/]\\d{2}(?:T(?=\\d{1,2}:)|(?=\\s\\d{1,2}:))|\\b\\d{1,4}[-/ ](?:\\d{1,2}|Apr|Aug|Dec|Feb|Jan|Jul|Jun|Mar|May|Nov|Oct|Sep)[-/ ]\\d{2,4}T?\\b|\\b(?:(?:Fri|Mon|Sat|Sun|Thu|Tue|Wed)(?:\\s{1,2}(?:Apr|Aug|Dec|Feb|Jan|Jul|Jun|Mar|May|Nov|Oct|Sep))?|Apr|Aug|Dec|Feb|Jan|Jul|Jun|Mar|May|Nov|Oct|Sep)\\s{1,2}\\d{1,2}\\b","i"),alias:"number"},time:{pattern:/\b\d{1,2}:\d{1,2}:\d{1,2}(?:[.,:]\d+)?(?:\s?[+-]\d{2}:?\d{2}|Z)?\b/,alias:"number"},boolean:/\b(?:false|null|true)\b/i,number:{pattern:/(^|[^.\w])(?:0x[a-f0-9]+|0o[0-7]+|0b[01]+|v?\d[\da-f]*(?:\.\d+)*(?:e[+-]?\d+)?[a-z]{0,3}\b)\b(?!\.\w)/i,lookbehind:!0},operator:/[;:?<=>~/@!$%&+\-|^(){}*#]/,punctuation:/[\[\].,]/},Br.languages.python={comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0,greedy:!0},"string-interpolation":{pattern:/(?:f|fr|rf)(?:("""|''')[\s\S]*?\1|("|')(?:\\.|(?!\2)[^\\\r\n])*\2)/i,greedy:!0,inside:{interpolation:{pattern:/((?:^|[^{])(?:\{\{)*)\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}])+\})+\})+\}/,lookbehind:!0,inside:{"format-spec":{pattern:/(:)[^:(){}]+(?=\}$)/,lookbehind:!0},"conversion-option":{pattern:/![sra](?=[:}]$)/,alias:"punctuation"},rest:null}},string:/[\s\S]+/}},"triple-quoted-string":{pattern:/(?:[rub]|br|rb)?("""|''')[\s\S]*?\1/i,greedy:!0,alias:"string"},string:{pattern:/(?:[rub]|br|rb)?("|')(?:\\.|(?!\1)[^\\\r\n])*\1/i,greedy:!0},function:{pattern:/((?:^|\s)def[ \t]+)[a-zA-Z_]\w*(?=\s*\()/g,lookbehind:!0},"class-name":{pattern:/(\bclass\s+)\w+/i,lookbehind:!0},decorator:{pattern:/(^[\t ]*)@\w+(?:\.\w+)*/m,lookbehind:!0,alias:["annotation","punctuation"],inside:{punctuation:/\./}},keyword:/\b(?:_(?=\s*:)|and|as|assert|async|await|break|case|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|match|nonlocal|not|or|pass|print|raise|return|try|while|with|yield)\b/,builtin:/\b(?:__import__|abs|all|any|apply|ascii|basestring|bin|bool|buffer|bytearray|bytes|callable|chr|classmethod|cmp|coerce|compile|complex|delattr|dict|dir|divmod|enumerate|eval|execfile|file|filter|float|format|frozenset|getattr|globals|hasattr|hash|help|hex|id|input|int|intern|isinstance|issubclass|iter|len|list|locals|long|map|max|memoryview|min|next|object|oct|open|ord|pow|property|range|raw_input|reduce|reload|repr|reversed|round|set|setattr|slice|sorted|staticmethod|str|sum|super|tuple|type|unichr|unicode|vars|xrange|zip)\b/,boolean:/\b(?:False|None|True)\b/,number:/\b0(?:b(?:_?[01])+|o(?:_?[0-7])+|x(?:_?[a-f0-9])+)\b|(?:\b\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\B\.\d+(?:_\d+)*)(?:e[+-]?\d+(?:_\d+)*)?j?(?!\w)/i,operator:/[-+%=]=?|!=|:=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]/,punctuation:/[{}[\];(),.:]/},Br.languages.python["string-interpolation"].inside.interpolation.inside.rest=Br.languages.python,Br.languages.py=Br.languages.python;const el=[];function $5(e,t=ie){let n;const i=new Set;function r(a){if(ye(e,a)&&(e=a,n)){const u=!el.length;for(const l of i)l[1](),el.push(l,e);if(u){for(let l=0;l<el.length;l+=2)el[l][0](el[l+1]);el.length=0}}}function s(a){r(a(e))}function o(a,u=ie){const l=[a,u];return i.add(l),i.size===1&&(n=t(r,s)||ie),a(e),()=>{i.delete(l),i.size===0&&n&&(n(),n=null)}}return{set:r,update:s,subscribe:o}}const wa=$5(void 0);window.metaflow_card_update=e=>(wa==null||wa.update(t=>{const n={...t};return Object.values(e).forEach(i=>(n==null?void 0:n.components)&&S5(n.components,i)),n}),!0);const Bz=(e,t)=>{e.data&&(e.data=JSON.parse(JSON.stringify(t.data))),JSON.stringify(t.spec)===JSON.stringify(e.spec)||(e.spec=JSON.parse(JSON.stringify(t.spec)))},S5=(e,t)=>{const n=e.findIndex(i=>t.id===(i==null?void 0:i.id));n>-1?e[n].type=="vegaChart"?Bz(e[n],t):Object.assign(e[n],t):e.forEach(i=>{var r;(i.type==="section"||i.type==="page")&&((r=i==null?void 0:i.contents)!=null&&r.length)&&S5(i.contents,t)})},Uz=e=>{try{const t=JSON.parse(atob(window.__MF_DATA__[e]));wa.set(t)}catch{fetch("/card-example.json").then(n=>n.json()).then(n=>{wa.set(n)}).catch(console.error)}},Hc=$5(void 0),F5=e=>{const t={};if(!e)return t;function n(i,r=[]){var s;if(i.type==="page"){const o=[];t[i.title]=o,(s=i==null?void 0:i.contents)==null||s.forEach(a=>n(a,o))}i.type==="section"&&i.title&&r.push(i.title)}return e==null||e.forEach(i=>n(i)),t},mo=(e,t)=>e/16,jz=e=>{const t=e.split("/");return{flowname:t[0],runid:t[1],stepname:t==null?void 0:t[2],taskid:t==null?void 0:t[3]}},qz=(e,t)=>{var n;if(e)return(n=jz(e))==null?void 0:n[t]},Wz=e=>e.scrollHeight>e.clientHeight||e.scrollWidth>e.clientWidth;function Hz(e){let t,n,i,r,s,o,a,u;return{c(){t=Pi("svg"),n=Pi("title"),i=Be("metaflow_logo_horizontal"),r=Pi("g"),s=Pi("g"),o=Pi("g"),a=Pi("path"),u=Pi("path"),M(a,"d","M223.990273,66.33 C223.515273,61.851 222.686273,57.512 221.505273,53.33 C220.325273,49.148 218.795273,45.122 216.916273,41.271 C212.845273,32.921 207.254273,25.587 200.268273,19.422 C199.270273,18.541 198.243273,17.684 197.189273,16.851 C191.255273,12.166 184.481273,8.355 177.253273,5.55 C174.156273,4.347 170.975273,3.33 167.741273,2.508 C161.273273,0.863 154.593273,0 147.943273,0 C141.755273,0 135.332273,0.576 128.687273,1.722 C127.025273,2.01 125.350273,2.332 123.661273,2.69 C120.283273,3.406 116.851273,4.265 113.365273,5.267 C104.650273,7.769 95.6022727,11.161 86.2442727,15.433 C78.7592727,18.851 71.0762727,22.832 63.2072727,27.373 C47.9762727,36.162 35.7372727,44.969 29.3592727,49.791 C29.0692727,50.01 28.7922727,50.221 28.5262727,50.423 C26.1382727,52.244 24.7522727,53.367 24.5662727,53.519 L0.549272727,73.065 C0.191272727,73.356 0.00727272727,73.773 0,74.194 C-0.00372727273,74.403 0.0362727273,74.614 0.120272727,74.811 C0.205272727,75.008 0.334272727,75.189 0.508272727,75.341 L11.7612727,85.195 C12.1692727,85.552 12.7252727,85.651 13.2162727,85.487 C13.3792727,85.432 13.5362727,85.348 13.6762727,85.234 L35.8492727,67.382 C36.0422727,67.224 37.6152727,65.949 40.3252727,63.903 C44.1192727,61.036 50.1422727,56.656 57.7292727,51.711 C62.0642727,48.884 66.9102727,45.873 72.1412727,42.854 C100.864273,26.278 126.367273,17.874 147.943273,17.874 C148.366273,17.874 148.790273,17.892 149.213273,17.902 C149.655273,17.911 150.096273,17.911 150.538273,17.93 C153.769273,18.068 156.995273,18.463 160.170273,19.097 C164.931273,20.049 169.577273,21.542 173.953273,23.524 C178.328273,25.505 182.433273,27.975 186.112273,30.88 C186.771273,31.4 187.406273,31.94 188.035273,32.485 C188.913273,33.245 189.771273,34.023 190.591273,34.83 C191.998273,36.217 193.317273,37.673 194.548273,39.195 C196.395273,41.479 198.042273,43.912 199.480273,46.485 C199.960273,47.342 200.417273,48.216 200.850273,49.105 C201.112273,49.642 201.343273,50.196 201.587273,50.743 C202.231273,52.185 202.834273,53.649 203.354273,55.158 C203.712273,56.198 204.041273,57.255 204.340273,58.326 C205.836273,63.683 206.590273,69.417 206.590273,75.469 C206.590273,81.221 205.892273,86.677 204.541273,91.804 C203.617273,95.308 202.397273,98.662 200.850273,101.833 C200.417273,102.722 199.960273,103.595 199.480273,104.453 C197.562273,107.884 195.275273,111.066 192.636273,113.976 C190.657273,116.159 188.480273,118.189 186.113273,120.058 C184.553273,121.29 182.909273,122.432 181.208273,123.503 C180.313273,124.067 179.400273,124.609 178.470273,125.126 C177.462273,125.688 176.442273,126.232 175.398273,126.737 C166.961273,130.823 157.423273,133.064 147.943273,133.064 C126.367273,133.064 100.864273,124.659 72.1412727,108.084 C70.5382727,107.159 68.4382727,105.886 66.3072727,104.575 C65.0292727,103.788 63.7402727,102.986 62.5412727,102.237 C59.3442727,100.238 56.7882727,98.61 56.7882727,98.61 C61.8362727,93.901 69.3232727,87.465 78.6472727,81.047 C80.0092727,80.11 81.4192727,79.174 82.8572727,78.243 C84.1052727,77.436 85.3712727,76.63 86.6732727,75.835 C88.2042727,74.9 89.7802727,73.981 91.3822727,73.074 C93.0482727,72.131 94.7512727,71.207 96.4902727,70.307 C111.473273,62.55 129.094273,56.602 147.943273,56.602 C151.750273,56.602 157.745273,57.825 162.114273,61.276 C162.300273,61.422 162.489273,61.578 162.677273,61.74 C163.337273,62.305 164.006273,62.966 164.634273,63.78 C164.957273,64.198 165.269273,64.657 165.564273,65.162 C166.006273,65.92 166.409273,66.782 166.750273,67.775 C166.891273,68.185 167.016273,68.627 167.134273,69.083 C167.586273,70.833 167.863273,72.924 167.863273,75.469 C167.863273,78.552 167.460273,80.974 166.824273,82.92 C166.578273,83.674 166.300273,84.363 165.992273,84.983 C165.855273,85.259 165.711273,85.524 165.564273,85.776 C165.376273,86.099 165.178273,86.396 164.977273,86.682 C164.631273,87.175 164.269273,87.618 163.900273,88.018 C163.730273,88.202 163.559273,88.379 163.387273,88.546 C162.962273,88.96 162.534273,89.331 162.114273,89.662 C157.745273,93.112 151.750273,94.337 147.943273,94.337 C144.485273,94.337 140.682273,93.926 136.589273,93.121 C133.860273,92.584 131.003273,91.871 128.033273,90.987 C123.579273,89.662 118.873273,87.952 113.970273,85.872 C113.768273,85.786 113.552273,85.747 113.336273,85.753 C113.122273,85.76 112.908273,85.813 112.713273,85.912 C106.990273,88.816 101.641273,91.995 96.7462727,95.223 C96.6232727,95.304 96.5182727,95.397 96.4302727,95.5 C95.8122727,96.22 96.0172727,97.397 96.9492727,97.822 L102.445273,100.328 C104.606273,101.314 106.737273,102.238 108.835273,103.102 C110.934273,103.966 113.001273,104.77 115.035273,105.511 C118.086273,106.624 121.064273,107.599 123.965273,108.436 C127.834273,109.551 131.567273,110.421 135.157273,111.043 C139.646273,111.82 143.912273,112.211 147.943273,112.211 C148.367273,112.211 148.923273,112.201 149.591273,112.169 C149.925273,112.153 150.287273,112.131 150.674273,112.102 C155.712273,111.724 165.055273,110.114 173.190273,103.691 C173.547273,103.41 173.869273,103.105 174.210273,102.813 C175.324273,101.86 176.381273,100.866 177.333273,99.8 C177.470273,99.648 177.590273,99.485 177.724273,99.331 C181.300273,95.167 183.699273,90.185 184.875273,84.406 C185.444273,81.609 185.737273,78.631 185.737273,75.469 C185.737273,63.315 181.516273,53.82 173.190273,47.247 C167.050273,42.399 160.228273,40.299 155.083273,39.395 C153.892273,39.186 152.790273,39.037 151.809273,38.938 C150.116273,38.766 148.774273,38.727 147.943273,38.727 C133.456273,38.727 118.519273,41.679 103.545273,47.5 C99.1222727,49.22 94.6912727,51.191 90.2702727,53.403 C88.7972727,54.141 87.3242727,54.905 85.8542727,55.696 C83.5092727,56.957 81.1722727,58.303 78.8382727,59.697 C77.3922727,60.562 75.9492727,61.451 74.5082727,62.366 C72.4422727,63.678 70.3802727,65.023 68.3302727,66.437 C63.8372727,69.535 59.7422727,72.63 56.0902727,75.567 C54.8732727,76.547 53.7052727,77.508 52.5882727,78.446 C48.1222727,82.2 44.4752727,85.581 41.7602727,88.226 C38.3032727,91.593 36.3592727,93.766 36.1632727,93.986 L35.8282727,94.362 L32.0332727,98.61 L30.6432727,100.164 C30.4962727,100.329 30.3932727,100.517 30.3312727,100.715 C30.1482727,101.307 30.3472727,101.981 30.8882727,102.368 L37.2812727,106.938 L37.4862727,107.083 L37.6922727,107.228 C39.8732727,108.766 42.0702727,110.277 44.2792727,111.758 C45.8422727,112.807 47.4102727,113.84 48.9832727,114.858 C51.5302727,116.508 54.0902727,118.103 56.6542727,119.665 C57.8412727,120.388 59.0282727,121.101 60.2162727,121.804 C61.2142727,122.394 62.2102727,122.989 63.2072727,123.565 C76.9772727,131.512 90.1802727,137.744 102.748273,142.242 C104.544273,142.884 106.326273,143.491 108.096273,144.063 C111.635273,145.206 115.121273,146.207 118.553273,147.067 C121.986273,147.925 125.364273,148.642 128.687273,149.215 C135.332273,150.362 141.755273,150.938 147.943273,150.938 C154.593273,150.938 161.273273,150.074 167.741273,148.43 C174.209273,146.786 180.465273,144.361 186.265273,141.238 C190.133273,139.156 193.798273,136.764 197.189273,134.087 C200.352273,131.589 203.264273,128.872 205.911273,125.949 C207.677273,124 209.325273,121.96 210.854273,119.831 C211.618273,118.766 212.353273,117.68 213.057273,116.571 C214.466273,114.356 215.753273,112.053 216.916273,109.667 C220.701273,101.906 223.073273,93.439 224.008273,84.406 C224.310273,81.485 224.465273,78.505 224.465273,75.469 C224.465273,72.364 224.306273,69.316 223.990273,66.33"),M(a,"id","Fill-1"),M(a,"fill","#146EE6"),M(u,"d","M758.389273,75.346 C752.632273,111.56 742.681273,122.23 712.102273,122.23 C710.847273,122.23 709.640273,122.207 708.464273,122.17 C708.321273,122.191 708.191273,122.23 708.028273,122.23 L637.994273,122.23 C636.795273,122.23 636.315273,121.632 636.435273,120.311 L650.585273,31.22 C650.704273,30.016 651.424273,29.417 652.623273,29.417 L667.852273,29.417 C669.050273,29.417 669.530273,30.016 669.410273,31.22 L657.659273,105.802 L714.249273,105.802 L714.249273,105.787 C714.410273,105.794 714.568273,105.802 714.741273,105.802 C718.878273,105.802 722.250273,105.351 725.040273,104.313 C726.434273,103.794 727.684273,103.129 728.810273,102.298 C729.373273,101.884 729.905273,101.426 730.410273,100.927 C734.951273,96.431 737.231273,88.43 739.322273,75.346 C739.328273,75.312 739.331273,75.282 739.337273,75.25 C739.642273,73.311 739.896273,71.474 740.130273,69.679 C740.203273,69.116 740.272273,68.557 740.338273,68.008 C740.412273,67.392 740.461273,66.821 740.525273,66.222 C742.136273,49.927 738.622273,44.525 724.454273,44.525 C723.419273,44.525 722.433273,44.554 721.490273,44.613 C708.297273,45.444 703.831273,52.303 700.461273,71.126 C700.220273,72.472 699.984273,73.877 699.752273,75.346 C699.483273,77.027 699.255273,78.6 699.052273,80.115 C698.993273,80.545 698.948273,80.946 698.895273,81.361 C698.757273,82.465 698.638273,83.528 698.540273,84.544 C698.502273,84.943 698.466273,85.334 698.434273,85.72 C698.344273,86.815 698.281273,87.856 698.246273,88.847 C698.238273,89.049 698.224273,89.269 698.219273,89.469 C698.161273,91.88 698.289273,93.972 698.621273,95.782 C698.649273,95.941 698.686273,96.089 698.717273,96.246 C698.874273,96.992 699.067273,97.689 699.301273,98.337 C699.346273,98.464 699.390273,98.594 699.439273,98.718 C700.039273,100.231 700.864273,101.478 701.963273,102.469 C702.263273,102.738 702.586273,102.987 702.925273,103.22 L679.436273,103.22 C679.393273,102.969 679.343273,102.727 679.305273,102.471 L679.304273,102.471 C679.304273,102.467 679.304273,102.462 679.303273,102.459 C679.259273,102.17 679.236273,101.854 679.198273,101.558 C679.083273,100.634 678.995273,99.671 678.934273,98.674 C678.908273,98.258 678.879273,97.845 678.862273,97.419 C678.816273,96.174 678.804273,94.876 678.832273,93.518 C678.840273,93.114 678.861273,92.69 678.876273,92.276 C678.920273,91.042 678.991273,89.765 679.092273,88.441 C679.117273,88.109 679.134273,87.79 679.162273,87.452 C679.299273,85.836 679.483273,84.137 679.698273,82.382 C679.750273,81.957 679.807273,81.518 679.863273,81.084 C680.104273,79.238 680.369273,77.344 680.687273,75.346 C681.046273,73.067 681.423273,70.889 681.819273,68.808 C687.040273,41.397 695.809273,30.748 717.267273,28.554 C720.250273,28.25 723.472273,28.103 726.971273,28.103 C726.972273,28.103 726.972273,28.103 726.972273,28.103 C747.994273,28.103 757.680273,33.202 759.811273,48.236 C760.779273,55.067 760.187273,63.953 758.389273,75.346 Z M894.023273,31.336 L866.923273,108.56 C863.472273,118.182 861.113273,121.41 854.499273,122.41 C852.379273,122.733 849.831273,122.828 846.659273,122.828 C831.670273,122.828 830.350273,121.267 829.392273,108.56 L825.794273,63.232 L825.794273,63.231 L807.928273,108.56 C804.255273,117.613 802.201273,120.996 795.961273,122.202 C793.442273,122.687 790.260273,122.829 785.985273,122.829 C772.914273,122.829 770.756273,121.267 770.396273,108.56 L767.638273,31.337 C767.638273,29.899 768.238273,29.417 769.557273,29.417 L785.385273,29.417 C786.464273,29.417 786.704273,29.899 786.824273,31.337 L788.895273,100.572 L788.895273,100.571 C789.054273,103.091 789.563273,103.641 791.021273,103.641 C792.939273,103.641 793.419273,103.042 794.618273,100.043 L820.758273,34.576 C821.358273,33.132 822.437273,32.657 823.516273,32.657 L837.665273,32.657 C838.519273,32.657 839.279273,32.977 839.626273,33.817 C839.718273,34.038 839.799273,34.274 839.824273,34.576 L845.220273,100.043 C845.460273,103.042 845.819273,103.641 847.738273,103.641 C849.297273,103.641 849.896273,103.042 850.976273,100.043 L874.838273,31.336 C875.317273,29.898 875.677273,29.417 876.756273,29.417 L892.584273,29.417 C893.903273,29.417 894.383273,29.898 894.023273,31.336 Z M362.708273,31.219 L357.192273,120.311 C357.192273,121.632 356.353273,122.23 355.154273,122.23 L339.926273,122.23 C338.726273,122.23 338.366273,121.632 338.366273,120.311 L342.324273,62.756 L311.986273,117.551 C311.386273,118.749 310.428273,119.348 309.229273,119.348 L297.837273,119.348 C296.758273,119.348 296.038273,118.749 295.560273,117.551 L282.851273,62.767 L282.848273,62.755 L268.339273,120.31 C268.212273,121.009 267.974273,121.492 267.612273,121.807 C267.288273,122.085 266.865273,122.23 266.301273,122.23 L251.073273,122.23 C249.874273,122.23 249.273273,121.632 249.514273,120.31 L272.296273,31.336 C272.537273,30.138 272.897273,29.417 274.095273,29.417 L288.605273,29.417 C291.236273,29.417 292.726273,29.895 293.682273,31.379 C294.120273,32.059 294.457273,32.928 294.720273,34.095 L307.790273,92.489 L339.326273,34.095 C341.485273,30.256 343.043273,29.299 346.880273,29.299 L361.389273,29.299 C362.376273,29.299 362.682273,30.684 362.682273,30.684 C362.682273,30.684 362.708273,31.029 362.708273,31.219 Z M501.706273,31.219 L499.667273,44.049 C499.547273,45.246 498.708273,45.845 497.509273,45.845 L472.448273,45.845 L460.696273,120.31 C460.457273,121.632 459.738273,122.23 458.538273,122.23 L443.309273,122.23 C442.111273,122.23 441.631273,121.632 441.870273,120.31 L453.622273,45.845 L394.820273,45.845 L391.224273,68.507 L391.224273,68.508 L430.555273,68.508 C431.754273,68.508 432.353273,69.106 432.234273,70.31 L430.196273,82.542 C430.076273,83.738 429.236273,84.338 428.038273,84.338 L388.706273,84.338 L385.349273,105.801 L428.397273,105.801 C429.596273,105.801 430.076273,106.4 429.955273,107.597 L427.797273,120.428 C427.676273,121.632 426.958273,122.23 425.759273,122.23 L365.683273,122.23 C364.484273,122.23 364.004273,121.632 364.124273,120.31 L378.273273,31.219 C378.393273,30.015 379.112273,29.417 380.313273,29.417 L500.147273,29.417 C501.346273,29.417 501.826273,30.015 501.706273,31.219 Z M629.471273,70.426 L627.433273,82.659 C627.313273,83.856 626.473273,84.454 625.275273,84.454 L588.223273,84.454 L582.466273,120.311 C582.347273,121.632 581.627273,122.23 580.428273,122.23 L565.200273,122.23 C564.001273,122.23 563.522273,121.632 563.640273,120.311 L577.790273,31.219 C577.910273,30.016 578.629273,29.417 579.828273,29.417 L643.004273,29.417 C644.202273,29.417 644.802273,30.016 644.682273,31.219 L642.644273,44.05 C642.403273,45.247 641.685273,45.846 640.486273,45.846 L594.337273,45.846 L590.741273,68.631 L627.793273,68.631 C628.991273,68.631 629.592273,69.23 629.471273,70.426 Z M388.706273,84.338 L388.712273,84.338 L388.309273,86.876 L388.706273,84.338 Z M510.726273,79.783 L524.396273,48.006 C525.036273,46.466 525.443273,45.589 525.990273,45.096 C526.465273,44.667 527.044273,44.525 527.993273,44.525 C530.391273,44.525 530.391273,45.124 530.751273,48.006 L534.348273,79.783 L510.726273,79.783 Z M542.334273,29.886 C539.756273,28.905 536.043273,28.702 530.511273,28.702 C516.601273,28.702 513.963273,30.016 508.208273,43.087 L474.633273,120.311 C474.154273,121.749 474.513273,122.23 475.832273,122.23 L491.060273,122.23 C492.259273,122.23 492.500273,121.749 493.099273,120.311 L504.011273,95.372 L536.026273,95.372 L539.024273,120.311 C539.144273,121.749 539.144273,122.23 540.344273,122.23 L555.572273,122.23 C556.891273,122.23 557.490273,121.749 557.490273,120.311 L548.617273,43.087 C547.658273,35.042 546.460273,31.458 542.334273,29.886 L542.334273,29.886 Z"),M(u,"id","Fill-2"),M(u,"fill","#333333"),M(o,"id","metaflow_logo_horizontal"),M(o,"transform","translate(92.930727, 93.190000)"),M(s,"id","Metaflow_Logo_Horizontal_TwoColor_Dark_RGB"),M(s,"transform","translate(-92.000000, -93.000000)"),M(r,"id","Page-1"),M(r,"stroke","none"),M(r,"stroke-width","1"),M(r,"fill","none"),M(r,"fill-rule","evenodd"),M(t,"xmlns","http://www.w3.org/2000/svg"),M(t,"xmlns:xlink","http://www.w3.org/1999/xlink"),M(t,"width","896px"),M(t,"height","152px"),M(t,"viewBox","0 0 896 152"),M(t,"version","1.1")},m(l,c){I(l,t,c),V(t,n),V(n,i),V(t,r),V(r,s),V(s,o),V(o,a),V(o,u)},d(l){l&&L(t)}}}function Gz(e){let t,n,i;return{c(){t=Pi("svg"),n=Pi("path"),i=Pi("path"),M(n,"fill-rule","evenodd"),M(n,"clip-rule","evenodd"),M(n,"d","M223.991 66.33C223.516 61.851 222.687 57.512 221.506 53.33C220.326 49.148 218.796 45.122 216.917 41.271C212.846 32.921 207.255 25.587 200.269 19.422C199.271 18.541 198.244 17.684 197.19 16.851C191.256 12.166 184.482 8.355 177.254 5.55C174.157 4.347 170.976 3.33 167.742 2.508C161.274 0.863 154.594 0 147.944 0C141.756 0 135.333 0.576 128.688 1.722C127.026 2.01 125.351 2.332 123.662 2.69C120.284 3.406 116.852 4.265 113.366 5.267C104.651 7.769 95.6025 11.161 86.2445 15.433C78.7595 18.851 71.0765 22.832 63.2075 27.373C47.9765 36.162 35.7375 44.969 29.3595 49.791C29.0695 50.01 28.7925 50.221 28.5265 50.423C26.1385 52.244 24.7525 53.367 24.5665 53.519L0.549511 73.065C0.191511 73.356 0.00751099 73.773 0.000238261 74.194C-0.00348901 74.403 0.036511 74.614 0.120511 74.811C0.205511 75.008 0.334511 75.189 0.508511 75.341L11.7615 85.195C12.1695 85.552 12.7255 85.651 13.2165 85.487C13.3795 85.432 13.5365 85.348 13.6765 85.234L35.8495 67.382C36.0425 67.224 37.6155 65.949 40.3255 63.903C44.1195 61.036 50.1425 56.656 57.7295 51.711C62.0645 48.884 66.9105 45.873 72.1415 42.854C100.865 26.278 126.368 17.874 147.944 17.874C148.367 17.874 148.791 17.892 149.214 17.902C149.656 17.911 150.097 17.911 150.539 17.93C153.77 18.068 156.996 18.463 160.171 19.097C164.932 20.049 169.578 21.542 173.954 23.524C178.329 25.505 182.434 27.975 186.113 30.88C186.772 31.4 187.407 31.94 188.036 32.485C188.914 33.245 189.772 34.023 190.592 34.83C191.999 36.217 193.318 37.673 194.549 39.195C196.396 41.479 198.043 43.912 199.481 46.485C199.961 47.342 200.418 48.216 200.851 49.105C201.113 49.642 201.344 50.196 201.588 50.743C202.232 52.185 202.835 53.649 203.355 55.158C203.713 56.198 204.042 57.255 204.341 58.326C205.837 63.683 206.591 69.417 206.591 75.469C206.591 81.221 205.893 86.677 204.542 91.804C203.618 95.308 202.398 98.662 200.851 101.833C200.418 102.722 199.961 103.595 199.481 104.453C197.563 107.884 195.276 111.066 192.637 113.976C190.658 116.159 188.481 118.189 186.114 120.058C184.554 121.29 182.91 122.432 181.209 123.503C180.314 124.067 179.401 124.609 178.471 125.126C177.463 125.688 176.443 126.232 175.399 126.737C166.962 130.823 157.424 133.064 147.944 133.064C126.368 133.064 100.865 124.659 72.1415 108.084C70.5385 107.159 68.4385 105.886 66.3075 104.575C65.0295 103.788 63.7405 102.986 62.5415 102.237C59.3445 100.238 56.7885 98.61 56.7885 98.61C61.8365 93.901 69.3235 87.465 78.6475 81.047C80.0095 80.11 81.4195 79.174 82.8575 78.243C84.1055 77.436 85.3715 76.63 86.6735 75.835C88.2045 74.9 89.7805 73.981 91.3825 73.074C93.0485 72.131 94.7515 71.207 96.4905 70.307C111.474 62.55 129.095 56.602 147.944 56.602C151.751 56.602 157.746 57.825 162.115 61.276C162.301 61.422 162.49 61.578 162.678 61.74C163.338 62.305 164.007 62.966 164.635 63.78C164.958 64.198 165.27 64.657 165.565 65.162C166.007 65.92 166.41 66.782 166.751 67.775C166.892 68.185 167.017 68.627 167.135 69.083C167.587 70.833 167.864 72.924 167.864 75.469C167.864 78.552 167.461 80.974 166.825 82.92C166.579 83.674 166.301 84.363 165.993 84.983C165.856 85.259 165.712 85.524 165.565 85.776C165.377 86.099 165.179 86.396 164.978 86.682C164.632 87.175 164.27 87.618 163.901 88.018C163.731 88.202 163.56 88.379 163.388 88.546C162.963 88.96 162.535 89.331 162.115 89.662C157.746 93.112 151.751 94.337 147.944 94.337C144.486 94.337 140.683 93.926 136.59 93.121C133.861 92.584 131.004 91.871 128.034 90.987C123.58 89.662 118.874 87.952 113.971 85.872C113.769 85.786 113.553 85.747 113.337 85.753C113.123 85.76 112.909 85.813 112.714 85.912C106.991 88.816 101.642 91.995 96.7465 95.223C96.6235 95.304 96.5185 95.397 96.4305 95.5C95.8125 96.22 96.0175 97.397 96.9495 97.822L102.446 100.328C104.607 101.314 106.738 102.238 108.836 103.102C110.935 103.966 113.002 104.77 115.036 105.511C118.087 106.624 121.065 107.599 123.966 108.436C127.835 109.551 131.568 110.421 135.158 111.043C139.647 111.82 143.913 112.211 147.944 112.211C148.368 112.211 148.924 112.201 149.592 112.169C149.926 112.153 150.288 112.131 150.675 112.102C155.713 111.724 165.056 110.114 173.191 103.691C173.548 103.41 173.87 103.105 174.211 102.813C175.325 101.86 176.382 100.866 177.334 99.8C177.471 99.648 177.591 99.485 177.725 99.331C181.301 95.167 183.7 90.185 184.876 84.406C185.445 81.609 185.738 78.631 185.738 75.469C185.738 63.315 181.517 53.82 173.191 47.247C167.051 42.399 160.229 40.299 155.084 39.395C153.893 39.186 152.791 39.037 151.81 38.938C150.117 38.766 148.775 38.727 147.944 38.727C133.457 38.727 118.52 41.679 103.546 47.5C99.1225 49.22 94.6915 51.191 90.2705 53.403C88.7975 54.141 87.3245 54.905 85.8545 55.696C83.5095 56.957 81.1725 58.303 78.8385 59.697C77.3925 60.562 75.9495 61.451 74.5085 62.366C72.4425 63.678 70.3805 65.023 68.3305 66.437C63.8375 69.535 59.7425 72.63 56.0905 75.567C54.8735 76.547 53.7055 77.508 52.5885 78.446C48.1225 82.2 44.4755 85.581 41.7605 88.226C38.3035 91.593 36.3595 93.766 36.1635 93.986L35.8285 94.362L32.0335 98.61L30.6435 100.164C30.4965 100.329 30.3935 100.517 30.3315 100.715C30.1485 101.307 30.3475 101.981 30.8885 102.368L37.2815 106.938L37.4865 107.083L37.6925 107.228C39.8735 108.766 42.0705 110.277 44.2795 111.758C45.8425 112.807 47.4105 113.84 48.9835 114.858C51.5305 116.508 54.0905 118.103 56.6545 119.665C57.8415 120.388 59.0285 121.101 60.2165 121.804C61.2145 122.394 62.2105 122.989 63.2075 123.565C76.9775 131.512 90.1805 137.744 102.749 142.242C104.545 142.884 106.327 143.491 108.097 144.063C111.636 145.206 115.122 146.207 118.554 147.067C121.987 147.925 125.365 148.642 128.688 149.215C135.333 150.362 141.756 150.938 147.944 150.938C154.594 150.938 161.274 150.074 167.742 148.43C174.21 146.786 180.466 144.361 186.266 141.238C190.134 139.156 193.799 136.764 197.19 134.087C200.353 131.589 203.265 128.872 205.912 125.949C207.678 124 209.326 121.96 210.855 119.831C211.619 118.766 212.354 117.68 213.058 116.571C214.467 114.356 215.754 112.053 216.917 109.667C220.702 101.906 223.074 93.439 224.009 84.406C224.311 81.485 224.466 78.505 224.466 75.469C224.466 72.364 224.307 69.316 223.991 66.33Z"),M(n,"fill","#146EE6"),M(i,"fill-rule","evenodd"),M(i,"clip-rule","evenodd"),M(i,"d","M758.39 75.346C752.633 111.56 742.682 122.23 712.103 122.23C710.848 122.23 709.641 122.207 708.465 122.17C708.322 122.191 708.192 122.23 708.029 122.23H637.995C636.796 122.23 636.316 121.632 636.436 120.311L650.586 31.22C650.705 30.016 651.425 29.417 652.624 29.417H667.853C669.051 29.417 669.531 30.016 669.411 31.22L657.66 105.802H714.25V105.787C714.411 105.794 714.569 105.802 714.742 105.802C718.879 105.802 722.251 105.351 725.041 104.313C726.435 103.794 727.685 103.129 728.811 102.298C729.374 101.884 729.906 101.426 730.411 100.927C734.952 96.431 737.232 88.43 739.323 75.346C739.329 75.312 739.332 75.282 739.338 75.25C739.643 73.311 739.896 71.474 740.13 69.679C740.203 69.116 740.273 68.557 740.339 68.008C740.413 67.392 740.462 66.821 740.526 66.222C742.137 49.927 738.623 44.525 724.455 44.525C723.42 44.525 722.434 44.554 721.491 44.613C708.298 45.444 703.831 52.303 700.461 71.126C700.22 72.472 699.985 73.877 699.753 75.346C699.484 77.027 699.255 78.6 699.052 80.115C698.993 80.545 698.949 80.946 698.896 81.361C698.758 82.465 698.639 83.528 698.541 84.544C698.503 84.943 698.467 85.334 698.435 85.72C698.345 86.815 698.282 87.856 698.247 88.847C698.239 89.049 698.225 89.269 698.22 89.469C698.162 91.88 698.29 93.972 698.622 95.782C698.65 95.941 698.687 96.089 698.718 96.246C698.875 96.992 699.068 97.689 699.302 98.337C699.347 98.464 699.391 98.594 699.44 98.718C700.04 100.231 700.865 101.478 701.964 102.469C702.264 102.738 702.587 102.987 702.926 103.22H679.437C679.394 102.969 679.344 102.727 679.306 102.471H679.305C679.305 102.467 679.305 102.462 679.304 102.459C679.26 102.17 679.237 101.854 679.199 101.558C679.084 100.634 678.996 99.671 678.935 98.674C678.909 98.258 678.879 97.845 678.862 97.419C678.816 96.174 678.805 94.876 678.833 93.518C678.841 93.114 678.862 92.69 678.877 92.276C678.921 91.042 678.992 89.765 679.093 88.441C679.118 88.109 679.135 87.79 679.163 87.452C679.3 85.836 679.484 84.137 679.699 82.382C679.751 81.957 679.808 81.518 679.864 81.084C680.105 79.238 680.37 77.344 680.688 75.346C681.046 73.067 681.424 70.889 681.82 68.808C687.041 41.397 695.81 30.748 717.268 28.554C720.251 28.25 723.472 28.103 726.971 28.103C726.972 28.103 726.973 28.103 726.973 28.103C747.995 28.103 757.681 33.202 759.812 48.236C760.78 55.067 760.188 63.953 758.39 75.346ZM894.023 31.336L866.924 108.56C863.473 118.182 861.114 121.41 854.5 122.41C852.38 122.733 849.832 122.828 846.66 122.828C831.671 122.828 830.351 121.267 829.393 108.56L825.794 63.232V63.231L807.929 108.56C804.256 117.613 802.201 120.996 795.961 122.202C793.442 122.687 790.261 122.829 785.986 122.829C772.915 122.829 770.757 121.267 770.397 108.56L767.638 31.337C767.638 29.899 768.238 29.417 769.557 29.417H785.385C786.464 29.417 786.705 29.899 786.825 31.337L788.896 100.572V100.571C789.055 103.091 789.564 103.641 791.022 103.641C792.94 103.641 793.42 103.042 794.619 100.043L820.759 34.576C821.359 33.132 822.438 32.657 823.517 32.657H837.666C838.52 32.657 839.28 32.977 839.627 33.817C839.719 34.038 839.8 34.274 839.825 34.576L845.221 100.043C845.461 103.042 845.82 103.641 847.739 103.641C849.298 103.641 849.897 103.042 850.977 100.043L874.839 31.336C875.318 29.898 875.678 29.417 876.757 29.417H892.585C893.904 29.417 894.383 29.898 894.023 31.336ZM362.709 31.219L357.193 120.311C357.193 121.632 356.354 122.23 355.155 122.23H339.927C338.727 122.23 338.367 121.632 338.367 120.311L342.325 62.756L311.987 117.551C311.387 118.749 310.429 119.348 309.23 119.348H297.838C296.759 119.348 296.039 118.749 295.561 117.551L282.852 62.767L282.849 62.755L268.34 120.31C268.213 121.009 267.975 121.492 267.613 121.807C267.289 122.085 266.866 122.23 266.302 122.23H251.074C249.875 122.23 249.274 121.632 249.515 120.31L272.297 31.336C272.538 30.138 272.898 29.417 274.096 29.417H288.606C291.237 29.417 292.727 29.895 293.683 31.379C294.121 32.059 294.458 32.928 294.721 34.095L307.791 92.489L339.327 34.095C341.486 30.256 343.044 29.299 346.881 29.299H361.39C362.377 29.299 362.683 30.684 362.683 30.684C362.683 30.684 362.709 31.029 362.709 31.219ZM501.707 31.219L499.668 44.049C499.548 45.246 498.709 45.845 497.51 45.845H472.449L460.697 120.31C460.458 121.632 459.739 122.23 458.539 122.23H443.31C442.112 122.23 441.632 121.632 441.871 120.31L453.623 45.845H394.821L391.225 68.507V68.508H430.556C431.755 68.508 432.354 69.106 432.235 70.31L430.197 82.542C430.077 83.738 429.237 84.338 428.039 84.338H388.707L385.35 105.801H428.398C429.597 105.801 430.077 106.4 429.956 107.597L427.798 120.428C427.677 121.632 426.959 122.23 425.76 122.23H365.684C364.485 122.23 364.005 121.632 364.125 120.31L378.274 31.219C378.394 30.015 379.113 29.417 380.314 29.417H500.148C501.347 29.417 501.827 30.015 501.707 31.219ZM629.471 70.426L627.434 82.659C627.314 83.856 626.474 84.454 625.276 84.454H588.224L582.466 120.311C582.347 121.632 581.628 122.23 580.429 122.23H565.201C564.002 122.23 563.523 121.632 563.641 120.311L577.791 31.219C577.911 30.016 578.629 29.417 579.828 29.417H643.005C644.203 29.417 644.802 30.016 644.682 31.219L642.645 44.05C642.404 45.247 641.686 45.846 640.487 45.846H594.338L590.742 68.631H627.794C628.992 68.631 629.592 69.23 629.471 70.426ZM388.707 84.338H388.713L388.31 86.876L388.707 84.338ZM510.727 79.783L524.397 48.006C525.037 46.466 525.444 45.589 525.991 45.096C526.466 44.667 527.045 44.525 527.994 44.525C530.392 44.525 530.392 45.124 530.752 48.006L534.349 79.783H510.727ZM542.335 29.886C539.757 28.905 536.044 28.702 530.512 28.702C516.602 28.702 513.964 30.016 508.209 43.087L474.634 120.311C474.155 121.749 474.514 122.23 475.833 122.23H491.061C492.26 122.23 492.501 121.749 493.1 120.311L504.012 95.372H536.026L539.025 120.311C539.145 121.749 539.145 122.23 540.345 122.23H555.573C556.892 122.23 557.491 121.749 557.491 120.311L548.617 43.087C547.658 35.042 546.461 31.458 542.335 29.886Z"),M(i,"fill","white"),M(t,"width","895"),M(t,"height","151"),M(t,"viewBox","0 0 895 151"),M(t,"fill","none"),M(t,"xmlns","http://www.w3.org/2000/svg")},m(r,s){I(r,t,s),V(t,n),V(t,i)},d(r){r&&L(t)}}}function Vz(e){let t;function n(s,o){return s[0]?Gz:Hz}let i=n(e),r=i(e);return{c(){r.c(),t=Ne()},m(s,o){r.m(s,o),I(s,t,o)},p(s,[o]){i!==(i=n(s))&&(r.d(1),r=i(s),r&&(r.c(),r.m(t.parentNode,t)))},i:ie,o:ie,d(s){s&&L(t),r.d(s)}}}function Yz(e,t,n){let{light:i=!1}=t;return e.$$set=r=>{"light"in r&&n(0,i=r.light)},[i]}class Xz extends xe{constructor(t){super(),ve(this,t,Yz,Vz,ye,{light:0})}}function Kz(e){let t,n,i,r,s,o;r=new Xz({});const a=e[1].default,u=mt(a,e,e[0],null);return{c(){t=G("aside"),n=G("div"),i=G("div"),he(r.$$.fragment),s=He(),u&&u.c(),M(i,"class","logoContainer"),M(t,"class","svelte-1okdv0e")},m(l,c){I(l,t,c),V(t,n),V(n,i),ce(r,i,null),V(n,s),u&&u.m(n,null),o=!0},p(l,[c]){u&&u.p&&(!o||c&1)&&bt(u,a,l,l[0],o?yt(a,l[0],c,null):vt(l[0]),null)},i(l){o||(D(r.$$.fragment,l),D(u,l),o=!0)},o(l){N(r.$$.fragment,l),N(u,l),o=!1},d(l){l&&L(t),fe(r),u&&u.d(l)}}}function Zz(e,t,n){let{$$slots:i={},$$scope:r}=t;return e.$$set=s=>{"$$scope"in s&&n(0,r=s.$$scope)},[r,i]}class Jz extends xe{constructor(t){super(),ve(this,t,Zz,Kz,ye,{})}}function D5(e){let t,n;return{c(){t=G("td"),n=Be(e[0]),M(t,"class","idCell svelte-pt8vzv"),M(t,"data-component","artifact-row")},m(i,r){I(i,t,r),V(t,n)},p(i,r){r&1&&ft(n,i[0])},d(i){i&&L(t)}}}function Qz(e){let t,n,i,r,s=e[1].data+"",o,a,u=e[0]!==null&&D5(e);return{c(){t=G("tr"),u&&u.c(),n=He(),i=G("td"),r=G("code"),o=Be(s),M(r,"class","mono"),M(i,"class","codeCell svelte-pt8vzv"),M(i,"colspan",a=e[0]===null?2:1),M(i,"data-component","artifact-row")},m(l,c){I(l,t,c),u&&u.m(t,null),V(t,n),V(t,i),V(i,r),V(r,o),e[3](r)},p(l,[c]){l[0]!==null?u?u.p(l,c):(u=D5(l),u.c(),u.m(t,n)):u&&(u.d(1),u=null),c&2&&s!==(s=l[1].data+"")&&ft(o,s),c&1&&a!==(a=l[0]===null?2:1)&&M(i,"colspan",a)},i:ie,o:ie,d(l){l&&L(t),u&&u.d(),e[3](null)}}}function eB(e,t,n){let{id:i}=t,{artifact:r}=t,s;function o(){var u;s&&!s.classList.contains("language-python")&&typeof window<"u"&&((u=window==null?void 0:window.Prism)==null||u.highlightElement(s))}function a(u){zi[u?"unshift":"push"](()=>{s=u,n(2,s)})}return e.$$set=u=>{"id"in u&&n(0,i=u.id),"artifact"in u&&n(1,r=u.artifact)},e.$$.update=()=>{e.$$.dirty&4&&s&&o()},[i,r,s,a]}class tB extends xe{constructor(t){super(),ve(this,t,eB,Qz,ye,{id:0,artifact:1})}}function T5(e,t,n){const i=e.slice();return i[2]=t[n],i}function M5(e){let t,n;return t=new tB({props:{id:e[2].name,artifact:e[2]}}),{c(){he(t.$$.fragment)},m(i,r){ce(t,i,r),n=!0},p:ie,i(i){n||(D(t.$$.fragment,i),n=!0)},o(i){N(t.$$.fragment,i),n=!1},d(i){fe(t,i)}}}function nB(e){let t,n,i,r=Ue(e[0]),s=[];for(let a=0;a<r.length;a+=1)s[a]=M5(T5(e,r,a));const o=a=>N(s[a],1,1,()=>{s[a]=null});return{c(){t=G("div"),n=G("table");for(let a=0;a<s.length;a+=1)s[a].c();M(n,"class","language-python svelte-ubs992"),M(t,"class","container svelte-ubs992"),M(t,"data-component","artifacts")},m(a,u){I(a,t,u),V(t,n);for(let l=0;l<s.length;l+=1)s[l]&&s[l].m(n,null);i=!0},p(a,[u]){if(u&1){r=Ue(a[0]);let l;for(l=0;l<r.length;l+=1){const c=T5(a,r,l);s[l]?(s[l].p(c,u),D(s[l],1)):(s[l]=M5(c),s[l].c(),D(s[l],1),s[l].m(n,null))}for(Se(),l=r.length;l<s.length;l+=1)o(l);Fe()}},i(a){if(!i){for(let u=0;u<r.length;u+=1)D(s[u]);i=!0}},o(a){s=s.filter(Boolean);for(let u=0;u<s.length;u+=1)N(s[u]);i=!1},d(a){a&&L(t),jt(s,a)}}}function iB(e,t,n){let{componentData:i}=t;const r=i==null?void 0:i.data.sort((s,o)=>{if(s.name&&o.name){if(s.name>o.name)return 1;if(s.name<o.name)return-1}return 0});return e.$$set=s=>{"componentData"in s&&n(1,i=s.componentData)},[r,i]}class N5 extends xe{constructor(t){super(),ve(this,t,iB,nB,ye,{componentData:1})}}function rB(e){let t,n,i;return{c(){t=G("div"),n=He(),i=G("div"),M(t,"class","path topLeft svelte-1hyaq5f"),M(i,"class","path bottomRight svelte-1hyaq5f")},m(r,s){I(r,t,s),I(r,n,s),I(r,i,s)},d(r){r&&(L(t),L(n),L(i))}}}function sB(e){let t;return{c(){t=G("div"),M(t,"class","path straightLine svelte-1hyaq5f")},m(n,i){I(n,t,i)},d(n){n&&L(t)}}}function oB(e){let t;function n(s,o){return s[5]?sB:rB}let i=n(e),r=i(e);return{c(){t=G("div"),r.c(),M(t,"class","connectorwrapper svelte-1hyaq5f"),_i(t,"top",e[1]+"rem"),_i(t,"left",e[0]+"rem"),_i(t,"width",e[3]+"rem"),_i(t,"height",e[4]+"rem"),ni(t,"flip",e[2])},m(s,o){I(s,t,o),r.m(t,null)},p(s,[o]){i!==(i=n(s))&&(r.d(1),r=i(s),r&&(r.c(),r.m(t,null))),o&2&&_i(t,"top",s[1]+"rem"),o&1&&_i(t,"left",s[0]+"rem"),o&8&&_i(t,"width",s[3]+"rem"),o&16&&_i(t,"height",s[4]+"rem"),o&4&&ni(t,"flip",s[2])},i:ie,o:ie,d(s){s&&L(t),r.d()}}}const Ea=.5;function aB(e,t,n){let{top:i=0}=t,{left:r=0}=t,{bottom:s=0}=t,{right:o=0}=t,a,u,l,c=!1;return e.$$set=f=>{"top"in f&&n(1,i=f.top),"left"in f&&n(0,r=f.left),"bottom"in f&&n(7,s=f.bottom),"right"in f&&n(6,o=f.right)},e.$$.update=()=>{e.$$.dirty&207&&(n(2,a=o-r<0),n(3,u=Math.abs(o-r)),u<=Ea?(n(3,u=Ea),n(5,c=!0),n(0,r-=Ea/2)):(a?(n(0,r+=Ea/2),n(6,o-=Ea/2)):(n(0,r-=Ea/2),n(6,o+=Ea/2)),n(3,u=Math.abs(o-r))),n(4,l=s-i))},[r,i,a,u,l,c,o,s]}class uB extends xe{constructor(t){super(),ve(this,t,aB,oB,ye,{top:1,left:0,bottom:7,right:6})}}function R5(e,t,n){const i=e.slice();return i[4]=t[n],i}function O5(e){let t,n;return t=new uB({props:{top:mo(e[4].top),left:mo(e[4].left),bottom:mo(e[4].bottom),right:mo(e[4].right)}}),{c(){he(t.$$.fragment)},m(i,r){ce(t,i,r),n=!0},p(i,r){const s={};r&1&&(s.top=mo(i[4].top)),r&1&&(s.left=mo(i[4].left)),r&1&&(s.bottom=mo(i[4].bottom)),r&1&&(s.right=mo(i[4].right)),t.$set(s)},i(i){n||(D(t.$$.fragment,i),n=!0)},o(i){N(t.$$.fragment,i),n=!1},d(i){fe(t,i)}}}function lB(e){let t,n,i=Ue(e[0]),r=[];for(let o=0;o<i.length;o+=1)r[o]=O5(R5(e,i,o));const s=o=>N(r[o],1,1,()=>{r[o]=null});return{c(){for(let o=0;o<r.length;o+=1)r[o].c();t=Ne()},m(o,a){for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(o,a);I(o,t,a),n=!0},p(o,[a]){if(a&1){i=Ue(o[0]);let u;for(u=0;u<i.length;u+=1){const l=R5(o,i,u);r[u]?(r[u].p(l,a),D(r[u],1)):(r[u]=O5(l),r[u].c(),D(r[u],1),r[u].m(t.parentNode,t))}for(Se(),u=i.length;u<r.length;u+=1)s(u);Fe()}},i(o){if(!n){for(let a=0;a<i.length;a+=1)D(r[a]);n=!0}},o(o){r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)N(r[a]);n=!1},d(o){o&&L(t),jt(r,o)}}}function cB(e,t,n){let{steps:i}=t,{boxes:r}=t,{container:s}=t,o=[];return e.$$set=a=>{"steps"in a&&n(1,i=a.steps),"boxes"in a&&n(2,r=a.boxes),"container"in a&&n(3,s=a.container)},e.$$.update=()=>{if(e.$$.dirty&15){n(0,o=[]);const a=s.getBoundingClientRect(),u=a.top,l=a.left;r&&Object.keys(i).forEach(c=>{var h;const f=i[c],d=r[c].getBoundingClientRect();(h=f.next)==null||h.forEach(p=>{const g=r[p].getBoundingClientRect(),m={top:d.bottom-u,left:d.left-l+d.width/2,bottom:g.top-u,right:g.left-l+g.width/2};n(0,o=[...o,m])})})}},[o,i,r,s]}class fB extends xe{constructor(t){super(),ve(this,t,cB,lB,ye,{steps:1,boxes:2,container:3})}}const L5="currentStep";function I5(e,t,n){const i=e.slice();return i[16]=t[n],i[18]=n,i}function P5(e){let t,n,i;return{c(){t=G("div"),n=Be("x"),i=Be(e[6]),M(t,"class","levelstoshow svelte-117ceti")},m(r,s){I(r,t,s),V(t,n),V(t,i)},p(r,s){s&64&&ft(i,r[6])},d(r){r&&L(t)}}}function z5(e){let t,n;return{c(){t=G("div"),M(t,"class",n="level rectangle "+e[16]+" svelte-117ceti"),_i(t,"z-index",(e[18]+1)*-1),_i(t,"top",(e[18]+1)*B5+"px"),_i(t,"left",(e[18]+1)*B5+"px")},m(i,r){I(i,t,r)},p(i,r){r&128&&n!==(n="level rectangle "+i[16]+" svelte-117ceti")&&M(t,"class",n)},d(i){i&&L(t)}}}function dB(e){let t,n,i,r,s,o,a,u,l=e[2].doc+"",c,f,d,h=e[6]&&P5(e),p=Ue(e[7]),g=[];for(let m=0;m<p.length;m+=1)g[m]=z5(I5(e,p,m));return{c(){t=G("div"),h&&h.c(),n=He(),i=G("div"),r=G("div"),s=G("span"),o=Be(e[1]),a=He(),u=G("div"),c=Be(l),d=He();for(let m=0;m<g.length;m+=1)g[m].c();M(s,"class","name svelte-117ceti"),M(u,"class","description svelte-117ceti"),M(u,"title",f=e[9]?e[2].doc:void 0),ni(u,"overflown",e[9]),M(r,"class","inner svelte-117ceti"),M(i,"class","step rectangle svelte-117ceti"),ni(i,"success",e[3]),ni(i,"running",e[5]),ni(i,"error",e[4]),M(t,"class","wrapper svelte-117ceti"),ni(t,"current",e[10])},m(m,y){I(m,t,y),h&&h.m(t,null),V(t,n),V(t,i),V(i,r),V(r,s),V(s,o),V(r,a),V(r,u),V(u,c),e[12](u),e[13](i),V(t,d);for(let b=0;b<g.length;b+=1)g[b]&&g[b].m(t,null)},p(m,[y]){if(m[6]?h?h.p(m,y):(h=P5(m),h.c(),h.m(t,n)):h&&(h.d(1),h=null),y&2&&ft(o,m[1]),y&4&&l!==(l=m[2].doc+"")&&ft(c,l),y&516&&f!==(f=m[9]?m[2].doc:void 0)&&M(u,"title",f),y&512&&ni(u,"overflown",m[9]),y&8&&ni(i,"success",m[3]),y&32&&ni(i,"running",m[5]),y&16&&ni(i,"error",m[4]),y&128){p=Ue(m[7]);let b;for(b=0;b<p.length;b+=1){const v=I5(m,p,b);g[b]?g[b].p(v,y):(g[b]=z5(v),g[b].c(),g[b].m(t,null))}for(;b<g.length;b+=1)g[b].d(1);g.length=p.length}},i:ie,o:ie,d(m){m&&L(t),h&&h.d(),e[12](null),e[13](null),jt(g,m)}}}const B5=4,hB=3;function pB(e,t,n){let{name:i}=t,{step:r}=t,{numLevels:s=0}=t,{el:o}=t,a=!1,u=!1,l=!1,c;const f={3:3,100:4,1e3:5,1e4:6};let d=[];r.num_possible_tasks?(r.num_possible_tasks>1&&(c=new Intl.NumberFormat().format(r.num_possible_tasks)),s=r.num_possible_tasks-1,Object.keys(f).forEach(v=>{const x=Number.parseInt(v);r.num_possible_tasks&&r.num_possible_tasks>x&&n(11,s=f[x])})):s*=hB,s>0&&(d=new Array(s).fill("")),d=d.map((v,x)=>{if(r.num_possible_tasks){const _=r.num_failed??0,E=r.successful_tasks??0;return(_-1)/r.num_possible_tasks>=(x+1)/d.length?"error":(_+E)/r.num_possible_tasks>=(x+1)/d.length?"success":"running"}return""});const h=C5(L5),p=i===h;r.failed||r.num_failed?u=!0:(r.num_possible_tasks??0)>(r.successful_tasks??0)?l=!0:r.num_possible_tasks&&r.num_possible_tasks===r.successful_tasks&&(a=!0);let g,m=!1;Wc(()=>{n(9,m=Wz(g))});function y(v){zi[v?"unshift":"push"](()=>{g=v,n(8,g)})}function b(v){zi[v?"unshift":"push"](()=>{o=v,n(0,o)})}return e.$$set=v=>{"name"in v&&n(1,i=v.name),"step"in v&&n(2,r=v.step),"numLevels"in v&&n(11,s=v.numLevels),"el"in v&&n(0,o=v.el)},[o,i,r,a,u,l,c,d,g,m,p,s,y,b]}let gB=class extends xe{constructor(t){super(),ve(this,t,pB,dB,ye,{name:1,step:2,numLevels:11,el:0})}};function U5(e,t,n){const i=e.slice();return i[10]=t[n],i}function mB(e){let t,n,i,r,s,o;function a(f){e[8](f)}let u={name:e[2],numLevels:e[3],step:e[5]};e[4]!==void 0&&(u.el=e[4]),n=new gB({props:u}),zi.push(()=>h2(n,"el",a));let l=e[7]&&yB(e),c=e[5].box_ends&&bB(e);return{c(){t=G("div"),he(n.$$.fragment),r=He(),l&&l.c(),s=He(),c&&c.c(),M(t,"class","stepwrapper svelte-18aex7a")},m(f,d){I(f,t,d),ce(n,t,null),V(t,r),l&&l.m(t,null),V(t,s),c&&c.m(t,null),o=!0},p(f,d){const h={};d&4&&(h.name=f[2]),d&8&&(h.numLevels=f[3]),!i&&d&16&&(i=!0,h.el=f[4],f2(()=>i=!1)),n.$set(h),f[7]&&l.p(f,d),f[5].box_ends&&c.p(f,d)},i(f){o||(D(n.$$.fragment,f),D(l),D(c),o=!0)},o(f){N(n.$$.fragment,f),N(l),N(c),o=!1},d(f){f&&L(t),fe(n),l&&l.d(),c&&c.d()}}}function yB(e){let t,n,i,r,s=Ue(e[5].next),o=[];for(let u=0;u<s.length;u+=1)o[u]=j5(U5(e,s,u));const a=u=>N(o[u],1,1,()=>{o[u]=null});return{c(){t=G("div"),n=He(),i=G("div");for(let u=0;u<o.length;u+=1)o[u].c();M(t,"class","gap svelte-18aex7a"),M(i,"class","childwrapper svelte-18aex7a")},m(u,l){I(u,t,l),I(u,n,l),I(u,i,l);for(let c=0;c<o.length;c+=1)o[c]&&o[c].m(i,null);r=!0},p(u,l){if(l&99){s=Ue(u[5].next);let c;for(c=0;c<s.length;c+=1){const f=U5(u,s,c);o[c]?(o[c].p(f,l),D(o[c],1)):(o[c]=j5(f),o[c].c(),D(o[c],1),o[c].m(i,null))}for(Se(),c=s.length;c<o.length;c+=1)a(c);Fe()}},i(u){if(!r){for(let l=0;l<s.length;l+=1)D(o[l]);r=!0}},o(u){o=o.filter(Boolean);for(let l=0;l<o.length;l+=1)N(o[l]);r=!1},d(u){u&&(L(t),L(n),L(i)),jt(o,u)}}}function j5(e){let t,n;return t=new p2({props:{steps:e[1],stepName:e[10],levels:e[6],boxes:e[0]}}),{c(){he(t.$$.fragment)},m(i,r){ce(t,i,r),n=!0},p(i,r){const s={};r&2&&(s.steps=i[1]),r&1&&(s.boxes=i[0]),t.$set(s)},i(i){n||(D(t.$$.fragment,i),n=!0)},o(i){N(t.$$.fragment,i),n=!1},d(i){fe(t,i)}}}function bB(e){let t,n,i,r;return i=new p2({props:{steps:e[1],stepName:e[5].box_ends,levels:e[3],boxes:e[0]}}),{c(){t=G("div"),n=He(),he(i.$$.fragment),M(t,"class","gap svelte-18aex7a")},m(s,o){I(s,t,o),I(s,n,o),ce(i,s,o),r=!0},p(s,o){const a={};o&2&&(a.steps=s[1]),o&8&&(a.levels=s[3]),o&1&&(a.boxes=s[0]),i.$set(a)},i(s){r||(D(i.$$.fragment,s),r=!0)},o(s){N(i.$$.fragment,s),r=!1},d(s){s&&(L(t),L(n)),fe(i,s)}}}function vB(e){let t,n,i=e[5]&&mB(e);return{c(){i&&i.c(),t=Ne()},m(r,s){i&&i.m(r,s),I(r,t,s),n=!0},p(r,[s]){r[5]&&i.p(r,s)},i(r){n||(D(i),n=!0)},o(r){N(i),n=!1},d(r){r&&L(t),i&&i.d(r)}}}function xB(e,t,n){var h;let{steps:i}=t,{stepName:r}=t,{levels:s=0}=t,{boxes:o={}}=t,a=null;Wc(()=>{a&&n(0,o[r]=a,o)});let l=i[r];l||console.warn("step ",r," not found");const c=(l==null?void 0:l.type)==="foreach"?s+1:(l==null?void 0:l.type)==="join"?s-1:s;let f=(h=l==null?void 0:l.next)==null?void 0:h.find(p=>{var g;return((g=i[p])==null?void 0:g.type)!=="join"});function d(p){a=p,n(4,a)}return e.$$set=p=>{"steps"in p&&n(1,i=p.steps),"stepName"in p&&n(2,r=p.stepName),"levels"in p&&n(3,s=p.levels),"boxes"in p&&n(0,o=p.boxes)},[o,i,r,s,a,l,c,f,d]}class p2 extends xe{constructor(t){super(),ve(this,t,xB,vB,ye,{steps:1,stepName:2,levels:3,boxes:0})}}function _B(e){let t;return{c(){t=G("p"),t.textContent="No start step"},m(n,i){I(n,t,i)},p:ie,i:ie,o:ie,d(n){n&&L(t)}}}function wB(e){let t,n,i;function r(o){e[6](o)}let s={steps:e[3],stepName:"start"};return e[0]!==void 0&&(s.boxes=e[0]),t=new p2({props:s}),zi.push(()=>h2(t,"boxes",r)),{c(){he(t.$$.fragment)},m(o,a){ce(t,o,a),i=!0},p(o,a){const u={};!n&&a&1&&(n=!0,u.boxes=o[0],f2(()=>n=!1)),t.$set(u)},i(o){i||(D(t.$$.fragment,o),i=!0)},o(o){N(t.$$.fragment,o),i=!1},d(o){fe(t,o)}}}function q5(e){let t,n;return t=new fB({props:{boxes:e[0],steps:e[3],container:e[1]}}),{c(){he(t.$$.fragment)},m(i,r){ce(t,i,r),n=!0},p(i,r){const s={};r&1&&(s.boxes=i[0]),r&2&&(s.container=i[1]),t.$set(s)},i(i){n||(D(t.$$.fragment,i),n=!0)},o(i){N(t.$$.fragment,i),n=!1},d(i){fe(t,i)}}}function EB(e){let t,n,i,r,s=!e[2]&&Object.keys(e[0]).length,o,a,u;const l=[wB,_B],c=[];function f(h,p){var g;return(g=h[3])!=null&&g.start?0:1}n=f(e),i=c[n]=l[n](e);let d=s&&q5(e);return{c(){t=G("div"),i.c(),r=He(),d&&d.c(),_i(t,"position","relative"),_i(t,"line-height","1"),M(t,"data-component","dag")},m(h,p){I(h,t,p),c[n].m(t,null),V(t,r),d&&d.m(t,null),e[7](t),o=!0,a||(u=Ku(window,"resize",e[4]),a=!0)},p(h,[p]){i.p(h,p),p&5&&(s=!h[2]&&Object.keys(h[0]).length),s?d?(d.p(h,p),p&5&&D(d,1)):(d=q5(h),d.c(),D(d,1),d.m(t,null)):d&&(Se(),N(d,1,1,()=>{d=null}),Fe())},i(h){o||(D(i),D(d),o=!0)},o(h){N(i),N(d),o=!1},d(h){h&&L(t),c[n].d(),d&&d.d(),e[7](null),a=!1,u()}}}const CB=100;function kB(e,t,n){var h;let i;Ph(e,wa,p=>n(9,i=p));let{componentData:r}=t;const{data:s}=r;let o={},a;E5(L5,qz((h=i==null?void 0:i.metadata)==null?void 0:h.pathspec,"stepname"));let u,l=!1;const c=()=>{n(2,l=!0),clearTimeout(u),u=setTimeout(()=>{n(2,l=!1)},CB)};function f(p){o=p,n(0,o)}function d(p){zi[p?"unshift":"push"](()=>{a=p,n(1,a)})}return e.$$set=p=>{"componentData"in p&&n(5,r=p.componentData)},[o,a,l,s,c,r,f,d]}class W5 extends xe{constructor(t){super(),ve(this,t,kB,EB,ye,{componentData:5})}}function AB(e){var r;let t,n=(((r=e[0])==null?void 0:r.text)||"")+"",i;return{c(){t=G("h2"),i=Be(n),M(t,"class","title svelte-117s0ws"),M(t,"data-component","title")},m(s,o){I(s,t,o),V(t,i)},p(s,[o]){var a;o&1&&n!==(n=(((a=s[0])==null?void 0:a.text)||"")+"")&&ft(i,n)},i:ie,o:ie,d(s){s&&L(t)}}}function $B(e,t,n){let{componentData:i}=t;return e.$$set=r=>{"componentData"in r&&n(0,i=r.componentData)},[i]}class H5 extends xe{constructor(t){super(),ve(this,t,$B,AB,ye,{componentData:0})}}function SB(e){var r;let t,n=(((r=e[0])==null?void 0:r.text)||"")+"",i;return{c(){t=G("p"),i=Be(n),M(t,"class","subtitle svelte-lu9pnn"),M(t,"data-component","subtitle")},m(s,o){I(s,t,o),V(t,i)},p(s,[o]){var a;o&1&&n!==(n=(((a=s[0])==null?void 0:a.text)||"")+"")&&ft(i,n)},i:ie,o:ie,d(s){s&&L(t)}}}function FB(e,t,n){let{componentData:i}=t;return e.$$set=r=>{"componentData"in r&&n(0,i=r.componentData)},[i]}class G5 extends xe{constructor(t){super(),ve(this,t,FB,SB,ye,{componentData:0})}}function V5(e){let t,n;return t=new H5({props:{componentData:{type:"title",text:e[1]}}}),{c(){he(t.$$.fragment)},m(i,r){ce(t,i,r),n=!0},p(i,r){const s={};r&2&&(s.componentData={type:"title",text:i[1]}),t.$set(s)},i(i){n||(D(t.$$.fragment,i),n=!0)},o(i){N(t.$$.fragment,i),n=!1},d(i){fe(t,i)}}}function Y5(e){let t,n;return t=new G5({props:{componentData:{type:"subtitle",text:e[0]}}}),{c(){he(t.$$.fragment)},m(i,r){ce(t,i,r),n=!0},p(i,r){const s={};r&1&&(s.componentData={type:"subtitle",text:i[0]}),t.$set(s)},i(i){n||(D(t.$$.fragment,i),n=!0)},o(i){N(t.$$.fragment,i),n=!1},d(i){fe(t,i)}}}function DB(e){let t,n,i,r=e[1]&&V5(e),s=e[0]&&Y5(e);return{c(){t=G("header"),r&&r.c(),n=He(),s&&s.c(),M(t,"class","container svelte-1ugmt5d"),M(t,"data-component","heading")},m(o,a){I(o,t,a),r&&r.m(t,null),V(t,n),s&&s.m(t,null),i=!0},p(o,[a]){o[1]?r?(r.p(o,a),a&2&&D(r,1)):(r=V5(o),r.c(),D(r,1),r.m(t,n)):r&&(Se(),N(r,1,1,()=>{r=null}),Fe()),o[0]?s?(s.p(o,a),a&1&&D(s,1)):(s=Y5(o),s.c(),D(s,1),s.m(t,null)):s&&(Se(),N(s,1,1,()=>{s=null}),Fe())},i(o){i||(D(r),D(s),i=!0)},o(o){N(r),N(s),i=!1},d(o){o&&L(t),r&&r.d(),s&&s.d()}}}function TB(e,t,n){let i,r,{componentData:s}=t;return e.$$set=o=>{"componentData"in o&&n(2,s=o.componentData)},e.$$.update=()=>{e.$$.dirty&4&&n(1,{title:i,subtitle:r}=s,i,(n(0,r),n(2,s)))},[r,i,s]}let X5=class extends xe{constructor(t){super(),ve(this,t,TB,DB,ye,{componentData:2})}};function K5(e){let t,n;return{c(){t=G("div"),n=Be(e[2]),M(t,"class","label svelte-1x96yvr")},m(i,r){I(i,t,r),V(t,n)},p(i,r){r&4&&ft(n,i[2])},d(i){i&&L(t)}}}function Z5(e){let t,n;return{c(){t=G("figcaption"),n=Be(e[1]),M(t,"class","description svelte-1x96yvr")},m(i,r){I(i,t,r),V(t,n)},p(i,r){r&2&&ft(n,i[1])},d(i){i&&L(t)}}}function MB(e){let t,n,i,r,s,o,a,u,l,c=e[2]&&K5(e),f=e[1]&&Z5(e);return{c(){t=G("figure"),n=G("div"),i=G("img"),o=He(),c&&c.c(),a=He(),f&&f.c(),Ih(i.src,r=e[3])||M(i,"src",r),M(i,"alt",s=e[2]||"image"),M(i,"class","svelte-1x96yvr"),M(n,"class","imageContainer"),M(t,"data-component","image"),M(t,"class","svelte-1x96yvr")},m(d,h){I(d,t,h),V(t,n),V(n,i),V(t,o),c&&c.m(t,null),V(t,a),f&&f.m(t,null),u||(l=Ku(t,"click",e[4]),u=!0)},p(d,[h]){h&8&&!Ih(i.src,r=d[3])&&M(i,"src",r),h&4&&s!==(s=d[2]||"image")&&M(i,"alt",s),d[2]?c?c.p(d,h):(c=K5(d),c.c(),c.m(t,a)):c&&(c.d(1),c=null),d[1]?f?f.p(d,h):(f=Z5(d),f.c(),f.m(t,null)):f&&(f.d(1),f=null)},i:ie,o:ie,d(d){d&&L(t),c&&c.d(),f&&f.d(),u=!1,l()}}}function NB(e,t,n){let i,r,s,{componentData:o}=t;const a=()=>Hc.set(o);return e.$$set=u=>{"componentData"in u&&n(0,o=u.componentData)},e.$$.update=()=>{e.$$.dirty&1&&n(3,{src:i,label:r,description:s}=o,i,(n(2,r),n(0,o)),(n(1,s),n(0,o)))},[o,s,r,i,a]}let J5=class extends xe{constructor(t){super(),ve(this,t,NB,MB,ye,{componentData:0})}};function RB(e){let t,n,i,r,s=e[0].data+"",o,a,u;return{c(){t=G("pre"),n=Be(` 
  `),i=G("code"),r=Be(`
    `),o=Be(s),a=Be(`
  `),u=Be(`
`),M(i,"class","mono language-log"),M(t,"class","log svelte-1jhmsu"),M(t,"data-component","log")},m(l,c){I(l,t,c),V(t,n),V(t,i),V(i,r),V(i,o),V(i,a),e[2](i),V(t,u)},p(l,[c]){c&1&&s!==(s=l[0].data+"")&&ft(o,s)},i:ie,o:ie,d(l){l&&L(t),e[2](null)}}}function OB(e,t,n){let{componentData:i}=t,r;function s(){var a;r&&((a=window==null?void 0:window.Prism)==null||a.highlightElement(r))}function o(a){zi[a?"unshift":"push"](()=>{r=a,n(1,r)})}return e.$$set=a=>{"componentData"in a&&n(0,i=a.componentData)},e.$$.update=()=>{e.$$.dirty&2&&r&&s()},[i,r,o]}let Q5=class extends xe{constructor(t){super(),ve(this,t,OB,RB,ye,{componentData:0})}};function LB(){const e=console.warn;console.warn=t=>{t.includes("unknown prop")||t.includes("unexpected slot")||e(t)},Wc(()=>{console.warn=e})}function e4(e,t,n){const i=e.slice();return i[18]=t[n],i}function t4(e,t,n){const i=e.slice();return i[18]=t[n],i}function n4(e,t,n){const i=e.slice();return i[10]=t[n],i}function i4(e,t,n){const i=e.slice();return i[13]=t[n],i[15]=n,i}function r4(e,t,n){const i=e.slice();return i[16]=t[n],i[15]=n,i}function s4(e,t,n){const i=e.slice();return i[7]=t[n],i}function IB(e){let t,n,i,r;const s=[UB,BB,zB],o=[];function a(u,l){return u[0]==="table"?0:u[0]==="list"?1:2}return t=a(e),n=o[t]=s[t](e),{c(){n.c(),i=Ne()},m(u,l){o[t].m(u,l),I(u,i,l),r=!0},p(u,l){let c=t;t=a(u),t===c?o[t].p(u,l):(Se(),N(o[c],1,1,()=>{o[c]=null}),Fe(),n=o[t],n?n.p(u,l):(n=o[t]=s[t](u),n.c()),D(n,1),n.m(i.parentNode,i))},i(u){r||(D(n),r=!0)},o(u){N(n),r=!1},d(u){u&&L(i),o[t].d(u)}}}function PB(e){let t,n,i=Ue(e[1]),r=[];for(let o=0;o<i.length;o+=1)r[o]=f4(s4(e,i,o));const s=o=>N(r[o],1,1,()=>{r[o]=null});return{c(){for(let o=0;o<r.length;o+=1)r[o].c();t=Ne()},m(o,a){for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(o,a);I(o,t,a),n=!0},p(o,a){if(a&34){i=Ue(o[1]);let u;for(u=0;u<i.length;u+=1){const l=s4(o,i,u);r[u]?(r[u].p(l,a),D(r[u],1)):(r[u]=f4(l),r[u].c(),D(r[u],1),r[u].m(t.parentNode,t))}for(Se(),u=i.length;u<r.length;u+=1)s(u);Fe()}},i(o){if(!n){for(let a=0;a<i.length;a+=1)D(r[a]);n=!0}},o(o){r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)N(r[a]);n=!1},d(o){o&&L(t),jt(r,o)}}}function zB(e){let t,n,i;const r=[e[6]];var s=e[5][e[0]];function o(a,u){let l={$$slots:{default:[WB]},$$scope:{ctx:a}};for(let c=0;c<r.length;c+=1)l=Pe(l,r[c]);return u!==void 0&&u&64&&(l=Pe(l,wi(r,[ar(a[6])]))),{props:l}}return s&&(t=Ke(s,o(e))),{c(){t&&he(t.$$.fragment),n=Ne()},m(a,u){t&&ce(t,a,u),I(a,n,u),i=!0},p(a,u){if(u&33&&s!==(s=a[5][a[0]])){if(t){Se();const l=t;N(l.$$.fragment,1,0,()=>{fe(l,1)}),Fe()}s?(t=Ke(s,o(a,u)),he(t.$$.fragment),D(t.$$.fragment,1),ce(t,n.parentNode,n)):t=null}else if(s){const l=u&64?wi(r,[ar(a[6])]):{};u&8388706&&(l.$$scope={dirty:u,ctx:a}),t.$set(l)}},i(a){i||(t&&D(t.$$.fragment,a),i=!0)},o(a){t&&N(t.$$.fragment,a),i=!1},d(a){a&&L(n),t&&fe(t,a)}}}function BB(e){let t,n,i,r;const s=[GB,HB],o=[];function a(u,l){return u[4]?0:1}return t=a(e),n=o[t]=s[t](e),{c(){n.c(),i=Ne()},m(u,l){o[t].m(u,l),I(u,i,l),r=!0},p(u,l){let c=t;t=a(u),t===c?o[t].p(u,l):(Se(),N(o[c],1,1,()=>{o[c]=null}),Fe(),n=o[t],n?n.p(u,l):(n=o[t]=s[t](u),n.c()),D(n,1),n.m(i.parentNode,i))},i(u){r||(D(n),r=!0)},o(u){N(n),r=!1},d(u){u&&L(i),o[t].d(u)}}}function UB(e){let t,n,i;var r=e[5].table;function s(o,a){return{props:{$$slots:{default:[iU]},$$scope:{ctx:o}}}}return r&&(t=Ke(r,s(e))),{c(){t&&he(t.$$.fragment),n=Ne()},m(o,a){t&&ce(t,o,a),I(o,n,a),i=!0},p(o,a){if(a&32&&r!==(r=o[5].table)){if(t){Se();const u=t;N(u.$$.fragment,1,0,()=>{fe(u,1)}),Fe()}r?(t=Ke(r,s(o)),he(t.$$.fragment),D(t.$$.fragment,1),ce(t,n.parentNode,n)):t=null}else if(r){const u={};a&8388716&&(u.$$scope={dirty:a,ctx:o}),t.$set(u)}},i(o){i||(t&&D(t.$$.fragment,o),i=!0)},o(o){t&&N(t.$$.fragment,o),i=!1},d(o){o&&L(n),t&&fe(t,o)}}}function jB(e){let t=e[6].raw+"",n;return{c(){n=Be(t)},m(i,r){I(i,n,r)},p(i,r){r&64&&t!==(t=i[6].raw+"")&&ft(n,t)},i:ie,o:ie,d(i){i&&L(n)}}}function qB(e){let t,n;return t=new Ca({props:{tokens:e[1],renderers:e[5]}}),{c(){he(t.$$.fragment)},m(i,r){ce(t,i,r),n=!0},p(i,r){const s={};r&2&&(s.tokens=i[1]),r&32&&(s.renderers=i[5]),t.$set(s)},i(i){n||(D(t.$$.fragment,i),n=!0)},o(i){N(t.$$.fragment,i),n=!1},d(i){fe(t,i)}}}function WB(e){let t,n,i,r;const s=[qB,jB],o=[];function a(u,l){return u[1]?0:1}return t=a(e),n=o[t]=s[t](e),{c(){n.c(),i=Ne()},m(u,l){o[t].m(u,l),I(u,i,l),r=!0},p(u,l){let c=t;t=a(u),t===c?o[t].p(u,l):(Se(),N(o[c],1,1,()=>{o[c]=null}),Fe(),n=o[t],n?n.p(u,l):(n=o[t]=s[t](u),n.c()),D(n,1),n.m(i.parentNode,i))},i(u){r||(D(n),r=!0)},o(u){N(n),r=!1},d(u){u&&L(i),o[t].d(u)}}}function HB(e){let t,n,i;const r=[{ordered:e[4]},e[6]];var s=e[5].list;function o(a,u){let l={$$slots:{default:[YB]},$$scope:{ctx:a}};for(let c=0;c<r.length;c+=1)l=Pe(l,r[c]);return u!==void 0&&u&80&&(l=Pe(l,wi(r,[u&16&&{ordered:a[4]},u&64&&ar(a[6])]))),{props:l}}return s&&(t=Ke(s,o(e))),{c(){t&&he(t.$$.fragment),n=Ne()},m(a,u){t&&ce(t,a,u),I(a,n,u),i=!0},p(a,u){if(u&32&&s!==(s=a[5].list)){if(t){Se();const l=t;N(l.$$.fragment,1,0,()=>{fe(l,1)}),Fe()}s?(t=Ke(s,o(a,u)),he(t.$$.fragment),D(t.$$.fragment,1),ce(t,n.parentNode,n)):t=null}else if(s){const l=u&80?wi(r,[u&16&&{ordered:a[4]},u&64&&ar(a[6])]):{};u&8388704&&(l.$$scope={dirty:u,ctx:a}),t.$set(l)}},i(a){i||(t&&D(t.$$.fragment,a),i=!0)},o(a){t&&N(t.$$.fragment,a),i=!1},d(a){a&&L(n),t&&fe(t,a)}}}function GB(e){let t,n,i;const r=[{ordered:e[4]},e[6]];var s=e[5].list;function o(a,u){let l={$$slots:{default:[KB]},$$scope:{ctx:a}};for(let c=0;c<r.length;c+=1)l=Pe(l,r[c]);return u!==void 0&&u&80&&(l=Pe(l,wi(r,[u&16&&{ordered:a[4]},u&64&&ar(a[6])]))),{props:l}}return s&&(t=Ke(s,o(e))),{c(){t&&he(t.$$.fragment),n=Ne()},m(a,u){t&&ce(t,a,u),I(a,n,u),i=!0},p(a,u){if(u&32&&s!==(s=a[5].list)){if(t){Se();const l=t;N(l.$$.fragment,1,0,()=>{fe(l,1)}),Fe()}s?(t=Ke(s,o(a,u)),he(t.$$.fragment),D(t.$$.fragment,1),ce(t,n.parentNode,n)):t=null}else if(s){const l=u&80?wi(r,[u&16&&{ordered:a[4]},u&64&&ar(a[6])]):{};u&8388704&&(l.$$scope={dirty:u,ctx:a}),t.$set(l)}},i(a){i||(t&&D(t.$$.fragment,a),i=!0)},o(a){t&&N(t.$$.fragment,a),i=!1},d(a){a&&L(n),t&&fe(t,a)}}}function VB(e){let t,n,i;return t=new Ca({props:{tokens:e[18].tokens,renderers:e[5]}}),{c(){he(t.$$.fragment),n=He()},m(r,s){ce(t,r,s),I(r,n,s),i=!0},p(r,s){const o={};s&64&&(o.tokens=r[18].tokens),s&32&&(o.renderers=r[5]),t.$set(o)},i(r){i||(D(t.$$.fragment,r),i=!0)},o(r){N(t.$$.fragment,r),i=!1},d(r){r&&L(n),fe(t,r)}}}function o4(e){let t,n,i;const r=[e[18]];var s=e[5].unorderedlistitem||e[5].listitem;function o(a,u){let l={$$slots:{default:[VB]},$$scope:{ctx:a}};for(let c=0;c<r.length;c+=1)l=Pe(l,r[c]);return u!==void 0&&u&64&&(l=Pe(l,wi(r,[ar(a[18])]))),{props:l}}return s&&(t=Ke(s,o(e))),{c(){t&&he(t.$$.fragment),n=Ne()},m(a,u){t&&ce(t,a,u),I(a,n,u),i=!0},p(a,u){if(u&32&&s!==(s=a[5].unorderedlistitem||a[5].listitem)){if(t){Se();const l=t;N(l.$$.fragment,1,0,()=>{fe(l,1)}),Fe()}s?(t=Ke(s,o(a,u)),he(t.$$.fragment),D(t.$$.fragment,1),ce(t,n.parentNode,n)):t=null}else if(s){const l=u&64?wi(r,[ar(a[18])]):{};u&8388704&&(l.$$scope={dirty:u,ctx:a}),t.$set(l)}},i(a){i||(t&&D(t.$$.fragment,a),i=!0)},o(a){t&&N(t.$$.fragment,a),i=!1},d(a){a&&L(n),t&&fe(t,a)}}}function YB(e){let t,n,i=Ue(e[6].items),r=[];for(let o=0;o<i.length;o+=1)r[o]=o4(e4(e,i,o));const s=o=>N(r[o],1,1,()=>{r[o]=null});return{c(){for(let o=0;o<r.length;o+=1)r[o].c();t=Ne()},m(o,a){for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(o,a);I(o,t,a),n=!0},p(o,a){if(a&96){i=Ue(o[6].items);let u;for(u=0;u<i.length;u+=1){const l=e4(o,i,u);r[u]?(r[u].p(l,a),D(r[u],1)):(r[u]=o4(l),r[u].c(),D(r[u],1),r[u].m(t.parentNode,t))}for(Se(),u=i.length;u<r.length;u+=1)s(u);Fe()}},i(o){if(!n){for(let a=0;a<i.length;a+=1)D(r[a]);n=!0}},o(o){r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)N(r[a]);n=!1},d(o){o&&L(t),jt(r,o)}}}function XB(e){let t,n,i;return t=new Ca({props:{tokens:e[18].tokens,renderers:e[5]}}),{c(){he(t.$$.fragment),n=He()},m(r,s){ce(t,r,s),I(r,n,s),i=!0},p(r,s){const o={};s&64&&(o.tokens=r[18].tokens),s&32&&(o.renderers=r[5]),t.$set(o)},i(r){i||(D(t.$$.fragment,r),i=!0)},o(r){N(t.$$.fragment,r),i=!1},d(r){r&&L(n),fe(t,r)}}}function a4(e){let t,n,i;const r=[e[18]];var s=e[5].orderedlistitem||e[5].listitem;function o(a,u){let l={$$slots:{default:[XB]},$$scope:{ctx:a}};for(let c=0;c<r.length;c+=1)l=Pe(l,r[c]);return u!==void 0&&u&64&&(l=Pe(l,wi(r,[ar(a[18])]))),{props:l}}return s&&(t=Ke(s,o(e))),{c(){t&&he(t.$$.fragment),n=Ne()},m(a,u){t&&ce(t,a,u),I(a,n,u),i=!0},p(a,u){if(u&32&&s!==(s=a[5].orderedlistitem||a[5].listitem)){if(t){Se();const l=t;N(l.$$.fragment,1,0,()=>{fe(l,1)}),Fe()}s?(t=Ke(s,o(a,u)),he(t.$$.fragment),D(t.$$.fragment,1),ce(t,n.parentNode,n)):t=null}else if(s){const l=u&64?wi(r,[ar(a[18])]):{};u&8388704&&(l.$$scope={dirty:u,ctx:a}),t.$set(l)}},i(a){i||(t&&D(t.$$.fragment,a),i=!0)},o(a){t&&N(t.$$.fragment,a),i=!1},d(a){a&&L(n),t&&fe(t,a)}}}function KB(e){let t,n,i=Ue(e[6].items),r=[];for(let o=0;o<i.length;o+=1)r[o]=a4(t4(e,i,o));const s=o=>N(r[o],1,1,()=>{r[o]=null});return{c(){for(let o=0;o<r.length;o+=1)r[o].c();t=Ne()},m(o,a){for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(o,a);I(o,t,a),n=!0},p(o,a){if(a&96){i=Ue(o[6].items);let u;for(u=0;u<i.length;u+=1){const l=t4(o,i,u);r[u]?(r[u].p(l,a),D(r[u],1)):(r[u]=a4(l),r[u].c(),D(r[u],1),r[u].m(t.parentNode,t))}for(Se(),u=i.length;u<r.length;u+=1)s(u);Fe()}},i(o){if(!n){for(let a=0;a<i.length;a+=1)D(r[a]);n=!0}},o(o){r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)N(r[a]);n=!1},d(o){o&&L(t),jt(r,o)}}}function ZB(e){let t,n,i;return t=new Ca({props:{tokens:e[16].tokens,renderers:e[5]}}),{c(){he(t.$$.fragment),n=He()},m(r,s){ce(t,r,s),I(r,n,s),i=!0},p(r,s){const o={};s&4&&(o.tokens=r[16].tokens),s&32&&(o.renderers=r[5]),t.$set(o)},i(r){i||(D(t.$$.fragment,r),i=!0)},o(r){N(t.$$.fragment,r),i=!1},d(r){r&&L(n),fe(t,r)}}}function u4(e){let t,n,i;var r=e[5].tablecell;function s(o,a){return{props:{header:!0,align:o[6].align[o[15]]||"center",$$slots:{default:[ZB]},$$scope:{ctx:o}}}}return r&&(t=Ke(r,s(e))),{c(){t&&he(t.$$.fragment),n=Ne()},m(o,a){t&&ce(t,o,a),I(o,n,a),i=!0},p(o,a){if(a&32&&r!==(r=o[5].tablecell)){if(t){Se();const u=t;N(u.$$.fragment,1,0,()=>{fe(u,1)}),Fe()}r?(t=Ke(r,s(o)),he(t.$$.fragment),D(t.$$.fragment,1),ce(t,n.parentNode,n)):t=null}else if(r){const u={};a&64&&(u.align=o[6].align[o[15]]||"center"),a&8388644&&(u.$$scope={dirty:a,ctx:o}),t.$set(u)}},i(o){i||(t&&D(t.$$.fragment,o),i=!0)},o(o){t&&N(t.$$.fragment,o),i=!1},d(o){o&&L(n),t&&fe(t,o)}}}function JB(e){let t,n,i=Ue(e[2]),r=[];for(let o=0;o<i.length;o+=1)r[o]=u4(r4(e,i,o));const s=o=>N(r[o],1,1,()=>{r[o]=null});return{c(){for(let o=0;o<r.length;o+=1)r[o].c();t=Ne()},m(o,a){for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(o,a);I(o,t,a),n=!0},p(o,a){if(a&100){i=Ue(o[2]);let u;for(u=0;u<i.length;u+=1){const l=r4(o,i,u);r[u]?(r[u].p(l,a),D(r[u],1)):(r[u]=u4(l),r[u].c(),D(r[u],1),r[u].m(t.parentNode,t))}for(Se(),u=i.length;u<r.length;u+=1)s(u);Fe()}},i(o){if(!n){for(let a=0;a<i.length;a+=1)D(r[a]);n=!0}},o(o){r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)N(r[a]);n=!1},d(o){o&&L(t),jt(r,o)}}}function QB(e){let t,n,i;var r=e[5].tablerow;function s(o,a){return{props:{$$slots:{default:[JB]},$$scope:{ctx:o}}}}return r&&(t=Ke(r,s(e))),{c(){t&&he(t.$$.fragment),n=Ne()},m(o,a){t&&ce(t,o,a),I(o,n,a),i=!0},p(o,a){if(a&32&&r!==(r=o[5].tablerow)){if(t){Se();const u=t;N(u.$$.fragment,1,0,()=>{fe(u,1)}),Fe()}r?(t=Ke(r,s(o)),he(t.$$.fragment),D(t.$$.fragment,1),ce(t,n.parentNode,n)):t=null}else if(r){const u={};a&8388708&&(u.$$scope={dirty:a,ctx:o}),t.$set(u)}},i(o){i||(t&&D(t.$$.fragment,o),i=!0)},o(o){t&&N(t.$$.fragment,o),i=!1},d(o){o&&L(n),t&&fe(t,o)}}}function eU(e){let t,n;return t=new Ca({props:{tokens:e[13].tokens,renderers:e[5]}}),{c(){he(t.$$.fragment)},m(i,r){ce(t,i,r),n=!0},p(i,r){const s={};r&8&&(s.tokens=i[13].tokens),r&32&&(s.renderers=i[5]),t.$set(s)},i(i){n||(D(t.$$.fragment,i),n=!0)},o(i){N(t.$$.fragment,i),n=!1},d(i){fe(t,i)}}}function l4(e){let t,n,i;var r=e[5].tablecell;function s(o,a){return{props:{header:!1,align:o[6].align[o[15]]||"center",$$slots:{default:[eU]},$$scope:{ctx:o}}}}return r&&(t=Ke(r,s(e))),{c(){t&&he(t.$$.fragment),n=Ne()},m(o,a){t&&ce(t,o,a),I(o,n,a),i=!0},p(o,a){if(a&32&&r!==(r=o[5].tablecell)){if(t){Se();const u=t;N(u.$$.fragment,1,0,()=>{fe(u,1)}),Fe()}r?(t=Ke(r,s(o)),he(t.$$.fragment),D(t.$$.fragment,1),ce(t,n.parentNode,n)):t=null}else if(r){const u={};a&64&&(u.align=o[6].align[o[15]]||"center"),a&8388648&&(u.$$scope={dirty:a,ctx:o}),t.$set(u)}},i(o){i||(t&&D(t.$$.fragment,o),i=!0)},o(o){t&&N(t.$$.fragment,o),i=!1},d(o){o&&L(n),t&&fe(t,o)}}}function tU(e){let t,n,i=Ue(e[10]),r=[];for(let o=0;o<i.length;o+=1)r[o]=l4(i4(e,i,o));const s=o=>N(r[o],1,1,()=>{r[o]=null});return{c(){for(let o=0;o<r.length;o+=1)r[o].c();t=He()},m(o,a){for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(o,a);I(o,t,a),n=!0},p(o,a){if(a&104){i=Ue(o[10]);let u;for(u=0;u<i.length;u+=1){const l=i4(o,i,u);r[u]?(r[u].p(l,a),D(r[u],1)):(r[u]=l4(l),r[u].c(),D(r[u],1),r[u].m(t.parentNode,t))}for(Se(),u=i.length;u<r.length;u+=1)s(u);Fe()}},i(o){if(!n){for(let a=0;a<i.length;a+=1)D(r[a]);n=!0}},o(o){r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)N(r[a]);n=!1},d(o){o&&L(t),jt(r,o)}}}function c4(e){let t,n,i;var r=e[5].tablerow;function s(o,a){return{props:{$$slots:{default:[tU]},$$scope:{ctx:o}}}}return r&&(t=Ke(r,s(e))),{c(){t&&he(t.$$.fragment),n=Ne()},m(o,a){t&&ce(t,o,a),I(o,n,a),i=!0},p(o,a){if(a&32&&r!==(r=o[5].tablerow)){if(t){Se();const u=t;N(u.$$.fragment,1,0,()=>{fe(u,1)}),Fe()}r?(t=Ke(r,s(o)),he(t.$$.fragment),D(t.$$.fragment,1),ce(t,n.parentNode,n)):t=null}else if(r){const u={};a&8388712&&(u.$$scope={dirty:a,ctx:o}),t.$set(u)}},i(o){i||(t&&D(t.$$.fragment,o),i=!0)},o(o){t&&N(t.$$.fragment,o),i=!1},d(o){o&&L(n),t&&fe(t,o)}}}function nU(e){let t,n,i=Ue(e[3]),r=[];for(let o=0;o<i.length;o+=1)r[o]=c4(n4(e,i,o));const s=o=>N(r[o],1,1,()=>{r[o]=null});return{c(){for(let o=0;o<r.length;o+=1)r[o].c();t=Ne()},m(o,a){for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(o,a);I(o,t,a),n=!0},p(o,a){if(a&104){i=Ue(o[3]);let u;for(u=0;u<i.length;u+=1){const l=n4(o,i,u);r[u]?(r[u].p(l,a),D(r[u],1)):(r[u]=c4(l),r[u].c(),D(r[u],1),r[u].m(t.parentNode,t))}for(Se(),u=i.length;u<r.length;u+=1)s(u);Fe()}},i(o){if(!n){for(let a=0;a<i.length;a+=1)D(r[a]);n=!0}},o(o){r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)N(r[a]);n=!1},d(o){o&&L(t),jt(r,o)}}}function iU(e){let t,n,i,r,s;var o=e[5].tablehead;function a(c,f){return{props:{$$slots:{default:[QB]},$$scope:{ctx:c}}}}o&&(t=Ke(o,a(e)));var u=e[5].tablebody;function l(c,f){return{props:{$$slots:{default:[nU]},$$scope:{ctx:c}}}}return u&&(i=Ke(u,l(e))),{c(){t&&he(t.$$.fragment),n=He(),i&&he(i.$$.fragment),r=Ne()},m(c,f){t&&ce(t,c,f),I(c,n,f),i&&ce(i,c,f),I(c,r,f),s=!0},p(c,f){if(f&32&&o!==(o=c[5].tablehead)){if(t){Se();const d=t;N(d.$$.fragment,1,0,()=>{fe(d,1)}),Fe()}o?(t=Ke(o,a(c)),he(t.$$.fragment),D(t.$$.fragment,1),ce(t,n.parentNode,n)):t=null}else if(o){const d={};f&8388708&&(d.$$scope={dirty:f,ctx:c}),t.$set(d)}if(f&32&&u!==(u=c[5].tablebody)){if(i){Se();const d=i;N(d.$$.fragment,1,0,()=>{fe(d,1)}),Fe()}u?(i=Ke(u,l(c)),he(i.$$.fragment),D(i.$$.fragment,1),ce(i,r.parentNode,r)):i=null}else if(u){const d={};f&8388712&&(d.$$scope={dirty:f,ctx:c}),i.$set(d)}},i(c){s||(t&&D(t.$$.fragment,c),i&&D(i.$$.fragment,c),s=!0)},o(c){t&&N(t.$$.fragment,c),i&&N(i.$$.fragment,c),s=!1},d(c){c&&(L(n),L(r)),t&&fe(t,c),i&&fe(i,c)}}}function f4(e){let t,n;const i=[e[7],{renderers:e[5]}];let r={};for(let s=0;s<i.length;s+=1)r=Pe(r,i[s]);return t=new Ca({props:r}),{c(){he(t.$$.fragment)},m(s,o){ce(t,s,o),n=!0},p(s,o){const a=o&34?wi(i,[o&2&&ar(s[7]),o&32&&{renderers:s[5]}]):{};t.$set(a)},i(s){n||(D(t.$$.fragment,s),n=!0)},o(s){N(t.$$.fragment,s),n=!1},d(s){fe(t,s)}}}function rU(e){let t,n,i,r;const s=[PB,IB],o=[];function a(u,l){return u[0]?u[5][u[0]]?1:-1:0}return~(t=a(e))&&(n=o[t]=s[t](e)),{c(){n&&n.c(),i=Ne()},m(u,l){~t&&o[t].m(u,l),I(u,i,l),r=!0},p(u,[l]){let c=t;t=a(u),t===c?~t&&o[t].p(u,l):(n&&(Se(),N(o[c],1,1,()=>{o[c]=null}),Fe()),~t?(n=o[t],n?n.p(u,l):(n=o[t]=s[t](u),n.c()),D(n,1),n.m(i.parentNode,i)):n=null)},i(u){r||(D(n),r=!0)},o(u){N(n),r=!1},d(u){u&&L(i),~t&&o[t].d(u)}}}function sU(e,t,n){const i=["type","tokens","header","rows","ordered","renderers"];let r=v5(t,i),{type:s=void 0}=t,{tokens:o=void 0}=t,{header:a=void 0}=t,{rows:u=void 0}=t,{ordered:l=!1}=t,{renderers:c}=t;return LB(),e.$$set=f=>{t=Pe(Pe({},t),o2(f)),n(6,r=v5(t,i)),"type"in f&&n(0,s=f.type),"tokens"in f&&n(1,o=f.tokens),"header"in f&&n(2,a=f.header),"rows"in f&&n(3,u=f.rows),"ordered"in f&&n(4,l=f.ordered),"renderers"in f&&n(5,c=f.renderers)},[s,o,a,u,l,c,r]}let Ca=class extends xe{constructor(t){super(),ve(this,t,sU,rU,ye,{type:0,tokens:1,header:2,rows:3,ordered:4,renderers:5})}};function g2(){return{async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,hooks:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}let yo=g2();function d4(e){yo=e}const h4=/[&<>"']/,oU=new RegExp(h4.source,"g"),p4=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,aU=new RegExp(p4.source,"g"),uU={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},g4=e=>uU[e];function _n(e,t){if(t){if(h4.test(e))return e.replace(oU,g4)}else if(p4.test(e))return e.replace(aU,g4);return e}const lU=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function m4(e){return e.replace(lU,(t,n)=>(n=n.toLowerCase(),n==="colon"?":":n.charAt(0)==="#"?n.charAt(1)==="x"?String.fromCharCode(parseInt(n.substring(2),16)):String.fromCharCode(+n.substring(1)):""))}const cU=/(^|[^\[])\^/g;function it(e,t){e=typeof e=="string"?e:e.source,t=t||"";const n={replace:(i,r)=>(r=r.source||r,r=r.replace(cU,"$1"),e=e.replace(i,r),n),getRegex:()=>new RegExp(e,t)};return n}const fU=/[^\w:]/g,dU=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function y4(e,t,n){if(e){let i;try{i=decodeURIComponent(m4(n)).replace(fU,"").toLowerCase()}catch{return null}if(i.indexOf("javascript:")===0||i.indexOf("vbscript:")===0||i.indexOf("data:")===0)return null}t&&!dU.test(n)&&(n=mU(t,n));try{n=encodeURI(n).replace(/%25/g,"%")}catch{return null}return n}const Bh={},hU=/^[^:]+:\/*[^/]*$/,pU=/^([^:]+:)[\s\S]*$/,gU=/^([^:]+:\/*[^/]*)[\s\S]*$/;function mU(e,t){Bh[" "+e]||(hU.test(e)?Bh[" "+e]=e+"/":Bh[" "+e]=jh(e,"/",!0)),e=Bh[" "+e];const n=e.indexOf(":")===-1;return t.substring(0,2)==="//"?n?t:e.replace(pU,"$1")+t:t.charAt(0)==="/"?n?t:e.replace(gU,"$1")+t:e+t}const Uh={exec:function(){}};function b4(e,t){const n=e.replace(/\|/g,(s,o,a)=>{let u=!1,l=o;for(;--l>=0&&a[l]==="\\";)u=!u;return u?"|":" |"}),i=n.split(/ \|/);let r=0;if(i[0].trim()||i.shift(),i.length>0&&!i[i.length-1].trim()&&i.pop(),i.length>t)i.splice(t);else for(;i.length<t;)i.push("");for(;r<i.length;r++)i[r]=i[r].trim().replace(/\\\|/g,"|");return i}function jh(e,t,n){const i=e.length;if(i===0)return"";let r=0;for(;r<i;){const s=e.charAt(i-r-1);if(s===t&&!n)r++;else if(s!==t&&n)r++;else break}return e.slice(0,i-r)}function yU(e,t){if(e.indexOf(t[1])===-1)return-1;const n=e.length;let i=0,r=0;for(;r<n;r++)if(e[r]==="\\")r++;else if(e[r]===t[0])i++;else if(e[r]===t[1]&&(i--,i<0))return r;return-1}function bU(e,t){!e||e.silent||(t&&console.warn("marked(): callback is deprecated since version 5.0.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/using_pro#async"),(e.sanitize||e.sanitizer)&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options"),(e.highlight||e.langPrefix!=="language-")&&console.warn("marked(): highlight and langPrefix parameters are deprecated since version 5.0.0, should not be used and will be removed in the future. Instead use https://www.npmjs.com/package/marked-highlight."),e.mangle&&console.warn("marked(): mangle parameter is enabled by default, but is deprecated since version 5.0.0, and will be removed in the future. To clear this warning, install https://www.npmjs.com/package/marked-mangle, or disable by setting `{mangle: false}`."),e.baseUrl&&console.warn("marked(): baseUrl parameter is deprecated since version 5.0.0, should not be used and will be removed in the future. Instead use https://www.npmjs.com/package/marked-base-url."),e.smartypants&&console.warn("marked(): smartypants parameter is deprecated since version 5.0.0, should not be used and will be removed in the future. Instead use https://www.npmjs.com/package/marked-smartypants."),e.xhtml&&console.warn("marked(): xhtml parameter is deprecated since version 5.0.0, should not be used and will be removed in the future. Instead use https://www.npmjs.com/package/marked-xhtml."),(e.headerIds||e.headerPrefix)&&console.warn("marked(): headerIds and headerPrefix parameters enabled by default, but are deprecated since version 5.0.0, and will be removed in the future. To clear this warning, install  https://www.npmjs.com/package/marked-gfm-heading-id, or disable by setting `{headerIds: false}`."))}function v4(e,t,n,i){const r=t.href,s=t.title?_n(t.title):null,o=e[1].replace(/\\([\[\]])/g,"$1");if(e[0].charAt(0)!=="!"){i.state.inLink=!0;const a={type:"link",raw:n,href:r,title:s,text:o,tokens:i.inlineTokens(o)};return i.state.inLink=!1,a}return{type:"image",raw:n,href:r,title:s,text:_n(o)}}function vU(e,t){const n=e.match(/^(\s+)(?:```)/);if(n===null)return t;const i=n[1];return t.split(`
`).map(r=>{const s=r.match(/^\s+/);if(s===null)return r;const[o]=s;return o.length>=i.length?r.slice(i.length):r}).join(`
`)}class qh{constructor(t){this.options=t||yo}space(t){const n=this.rules.block.newline.exec(t);if(n&&n[0].length>0)return{type:"space",raw:n[0]}}code(t){const n=this.rules.block.code.exec(t);if(n){const i=n[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:n[0],codeBlockStyle:"indented",text:this.options.pedantic?i:jh(i,`
`)}}}fences(t){const n=this.rules.block.fences.exec(t);if(n){const i=n[0],r=vU(i,n[3]||"");return{type:"code",raw:i,lang:n[2]?n[2].trim().replace(this.rules.inline._escapes,"$1"):n[2],text:r}}}heading(t){const n=this.rules.block.heading.exec(t);if(n){let i=n[2].trim();if(/#$/.test(i)){const r=jh(i,"#");(this.options.pedantic||!r||/ $/.test(r))&&(i=r.trim())}return{type:"heading",raw:n[0],depth:n[1].length,text:i,tokens:this.lexer.inline(i)}}}hr(t){const n=this.rules.block.hr.exec(t);if(n)return{type:"hr",raw:n[0]}}blockquote(t){const n=this.rules.block.blockquote.exec(t);if(n){const i=n[0].replace(/^ *>[ \t]?/gm,""),r=this.lexer.state.top;this.lexer.state.top=!0;const s=this.lexer.blockTokens(i);return this.lexer.state.top=r,{type:"blockquote",raw:n[0],tokens:s,text:i}}}list(t){let n=this.rules.block.list.exec(t);if(n){let i,r,s,o,a,u,l,c,f,d,h,p,g=n[1].trim();const m=g.length>1,y={type:"list",raw:"",ordered:m,start:m?+g.slice(0,-1):"",loose:!1,items:[]};g=m?`\\d{1,9}\\${g.slice(-1)}`:`\\${g}`,this.options.pedantic&&(g=m?g:"[*+-]");const b=new RegExp(`^( {0,3}${g})((?:[	 ][^\\n]*)?(?:\\n|$))`);for(;t&&(p=!1,!(!(n=b.exec(t))||this.rules.block.hr.test(t)));){if(i=n[0],t=t.substring(i.length),c=n[2].split(`
`,1)[0].replace(/^\t+/,x=>" ".repeat(3*x.length)),f=t.split(`
`,1)[0],this.options.pedantic?(o=2,h=c.trimLeft()):(o=n[2].search(/[^ ]/),o=o>4?1:o,h=c.slice(o),o+=n[1].length),u=!1,!c&&/^ *$/.test(f)&&(i+=f+`
`,t=t.substring(f.length+1),p=!0),!p){const x=new RegExp(`^ {0,${Math.min(3,o-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),_=new RegExp(`^ {0,${Math.min(3,o-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),E=new RegExp(`^ {0,${Math.min(3,o-1)}}(?:\`\`\`|~~~)`),w=new RegExp(`^ {0,${Math.min(3,o-1)}}#`);for(;t&&(d=t.split(`
`,1)[0],f=d,this.options.pedantic&&(f=f.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!(E.test(f)||w.test(f)||x.test(f)||_.test(t)));){if(f.search(/[^ ]/)>=o||!f.trim())h+=`
`+f.slice(o);else{if(u||c.search(/[^ ]/)>=4||E.test(c)||w.test(c)||_.test(c))break;h+=`
`+f}!u&&!f.trim()&&(u=!0),i+=d+`
`,t=t.substring(d.length+1),c=f.slice(o)}}y.loose||(l?y.loose=!0:/\n *\n *$/.test(i)&&(l=!0)),this.options.gfm&&(r=/^\[[ xX]\] /.exec(h),r&&(s=r[0]!=="[ ] ",h=h.replace(/^\[[ xX]\] +/,""))),y.items.push({type:"list_item",raw:i,task:!!r,checked:s,loose:!1,text:h}),y.raw+=i}y.items[y.items.length-1].raw=i.trimRight(),y.items[y.items.length-1].text=h.trimRight(),y.raw=y.raw.trimRight();const v=y.items.length;for(a=0;a<v;a++)if(this.lexer.state.top=!1,y.items[a].tokens=this.lexer.blockTokens(y.items[a].text,[]),!y.loose){const x=y.items[a].tokens.filter(E=>E.type==="space"),_=x.length>0&&x.some(E=>/\n.*\n/.test(E.raw));y.loose=_}if(y.loose)for(a=0;a<v;a++)y.items[a].loose=!0;return y}}html(t){const n=this.rules.block.html.exec(t);if(n){const i={type:"html",block:!0,raw:n[0],pre:!this.options.sanitizer&&(n[1]==="pre"||n[1]==="script"||n[1]==="style"),text:n[0]};if(this.options.sanitize){const r=this.options.sanitizer?this.options.sanitizer(n[0]):_n(n[0]);i.type="paragraph",i.text=r,i.tokens=this.lexer.inline(r)}return i}}def(t){const n=this.rules.block.def.exec(t);if(n){const i=n[1].toLowerCase().replace(/\s+/g," "),r=n[2]?n[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline._escapes,"$1"):"",s=n[3]?n[3].substring(1,n[3].length-1).replace(this.rules.inline._escapes,"$1"):n[3];return{type:"def",tag:i,raw:n[0],href:r,title:s}}}table(t){const n=this.rules.block.table.exec(t);if(n){const i={type:"table",header:b4(n[1]).map(r=>({text:r})),align:n[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:n[3]&&n[3].trim()?n[3].replace(/\n[ \t]*$/,"").split(`
`):[]};if(i.header.length===i.align.length){i.raw=n[0];let r=i.align.length,s,o,a,u;for(s=0;s<r;s++)/^ *-+: *$/.test(i.align[s])?i.align[s]="right":/^ *:-+: *$/.test(i.align[s])?i.align[s]="center":/^ *:-+ *$/.test(i.align[s])?i.align[s]="left":i.align[s]=null;for(r=i.rows.length,s=0;s<r;s++)i.rows[s]=b4(i.rows[s],i.header.length).map(l=>({text:l}));for(r=i.header.length,o=0;o<r;o++)i.header[o].tokens=this.lexer.inline(i.header[o].text);for(r=i.rows.length,o=0;o<r;o++)for(u=i.rows[o],a=0;a<u.length;a++)u[a].tokens=this.lexer.inline(u[a].text);return i}}}lheading(t){const n=this.rules.block.lheading.exec(t);if(n)return{type:"heading",raw:n[0],depth:n[2].charAt(0)==="="?1:2,text:n[1],tokens:this.lexer.inline(n[1])}}paragraph(t){const n=this.rules.block.paragraph.exec(t);if(n){const i=n[1].charAt(n[1].length-1)===`
`?n[1].slice(0,-1):n[1];return{type:"paragraph",raw:n[0],text:i,tokens:this.lexer.inline(i)}}}text(t){const n=this.rules.block.text.exec(t);if(n)return{type:"text",raw:n[0],text:n[0],tokens:this.lexer.inline(n[0])}}escape(t){const n=this.rules.inline.escape.exec(t);if(n)return{type:"escape",raw:n[0],text:_n(n[1])}}tag(t){const n=this.rules.inline.tag.exec(t);if(n)return!this.lexer.state.inLink&&/^<a /i.test(n[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(n[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(n[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(n[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:n[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(n[0]):_n(n[0]):n[0]}}link(t){const n=this.rules.inline.link.exec(t);if(n){const i=n[2].trim();if(!this.options.pedantic&&/^</.test(i)){if(!/>$/.test(i))return;const o=jh(i.slice(0,-1),"\\");if((i.length-o.length)%2===0)return}else{const o=yU(n[2],"()");if(o>-1){const u=(n[0].indexOf("!")===0?5:4)+n[1].length+o;n[2]=n[2].substring(0,o),n[0]=n[0].substring(0,u).trim(),n[3]=""}}let r=n[2],s="";if(this.options.pedantic){const o=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(r);o&&(r=o[1],s=o[3])}else s=n[3]?n[3].slice(1,-1):"";return r=r.trim(),/^</.test(r)&&(this.options.pedantic&&!/>$/.test(i)?r=r.slice(1):r=r.slice(1,-1)),v4(n,{href:r&&r.replace(this.rules.inline._escapes,"$1"),title:s&&s.replace(this.rules.inline._escapes,"$1")},n[0],this.lexer)}}reflink(t,n){let i;if((i=this.rules.inline.reflink.exec(t))||(i=this.rules.inline.nolink.exec(t))){let r=(i[2]||i[1]).replace(/\s+/g," ");if(r=n[r.toLowerCase()],!r){const s=i[0].charAt(0);return{type:"text",raw:s,text:s}}return v4(i,r,i[0],this.lexer)}}emStrong(t,n,i=""){let r=this.rules.inline.emStrong.lDelim.exec(t);if(!r||r[3]&&i.match(/[\p{L}\p{N}]/u))return;if(!(r[1]||r[2]||"")||!i||this.rules.inline.punctuation.exec(i)){const o=r[0].length-1;let a,u,l=o,c=0;const f=r[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(f.lastIndex=0,n=n.slice(-1*t.length+o);(r=f.exec(n))!=null;){if(a=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!a)continue;if(u=a.length,r[3]||r[4]){l+=u;continue}else if((r[5]||r[6])&&o%3&&!((o+u)%3)){c+=u;continue}if(l-=u,l>0)continue;u=Math.min(u,u+l+c);const d=t.slice(0,o+r.index+u+1);if(Math.min(o,u)%2){const p=d.slice(1,-1);return{type:"em",raw:d,text:p,tokens:this.lexer.inlineTokens(p)}}const h=d.slice(2,-2);return{type:"strong",raw:d,text:h,tokens:this.lexer.inlineTokens(h)}}}}codespan(t){const n=this.rules.inline.code.exec(t);if(n){let i=n[2].replace(/\n/g," ");const r=/[^ ]/.test(i),s=/^ /.test(i)&&/ $/.test(i);return r&&s&&(i=i.substring(1,i.length-1)),i=_n(i,!0),{type:"codespan",raw:n[0],text:i}}}br(t){const n=this.rules.inline.br.exec(t);if(n)return{type:"br",raw:n[0]}}del(t){const n=this.rules.inline.del.exec(t);if(n)return{type:"del",raw:n[0],text:n[2],tokens:this.lexer.inlineTokens(n[2])}}autolink(t,n){const i=this.rules.inline.autolink.exec(t);if(i){let r,s;return i[2]==="@"?(r=_n(this.options.mangle?n(i[1]):i[1]),s="mailto:"+r):(r=_n(i[1]),s=r),{type:"link",raw:i[0],text:r,href:s,tokens:[{type:"text",raw:r,text:r}]}}}url(t,n){let i;if(i=this.rules.inline.url.exec(t)){let r,s;if(i[2]==="@")r=_n(this.options.mangle?n(i[0]):i[0]),s="mailto:"+r;else{let o;do o=i[0],i[0]=this.rules.inline._backpedal.exec(i[0])[0];while(o!==i[0]);r=_n(i[0]),i[1]==="www."?s="http://"+i[0]:s=i[0]}return{type:"link",raw:i[0],text:r,href:s,tokens:[{type:"text",raw:r,text:r}]}}}inlineText(t,n){const i=this.rules.inline.text.exec(t);if(i){let r;return this.lexer.state.inRawBlock?r=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(i[0]):_n(i[0]):i[0]:r=_n(this.options.smartypants?n(i[0]):i[0]),{type:"text",raw:i[0],text:r}}}}const Ce={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:Uh,lheading:/^((?:(?!^bull ).|\n(?!\n|bull ))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/};Ce._label=/(?!\s*\])(?:\\.|[^\[\]\\])+/,Ce._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/,Ce.def=it(Ce.def).replace("label",Ce._label).replace("title",Ce._title).getRegex(),Ce.bullet=/(?:[*+-]|\d{1,9}[.)])/,Ce.listItemStart=it(/^( *)(bull) */).replace("bull",Ce.bullet).getRegex(),Ce.list=it(Ce.list).replace(/bull/g,Ce.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+Ce.def.source+")").getRegex(),Ce._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Ce._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,Ce.html=it(Ce.html,"i").replace("comment",Ce._comment).replace("tag",Ce._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Ce.lheading=it(Ce.lheading).replace(/bull/g,Ce.bullet).getRegex(),Ce.paragraph=it(Ce._paragraph).replace("hr",Ce.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ce._tag).getRegex(),Ce.blockquote=it(Ce.blockquote).replace("paragraph",Ce.paragraph).getRegex(),Ce.normal={...Ce},Ce.gfm={...Ce.normal,table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"},Ce.gfm.table=it(Ce.gfm.table).replace("hr",Ce.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ce._tag).getRegex(),Ce.gfm.paragraph=it(Ce._paragraph).replace("hr",Ce.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",Ce.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ce._tag).getRegex(),Ce.pedantic={...Ce.normal,html:it(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",Ce._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Uh,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:it(Ce.normal._paragraph).replace("hr",Ce.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",Ce.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()};const ae={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:Uh,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,rDelimAst:/^[^_*]*?__[^_*]*?\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\*)[punct](\*+)(?=[\s]|$)|[^punct\s](\*+)(?!\*)(?=[punct\s]|$)|(?!\*)[punct\s](\*+)(?=[^punct\s])|[\s](\*+)(?!\*)(?=[punct])|(?!\*)[punct](\*+)(?!\*)(?=[punct])|[^punct\s](\*+)(?=[^punct\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?_[^_*]*?(?=\*\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\s]|$)|[^punct\s](_+)(?!_)(?=[punct\s]|$)|(?!_)[punct\s](_+)(?=[^punct\s])|[\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:Uh,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^((?![*_])[\spunctuation])/};ae._punctuation="\\p{P}$+<=>`^|~",ae.punctuation=it(ae.punctuation,"u").replace(/punctuation/g,ae._punctuation).getRegex(),ae.blockSkip=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,ae.anyPunctuation=/\\[punct]/g,ae._escapes=/\\([punct])/g,ae._comment=it(Ce._comment).replace("(?:-->|$)","-->").getRegex(),ae.emStrong.lDelim=it(ae.emStrong.lDelim,"u").replace(/punct/g,ae._punctuation).getRegex(),ae.emStrong.rDelimAst=it(ae.emStrong.rDelimAst,"gu").replace(/punct/g,ae._punctuation).getRegex(),ae.emStrong.rDelimUnd=it(ae.emStrong.rDelimUnd,"gu").replace(/punct/g,ae._punctuation).getRegex(),ae.anyPunctuation=it(ae.anyPunctuation,"gu").replace(/punct/g,ae._punctuation).getRegex(),ae._escapes=it(ae._escapes,"gu").replace(/punct/g,ae._punctuation).getRegex(),ae._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,ae._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,ae.autolink=it(ae.autolink).replace("scheme",ae._scheme).replace("email",ae._email).getRegex(),ae._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,ae.tag=it(ae.tag).replace("comment",ae._comment).replace("attribute",ae._attribute).getRegex(),ae._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,ae._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,ae._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,ae.link=it(ae.link).replace("label",ae._label).replace("href",ae._href).replace("title",ae._title).getRegex(),ae.reflink=it(ae.reflink).replace("label",ae._label).replace("ref",Ce._label).getRegex(),ae.nolink=it(ae.nolink).replace("ref",Ce._label).getRegex(),ae.reflinkSearch=it(ae.reflinkSearch,"g").replace("reflink",ae.reflink).replace("nolink",ae.nolink).getRegex(),ae.normal={...ae},ae.pedantic={...ae.normal,strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:it(/^!?\[(label)\]\((.*?)\)/).replace("label",ae._label).getRegex(),reflink:it(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",ae._label).getRegex()},ae.gfm={...ae.normal,escape:it(ae.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},ae.gfm.url=it(ae.gfm.url,"i").replace("email",ae.gfm._extended_email).getRegex(),ae.breaks={...ae.gfm,br:it(ae.br).replace("{2,}","*").getRegex(),text:it(ae.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()};function xU(e){return e.replace(/---/g,"").replace(/--/g,"").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1").replace(/'/g,"").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1").replace(/"/g,"").replace(/\.{3}/g,"")}function x4(e){let t="",n,i;const r=e.length;for(n=0;n<r;n++)i=e.charCodeAt(n),Math.random()>.5&&(i="x"+i.toString(16)),t+="&#"+i+";";return t}class ur{constructor(t){this.tokens=[],this.tokens.links=Object.create(null),this.options=t||yo,this.options.tokenizer=this.options.tokenizer||new qh,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const n={block:Ce.normal,inline:ae.normal};this.options.pedantic?(n.block=Ce.pedantic,n.inline=ae.pedantic):this.options.gfm&&(n.block=Ce.gfm,this.options.breaks?n.inline=ae.breaks:n.inline=ae.gfm),this.tokenizer.rules=n}static get rules(){return{block:Ce,inline:ae}}static lex(t,n){return new ur(n).lex(t)}static lexInline(t,n){return new ur(n).inlineTokens(t)}lex(t){t=t.replace(/\r\n|\r/g,`
`),this.blockTokens(t,this.tokens);let n;for(;n=this.inlineQueue.shift();)this.inlineTokens(n.src,n.tokens);return this.tokens}blockTokens(t,n=[]){this.options.pedantic?t=t.replace(/\t/g,"    ").replace(/^ +$/gm,""):t=t.replace(/^( *)(\t+)/gm,(a,u,l)=>u+"    ".repeat(l.length));let i,r,s,o;for(;t;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(a=>(i=a.call({lexer:this},t,n))?(t=t.substring(i.raw.length),n.push(i),!0):!1))){if(i=this.tokenizer.space(t)){t=t.substring(i.raw.length),i.raw.length===1&&n.length>0?n[n.length-1].raw+=`
`:n.push(i);continue}if(i=this.tokenizer.code(t)){t=t.substring(i.raw.length),r=n[n.length-1],r&&(r.type==="paragraph"||r.type==="text")?(r.raw+=`
`+i.raw,r.text+=`
`+i.text,this.inlineQueue[this.inlineQueue.length-1].src=r.text):n.push(i);continue}if(i=this.tokenizer.fences(t)){t=t.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.heading(t)){t=t.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.hr(t)){t=t.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.blockquote(t)){t=t.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.list(t)){t=t.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.html(t)){t=t.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.def(t)){t=t.substring(i.raw.length),r=n[n.length-1],r&&(r.type==="paragraph"||r.type==="text")?(r.raw+=`
`+i.raw,r.text+=`
`+i.raw,this.inlineQueue[this.inlineQueue.length-1].src=r.text):this.tokens.links[i.tag]||(this.tokens.links[i.tag]={href:i.href,title:i.title});continue}if(i=this.tokenizer.table(t)){t=t.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.lheading(t)){t=t.substring(i.raw.length),n.push(i);continue}if(s=t,this.options.extensions&&this.options.extensions.startBlock){let a=1/0;const u=t.slice(1);let l;this.options.extensions.startBlock.forEach(function(c){l=c.call({lexer:this},u),typeof l=="number"&&l>=0&&(a=Math.min(a,l))}),a<1/0&&a>=0&&(s=t.substring(0,a+1))}if(this.state.top&&(i=this.tokenizer.paragraph(s))){r=n[n.length-1],o&&r.type==="paragraph"?(r.raw+=`
`+i.raw,r.text+=`
`+i.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):n.push(i),o=s.length!==t.length,t=t.substring(i.raw.length);continue}if(i=this.tokenizer.text(t)){t=t.substring(i.raw.length),r=n[n.length-1],r&&r.type==="text"?(r.raw+=`
`+i.raw,r.text+=`
`+i.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):n.push(i);continue}if(t){const a="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(a);break}else throw new Error(a)}}return this.state.top=!0,n}inline(t,n=[]){return this.inlineQueue.push({src:t,tokens:n}),n}inlineTokens(t,n=[]){let i,r,s,o=t,a,u,l;if(this.tokens.links){const c=Object.keys(this.tokens.links);if(c.length>0)for(;(a=this.tokenizer.rules.inline.reflinkSearch.exec(o))!=null;)c.includes(a[0].slice(a[0].lastIndexOf("[")+1,-1))&&(o=o.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(a=this.tokenizer.rules.inline.blockSkip.exec(o))!=null;)o=o.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(a=this.tokenizer.rules.inline.anyPunctuation.exec(o))!=null;)o=o.slice(0,a.index)+"++"+o.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;t;)if(u||(l=""),u=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(c=>(i=c.call({lexer:this},t,n))?(t=t.substring(i.raw.length),n.push(i),!0):!1))){if(i=this.tokenizer.escape(t)){t=t.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.tag(t)){t=t.substring(i.raw.length),r=n[n.length-1],r&&i.type==="text"&&r.type==="text"?(r.raw+=i.raw,r.text+=i.text):n.push(i);continue}if(i=this.tokenizer.link(t)){t=t.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(i.raw.length),r=n[n.length-1],r&&i.type==="text"&&r.type==="text"?(r.raw+=i.raw,r.text+=i.text):n.push(i);continue}if(i=this.tokenizer.emStrong(t,o,l)){t=t.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.codespan(t)){t=t.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.br(t)){t=t.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.del(t)){t=t.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.autolink(t,x4)){t=t.substring(i.raw.length),n.push(i);continue}if(!this.state.inLink&&(i=this.tokenizer.url(t,x4))){t=t.substring(i.raw.length),n.push(i);continue}if(s=t,this.options.extensions&&this.options.extensions.startInline){let c=1/0;const f=t.slice(1);let d;this.options.extensions.startInline.forEach(function(h){d=h.call({lexer:this},f),typeof d=="number"&&d>=0&&(c=Math.min(c,d))}),c<1/0&&c>=0&&(s=t.substring(0,c+1))}if(i=this.tokenizer.inlineText(s,xU)){t=t.substring(i.raw.length),i.raw.slice(-1)!=="_"&&(l=i.raw.slice(-1)),u=!0,r=n[n.length-1],r&&r.type==="text"?(r.raw+=i.raw,r.text+=i.text):n.push(i);continue}if(t){const c="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(c);break}else throw new Error(c)}}return n}}let Wh=class{constructor(t){this.options=t||yo}code(t,n,i){const r=(n||"").match(/\S*/)[0];if(this.options.highlight){const s=this.options.highlight(t,r);s!=null&&s!==t&&(i=!0,t=s)}return t=t.replace(/\n$/,"")+`
`,r?'<pre><code class="'+this.options.langPrefix+_n(r)+'">'+(i?t:_n(t,!0))+`</code></pre>
`:"<pre><code>"+(i?t:_n(t,!0))+`</code></pre>
`}blockquote(t){return`<blockquote>
${t}</blockquote>
`}html(t,n){return t}heading(t,n,i,r){if(this.options.headerIds){const s=this.options.headerPrefix+r.slug(i);return`<h${n} id="${s}">${t}</h${n}>
`}return`<h${n}>${t}</h${n}>
`}hr(){return this.options.xhtml?`<hr/>
`:`<hr>
`}list(t,n,i){const r=n?"ol":"ul",s=n&&i!==1?' start="'+i+'"':"";return"<"+r+s+`>
`+t+"</"+r+`>
`}listitem(t){return`<li>${t}</li>
`}checkbox(t){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(t){return`<p>${t}</p>
`}table(t,n){return n&&(n=`<tbody>${n}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+n+`</table>
`}tablerow(t){return`<tr>
${t}</tr>
`}tablecell(t,n){const i=n.header?"th":"td";return(n.align?`<${i} align="${n.align}">`:`<${i}>`)+t+`</${i}>
`}strong(t){return`<strong>${t}</strong>`}em(t){return`<em>${t}</em>`}codespan(t){return`<code>${t}</code>`}br(){return this.options.xhtml?"<br/>":"<br>"}del(t){return`<del>${t}</del>`}link(t,n,i){if(t=y4(this.options.sanitize,this.options.baseUrl,t),t===null)return i;let r='<a href="'+t+'"';return n&&(r+=' title="'+n+'"'),r+=">"+i+"</a>",r}image(t,n,i){if(t=y4(this.options.sanitize,this.options.baseUrl,t),t===null)return i;let r=`<img src="${t}" alt="${i}"`;return n&&(r+=` title="${n}"`),r+=this.options.xhtml?"/>":">",r}text(t){return t}};class m2{strong(t){return t}em(t){return t}codespan(t){return t}del(t){return t}html(t){return t}text(t){return t}link(t,n,i){return""+i}image(t,n,i){return""+i}br(){return""}}class Hh{constructor(){this.seen={}}serialize(t){return t.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(t,n){let i=t,r=0;if(this.seen.hasOwnProperty(i)){r=this.seen[t];do r++,i=t+"-"+r;while(this.seen.hasOwnProperty(i))}return n||(this.seen[t]=r,this.seen[i]=0),i}slug(t,n={}){const i=this.serialize(t);return this.getNextSafeSlug(i,n.dryrun)}}class Ur{constructor(t){this.options=t||yo,this.options.renderer=this.options.renderer||new Wh,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new m2,this.slugger=new Hh}static parse(t,n){return new Ur(n).parse(t)}static parseInline(t,n){return new Ur(n).parseInline(t)}parse(t,n=!0){let i="",r,s,o,a,u,l,c,f,d,h,p,g,m,y,b,v,x,_,E;const w=t.length;for(r=0;r<w;r++){if(h=t[r],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[h.type]&&(E=this.options.extensions.renderers[h.type].call({parser:this},h),E!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(h.type))){i+=E||"";continue}switch(h.type){case"space":continue;case"hr":{i+=this.renderer.hr();continue}case"heading":{i+=this.renderer.heading(this.parseInline(h.tokens),h.depth,m4(this.parseInline(h.tokens,this.textRenderer)),this.slugger);continue}case"code":{i+=this.renderer.code(h.text,h.lang,h.escaped);continue}case"table":{for(f="",c="",a=h.header.length,s=0;s<a;s++)c+=this.renderer.tablecell(this.parseInline(h.header[s].tokens),{header:!0,align:h.align[s]});for(f+=this.renderer.tablerow(c),d="",a=h.rows.length,s=0;s<a;s++){for(l=h.rows[s],c="",u=l.length,o=0;o<u;o++)c+=this.renderer.tablecell(this.parseInline(l[o].tokens),{header:!1,align:h.align[o]});d+=this.renderer.tablerow(c)}i+=this.renderer.table(f,d);continue}case"blockquote":{d=this.parse(h.tokens),i+=this.renderer.blockquote(d);continue}case"list":{for(p=h.ordered,g=h.start,m=h.loose,a=h.items.length,d="",s=0;s<a;s++)b=h.items[s],v=b.checked,x=b.task,y="",b.task&&(_=this.renderer.checkbox(v),m?b.tokens.length>0&&b.tokens[0].type==="paragraph"?(b.tokens[0].text=_+" "+b.tokens[0].text,b.tokens[0].tokens&&b.tokens[0].tokens.length>0&&b.tokens[0].tokens[0].type==="text"&&(b.tokens[0].tokens[0].text=_+" "+b.tokens[0].tokens[0].text)):b.tokens.unshift({type:"text",text:_}):y+=_),y+=this.parse(b.tokens,m),d+=this.renderer.listitem(y,x,v);i+=this.renderer.list(d,p,g);continue}case"html":{i+=this.renderer.html(h.text,h.block);continue}case"paragraph":{i+=this.renderer.paragraph(this.parseInline(h.tokens));continue}case"text":{for(d=h.tokens?this.parseInline(h.tokens):h.text;r+1<w&&t[r+1].type==="text";)h=t[++r],d+=`
`+(h.tokens?this.parseInline(h.tokens):h.text);i+=n?this.renderer.paragraph(d):d;continue}default:{const C='Token with "'+h.type+'" type was not found.';if(this.options.silent){console.error(C);return}else throw new Error(C)}}}return i}parseInline(t,n){n=n||this.renderer;let i="",r,s,o;const a=t.length;for(r=0;r<a;r++){if(s=t[r],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[s.type]&&(o=this.options.extensions.renderers[s.type].call({parser:this},s),o!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(s.type))){i+=o||"";continue}switch(s.type){case"escape":{i+=n.text(s.text);break}case"html":{i+=n.html(s.text);break}case"link":{i+=n.link(s.href,s.title,this.parseInline(s.tokens,n));break}case"image":{i+=n.image(s.href,s.title,s.text);break}case"strong":{i+=n.strong(this.parseInline(s.tokens,n));break}case"em":{i+=n.em(this.parseInline(s.tokens,n));break}case"codespan":{i+=n.codespan(s.text);break}case"br":{i+=n.br();break}case"del":{i+=n.del(this.parseInline(s.tokens,n));break}case"text":{i+=n.text(s.text);break}default:{const u='Token with "'+s.type+'" type was not found.';if(this.options.silent){console.error(u);return}else throw new Error(u)}}}return i}}class Gc{constructor(t){this.options=t||yo}preprocess(t){return t}postprocess(t){return t}}Lt(Gc,"passThroughHooks",new Set(["preprocess","postprocess"]));class _U{constructor(...t){Cz(this,Yu);Lt(this,"defaults",g2());Lt(this,"options",this.setOptions);Lt(this,"parse",s2(this,Yu,g5).call(this,ur.lex,Ur.parse));Lt(this,"parseInline",s2(this,Yu,g5).call(this,ur.lexInline,Ur.parseInline));Lt(this,"Parser",Ur);Lt(this,"parser",Ur.parse);Lt(this,"Renderer",Wh);Lt(this,"TextRenderer",m2);Lt(this,"Lexer",ur);Lt(this,"lexer",ur.lex);Lt(this,"Tokenizer",qh);Lt(this,"Slugger",Hh);Lt(this,"Hooks",Gc);this.use(...t)}walkTokens(t,n){let i=[];for(const r of t)switch(i=i.concat(n.call(this,r)),r.type){case"table":{for(const s of r.header)i=i.concat(this.walkTokens(s.tokens,n));for(const s of r.rows)for(const o of s)i=i.concat(this.walkTokens(o.tokens,n));break}case"list":{i=i.concat(this.walkTokens(r.items,n));break}default:this.defaults.extensions&&this.defaults.extensions.childTokens&&this.defaults.extensions.childTokens[r.type]?this.defaults.extensions.childTokens[r.type].forEach(s=>{i=i.concat(this.walkTokens(r[s],n))}):r.tokens&&(i=i.concat(this.walkTokens(r.tokens,n)))}return i}use(...t){const n=this.defaults.extensions||{renderers:{},childTokens:{}};return t.forEach(i=>{const r={...i};if(r.async=this.defaults.async||r.async||!1,i.extensions&&(i.extensions.forEach(s=>{if(!s.name)throw new Error("extension name required");if(s.renderer){const o=n.renderers[s.name];o?n.renderers[s.name]=function(...a){let u=s.renderer.apply(this,a);return u===!1&&(u=o.apply(this,a)),u}:n.renderers[s.name]=s.renderer}if(s.tokenizer){if(!s.level||s.level!=="block"&&s.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");n[s.level]?n[s.level].unshift(s.tokenizer):n[s.level]=[s.tokenizer],s.start&&(s.level==="block"?n.startBlock?n.startBlock.push(s.start):n.startBlock=[s.start]:s.level==="inline"&&(n.startInline?n.startInline.push(s.start):n.startInline=[s.start]))}s.childTokens&&(n.childTokens[s.name]=s.childTokens)}),r.extensions=n),i.renderer){const s=this.defaults.renderer||new Wh(this.defaults);for(const o in i.renderer){const a=s[o];s[o]=(...u)=>{let l=i.renderer[o].apply(s,u);return l===!1&&(l=a.apply(s,u)),l}}r.renderer=s}if(i.tokenizer){const s=this.defaults.tokenizer||new qh(this.defaults);for(const o in i.tokenizer){const a=s[o];s[o]=(...u)=>{let l=i.tokenizer[o].apply(s,u);return l===!1&&(l=a.apply(s,u)),l}}r.tokenizer=s}if(i.hooks){const s=this.defaults.hooks||new Gc;for(const o in i.hooks){const a=s[o];Gc.passThroughHooks.has(o)?s[o]=u=>{if(this.defaults.async)return Promise.resolve(i.hooks[o].call(s,u)).then(c=>a.call(s,c));const l=i.hooks[o].call(s,u);return a.call(s,l)}:s[o]=(...u)=>{let l=i.hooks[o].apply(s,u);return l===!1&&(l=a.apply(s,u)),l}}r.hooks=s}if(i.walkTokens){const s=this.defaults.walkTokens;r.walkTokens=function(o){let a=[];return a.push(i.walkTokens.call(this,o)),s&&(a=a.concat(s.call(this,o))),a}}this.defaults={...this.defaults,...r}}),this}setOptions(t){return this.defaults={...this.defaults,...t},this}}Yu=new WeakSet,g5=function(t,n){return(i,r,s)=>{typeof r=="function"&&(s=r,r=null);const o={...r};r={...this.defaults,...o};const a=s2(this,Yu,kz).call(this,r.silent,r.async,s);if(typeof i>"u"||i===null)return a(new Error("marked(): input parameter is undefined or null"));if(typeof i!="string")return a(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(i)+", string expected"));if(bU(r,s),r.hooks&&(r.hooks.options=r),s){const u=r.highlight;let l;try{r.hooks&&(i=r.hooks.preprocess(i)),l=t(i,r)}catch(d){return a(d)}const c=d=>{let h;if(!d)try{r.walkTokens&&this.walkTokens(l,r.walkTokens),h=n(l,r),r.hooks&&(h=r.hooks.postprocess(h))}catch(p){d=p}return r.highlight=u,d?a(d):s(null,h)};if(!u||u.length<3||(delete r.highlight,!l.length))return c();let f=0;this.walkTokens(l,d=>{d.type==="code"&&(f++,setTimeout(()=>{u(d.text,d.lang,(h,p)=>{if(h)return c(h);p!=null&&p!==d.text&&(d.text=p,d.escaped=!0),f--,f===0&&c()})},0))}),f===0&&c();return}if(r.async)return Promise.resolve(r.hooks?r.hooks.preprocess(i):i).then(u=>t(u,r)).then(u=>r.walkTokens?Promise.all(this.walkTokens(u,r.walkTokens)).then(()=>u):u).then(u=>n(u,r)).then(u=>r.hooks?r.hooks.postprocess(u):u).catch(a);try{r.hooks&&(i=r.hooks.preprocess(i));const u=t(i,r);r.walkTokens&&this.walkTokens(u,r.walkTokens);let l=n(u,r);return r.hooks&&(l=r.hooks.postprocess(l)),l}catch(u){return a(u)}}},kz=function(t,n,i){return r=>{if(r.message+=`
Please report this to https://github.com/markedjs/marked.`,t){const s="<p>An error occurred:</p><pre>"+_n(r.message+"",!0)+"</pre>";if(n)return Promise.resolve(s);if(i){i(null,s);return}return s}if(n)return Promise.reject(r);if(i){i(r);return}throw r}};const ka=new _U(yo);function st(e,t,n){return ka.parse(e,t,n)}st.options=st.setOptions=function(e){return ka.setOptions(e),st.defaults=ka.defaults,d4(st.defaults),st},st.getDefaults=g2,st.defaults=yo,st.use=function(...e){return ka.use(...e),st.defaults=ka.defaults,d4(st.defaults),st},st.walkTokens=function(e,t){return ka.walkTokens(e,t)},st.parseInline=ka.parseInline,st.Parser=Ur,st.parser=Ur.parse,st.Renderer=Wh,st.TextRenderer=m2,st.Lexer=ur,st.lexer=ur.lex,st.Tokenizer=qh,st.Slugger=Hh,st.Hooks=Gc,st.parse=st,st.options,st.setOptions,st.use,st.walkTokens,st.parseInline,Ur.parse,ur.lex;const _4={};function wU(e){let t;return{c(){t=Be(e[1])},m(n,i){I(n,t,i)},p(n,i){i&2&&ft(t,n[1])},i:ie,o:ie,d(n){n&&L(t)}}}function EU(e){let t,n;const i=e[5].default,r=mt(i,e,e[4],null);return{c(){t=G("h6"),r&&r.c(),M(t,"id",e[2])},m(s,o){I(s,t,o),r&&r.m(t,null),n=!0},p(s,o){r&&r.p&&(!n||o&16)&&bt(r,i,s,s[4],n?yt(i,s[4],o,null):vt(s[4]),null),(!n||o&4)&&M(t,"id",s[2])},i(s){n||(D(r,s),n=!0)},o(s){N(r,s),n=!1},d(s){s&&L(t),r&&r.d(s)}}}function CU(e){let t,n;const i=e[5].default,r=mt(i,e,e[4],null);return{c(){t=G("h5"),r&&r.c(),M(t,"id",e[2])},m(s,o){I(s,t,o),r&&r.m(t,null),n=!0},p(s,o){r&&r.p&&(!n||o&16)&&bt(r,i,s,s[4],n?yt(i,s[4],o,null):vt(s[4]),null),(!n||o&4)&&M(t,"id",s[2])},i(s){n||(D(r,s),n=!0)},o(s){N(r,s),n=!1},d(s){s&&L(t),r&&r.d(s)}}}function kU(e){let t,n;const i=e[5].default,r=mt(i,e,e[4],null);return{c(){t=G("h4"),r&&r.c(),M(t,"id",e[2])},m(s,o){I(s,t,o),r&&r.m(t,null),n=!0},p(s,o){r&&r.p&&(!n||o&16)&&bt(r,i,s,s[4],n?yt(i,s[4],o,null):vt(s[4]),null),(!n||o&4)&&M(t,"id",s[2])},i(s){n||(D(r,s),n=!0)},o(s){N(r,s),n=!1},d(s){s&&L(t),r&&r.d(s)}}}function AU(e){let t,n;const i=e[5].default,r=mt(i,e,e[4],null);return{c(){t=G("h3"),r&&r.c(),M(t,"id",e[2])},m(s,o){I(s,t,o),r&&r.m(t,null),n=!0},p(s,o){r&&r.p&&(!n||o&16)&&bt(r,i,s,s[4],n?yt(i,s[4],o,null):vt(s[4]),null),(!n||o&4)&&M(t,"id",s[2])},i(s){n||(D(r,s),n=!0)},o(s){N(r,s),n=!1},d(s){s&&L(t),r&&r.d(s)}}}function $U(e){let t,n;const i=e[5].default,r=mt(i,e,e[4],null);return{c(){t=G("h2"),r&&r.c(),M(t,"id",e[2])},m(s,o){I(s,t,o),r&&r.m(t,null),n=!0},p(s,o){r&&r.p&&(!n||o&16)&&bt(r,i,s,s[4],n?yt(i,s[4],o,null):vt(s[4]),null),(!n||o&4)&&M(t,"id",s[2])},i(s){n||(D(r,s),n=!0)},o(s){N(r,s),n=!1},d(s){s&&L(t),r&&r.d(s)}}}function SU(e){let t,n;const i=e[5].default,r=mt(i,e,e[4],null);return{c(){t=G("h1"),r&&r.c(),M(t,"id",e[2])},m(s,o){I(s,t,o),r&&r.m(t,null),n=!0},p(s,o){r&&r.p&&(!n||o&16)&&bt(r,i,s,s[4],n?yt(i,s[4],o,null):vt(s[4]),null),(!n||o&4)&&M(t,"id",s[2])},i(s){n||(D(r,s),n=!0)},o(s){N(r,s),n=!1},d(s){s&&L(t),r&&r.d(s)}}}function FU(e){let t,n,i,r;const s=[SU,$U,AU,kU,CU,EU,wU],o=[];function a(u,l){return u[0]===1?0:u[0]===2?1:u[0]===3?2:u[0]===4?3:u[0]===5?4:u[0]===6?5:6}return t=a(e),n=o[t]=s[t](e),{c(){n.c(),i=Ne()},m(u,l){o[t].m(u,l),I(u,i,l),r=!0},p(u,[l]){let c=t;t=a(u),t===c?o[t].p(u,l):(Se(),N(o[c],1,1,()=>{o[c]=null}),Fe(),n=o[t],n?n.p(u,l):(n=o[t]=s[t](u),n.c()),D(n,1),n.m(i.parentNode,i))},i(u){r||(D(n),r=!0)},o(u){N(n),r=!1},d(u){u&&L(i),o[t].d(u)}}}function DU(e,t,n){let i,{$$slots:r={},$$scope:s}=t,{depth:o}=t,{raw:a}=t,{text:u}=t;const{slug:l,getOptions:c}=C5(_4),f=c();return e.$$set=d=>{"depth"in d&&n(0,o=d.depth),"raw"in d&&n(1,a=d.raw),"text"in d&&n(3,u=d.text),"$$scope"in d&&n(4,s=d.$$scope)},e.$$.update=()=>{e.$$.dirty&8&&n(2,i=f.headerIds?f.headerPrefix+l(u):void 0)},[o,a,i,u,s,r]}class TU extends xe{constructor(t){super(),ve(this,t,DU,FU,ye,{depth:0,raw:1,text:3})}}function MU(e){let t,n;const i=e[1].default,r=mt(i,e,e[0],null);return{c(){t=G("p"),r&&r.c()},m(s,o){I(s,t,o),r&&r.m(t,null),n=!0},p(s,[o]){r&&r.p&&(!n||o&1)&&bt(r,i,s,s[0],n?yt(i,s[0],o,null):vt(s[0]),null)},i(s){n||(D(r,s),n=!0)},o(s){N(r,s),n=!1},d(s){s&&L(t),r&&r.d(s)}}}function NU(e,t,n){let{$$slots:i={},$$scope:r}=t;return e.$$set=s=>{"$$scope"in s&&n(0,r=s.$$scope)},[r,i]}class RU extends xe{constructor(t){super(),ve(this,t,NU,MU,ye,{})}}function OU(e){let t;const n=e[3].default,i=mt(n,e,e[2],null);return{c(){i&&i.c()},m(r,s){i&&i.m(r,s),t=!0},p(r,[s]){i&&i.p&&(!t||s&4)&&bt(i,n,r,r[2],t?yt(n,r[2],s,null):vt(r[2]),null)},i(r){t||(D(i,r),t=!0)},o(r){N(i,r),t=!1},d(r){i&&i.d(r)}}}function LU(e,t,n){let{$$slots:i={},$$scope:r}=t,{text:s}=t,{raw:o}=t;return e.$$set=a=>{"text"in a&&n(0,s=a.text),"raw"in a&&n(1,o=a.raw),"$$scope"in a&&n(2,r=a.$$scope)},[s,o,r,i]}let IU=class extends xe{constructor(t){super(),ve(this,t,LU,OU,ye,{text:0,raw:1})}};function PU(e){let t,n;return{c(){t=G("img"),Ih(t.src,n=e[0])||M(t,"src",n),M(t,"title",e[1]),M(t,"alt",e[2])},m(i,r){I(i,t,r)},p(i,[r]){r&1&&!Ih(t.src,n=i[0])&&M(t,"src",n),r&2&&M(t,"title",i[1]),r&4&&M(t,"alt",i[2])},i:ie,o:ie,d(i){i&&L(t)}}}function zU(e,t,n){let{href:i=""}=t,{title:r=void 0}=t,{text:s=""}=t;return e.$$set=o=>{"href"in o&&n(0,i=o.href),"title"in o&&n(1,r=o.title),"text"in o&&n(2,s=o.text)},[i,r,s]}let BU=class extends xe{constructor(t){super(),ve(this,t,zU,PU,ye,{href:0,title:1,text:2})}};function UU(e){let t,n;const i=e[3].default,r=mt(i,e,e[2],null);return{c(){t=G("a"),r&&r.c(),M(t,"href",e[0]),M(t,"title",e[1])},m(s,o){I(s,t,o),r&&r.m(t,null),n=!0},p(s,[o]){r&&r.p&&(!n||o&4)&&bt(r,i,s,s[2],n?yt(i,s[2],o,null):vt(s[2]),null),(!n||o&1)&&M(t,"href",s[0]),(!n||o&2)&&M(t,"title",s[1])},i(s){n||(D(r,s),n=!0)},o(s){N(r,s),n=!1},d(s){s&&L(t),r&&r.d(s)}}}function jU(e,t,n){let{$$slots:i={},$$scope:r}=t,{href:s=""}=t,{title:o=void 0}=t;return e.$$set=a=>{"href"in a&&n(0,s=a.href),"title"in a&&n(1,o=a.title),"$$scope"in a&&n(2,r=a.$$scope)},[s,o,r,i]}class qU extends xe{constructor(t){super(),ve(this,t,jU,UU,ye,{href:0,title:1})}}function WU(e){let t,n;const i=e[1].default,r=mt(i,e,e[0],null);return{c(){t=G("em"),r&&r.c()},m(s,o){I(s,t,o),r&&r.m(t,null),n=!0},p(s,[o]){r&&r.p&&(!n||o&1)&&bt(r,i,s,s[0],n?yt(i,s[0],o,null):vt(s[0]),null)},i(s){n||(D(r,s),n=!0)},o(s){N(r,s),n=!1},d(s){s&&L(t),r&&r.d(s)}}}function HU(e,t,n){let{$$slots:i={},$$scope:r}=t;return e.$$set=s=>{"$$scope"in s&&n(0,r=s.$$scope)},[r,i]}class GU extends xe{constructor(t){super(),ve(this,t,HU,WU,ye,{})}}function VU(e){let t,n;const i=e[1].default,r=mt(i,e,e[0],null);return{c(){t=G("del"),r&&r.c()},m(s,o){I(s,t,o),r&&r.m(t,null),n=!0},p(s,[o]){r&&r.p&&(!n||o&1)&&bt(r,i,s,s[0],n?yt(i,s[0],o,null):vt(s[0]),null)},i(s){n||(D(r,s),n=!0)},o(s){N(r,s),n=!1},d(s){s&&L(t),r&&r.d(s)}}}function YU(e,t,n){let{$$slots:i={},$$scope:r}=t;return e.$$set=s=>{"$$scope"in s&&n(0,r=s.$$scope)},[r,i]}class XU extends xe{constructor(t){super(),ve(this,t,YU,VU,ye,{})}}function KU(e){let t,n=e[0].replace(/`/g,"")+"",i;return{c(){t=G("code"),i=Be(n)},m(r,s){I(r,t,s),V(t,i)},p(r,[s]){s&1&&n!==(n=r[0].replace(/`/g,"")+"")&&ft(i,n)},i:ie,o:ie,d(r){r&&L(t)}}}function ZU(e,t,n){let{raw:i}=t;return e.$$set=r=>{"raw"in r&&n(0,i=r.raw)},[i]}class JU extends xe{constructor(t){super(),ve(this,t,ZU,KU,ye,{raw:0})}}function QU(e){let t,n;const i=e[1].default,r=mt(i,e,e[0],null);return{c(){t=G("strong"),r&&r.c()},m(s,o){I(s,t,o),r&&r.m(t,null),n=!0},p(s,[o]){r&&r.p&&(!n||o&1)&&bt(r,i,s,s[0],n?yt(i,s[0],o,null):vt(s[0]),null)},i(s){n||(D(r,s),n=!0)},o(s){N(r,s),n=!1},d(s){s&&L(t),r&&r.d(s)}}}function ej(e,t,n){let{$$slots:i={},$$scope:r}=t;return e.$$set=s=>{"$$scope"in s&&n(0,r=s.$$scope)},[r,i]}class tj extends xe{constructor(t){super(),ve(this,t,ej,QU,ye,{})}}function nj(e){let t,n;const i=e[1].default,r=mt(i,e,e[0],null);return{c(){t=G("table"),r&&r.c()},m(s,o){I(s,t,o),r&&r.m(t,null),n=!0},p(s,[o]){r&&r.p&&(!n||o&1)&&bt(r,i,s,s[0],n?yt(i,s[0],o,null):vt(s[0]),null)},i(s){n||(D(r,s),n=!0)},o(s){N(r,s),n=!1},d(s){s&&L(t),r&&r.d(s)}}}function ij(e,t,n){let{$$slots:i={},$$scope:r}=t;return e.$$set=s=>{"$$scope"in s&&n(0,r=s.$$scope)},[r,i]}let rj=class extends xe{constructor(t){super(),ve(this,t,ij,nj,ye,{})}};function sj(e){let t,n;const i=e[1].default,r=mt(i,e,e[0],null);return{c(){t=G("thead"),r&&r.c()},m(s,o){I(s,t,o),r&&r.m(t,null),n=!0},p(s,[o]){r&&r.p&&(!n||o&1)&&bt(r,i,s,s[0],n?yt(i,s[0],o,null):vt(s[0]),null)},i(s){n||(D(r,s),n=!0)},o(s){N(r,s),n=!1},d(s){s&&L(t),r&&r.d(s)}}}function oj(e,t,n){let{$$slots:i={},$$scope:r}=t;return e.$$set=s=>{"$$scope"in s&&n(0,r=s.$$scope)},[r,i]}class aj extends xe{constructor(t){super(),ve(this,t,oj,sj,ye,{})}}function uj(e){let t,n;const i=e[1].default,r=mt(i,e,e[0],null);return{c(){t=G("tbody"),r&&r.c()},m(s,o){I(s,t,o),r&&r.m(t,null),n=!0},p(s,[o]){r&&r.p&&(!n||o&1)&&bt(r,i,s,s[0],n?yt(i,s[0],o,null):vt(s[0]),null)},i(s){n||(D(r,s),n=!0)},o(s){N(r,s),n=!1},d(s){s&&L(t),r&&r.d(s)}}}function lj(e,t,n){let{$$slots:i={},$$scope:r}=t;return e.$$set=s=>{"$$scope"in s&&n(0,r=s.$$scope)},[r,i]}class cj extends xe{constructor(t){super(),ve(this,t,lj,uj,ye,{})}}function fj(e){let t,n;const i=e[1].default,r=mt(i,e,e[0],null);return{c(){t=G("tr"),r&&r.c()},m(s,o){I(s,t,o),r&&r.m(t,null),n=!0},p(s,[o]){r&&r.p&&(!n||o&1)&&bt(r,i,s,s[0],n?yt(i,s[0],o,null):vt(s[0]),null)},i(s){n||(D(r,s),n=!0)},o(s){N(r,s),n=!1},d(s){s&&L(t),r&&r.d(s)}}}function dj(e,t,n){let{$$slots:i={},$$scope:r}=t;return e.$$set=s=>{"$$scope"in s&&n(0,r=s.$$scope)},[r,i]}class hj extends xe{constructor(t){super(),ve(this,t,dj,fj,ye,{})}}function pj(e){let t,n;const i=e[3].default,r=mt(i,e,e[2],null);return{c(){t=G("td"),r&&r.c(),M(t,"align",e[1])},m(s,o){I(s,t,o),r&&r.m(t,null),n=!0},p(s,o){r&&r.p&&(!n||o&4)&&bt(r,i,s,s[2],n?yt(i,s[2],o,null):vt(s[2]),null),(!n||o&2)&&M(t,"align",s[1])},i(s){n||(D(r,s),n=!0)},o(s){N(r,s),n=!1},d(s){s&&L(t),r&&r.d(s)}}}function gj(e){let t,n;const i=e[3].default,r=mt(i,e,e[2],null);return{c(){t=G("th"),r&&r.c(),M(t,"align",e[1])},m(s,o){I(s,t,o),r&&r.m(t,null),n=!0},p(s,o){r&&r.p&&(!n||o&4)&&bt(r,i,s,s[2],n?yt(i,s[2],o,null):vt(s[2]),null),(!n||o&2)&&M(t,"align",s[1])},i(s){n||(D(r,s),n=!0)},o(s){N(r,s),n=!1},d(s){s&&L(t),r&&r.d(s)}}}function mj(e){let t,n,i,r;const s=[gj,pj],o=[];function a(u,l){return u[0]?0:1}return t=a(e),n=o[t]=s[t](e),{c(){n.c(),i=Ne()},m(u,l){o[t].m(u,l),I(u,i,l),r=!0},p(u,[l]){let c=t;t=a(u),t===c?o[t].p(u,l):(Se(),N(o[c],1,1,()=>{o[c]=null}),Fe(),n=o[t],n?n.p(u,l):(n=o[t]=s[t](u),n.c()),D(n,1),n.m(i.parentNode,i))},i(u){r||(D(n),r=!0)},o(u){N(n),r=!1},d(u){u&&L(i),o[t].d(u)}}}function yj(e,t,n){let{$$slots:i={},$$scope:r}=t,{header:s}=t,{align:o}=t;return e.$$set=a=>{"header"in a&&n(0,s=a.header),"align"in a&&n(1,o=a.align),"$$scope"in a&&n(2,r=a.$$scope)},[s,o,r,i]}class bj extends xe{constructor(t){super(),ve(this,t,yj,mj,ye,{header:0,align:1})}}function vj(e){let t,n;const i=e[3].default,r=mt(i,e,e[2],null);return{c(){t=G("ul"),r&&r.c()},m(s,o){I(s,t,o),r&&r.m(t,null),n=!0},p(s,o){r&&r.p&&(!n||o&4)&&bt(r,i,s,s[2],n?yt(i,s[2],o,null):vt(s[2]),null)},i(s){n||(D(r,s),n=!0)},o(s){N(r,s),n=!1},d(s){s&&L(t),r&&r.d(s)}}}function xj(e){let t,n;const i=e[3].default,r=mt(i,e,e[2],null);return{c(){t=G("ol"),r&&r.c(),M(t,"start",e[1])},m(s,o){I(s,t,o),r&&r.m(t,null),n=!0},p(s,o){r&&r.p&&(!n||o&4)&&bt(r,i,s,s[2],n?yt(i,s[2],o,null):vt(s[2]),null),(!n||o&2)&&M(t,"start",s[1])},i(s){n||(D(r,s),n=!0)},o(s){N(r,s),n=!1},d(s){s&&L(t),r&&r.d(s)}}}function _j(e){let t,n,i,r;const s=[xj,vj],o=[];function a(u,l){return u[0]?0:1}return t=a(e),n=o[t]=s[t](e),{c(){n.c(),i=Ne()},m(u,l){o[t].m(u,l),I(u,i,l),r=!0},p(u,[l]){let c=t;t=a(u),t===c?o[t].p(u,l):(Se(),N(o[c],1,1,()=>{o[c]=null}),Fe(),n=o[t],n?n.p(u,l):(n=o[t]=s[t](u),n.c()),D(n,1),n.m(i.parentNode,i))},i(u){r||(D(n),r=!0)},o(u){N(n),r=!1},d(u){u&&L(i),o[t].d(u)}}}function wj(e,t,n){let{$$slots:i={},$$scope:r}=t,{ordered:s}=t,{start:o}=t;return e.$$set=a=>{"ordered"in a&&n(0,s=a.ordered),"start"in a&&n(1,o=a.start),"$$scope"in a&&n(2,r=a.$$scope)},[s,o,r,i]}class Ej extends xe{constructor(t){super(),ve(this,t,wj,_j,ye,{ordered:0,start:1})}}function Cj(e){let t,n;const i=e[1].default,r=mt(i,e,e[0],null);return{c(){t=G("li"),r&&r.c()},m(s,o){I(s,t,o),r&&r.m(t,null),n=!0},p(s,[o]){r&&r.p&&(!n||o&1)&&bt(r,i,s,s[0],n?yt(i,s[0],o,null):vt(s[0]),null)},i(s){n||(D(r,s),n=!0)},o(s){N(r,s),n=!1},d(s){s&&L(t),r&&r.d(s)}}}function kj(e,t,n){let{$$slots:i={},$$scope:r}=t;return e.$$set=s=>{"$$scope"in s&&n(0,r=s.$$scope)},[r,i]}class Aj extends xe{constructor(t){super(),ve(this,t,kj,Cj,ye,{})}}function $j(e){let t;return{c(){t=G("hr")},m(n,i){I(n,t,i)},p:ie,i:ie,o:ie,d(n){n&&L(t)}}}class Sj extends xe{constructor(t){super(),ve(this,t,null,$j,ye,{})}}function Fj(e){let t,n;return{c(){t=new Mz(!1),n=Ne(),t.a=n},m(i,r){t.m(e[0],i,r),I(i,n,r)},p(i,[r]){r&1&&t.p(i[0])},i:ie,o:ie,d(i){i&&(L(n),t.d())}}}function Dj(e,t,n){let{text:i}=t;return e.$$set=r=>{"text"in r&&n(0,i=r.text)},[i]}class Tj extends xe{constructor(t){super(),ve(this,t,Dj,Fj,ye,{text:0})}}function Mj(e){let t,n;const i=e[1].default,r=mt(i,e,e[0],null);return{c(){t=G("blockquote"),r&&r.c()},m(s,o){I(s,t,o),r&&r.m(t,null),n=!0},p(s,[o]){r&&r.p&&(!n||o&1)&&bt(r,i,s,s[0],n?yt(i,s[0],o,null):vt(s[0]),null)},i(s){n||(D(r,s),n=!0)},o(s){N(r,s),n=!1},d(s){s&&L(t),r&&r.d(s)}}}function Nj(e,t,n){let{$$slots:i={},$$scope:r}=t;return e.$$set=s=>{"$$scope"in s&&n(0,r=s.$$scope)},[r,i]}class Rj extends xe{constructor(t){super(),ve(this,t,Nj,Mj,ye,{})}}function Oj(e){let t,n,i;return{c(){t=G("pre"),n=G("code"),i=Be(e[1]),M(t,"class",e[0])},m(r,s){I(r,t,s),V(t,n),V(n,i)},p(r,[s]){s&2&&ft(i,r[1]),s&1&&M(t,"class",r[0])},i:ie,o:ie,d(r){r&&L(t)}}}function Lj(e,t,n){let{lang:i}=t,{text:r}=t;return e.$$set=s=>{"lang"in s&&n(0,i=s.lang),"text"in s&&n(1,r=s.text)},[i,r]}class Ij extends xe{constructor(t){super(),ve(this,t,Lj,Oj,ye,{lang:0,text:1})}}function Pj(e){let t,n;const i=e[1].default,r=mt(i,e,e[0],null);return{c(){t=G("br"),r&&r.c()},m(s,o){I(s,t,o),r&&r.m(s,o),n=!0},p(s,[o]){r&&r.p&&(!n||o&1)&&bt(r,i,s,s[0],n?yt(i,s[0],o,null):vt(s[0]),null)},i(s){n||(D(r,s),n=!0)},o(s){N(r,s),n=!1},d(s){s&&L(t),r&&r.d(s)}}}function zj(e,t,n){let{$$slots:i={},$$scope:r}=t;return e.$$set=s=>{"$$scope"in s&&n(0,r=s.$$scope)},[r,i]}class Bj extends xe{constructor(t){super(),ve(this,t,zj,Pj,ye,{})}}const Uj={heading:TU,paragraph:RU,text:IU,image:BU,link:qU,em:GU,strong:tj,codespan:JU,del:XU,table:rj,tablehead:aj,tablebody:cj,tablerow:hj,tablecell:bj,list:Ej,orderedlistitem:null,unorderedlistitem:null,listitem:Aj,hr:Sj,html:Tj,blockquote:Rj,code:Ij,br:Bj},jj={baseUrl:null,breaks:!1,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,xhtml:!1};function qj(e){let t,n;return t=new Ca({props:{tokens:e[0],renderers:e[1]}}),{c(){he(t.$$.fragment)},m(i,r){ce(t,i,r),n=!0},p(i,[r]){const s={};r&1&&(s.tokens=i[0]),r&2&&(s.renderers=i[1]),t.$set(s)},i(i){n||(D(t.$$.fragment,i),n=!0)},o(i){N(t.$$.fragment,i),n=!1},d(i){fe(t,i)}}}function Wj(e,t,n){let i,r,s,o,{source:a=[]}=t,{renderers:u={}}=t,{options:l={}}=t,{isInline:c=!1}=t;const f=a2();let d,h,p;return E5(_4,{slug:g=>r?r.slug(g):"",getOptions:()=>s}),Wc(()=>{n(7,p=!0)}),e.$$set=g=>{"source"in g&&n(2,a=g.source),"renderers"in g&&n(3,u=g.renderers),"options"in g&&n(4,l=g.options),"isInline"in g&&n(5,c=g.isInline)},e.$$.update=()=>{e.$$.dirty&4&&n(8,i=Array.isArray(a)),e.$$.dirty&4&&(r=a?new Hh:void 0),e.$$.dirty&16&&n(9,s={...jj,...l}),e.$$.dirty&869&&(i?n(0,d=a):(n(6,h=new ur(s)),n(0,d=c?h.inlineTokens(a):h.lex(a)),f("parsed",{tokens:d}))),e.$$.dirty&8&&n(1,o={...Uj,...u}),e.$$.dirty&385&&p&&!i&&f("parsed",{tokens:d})},[d,o,a,u,l,c,h,p,i,s]}class Hj extends xe{constructor(t){super(),ve(this,t,Wj,qj,ye,{source:2,renderers:3,options:4,isInline:5})}}function Gj(e){let t,n;return t=new Hj({props:{source:e[0].source}}),{c(){he(t.$$.fragment)},m(i,r){ce(t,i,r),n=!0},p(i,[r]){const s={};r&1&&(s.source=i[0].source),t.$set(s)},i(i){n||(D(t.$$.fragment,i),n=!0)},o(i){N(t.$$.fragment,i),n=!1},d(i){fe(t,i)}}}function Vj(e,t,n){let{componentData:i}=t;return e.$$set=r=>{"componentData"in r&&n(0,i=r.componentData)},[i]}class w4 extends xe{constructor(t){super(),ve(this,t,Vj,Gj,ye,{componentData:0})}}function Yj(e){let t,n,i;const r=e[2].default,s=mt(r,e,e[1],null);return{c(){var o;t=G("div"),s&&s.c(),M(t,"id",n=`page-${((o=e[0])==null?void 0:o.title)||"No Title"}`),M(t,"class","page svelte-v7ihqd"),M(t,"data-component","page")},m(o,a){I(o,t,a),s&&s.m(t,null),i=!0},p(o,[a]){var u;s&&s.p&&(!i||a&2)&&bt(s,r,o,o[1],i?yt(r,o[1],a,null):vt(o[1]),null),(!i||a&1&&n!==(n=`page-${((u=o[0])==null?void 0:u.title)||"No Title"}`))&&M(t,"id",n)},i(o){i||(D(s,o),i=!0)},o(o){N(s,o),i=!1},d(o){o&&L(t),s&&s.d(o)}}}function Xj(e,t,n){let{$$slots:i={},$$scope:r}=t,{componentData:s}=t;return e.$$set=o=>{"componentData"in o&&n(0,s=o.componentData),"$$scope"in o&&n(1,r=o.$$scope)},[s,r,i]}class Kj extends xe{constructor(t){super(),ve(this,t,Xj,Yj,ye,{componentData:0})}}function E4(e){let t,n,i=e[5]&&C4(e),r=e[4]&&k4(e);return{c(){t=G("div"),i&&i.c(),n=He(),r&&r.c(),M(t,"class","info svelte-ljrmzp")},m(s,o){I(s,t,o),i&&i.m(t,null),V(t,n),r&&r.m(t,null)},p(s,o){s[5]?i?i.p(s,o):(i=C4(s),i.c(),i.m(t,n)):i&&(i.d(1),i=null),s[4]?r?r.p(s,o):(r=k4(s),r.c(),r.m(t,null)):r&&(r.d(1),r=null)},d(s){s&&L(t),i&&i.d(),r&&r.d()}}}function C4(e){let t,n,i,r,s;return{c(){t=G("label"),n=Be(e[5]),i=He(),r=G("span"),s=Be(e[3]),M(r,"class","labelValue svelte-ljrmzp"),M(t,"for",e[6]),M(t,"class","svelte-ljrmzp")},m(o,a){I(o,t,a),V(t,n),V(t,i),V(t,r),V(r,s)},p(o,a){a&32&&ft(n,o[5]),a&8&&ft(s,o[3]),a&64&&M(t,"for",o[6])},d(o){o&&L(t)}}}function k4(e){let t,n;return{c(){t=G("span"),n=Be(e[4]),M(t,"title",e[4]),M(t,"class","details svelte-ljrmzp")},m(i,r){I(i,t,r),V(t,n)},p(i,r){r&16&&ft(n,i[4]),r&16&&M(t,"title",i[4])},d(i){i&&L(t)}}}function Zj(e){let t,n,i,r,s,o=(e[0]||"")+"",a,u=(e[5]||e[4])&&E4(e);return{c(){t=G("div"),n=G("div"),u&&u.c(),i=He(),r=G("progress"),s=Be(e[1]),a=Be(o),M(r,"id",e[6]),M(r,"max",e[2]),r.value=e[1],M(r,"style","color: red !important"),M(r,"class","svelte-ljrmzp"),M(n,"class","inner svelte-ljrmzp"),M(t,"class","container svelte-ljrmzp")},m(l,c){I(l,t,c),V(t,n),u&&u.m(n,null),V(n,i),V(n,r),V(r,s),V(r,a)},p(l,[c]){l[5]||l[4]?u?u.p(l,c):(u=E4(l),u.c(),u.m(n,i)):u&&(u.d(1),u=null),c&2&&ft(s,l[1]),c&1&&o!==(o=(l[0]||"")+"")&&ft(a,o),c&64&&M(r,"id",l[6]),c&4&&M(r,"max",l[2]),c&2&&(r.value=l[1])},i:ie,o:ie,d(l){l&&L(t),u&&u.d()}}}function Jj(e,t,n){let i,r,s,o,a,u,{componentData:l}=t;s==null&&(s=0);let c=s.toString();return e.$$set=f=>{"componentData"in f&&n(7,l=f.componentData)},e.$$.update=()=>{e.$$.dirty&128&&n(2,{max:i,id:r,value:s,label:o,unit:a,details:u}=l,i,(n(6,r),n(7,l)),(n(1,s),n(7,l)),(n(5,o),n(7,l)),(n(0,a),n(7,l)),(n(4,u),n(7,l))),e.$$.dirty&7&&(i?n(3,c=`${s}/${i}`):a&&n(3,c=`${s} ${a}`))},[a,s,i,c,u,o,r,l]}class A4 extends xe{constructor(t){super(),ve(this,t,Jj,Zj,ye,{componentData:7})}}function $4(e){let t,n;return{c(){t=G("h3"),n=Be(e[3])},m(i,r){I(i,t,r),V(t,n)},p(i,r){r&8&&ft(n,i[3])},d(i){i&&L(t)}}}function S4(e){let t,n;return{c(){t=G("p"),n=Be(e[2]),M(t,"class","description")},m(i,r){I(i,t,r),V(t,n)},p(i,r){r&4&&ft(n,i[2])},d(i){i&&L(t)}}}function Qj(e){let t,n,i,r,s,o,a,u,l=e[3]&&$4(e),c=e[2]&&S4(e);const f=e[6].default,d=mt(f,e,e[5],null);return{c(){t=G("section"),n=G("div"),l&&l.c(),i=He(),c&&c.c(),r=He(),s=G("div"),d&&d.c(),o=He(),a=G("hr"),M(n,"class","heading svelte-17n0qr8"),M(s,"class","sectionItems svelte-17n0qr8"),M(s,"style",e[0]),M(a,"class","svelte-17n0qr8"),M(t,"class","container svelte-17n0qr8"),M(t,"data-component","section"),M(t,"data-section-id",e[3]),ni(t,"columns",e[1])},m(h,p){I(h,t,p),V(t,n),l&&l.m(n,null),V(n,i),c&&c.m(n,null),V(t,r),V(t,s),d&&d.m(s,null),V(t,o),V(t,a),u=!0},p(h,[p]){h[3]?l?l.p(h,p):(l=$4(h),l.c(),l.m(n,i)):l&&(l.d(1),l=null),h[2]?c?c.p(h,p):(c=S4(h),c.c(),c.m(n,null)):c&&(c.d(1),c=null),d&&d.p&&(!u||p&32)&&bt(d,f,h,h[5],u?yt(f,h[5],p,null):vt(h[5]),null),(!u||p&1)&&M(s,"style",h[0]),(!u||p&8)&&M(t,"data-section-id",h[3]),(!u||p&2)&&ni(t,"columns",h[1])},i(h){u||(D(d,h),u=!0)},o(h){N(d,h),u=!1},d(h){h&&L(t),l&&l.d(),c&&c.d(),d&&d.d(h)}}}function eq(e,t,n){let i,r,s,{$$slots:o={},$$scope:a}=t,{componentData:u}=t,l;return s&&(l=`grid-template-columns: repeat(${s||1}, 1fr);`),e.$$set=c=>{"componentData"in c&&n(4,u=c.componentData),"$$scope"in c&&n(5,a=c.$$scope)},e.$$.update=()=>{e.$$.dirty&16&&n(3,{title:i,subtitle:r,columns:s}=u,i,(n(2,r),n(4,u)),(n(1,s),n(4,u)))},[l,s,r,i,u,a,o]}class tq extends xe{constructor(t){super(),ve(this,t,eq,Qj,ye,{componentData:4})}}const nq=/("(?:[^\\"]|\\.)*")|[:,]/g;function y2(e,t={}){const n=JSON.stringify([1],void 0,t.indent===void 0?2:t.indent).slice(2,-3),i=n===""?1/0:t.maxLength===void 0?80:t.maxLength;let{replacer:r}=t;return function s(o,a,u){o&&typeof o.toJSON=="function"&&(o=o.toJSON());const l=JSON.stringify(o,r);if(l===void 0)return l;const c=i-a.length-u;if(l.length<=c){const f=l.replace(nq,(d,h)=>h||`${d} `);if(f.length<=c)return f}if(r!=null&&(o=JSON.parse(l),r=void 0),typeof o=="object"&&o!==null){const f=a+n,d=[];let h=0,p,g;if(Array.isArray(o)){p="[",g="]";const{length:m}=o;for(;h<m;h++)d.push(s(o[h],f,h===m-1?0:1)||"null")}else{p="{",g="}";const m=Object.keys(o),{length:y}=m;for(;h<y;h++){const b=m[h],v=`${JSON.stringify(b)}: `,x=s(o[b],f,v.length+(h===y-1?0:1));x!==void 0&&d.push(v+x)}}if(d.length>0)return[p,n+d.join(`,
${f}`),g].join(`
${a}`)}return l}(e,"",0)}function ii(e,t,n){return e.fields=t||[],e.fname=n,e}function Tt(e){return e==null?null:e.fname}function wn(e){return e==null?null:e.fields}function F4(e){return e.length===1?iq(e[0]):rq(e)}const iq=e=>function(t){return t[e]},rq=e=>{const t=e.length;return function(n){for(let i=0;i<t;++i)n=n[e[i]];return n}};function q(e){throw Error(e)}function jr(e){const t=[],n=e.length;let i=null,r=0,s="",o,a,u;e=e+"";function l(){t.push(s+e.substring(o,a)),s="",o=a+1}for(o=a=0;a<n;++a)if(u=e[a],u==="\\")s+=e.substring(o,a++),o=a;else if(u===i)l(),i=null,r=-1;else{if(i)continue;o===r&&u==='"'||o===r&&u==="'"?(o=a+1,i=u):u==="."&&!r?a>o?l():o=a+1:u==="["?(a>o&&l(),r=o=a+1):u==="]"&&(r||q("Access path missing open bracket: "+e),r>0&&l(),r=0,o=a+1)}return r&&q("Access path missing closing bracket: "+e),i&&q("Access path missing closing quote: "+e),a>o&&(a++,l()),t}function Bi(e,t,n){const i=jr(e);return e=i.length===1?i[0]:e,ii((n&&n.get||F4)(i),[e],t||e)}const Vc=Bi("id"),En=ii(e=>e,[],"identity"),bo=ii(()=>0,[],"zero"),tl=ii(()=>1,[],"one"),Ui=ii(()=>!0,[],"true"),vo=ii(()=>!1,[],"false");function sq(e,t,n){const i=[t].concat([].slice.call(n));console[e].apply(console,i)}const D4=0,b2=1,v2=2,T4=3,M4=4;function x2(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:sq,i=e||D4;return{level(r){return arguments.length?(i=+r,this):i},error(){return i>=b2&&n(t||"error","ERROR",arguments),this},warn(){return i>=v2&&n(t||"warn","WARN",arguments),this},info(){return i>=T4&&n(t||"log","INFO",arguments),this},debug(){return i>=M4&&n(t||"log","DEBUG",arguments),this}}}var W=Array.isArray;function re(e){return e===Object(e)}const N4=e=>e!=="__proto__";function nl(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((i,r)=>{for(const s in r)if(s==="signals")i.signals=oq(i.signals,r.signals);else{const o=s==="legend"?{layout:1}:s==="style"?!0:null;il(i,s,r[s],o)}return i},{})}function il(e,t,n,i){if(!N4(t))return;let r,s;if(re(n)&&!W(n)){s=re(e[t])?e[t]:e[t]={};for(r in n)i&&(i===!0||i[r])?il(s,r,n[r]):N4(r)&&(s[r]=n[r])}else e[t]=n}function oq(e,t){if(e==null)return t;const n={},i=[];function r(s){n[s.name]||(n[s.name]=1,i.push(s))}return t.forEach(r),e.forEach(r),i}function Ge(e){return e[e.length-1]}function Cn(e){return e==null||e===""?null:+e}const R4=e=>t=>e*Math.exp(t),O4=e=>t=>Math.log(e*t),L4=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),I4=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,Gh=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function Vh(e,t,n,i){const r=n(e[0]),s=n(Ge(e)),o=(s-r)*t;return[i(r-o),i(s-o)]}function P4(e,t){return Vh(e,t,Cn,En)}function z4(e,t){var n=Math.sign(e[0]);return Vh(e,t,O4(n),R4(n))}function B4(e,t,n){return Vh(e,t,Gh(n),Gh(1/n))}function U4(e,t,n){return Vh(e,t,L4(n),I4(n))}function Yh(e,t,n,i,r){const s=i(e[0]),o=i(Ge(e)),a=t!=null?i(t):(s+o)/2;return[r(a+(s-a)*n),r(a+(o-a)*n)]}function _2(e,t,n){return Yh(e,t,n,Cn,En)}function w2(e,t,n){const i=Math.sign(e[0]);return Yh(e,t,n,O4(i),R4(i))}function Xh(e,t,n,i){return Yh(e,t,n,Gh(i),Gh(1/i))}function E2(e,t,n,i){return Yh(e,t,n,L4(i),I4(i))}function j4(e){return 1+~~(new Date(e).getMonth()/3)}function q4(e){return 1+~~(new Date(e).getUTCMonth()/3)}function oe(e){return e!=null?W(e)?e:[e]:[]}function W4(e,t,n){let i=e[0],r=e[1],s;return r<i&&(s=r,r=i,i=s),s=r-i,s>=n-t?[t,n]:[i=Math.min(Math.max(i,t),n-s),i+s]}function Ie(e){return typeof e=="function"}const aq="descending";function C2(e,t,n){n=n||{},t=oe(t)||[];const i=[],r=[],s={},o=n.comparator||uq;return oe(e).forEach((a,u)=>{a!=null&&(i.push(t[u]===aq?-1:1),r.push(a=Ie(a)?a:Bi(a,null,n)),(wn(a)||[]).forEach(l=>s[l]=1))}),r.length===0?null:ii(o(r,i),Object.keys(s))}const rl=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),uq=(e,t)=>e.length===1?lq(e[0],t[0]):cq(e,t,e.length),lq=(e,t)=>function(n,i){return rl(e(n),e(i))*t},cq=(e,t,n)=>(t.push(0),function(i,r){let s,o=0,a=-1;for(;o===0&&++a<n;)s=e[a],o=rl(s(i),s(r));return o*t[a]});function kn(e){return Ie(e)?e:()=>e}function k2(e,t){let n;return i=>{n&&clearTimeout(n),n=setTimeout(()=>(t(i),n=null),e)}}function Oe(e){for(let t,n,i=1,r=arguments.length;i<r;++i){t=arguments[i];for(n in t)e[n]=t[n]}return e}function qr(e,t){let n=0,i,r,s,o;if(e&&(i=e.length))if(t==null){for(r=e[n];n<i&&(r==null||r!==r);r=e[++n]);for(s=o=r;n<i;++n)r=e[n],r!=null&&(r<s&&(s=r),r>o&&(o=r))}else{for(r=t(e[n]);n<i&&(r==null||r!==r);r=t(e[++n]));for(s=o=r;n<i;++n)r=t(e[n]),r!=null&&(r<s&&(s=r),r>o&&(o=r))}return[s,o]}function H4(e,t){const n=e.length;let i=-1,r,s,o,a,u;if(t==null){for(;++i<n;)if(s=e[i],s!=null&&s>=s){r=o=s;break}if(i===n)return[-1,-1];for(a=u=i;++i<n;)s=e[i],s!=null&&(r>s&&(r=s,a=i),o<s&&(o=s,u=i))}else{for(;++i<n;)if(s=t(e[i],i,e),s!=null&&s>=s){r=o=s;break}if(i===n)return[-1,-1];for(a=u=i;++i<n;)s=t(e[i],i,e),s!=null&&(r>s&&(r=s,a=i),o<s&&(o=s,u=i))}return[a,u]}function ue(e,t){return Object.hasOwn(e,t)}const Kh={};function sl(e){let t={},n;function i(s){return ue(t,s)&&t[s]!==Kh}const r={size:0,empty:0,object:t,has:i,get(s){return i(s)?t[s]:void 0},set(s,o){return i(s)||(++r.size,t[s]===Kh&&--r.empty),t[s]=o,this},delete(s){return i(s)&&(--r.size,++r.empty,t[s]=Kh),this},clear(){r.size=r.empty=0,r.object=t={}},test(s){return arguments.length?(n=s,r):n},clean(){const s={};let o=0;for(const a in t){const u=t[a];u!==Kh&&(!n||!n(u))&&(s[a]=u,++o)}r.size=o,r.empty=0,r.object=t=s}};return e&&Object.keys(e).forEach(s=>{r.set(s,e[s])}),r}function G4(e,t,n,i,r,s){if(!n&&n!==0)return s;const o=+n;let a=e[0],u=Ge(e),l;u<a&&(l=a,a=u,u=l),l=Math.abs(t-a);const c=Math.abs(u-t);return l<c&&l<=o?i:c<=o?r:s}function ee(e,t,n){const i=e.prototype=Object.create(t.prototype);return Object.defineProperty(i,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),Oe(i,n)}function ol(e,t,n,i){let r=t[0],s=t[t.length-1],o;return r>s&&(o=r,r=s,s=o),n=n===void 0||n,i=i===void 0||i,(n?r<=e:r<e)&&(i?e<=s:e<s)}function xo(e){return typeof e=="boolean"}function _o(e){return Object.prototype.toString.call(e)==="[object Date]"}function V4(e){return e&&Ie(e[Symbol.iterator])}function Ze(e){return typeof e=="number"}function A2(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function se(e){return typeof e=="string"}function $2(e,t,n){e&&(e=t?oe(e).map(a=>a.replace(/\\(.)/g,"$1")):oe(e));const i=e&&e.length,r=n&&n.get||F4,s=a=>r(t?[a]:jr(a));let o;if(!i)o=function(){return""};else if(i===1){const a=s(e[0]);o=function(u){return""+a(u)}}else{const a=e.map(s);o=function(u){let l=""+a[0](u),c=0;for(;++c<i;)l+="|"+a[c](u);return l}}return ii(o,e,"key")}function Y4(e,t){const n=e[0],i=Ge(e),r=+t;return r?r===1?i:n+r*(i-n):n}const fq=1e4;function X4(e){e=+e||fq;let t,n,i;const r=()=>{t={},n={},i=0},s=(o,a)=>(++i>e&&(n=t,t={},i=1),t[o]=a);return r(),{clear:r,has:o=>ue(t,o)||ue(n,o),get:o=>ue(t,o)?t[o]:ue(n,o)?s(o,n[o]):void 0,set:(o,a)=>ue(t,o)?t[o]=a:s(o,a)}}function K4(e,t,n,i){const r=t.length,s=n.length;if(!s)return t;if(!r)return n;const o=i||new t.constructor(r+s);let a=0,u=0,l=0;for(;a<r&&u<s;++l)o[l]=e(t[a],n[u])>0?n[u++]:t[a++];for(;a<r;++a,++l)o[l]=t[a];for(;u<s;++u,++l)o[l]=n[u];return o}function Yc(e,t){let n="";for(;--t>=0;)n+=e;return n}function Z4(e,t,n,i){const r=n||" ",s=e+"",o=t-s.length;return o<=0?s:i==="left"?Yc(r,o)+s:i==="center"?Yc(r,~~(o/2))+s+Yc(r,Math.ceil(o/2)):s+Yc(r,o)}function Xc(e){return e&&Ge(e)-e[0]||0}function Q(e){return W(e)?"["+e.map(Q)+"]":re(e)||se(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function S2(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const dq=e=>Ze(e)||_o(e)?e:Date.parse(e);function F2(e,t){return t=t||dq,e==null||e===""?null:t(e)}function D2(e){return e==null||e===""?null:e+""}function lr(e){const t={},n=e.length;for(let i=0;i<n;++i)t[e[i]]=!0;return t}function J4(e,t,n,i){const r=i??"",s=e+"",o=s.length,a=Math.max(0,t-r.length);return o<=t?s:n==="left"?r+s.slice(o-a):n==="center"?s.slice(0,Math.ceil(a/2))+r+s.slice(o-~~(a/2)):s.slice(0,a)+r}function wo(e,t,n){if(e)if(t){const i=e.length;for(let r=0;r<i;++r){const s=t(e[r]);s&&n(s,r,e)}}else e.forEach(n)}var Q4={},T2={},M2=34,Kc=10,N2=13;function e8(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function hq(e,t){var n=e8(e);return function(i,r){return t(n(i),r,e)}}function t8(e){var t=Object.create(null),n=[];return e.forEach(function(i){for(var r in i)r in t||n.push(t[r]=r)}),n}function ri(e,t){var n=e+"",i=n.length;return i<t?new Array(t-i+1).join(0)+n:n}function pq(e){return e<0?"-"+ri(-e,6):e>9999?"+"+ri(e,6):ri(e,4)}function gq(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),i=e.getUTCSeconds(),r=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":pq(e.getUTCFullYear())+"-"+ri(e.getUTCMonth()+1,2)+"-"+ri(e.getUTCDate(),2)+(r?"T"+ri(t,2)+":"+ri(n,2)+":"+ri(i,2)+"."+ri(r,3)+"Z":i?"T"+ri(t,2)+":"+ri(n,2)+":"+ri(i,2)+"Z":n||t?"T"+ri(t,2)+":"+ri(n,2)+"Z":"")}function mq(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function i(f,d){var h,p,g=r(f,function(m,y){if(h)return h(m,y-1);p=m,h=d?hq(m,d):e8(m)});return g.columns=p||[],g}function r(f,d){var h=[],p=f.length,g=0,m=0,y,b=p<=0,v=!1;f.charCodeAt(p-1)===Kc&&--p,f.charCodeAt(p-1)===N2&&--p;function x(){if(b)return T2;if(v)return v=!1,Q4;var E,w=g,C;if(f.charCodeAt(w)===M2){for(;g++<p&&f.charCodeAt(g)!==M2||f.charCodeAt(++g)===M2;);return(E=g)>=p?b=!0:(C=f.charCodeAt(g++))===Kc?v=!0:C===N2&&(v=!0,f.charCodeAt(g)===Kc&&++g),f.slice(w+1,E-1).replace(/""/g,'"')}for(;g<p;){if((C=f.charCodeAt(E=g++))===Kc)v=!0;else if(C===N2)v=!0,f.charCodeAt(g)===Kc&&++g;else if(C!==n)continue;return f.slice(w,E)}return b=!0,f.slice(w,p)}for(;(y=x())!==T2;){for(var _=[];y!==Q4&&y!==T2;)_.push(y),y=x();d&&(_=d(_,m++))==null||h.push(_)}return h}function s(f,d){return f.map(function(h){return d.map(function(p){return c(h[p])}).join(e)})}function o(f,d){return d==null&&(d=t8(f)),[d.map(c).join(e)].concat(s(f,d)).join(`
`)}function a(f,d){return d==null&&(d=t8(f)),s(f,d).join(`
`)}function u(f){return f.map(l).join(`
`)}function l(f){return f.map(c).join(e)}function c(f){return f==null?"":f instanceof Date?gq(f):t.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:i,parseRows:r,format:o,formatBody:a,formatRows:u,formatRow:l,formatValue:c}}function yq(e){return e}function bq(e){if(e==null)return yq;var t,n,i=e.scale[0],r=e.scale[1],s=e.translate[0],o=e.translate[1];return function(a,u){u||(t=n=0);var l=2,c=a.length,f=new Array(c);for(f[0]=(t+=a[0])*i+s,f[1]=(n+=a[1])*r+o;l<c;)f[l]=a[l],++l;return f}}function vq(e,t){for(var n,i=e.length,r=i-t;r<--i;)n=e[r],e[r++]=e[i],e[i]=n}function xq(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return n8(e,n)})}:n8(e,t)}function n8(e,t){var n=t.id,i=t.bbox,r=t.properties==null?{}:t.properties,s=i8(e,t);return n==null&&i==null?{type:"Feature",properties:r,geometry:s}:i==null?{type:"Feature",id:n,properties:r,geometry:s}:{type:"Feature",id:n,bbox:i,properties:r,geometry:s}}function i8(e,t){var n=bq(e.transform),i=e.arcs;function r(c,f){f.length&&f.pop();for(var d=i[c<0?~c:c],h=0,p=d.length;h<p;++h)f.push(n(d[h],h));c<0&&vq(f,p)}function s(c){return n(c)}function o(c){for(var f=[],d=0,h=c.length;d<h;++d)r(c[d],f);return f.length<2&&f.push(f[0]),f}function a(c){for(var f=o(c);f.length<4;)f.push(f[0]);return f}function u(c){return c.map(a)}function l(c){var f=c.type,d;switch(f){case"GeometryCollection":return{type:f,geometries:c.geometries.map(l)};case"Point":d=s(c.coordinates);break;case"MultiPoint":d=c.coordinates.map(s);break;case"LineString":d=o(c.arcs);break;case"MultiLineString":d=c.arcs.map(o);break;case"Polygon":d=u(c.arcs);break;case"MultiPolygon":d=c.arcs.map(u);break;default:return null}return{type:f,coordinates:d}}return l(t)}function _q(e,t){var n={},i={},r={},s=[],o=-1;t.forEach(function(l,c){var f=e.arcs[l<0?~l:l],d;f.length<3&&!f[1][0]&&!f[1][1]&&(d=t[++o],t[o]=l,t[c]=d)}),t.forEach(function(l){var c=a(l),f=c[0],d=c[1],h,p;if(h=r[f])if(delete r[h.end],h.push(l),h.end=d,p=i[d]){delete i[p.start];var g=p===h?h:h.concat(p);i[g.start=h.start]=r[g.end=p.end]=g}else i[h.start]=r[h.end]=h;else if(h=i[d])if(delete i[h.start],h.unshift(l),h.start=f,p=r[f]){delete r[p.end];var m=p===h?h:p.concat(h);i[m.start=p.start]=r[m.end=h.end]=m}else i[h.start]=r[h.end]=h;else h=[l],i[h.start=f]=r[h.end=d]=h});function a(l){var c=e.arcs[l<0?~l:l],f=c[0],d;return e.transform?(d=[0,0],c.forEach(function(h){d[0]+=h[0],d[1]+=h[1]})):d=c[c.length-1],l<0?[d,f]:[f,d]}function u(l,c){for(var f in l){var d=l[f];delete c[d.start],delete d.start,delete d.end,d.forEach(function(h){n[h<0?~h:h]=1}),s.push(d)}}return u(r,i),u(i,r),t.forEach(function(l){n[l<0?~l:l]||s.push([l])}),s}function wq(e){return i8(e,Eq.apply(this,arguments))}function Eq(e,t,n){var i,r,s;if(arguments.length>1)i=Cq(e,t,n);else for(r=0,i=new Array(s=e.arcs.length);r<s;++r)i[r]=r;return{type:"MultiLineString",arcs:_q(e,i)}}function Cq(e,t,n){var i=[],r=[],s;function o(f){var d=f<0?~f:f;(r[d]||(r[d]=[])).push({i:f,g:s})}function a(f){f.forEach(o)}function u(f){f.forEach(a)}function l(f){f.forEach(u)}function c(f){switch(s=f,f.type){case"GeometryCollection":f.geometries.forEach(c);break;case"LineString":a(f.arcs);break;case"MultiLineString":case"Polygon":u(f.arcs);break;case"MultiPolygon":l(f.arcs);break}}return c(t),r.forEach(n==null?function(f){i.push(f[0].i)}:function(f){n(f[0].g,f[f.length-1].g)&&i.push(f[0].i)}),i}function Ds(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function kq(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function al(e){let t,n,i;e.length!==2?(t=Ds,n=(a,u)=>Ds(e(a),u),i=(a,u)=>e(a)-u):(t=e===Ds||e===kq?e:Aq,n=e,i=e);function r(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<0?l=f+1:c=f}while(l<c)}return l}function s(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<=0?l=f+1:c=f}while(l<c)}return l}function o(a,u,l=0,c=a.length){const f=r(a,u,l,c-1);return f>l&&i(a[f-1],u)>-i(a[f],u)?f-1:f}return{left:r,center:o,right:s}}function Aq(){return 0}function r8(e){return e===null?NaN:+e}function*$q(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let i of e)(i=t(i,++n,e))!=null&&(i=+i)>=i&&(yield i)}}const s8=al(Ds),Eo=s8.right,Sq=s8.left;al(r8).center;function Fq(e,t){let n=0,i,r=0,s=0;if(t===void 0)for(let o of e)o!=null&&(o=+o)>=o&&(i=o-r,r+=i/++n,s+=i*(o-r));else{let o=-1;for(let a of e)(a=t(a,++o,e))!=null&&(a=+a)>=a&&(i=a-r,r+=i/++n,s+=i*(a-r))}if(n>1)return s/(n-1)}function Dq(e,t){const n=Fq(e,t);return n&&Math.sqrt(n)}class zn{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let i=0;for(let r=0;r<this._n&&r<32;r++){const s=n[r],o=t+s,a=Math.abs(t)<Math.abs(s)?t-(o-s):s-(o-t);a&&(n[i++]=a),t=o}return n[i]=t,this._n=i+1,this}valueOf(){const t=this._partials;let n=this._n,i,r,s,o=0;if(n>0){for(o=t[--n];n>0&&(i=o,r=t[--n],o=i+r,s=r-(o-i),!s););n>0&&(s<0&&t[n-1]<0||s>0&&t[n-1]>0)&&(r=s*2,i=o+r,r==i-o&&(o=i))}return o}}class o8 extends Map{constructor(t,n=l8){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[i,r]of t)this.set(i,r)}get(t){return super.get(R2(this,t))}has(t){return super.has(R2(this,t))}set(t,n){return super.set(a8(this,t),n)}delete(t){return super.delete(u8(this,t))}}class Zh extends Set{constructor(t,n=l8){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const i of t)this.add(i)}has(t){return super.has(R2(this,t))}add(t){return super.add(a8(this,t))}delete(t){return super.delete(u8(this,t))}}function R2({_intern:e,_key:t},n){const i=t(n);return e.has(i)?e.get(i):n}function a8({_intern:e,_key:t},n){const i=t(n);return e.has(i)?e.get(i):(e.set(i,n),n)}function u8({_intern:e,_key:t},n){const i=t(n);return e.has(i)&&(n=e.get(i),e.delete(i)),n}function l8(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Tq(e,t){return Array.from(t,n=>e[n])}function Mq(e=Ds){if(e===Ds)return c8;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const i=e(t,n);return i||i===0?i:(e(n,n)===0)-(e(t,t)===0)}}function c8(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const Nq=Math.sqrt(50),Rq=Math.sqrt(10),Oq=Math.sqrt(2);function Jh(e,t,n){const i=(t-e)/Math.max(0,n),r=Math.floor(Math.log10(i)),s=i/Math.pow(10,r),o=s>=Nq?10:s>=Rq?5:s>=Oq?2:1;let a,u,l;return r<0?(l=Math.pow(10,-r)/o,a=Math.round(e*l),u=Math.round(t*l),a/l<e&&++a,u/l>t&&--u,l=-l):(l=Math.pow(10,r)*o,a=Math.round(e/l),u=Math.round(t/l),a*l<e&&++a,u*l>t&&--u),u<a&&.5<=n&&n<2?Jh(e,t,n*2):[a,u,l]}function O2(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const i=t<e,[r,s,o]=i?Jh(t,e,n):Jh(e,t,n);if(!(s>=r))return[];const a=s-r+1,u=new Array(a);if(i)if(o<0)for(let l=0;l<a;++l)u[l]=(s-l)/-o;else for(let l=0;l<a;++l)u[l]=(s-l)*o;else if(o<0)for(let l=0;l<a;++l)u[l]=(r+l)/-o;else for(let l=0;l<a;++l)u[l]=(r+l)*o;return u}function L2(e,t,n){return t=+t,e=+e,n=+n,Jh(e,t,n)[2]}function Co(e,t,n){t=+t,e=+e,n=+n;const i=t<e,r=i?L2(t,e,n):L2(e,t,n);return(i?-1:1)*(r<0?1/-r:r)}function Aa(e,t){let n;if(t===void 0)for(const i of e)i!=null&&(n<i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let r of e)(r=t(r,++i,e))!=null&&(n<r||n===void 0&&r>=r)&&(n=r)}return n}function I2(e,t){let n;if(t===void 0)for(const i of e)i!=null&&(n>i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let r of e)(r=t(r,++i,e))!=null&&(n>r||n===void 0&&r>=r)&&(n=r)}return n}function f8(e,t,n=0,i=1/0,r){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),i=Math.floor(Math.min(e.length-1,i)),!(n<=t&&t<=i))return e;for(r=r===void 0?c8:Mq(r);i>n;){if(i-n>600){const u=i-n+1,l=t-n+1,c=Math.log(u),f=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*f*(u-f)/u)*(l-u/2<0?-1:1),h=Math.max(n,Math.floor(t-l*f/u+d)),p=Math.min(i,Math.floor(t+(u-l)*f/u+d));f8(e,t,h,p,r)}const s=e[t];let o=n,a=i;for(Zc(e,n,t),r(e[i],s)>0&&Zc(e,n,i);o<a;){for(Zc(e,o,a),++o,--a;r(e[o],s)<0;)++o;for(;r(e[a],s)>0;)--a}r(e[n],s)===0?Zc(e,n,a):(++a,Zc(e,a,i)),a<=t&&(n=a+1),t<=a&&(i=a-1)}return e}function Zc(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}function P2(e,t,n){if(e=Float64Array.from($q(e,n)),!(!(i=e.length)||isNaN(t=+t))){if(t<=0||i<2)return I2(e);if(t>=1)return Aa(e);var i,r=(i-1)*t,s=Math.floor(r),o=Aa(f8(e,s).subarray(0,s+1)),a=I2(e.subarray(s+1));return o+(a-o)*(r-s)}}function d8(e,t,n=r8){if(!(!(i=e.length)||isNaN(t=+t))){if(t<=0||i<2)return+n(e[0],0,e);if(t>=1)return+n(e[i-1],i-1,e);var i,r=(i-1)*t,s=Math.floor(r),o=+n(e[s],s,e),a=+n(e[s+1],s+1,e);return o+(a-o)*(r-s)}}function Lq(e,t){let n=0,i=0;if(t===void 0)for(let r of e)r!=null&&(r=+r)>=r&&(++n,i+=r);else{let r=-1;for(let s of e)(s=t(s,++r,e))!=null&&(s=+s)>=s&&(++n,i+=s)}if(n)return i/n}function h8(e,t){return P2(e,.5,t)}function*Iq(e){for(const t of e)yield*t}function p8(e){return Array.from(Iq(e))}function Ei(e,t,n){e=+e,t=+t,n=(r=arguments.length)<2?(t=e,e=0,1):r<3?1:+n;for(var i=-1,r=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(r);++i<r;)s[i]=e+i*n;return s}function g8(e,t){let n=0;for(let i of e)(i=+i)&&(n+=i);return n}function Pq(e,...t){e=new Zh(e),t=t.map(zq);e:for(const n of e)for(const i of t)if(!i.has(n)){e.delete(n);continue e}return e}function zq(e){return e instanceof Zh?e:new Zh(e)}function Bq(...e){const t=new Zh;for(const n of e)for(const i of n)t.add(i);return t}function Uq(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Qh(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,i=e.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+e.slice(n+1)]}function ul(e){return e=Qh(Math.abs(e)),e?e[1]:NaN}function jq(e,t){return function(n,i){for(var r=n.length,s=[],o=0,a=e[0],u=0;r>0&&a>0&&(u+a+1>i&&(a=Math.max(1,i-u)),s.push(n.substring(r-=a,r+a)),!((u+=a+1)>i));)a=e[o=(o+1)%e.length];return s.reverse().join(t)}}function qq(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var Wq=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function $a(e){if(!(t=Wq.exec(e)))throw new Error("invalid format: "+e);var t;return new z2({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}$a.prototype=z2.prototype;function z2(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}z2.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Hq(e){e:for(var t=e.length,n=1,i=-1,r;n<t;++n)switch(e[n]){case".":i=r=n;break;case"0":i===0&&(i=n),r=n;break;default:if(!+e[n])break e;i>0&&(i=0);break}return i>0?e.slice(0,i)+e.slice(r+1):e}var m8;function Gq(e,t){var n=Qh(e,t);if(!n)return e+"";var i=n[0],r=n[1],s=r-(m8=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,o=i.length;return s===o?i:s>o?i+new Array(s-o+1).join("0"):s>0?i.slice(0,s)+"."+i.slice(s):"0."+new Array(1-s).join("0")+Qh(e,Math.max(0,t+s-1))[0]}function y8(e,t){var n=Qh(e,t);if(!n)return e+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}const b8={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Uq,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>y8(e*100,t),r:y8,s:Gq,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function v8(e){return e}var x8=Array.prototype.map,_8=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function w8(e){var t=e.grouping===void 0||e.thousands===void 0?v8:jq(x8.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",i=e.currency===void 0?"":e.currency[1]+"",r=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?v8:qq(x8.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function l(f){f=$a(f);var d=f.fill,h=f.align,p=f.sign,g=f.symbol,m=f.zero,y=f.width,b=f.comma,v=f.precision,x=f.trim,_=f.type;_==="n"?(b=!0,_="g"):b8[_]||(v===void 0&&(v=12),x=!0,_="g"),(m||d==="0"&&h==="=")&&(m=!0,d="0",h="=");var E=g==="$"?n:g==="#"&&/[boxX]/.test(_)?"0"+_.toLowerCase():"",w=g==="$"?i:/[%p]/.test(_)?o:"",C=b8[_],k=/[defgprs%]/.test(_);v=v===void 0?6:/[gprs]/.test(_)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v));function S($){var O=E,R=w,F,A,T;if(_==="c")R=C($)+R,$="";else{$=+$;var B=$<0||1/$<0;if($=isNaN($)?u:C(Math.abs($),v),x&&($=Hq($)),B&&+$==0&&p!=="+"&&(B=!1),O=(B?p==="("?p:a:p==="-"||p==="("?"":p)+O,R=(_==="s"?_8[8+m8/3]:"")+R+(B&&p==="("?")":""),k){for(F=-1,A=$.length;++F<A;)if(T=$.charCodeAt(F),48>T||T>57){R=(T===46?r+$.slice(F+1):$.slice(F))+R,$=$.slice(0,F);break}}}b&&!m&&($=t($,1/0));var H=O.length+$.length+R.length,z=H<y?new Array(y-H+1).join(d):"";switch(b&&m&&($=t(z+$,z.length?y-R.length:1/0),z=""),h){case"<":$=O+$+R+z;break;case"=":$=O+z+$+R;break;case"^":$=z.slice(0,H=z.length>>1)+O+$+R+z.slice(H);break;default:$=z+O+$+R;break}return s($)}return S.toString=function(){return f+""},S}function c(f,d){var h=l((f=$a(f),f.type="f",f)),p=Math.max(-8,Math.min(8,Math.floor(ul(d)/3)))*3,g=Math.pow(10,-p),m=_8[8+p/3];return function(y){return h(g*y)+m}}return{format:l,formatPrefix:c}}var e0,t0,B2;Vq({thousands:",",grouping:[3],currency:["$",""]});function Vq(e){return e0=w8(e),t0=e0.format,B2=e0.formatPrefix,e0}function E8(e){return Math.max(0,-ul(Math.abs(e)))}function C8(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(ul(t)/3)))*3-ul(Math.abs(e)))}function k8(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,ul(t)-ul(e))+1}const U2=new Date,j2=new Date;function qt(e,t,n,i){function r(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return r.floor=s=>(e(s=new Date(+s)),s),r.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),r.round=s=>{const o=r(s),a=r.ceil(s);return s-o<a-s?o:a},r.offset=(s,o)=>(t(s=new Date(+s),o==null?1:Math.floor(o)),s),r.range=(s,o,a)=>{const u=[];if(s=r.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return u;let l;do u.push(l=new Date(+s)),t(s,a),e(s);while(l<s&&s<o);return u},r.filter=s=>qt(o=>{if(o>=o)for(;e(o),!s(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;t(o,-1),!s(o););else for(;--a>=0;)for(;t(o,1),!s(o););}),n&&(r.count=(s,o)=>(U2.setTime(+s),j2.setTime(+o),e(U2),e(j2),Math.floor(n(U2,j2))),r.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?r.filter(i?o=>i(o)%s===0:o=>r.count(0,o)%s===0):r)),r}const ll=qt(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);ll.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?qt(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):ll),ll.range;const Ts=1e3,ji=Ts*60,Ms=ji*60,Ns=Ms*24,q2=Ns*7,A8=Ns*30,W2=Ns*365,Rs=qt(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Ts)},(e,t)=>(t-e)/Ts,e=>e.getUTCSeconds());Rs.range;const n0=qt(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ts)},(e,t)=>{e.setTime(+e+t*ji)},(e,t)=>(t-e)/ji,e=>e.getMinutes());n0.range;const i0=qt(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*ji)},(e,t)=>(t-e)/ji,e=>e.getUTCMinutes());i0.range;const r0=qt(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ts-e.getMinutes()*ji)},(e,t)=>{e.setTime(+e+t*Ms)},(e,t)=>(t-e)/Ms,e=>e.getHours());r0.range;const s0=qt(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Ms)},(e,t)=>(t-e)/Ms,e=>e.getUTCHours());s0.range;const Os=qt(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*ji)/Ns,e=>e.getDate()-1);Os.range;const ko=qt(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ns,e=>e.getUTCDate()-1);ko.range;const $8=qt(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ns,e=>Math.floor(e/Ns));$8.range;function Sa(e){return qt(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*ji)/q2)}const cl=Sa(0),o0=Sa(1),Yq=Sa(2),Xq=Sa(3),fl=Sa(4),Kq=Sa(5),Zq=Sa(6);cl.range,o0.range,Yq.range,Xq.range,fl.range,Kq.range,Zq.range;function Fa(e){return qt(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/q2)}const dl=Fa(0),a0=Fa(1),Jq=Fa(2),Qq=Fa(3),hl=Fa(4),eW=Fa(5),tW=Fa(6);dl.range,a0.range,Jq.range,Qq.range,hl.range,eW.range,tW.range;const Jc=qt(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Jc.range;const Qc=qt(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());Qc.range;const Wr=qt(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Wr.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:qt(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)}),Wr.range;const Hr=qt(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Hr.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:qt(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)}),Hr.range;function S8(e,t,n,i,r,s){const o=[[Rs,1,Ts],[Rs,5,5*Ts],[Rs,15,15*Ts],[Rs,30,30*Ts],[s,1,ji],[s,5,5*ji],[s,15,15*ji],[s,30,30*ji],[r,1,Ms],[r,3,3*Ms],[r,6,6*Ms],[r,12,12*Ms],[i,1,Ns],[i,2,2*Ns],[n,1,q2],[t,1,A8],[t,3,3*A8],[e,1,W2]];function a(l,c,f){const d=c<l;d&&([l,c]=[c,l]);const h=f&&typeof f.range=="function"?f:u(l,c,f),p=h?h.range(l,+c+1):[];return d?p.reverse():p}function u(l,c,f){const d=Math.abs(c-l)/f,h=al(([,,m])=>m).right(o,d);if(h===o.length)return e.every(Co(l/W2,c/W2,f));if(h===0)return ll.every(Math.max(Co(l,c,f),1));const[p,g]=o[d/o[h-1][2]<o[h][2]/d?h-1:h];return p.every(g)}return[a,u]}const[nW,iW]=S8(Hr,Qc,dl,$8,s0,i0),[rW,sW]=S8(Wr,Jc,cl,Os,r0,n0),cn="year",si="quarter",An="month",Wt="week",oi="date",$n="day",Gr="dayofyear",Ci="hours",ki="minutes",qi="seconds",cr="milliseconds",H2=[cn,si,An,Wt,oi,$n,Gr,Ci,ki,qi,cr],G2=H2.reduce((e,t,n)=>(e[t]=1+n,e),{});function V2(e){const t=oe(e).slice(),n={};return t.length||q("Missing time unit."),t.forEach(r=>{ue(G2,r)?n[r]=1:q(`Invalid time unit: ${r}.`)}),(n[Wt]||n[$n]?1:0)+(n[si]||n[An]||n[oi]?1:0)+(n[Gr]?1:0)>1&&q(`Incompatible time units: ${e}`),t.sort((r,s)=>G2[r]-G2[s]),t}const oW={[cn]:"%Y ",[si]:"Q%q ",[An]:"%b ",[oi]:"%d ",[Wt]:"W%U ",[$n]:"%a ",[Gr]:"%j ",[Ci]:"%H:00",[ki]:"00:%M",[qi]:":%S",[cr]:".%L",[`${cn}-${An}`]:"%Y-%m ",[`${cn}-${An}-${oi}`]:"%Y-%m-%d ",[`${Ci}-${ki}`]:"%H:%M"};function F8(e,t){const n=Oe({},oW,t),i=V2(e),r=i.length;let s="",o=0,a,u;for(o=0;o<r;)for(a=i.length;a>o;--a)if(u=i.slice(o,a).join("-"),n[u]!=null){s+=n[u],o=a;break}return s.trim()}const Da=new Date;function Y2(e){return Da.setFullYear(e),Da.setMonth(0),Da.setDate(1),Da.setHours(0,0,0,0),Da}function D8(e){return M8(new Date(e))}function T8(e){return X2(new Date(e))}function M8(e){return Os.count(Y2(e.getFullYear())-1,e)}function X2(e){return cl.count(Y2(e.getFullYear())-1,e)}function K2(e){return Y2(e).getDay()}function aW(e,t,n,i,r,s,o){if(0<=e&&e<100){const a=new Date(-1,t,n,i,r,s,o);return a.setFullYear(e),a}return new Date(e,t,n,i,r,s,o)}function N8(e){return O8(new Date(e))}function R8(e){return Z2(new Date(e))}function O8(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return ko.count(t-1,e)}function Z2(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return dl.count(t-1,e)}function J2(e){return Da.setTime(Date.UTC(e,0,1)),Da.getUTCDay()}function uW(e,t,n,i,r,s,o){if(0<=e&&e<100){const a=new Date(Date.UTC(-1,t,n,i,r,s,o));return a.setUTCFullYear(n.y),a}return new Date(Date.UTC(e,t,n,i,r,s,o))}function L8(e,t,n,i,r){const s=t||1,o=Ge(e),a=(y,b,v)=>(v=v||y,lW(n[v],i[v],y===o&&s,b)),u=new Date,l=lr(e),c=l[cn]?a(cn):kn(2012),f=l[An]?a(An):l[si]?a(si):bo,d=l[Wt]&&l[$n]?a($n,1,Wt+$n):l[Wt]?a(Wt,1):l[$n]?a($n,1):l[oi]?a(oi,1):l[Gr]?a(Gr,1):tl,h=l[Ci]?a(Ci):bo,p=l[ki]?a(ki):bo,g=l[qi]?a(qi):bo,m=l[cr]?a(cr):bo;return function(y){u.setTime(+y);const b=c(u);return r(b,f(u),d(u,b),h(u),p(u),g(u),m(u))}}function lW(e,t,n,i){const r=n<=1?e:i?(s,o)=>i+n*Math.floor((e(s,o)-i)/n):(s,o)=>n*Math.floor(e(s,o)/n);return t?(s,o)=>t(r(s,o),o):r}function pl(e,t,n){return t+e*7-(n+6)%7}const cW={[cn]:e=>e.getFullYear(),[si]:e=>Math.floor(e.getMonth()/3),[An]:e=>e.getMonth(),[oi]:e=>e.getDate(),[Ci]:e=>e.getHours(),[ki]:e=>e.getMinutes(),[qi]:e=>e.getSeconds(),[cr]:e=>e.getMilliseconds(),[Gr]:e=>M8(e),[Wt]:e=>X2(e),[Wt+$n]:(e,t)=>pl(X2(e),e.getDay(),K2(t)),[$n]:(e,t)=>pl(1,e.getDay(),K2(t))},fW={[si]:e=>3*e,[Wt]:(e,t)=>pl(e,0,K2(t))};function I8(e,t){return L8(e,t||1,cW,fW,aW)}const dW={[cn]:e=>e.getUTCFullYear(),[si]:e=>Math.floor(e.getUTCMonth()/3),[An]:e=>e.getUTCMonth(),[oi]:e=>e.getUTCDate(),[Ci]:e=>e.getUTCHours(),[ki]:e=>e.getUTCMinutes(),[qi]:e=>e.getUTCSeconds(),[cr]:e=>e.getUTCMilliseconds(),[Gr]:e=>O8(e),[Wt]:e=>Z2(e),[$n]:(e,t)=>pl(1,e.getUTCDay(),J2(t)),[Wt+$n]:(e,t)=>pl(Z2(e),e.getUTCDay(),J2(t))},hW={[si]:e=>3*e,[Wt]:(e,t)=>pl(e,0,J2(t))};function P8(e,t){return L8(e,t||1,dW,hW,uW)}const pW={[cn]:Wr,[si]:Jc.every(3),[An]:Jc,[Wt]:cl,[oi]:Os,[$n]:Os,[Gr]:Os,[Ci]:r0,[ki]:n0,[qi]:Rs,[cr]:ll},gW={[cn]:Hr,[si]:Qc.every(3),[An]:Qc,[Wt]:dl,[oi]:ko,[$n]:ko,[Gr]:ko,[Ci]:s0,[ki]:i0,[qi]:Rs,[cr]:ll};function gl(e){return pW[e]}function ml(e){return gW[e]}function z8(e,t,n){return e?e.offset(t,n):void 0}function B8(e,t,n){return z8(gl(e),t,n)}function U8(e,t,n){return z8(ml(e),t,n)}function j8(e,t,n,i){return e?e.range(t,n,i):void 0}function q8(e,t,n,i){return j8(gl(e),t,n,i)}function W8(e,t,n,i){return j8(ml(e),t,n,i)}const ef=1e3,tf=ef*60,nf=tf*60,u0=nf*24,mW=u0*7,H8=u0*30,Q2=u0*365,G8=[cn,An,oi,Ci,ki,qi,cr],rf=G8.slice(0,-1),sf=rf.slice(0,-1),of=sf.slice(0,-1),yW=of.slice(0,-1),bW=[cn,Wt],V8=[cn,An],Y8=[cn],af=[[rf,1,ef],[rf,5,5*ef],[rf,15,15*ef],[rf,30,30*ef],[sf,1,tf],[sf,5,5*tf],[sf,15,15*tf],[sf,30,30*tf],[of,1,nf],[of,3,3*nf],[of,6,6*nf],[of,12,12*nf],[yW,1,u0],[bW,1,mW],[V8,1,H8],[V8,3,3*H8],[Y8,1,Q2]];function X8(e){const t=e.extent,n=e.maxbins||40,i=Math.abs(Xc(t))/n;let r=al(a=>a[2]).right(af,i),s,o;return r===af.length?(s=Y8,o=Co(t[0]/Q2,t[1]/Q2,n)):r?(r=af[i/af[r-1][2]<af[r][2]/i?r-1:r],s=r[0],o=r[1]):(s=G8,o=Math.max(Co(t[0],t[1],n),1)),{units:s,step:o}}function ey(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function ty(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function uf(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function K8(e){var t=e.dateTime,n=e.date,i=e.time,r=e.periods,s=e.days,o=e.shortDays,a=e.months,u=e.shortMonths,l=lf(r),c=cf(r),f=lf(s),d=cf(s),h=lf(o),p=cf(o),g=lf(a),m=cf(a),y=lf(u),b=cf(u),v={a:B,A:H,b:z,B:ne,c:null,d:nE,e:nE,f:UW,g:ZW,G:QW,H:PW,I:zW,j:BW,L:iE,m:jW,M:qW,p:be,q:de,Q:lE,s:cE,S:WW,u:HW,U:GW,V:VW,w:YW,W:XW,x:null,X:null,y:KW,Y:JW,Z:eH,"%":uE},x={a:Te,A:ct,b:$e,B:Ot,c:null,d:sE,e:sE,f:rH,g:pH,G:mH,H:tH,I:nH,j:iH,L:oE,m:sH,M:oH,p:or,q:Ii,Q:lE,s:cE,S:aH,u:uH,U:lH,V:cH,w:fH,W:dH,x:null,X:null,y:hH,Y:gH,Z:yH,"%":uE},_={a:S,A:$,b:O,B:R,c:F,d:eE,e:eE,f:RW,g:Q8,G:J8,H:tE,I:tE,j:DW,L:NW,m:FW,M:TW,p:k,q:SW,Q:LW,s:IW,S:MW,u:EW,U:CW,V:kW,w:wW,W:AW,x:A,X:T,y:Q8,Y:J8,Z:$W,"%":OW};v.x=E(n,v),v.X=E(i,v),v.c=E(t,v),x.x=E(n,x),x.X=E(i,x),x.c=E(t,x);function E(le,Re){return function(Le){var K=[],Kt=-1,Xe=0,Pn=le.length,ln,Fs,r2;for(Le instanceof Date||(Le=new Date(+Le));++Kt<Pn;)le.charCodeAt(Kt)===37&&(K.push(le.slice(Xe,Kt)),(Fs=Z8[ln=le.charAt(++Kt)])!=null?ln=le.charAt(++Kt):Fs=ln==="e"?" ":"0",(r2=Re[ln])&&(ln=r2(Le,Fs)),K.push(ln),Xe=Kt+1);return K.push(le.slice(Xe,Kt)),K.join("")}}function w(le,Re){return function(Le){var K=uf(1900,void 0,1),Kt=C(K,le,Le+="",0),Xe,Pn;if(Kt!=Le.length)return null;if("Q"in K)return new Date(K.Q);if("s"in K)return new Date(K.s*1e3+("L"in K?K.L:0));if(Re&&!("Z"in K)&&(K.Z=0),"p"in K&&(K.H=K.H%12+K.p*12),K.m===void 0&&(K.m="q"in K?K.q:0),"V"in K){if(K.V<1||K.V>53)return null;"w"in K||(K.w=1),"Z"in K?(Xe=ty(uf(K.y,0,1)),Pn=Xe.getUTCDay(),Xe=Pn>4||Pn===0?a0.ceil(Xe):a0(Xe),Xe=ko.offset(Xe,(K.V-1)*7),K.y=Xe.getUTCFullYear(),K.m=Xe.getUTCMonth(),K.d=Xe.getUTCDate()+(K.w+6)%7):(Xe=ey(uf(K.y,0,1)),Pn=Xe.getDay(),Xe=Pn>4||Pn===0?o0.ceil(Xe):o0(Xe),Xe=Os.offset(Xe,(K.V-1)*7),K.y=Xe.getFullYear(),K.m=Xe.getMonth(),K.d=Xe.getDate()+(K.w+6)%7)}else("W"in K||"U"in K)&&("w"in K||(K.w="u"in K?K.u%7:"W"in K?1:0),Pn="Z"in K?ty(uf(K.y,0,1)).getUTCDay():ey(uf(K.y,0,1)).getDay(),K.m=0,K.d="W"in K?(K.w+6)%7+K.W*7-(Pn+5)%7:K.w+K.U*7-(Pn+6)%7);return"Z"in K?(K.H+=K.Z/100|0,K.M+=K.Z%100,ty(K)):ey(K)}}function C(le,Re,Le,K){for(var Kt=0,Xe=Re.length,Pn=Le.length,ln,Fs;Kt<Xe;){if(K>=Pn)return-1;if(ln=Re.charCodeAt(Kt++),ln===37){if(ln=Re.charAt(Kt++),Fs=_[ln in Z8?Re.charAt(Kt++):ln],!Fs||(K=Fs(le,Le,K))<0)return-1}else if(ln!=Le.charCodeAt(K++))return-1}return K}function k(le,Re,Le){var K=l.exec(Re.slice(Le));return K?(le.p=c.get(K[0].toLowerCase()),Le+K[0].length):-1}function S(le,Re,Le){var K=h.exec(Re.slice(Le));return K?(le.w=p.get(K[0].toLowerCase()),Le+K[0].length):-1}function $(le,Re,Le){var K=f.exec(Re.slice(Le));return K?(le.w=d.get(K[0].toLowerCase()),Le+K[0].length):-1}function O(le,Re,Le){var K=y.exec(Re.slice(Le));return K?(le.m=b.get(K[0].toLowerCase()),Le+K[0].length):-1}function R(le,Re,Le){var K=g.exec(Re.slice(Le));return K?(le.m=m.get(K[0].toLowerCase()),Le+K[0].length):-1}function F(le,Re,Le){return C(le,t,Re,Le)}function A(le,Re,Le){return C(le,n,Re,Le)}function T(le,Re,Le){return C(le,i,Re,Le)}function B(le){return o[le.getDay()]}function H(le){return s[le.getDay()]}function z(le){return u[le.getMonth()]}function ne(le){return a[le.getMonth()]}function be(le){return r[+(le.getHours()>=12)]}function de(le){return 1+~~(le.getMonth()/3)}function Te(le){return o[le.getUTCDay()]}function ct(le){return s[le.getUTCDay()]}function $e(le){return u[le.getUTCMonth()]}function Ot(le){return a[le.getUTCMonth()]}function or(le){return r[+(le.getUTCHours()>=12)]}function Ii(le){return 1+~~(le.getUTCMonth()/3)}return{format:function(le){var Re=E(le+="",v);return Re.toString=function(){return le},Re},parse:function(le){var Re=w(le+="",!1);return Re.toString=function(){return le},Re},utcFormat:function(le){var Re=E(le+="",x);return Re.toString=function(){return le},Re},utcParse:function(le){var Re=w(le+="",!0);return Re.toString=function(){return le},Re}}}var Z8={"-":"",_:" ",0:"0"},Zt=/^\s*\d+/,vW=/^%/,xW=/[\\^$*+?|[\]().{}]/g;function Je(e,t,n){var i=e<0?"-":"",r=(i?-e:e)+"",s=r.length;return i+(s<n?new Array(n-s+1).join(t)+r:r)}function _W(e){return e.replace(xW,"\\$&")}function lf(e){return new RegExp("^(?:"+e.map(_W).join("|")+")","i")}function cf(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function wW(e,t,n){var i=Zt.exec(t.slice(n,n+1));return i?(e.w=+i[0],n+i[0].length):-1}function EW(e,t,n){var i=Zt.exec(t.slice(n,n+1));return i?(e.u=+i[0],n+i[0].length):-1}function CW(e,t,n){var i=Zt.exec(t.slice(n,n+2));return i?(e.U=+i[0],n+i[0].length):-1}function kW(e,t,n){var i=Zt.exec(t.slice(n,n+2));return i?(e.V=+i[0],n+i[0].length):-1}function AW(e,t,n){var i=Zt.exec(t.slice(n,n+2));return i?(e.W=+i[0],n+i[0].length):-1}function J8(e,t,n){var i=Zt.exec(t.slice(n,n+4));return i?(e.y=+i[0],n+i[0].length):-1}function Q8(e,t,n){var i=Zt.exec(t.slice(n,n+2));return i?(e.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function $W(e,t,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return i?(e.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function SW(e,t,n){var i=Zt.exec(t.slice(n,n+1));return i?(e.q=i[0]*3-3,n+i[0].length):-1}function FW(e,t,n){var i=Zt.exec(t.slice(n,n+2));return i?(e.m=i[0]-1,n+i[0].length):-1}function eE(e,t,n){var i=Zt.exec(t.slice(n,n+2));return i?(e.d=+i[0],n+i[0].length):-1}function DW(e,t,n){var i=Zt.exec(t.slice(n,n+3));return i?(e.m=0,e.d=+i[0],n+i[0].length):-1}function tE(e,t,n){var i=Zt.exec(t.slice(n,n+2));return i?(e.H=+i[0],n+i[0].length):-1}function TW(e,t,n){var i=Zt.exec(t.slice(n,n+2));return i?(e.M=+i[0],n+i[0].length):-1}function MW(e,t,n){var i=Zt.exec(t.slice(n,n+2));return i?(e.S=+i[0],n+i[0].length):-1}function NW(e,t,n){var i=Zt.exec(t.slice(n,n+3));return i?(e.L=+i[0],n+i[0].length):-1}function RW(e,t,n){var i=Zt.exec(t.slice(n,n+6));return i?(e.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function OW(e,t,n){var i=vW.exec(t.slice(n,n+1));return i?n+i[0].length:-1}function LW(e,t,n){var i=Zt.exec(t.slice(n));return i?(e.Q=+i[0],n+i[0].length):-1}function IW(e,t,n){var i=Zt.exec(t.slice(n));return i?(e.s=+i[0],n+i[0].length):-1}function nE(e,t){return Je(e.getDate(),t,2)}function PW(e,t){return Je(e.getHours(),t,2)}function zW(e,t){return Je(e.getHours()%12||12,t,2)}function BW(e,t){return Je(1+Os.count(Wr(e),e),t,3)}function iE(e,t){return Je(e.getMilliseconds(),t,3)}function UW(e,t){return iE(e,t)+"000"}function jW(e,t){return Je(e.getMonth()+1,t,2)}function qW(e,t){return Je(e.getMinutes(),t,2)}function WW(e,t){return Je(e.getSeconds(),t,2)}function HW(e){var t=e.getDay();return t===0?7:t}function GW(e,t){return Je(cl.count(Wr(e)-1,e),t,2)}function rE(e){var t=e.getDay();return t>=4||t===0?fl(e):fl.ceil(e)}function VW(e,t){return e=rE(e),Je(fl.count(Wr(e),e)+(Wr(e).getDay()===4),t,2)}function YW(e){return e.getDay()}function XW(e,t){return Je(o0.count(Wr(e)-1,e),t,2)}function KW(e,t){return Je(e.getFullYear()%100,t,2)}function ZW(e,t){return e=rE(e),Je(e.getFullYear()%100,t,2)}function JW(e,t){return Je(e.getFullYear()%1e4,t,4)}function QW(e,t){var n=e.getDay();return e=n>=4||n===0?fl(e):fl.ceil(e),Je(e.getFullYear()%1e4,t,4)}function eH(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Je(t/60|0,"0",2)+Je(t%60,"0",2)}function sE(e,t){return Je(e.getUTCDate(),t,2)}function tH(e,t){return Je(e.getUTCHours(),t,2)}function nH(e,t){return Je(e.getUTCHours()%12||12,t,2)}function iH(e,t){return Je(1+ko.count(Hr(e),e),t,3)}function oE(e,t){return Je(e.getUTCMilliseconds(),t,3)}function rH(e,t){return oE(e,t)+"000"}function sH(e,t){return Je(e.getUTCMonth()+1,t,2)}function oH(e,t){return Je(e.getUTCMinutes(),t,2)}function aH(e,t){return Je(e.getUTCSeconds(),t,2)}function uH(e){var t=e.getUTCDay();return t===0?7:t}function lH(e,t){return Je(dl.count(Hr(e)-1,e),t,2)}function aE(e){var t=e.getUTCDay();return t>=4||t===0?hl(e):hl.ceil(e)}function cH(e,t){return e=aE(e),Je(hl.count(Hr(e),e)+(Hr(e).getUTCDay()===4),t,2)}function fH(e){return e.getUTCDay()}function dH(e,t){return Je(a0.count(Hr(e)-1,e),t,2)}function hH(e,t){return Je(e.getUTCFullYear()%100,t,2)}function pH(e,t){return e=aE(e),Je(e.getUTCFullYear()%100,t,2)}function gH(e,t){return Je(e.getUTCFullYear()%1e4,t,4)}function mH(e,t){var n=e.getUTCDay();return e=n>=4||n===0?hl(e):hl.ceil(e),Je(e.getUTCFullYear()%1e4,t,4)}function yH(){return"+0000"}function uE(){return"%"}function lE(e){return+e}function cE(e){return Math.floor(+e/1e3)}var yl,ny,fE,iy,dE;bH({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function bH(e){return yl=K8(e),ny=yl.format,fE=yl.parse,iy=yl.utcFormat,dE=yl.utcParse,yl}function ff(e){const t={};return n=>t[n]||(t[n]=e(n))}function vH(e,t){return n=>{const i=e(n),r=i.indexOf(t);if(r<0)return i;let s=xH(i,r);const o=s<i.length?i.slice(s):"";for(;--s>r;)if(i[s]!=="0"){++s;break}return i.slice(0,s)+o}}function xH(e,t){let n=e.lastIndexOf("e"),i;if(n>0)return n;for(n=e.length;--n>t;)if(i=e.charCodeAt(n),i>=48&&i<=57)return n+1}function hE(e){const t=ff(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(i){const r=$a(i||",");if(r.precision==null){switch(r.precision=12,r.type){case"%":r.precision-=2;break;case"e":r.precision-=1;break}return vH(t(r),t(".1f")(1)[1])}else return t(r)},formatSpan(i,r,s,o){o=$a(o??",f");const a=Co(i,r,s),u=Math.max(Math.abs(i),Math.abs(r));let l;if(o.precision==null)switch(o.type){case"s":return isNaN(l=C8(a,u))||(o.precision=l),n(o,u);case"":case"e":case"g":case"p":case"r":{isNaN(l=k8(a,u))||(o.precision=l-(o.type==="e"));break}case"f":case"%":{isNaN(l=E8(a))||(o.precision=l-(o.type==="%")*2);break}}return t(o)}}}let ry;pE();function pE(){return ry=hE({format:t0,formatPrefix:B2})}function gE(e){return hE(w8(e))}function l0(e){return arguments.length?ry=gE(e):ry}function mE(e,t,n){n=n||{},re(n)||q(`Invalid time multi-format specifier: ${n}`);const i=t(qi),r=t(ki),s=t(Ci),o=t(oi),a=t(Wt),u=t(An),l=t(si),c=t(cn),f=e(n[cr]||".%L"),d=e(n[qi]||":%S"),h=e(n[ki]||"%I:%M"),p=e(n[Ci]||"%I %p"),g=e(n[oi]||n[$n]||"%a %d"),m=e(n[Wt]||"%b %d"),y=e(n[An]||"%B"),b=e(n[si]||"%B"),v=e(n[cn]||"%Y");return x=>(i(x)<x?f:r(x)<x?d:s(x)<x?h:o(x)<x?p:u(x)<x?a(x)<x?g:m:c(x)<x?l(x)<x?y:b:v)(x)}function yE(e){const t=ff(e.format),n=ff(e.utcFormat);return{timeFormat:i=>se(i)?t(i):mE(t,gl,i),utcFormat:i=>se(i)?n(i):mE(n,ml,i),timeParse:ff(e.parse),utcParse:ff(e.utcParse)}}let sy;bE();function bE(){return sy=yE({format:ny,parse:fE,utcFormat:iy,utcParse:dE})}function vE(e){return yE(K8(e))}function df(e){return arguments.length?sy=vE(e):sy}const oy=(e,t)=>Oe({},e,t);function xE(e,t){const n=e?gE(e):l0(),i=t?vE(t):df();return oy(n,i)}function ay(e,t){const n=arguments.length;return n&&n!==2&&q("defaultLocale expects either zero or two arguments."),n?oy(l0(e),df(t)):oy(l0(),df())}function _H(){return pE(),bE(),ay()}const wH=/^(data:|([A-Za-z]+:)?\/\/)/,EH=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,CH=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,_E="file://";function kH(e,t){return n=>({options:n||{},sanitize:$H,load:AH,fileAccess:!1,file:SH(t),http:DH(e)})}async function AH(e,t){const n=await this.sanitize(e,t),i=n.href;return n.localFile?this.file(i):this.http(i,t)}async function $H(e,t){t=Oe({},this.options,t);const n=this.fileAccess,i={href:null};let r,s,o;const a=EH.test(e.replace(CH,""));(e==null||typeof e!="string"||!a)&&q("Sanitize failure, invalid URI: "+Q(e));const u=wH.test(e);return(o=t.baseURL)&&!u&&(!e.startsWith("/")&&!o.endsWith("/")&&(e="/"+e),e=o+e),s=(r=e.startsWith(_E))||t.mode==="file"||t.mode!=="http"&&!u&&n,r?e=e.slice(_E.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),s=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(i,"localFile",{value:!!s}),i.href=e,t.target&&(i.target=t.target+""),t.rel&&(i.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(i.crossOrigin=t.crossOrigin+""),i}function SH(e){return e?t=>new Promise((n,i)=>{e.readFile(t,(r,s)=>{r?i(r):n(s)})}):FH}async function FH(){q("No file system access.")}function DH(e){return e?async function(t,n){const i=Oe({},this.options.http,n),r=n&&n.response,s=await e(t,i);return s.ok?Ie(s[r])?s[r]():s.text():q(s.status+""+s.statusText)}:TH}async function TH(){q("No HTTP fetch method available.")}const MH=e=>e!=null&&e===e,NH=e=>e==="true"||e==="false"||e===!0||e===!1,RH=e=>!Number.isNaN(Date.parse(e)),wE=e=>!Number.isNaN(+e)&&!(e instanceof Date),OH=e=>wE(e)&&Number.isInteger(+e),uy={boolean:S2,integer:Cn,number:Cn,date:F2,string:D2,unknown:En},c0=[NH,OH,wE,RH],LH=["boolean","integer","number","date"];function EE(e,t){if(!e||!e.length)return"unknown";const n=e.length,i=c0.length,r=c0.map((s,o)=>o+1);for(let s=0,o=0,a,u;s<n;++s)for(u=t?e[s][t]:e[s],a=0;a<i;++a)if(r[a]&&MH(u)&&!c0[a](u)&&(r[a]=0,++o,o===c0.length))return"string";return LH[r.reduce((s,o)=>s===0?o:s,0)-1]}function CE(e,t){return t.reduce((n,i)=>(n[i]=EE(e,i),n),{})}function kE(e){const t=function(n,i){const r={delimiter:e};return ly(n,i?Oe(i,r):r)};return t.responseType="text",t}function ly(e,t){return t.header&&(e=t.header.map(Q).join(t.delimiter)+`
`+e),mq(t.delimiter).parse(e+"")}ly.responseType="text";function IH(e){return typeof Buffer=="function"&&Ie(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function cy(e,t){const n=t&&t.property?Bi(t.property):En;return re(e)&&!IH(e)?PH(n(e),t):n(JSON.parse(e))}cy.responseType="json";function PH(e,t){return!W(e)&&V4(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}const zH={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function AE(e,t){let n,i,r,s;return e=cy(e,t),t&&t.feature?(n=xq,r=t.feature):t&&t.mesh?(n=wq,r=t.mesh,s=zH[t.filter]):q("Missing TopoJSON feature or mesh parameter."),i=(i=e.objects[r])?n(e,i,s):q("Invalid TopoJSON object: "+r),i&&i.features||[i]}AE.responseType="json";const f0={dsv:ly,csv:kE(","),tsv:kE("	"),json:cy,topojson:AE};function fy(e,t){return arguments.length>1?(f0[e]=t,this):ue(f0,e)?f0[e]:null}function $E(e){const t=fy(e);return t&&t.responseType||"text"}function SE(e,t,n,i){t=t||{};const r=fy(t.type||"json");return r||q("Unknown data format type: "+t.type),e=r(e,t),t.parse&&BH(e,t.parse,n,i),ue(e,"columns")&&delete e.columns,e}function BH(e,t,n,i){if(!e.length)return;const r=df();n=n||r.timeParse,i=i||r.utcParse;let s=e.columns||Object.keys(e[0]),o,a,u,l,c,f;t==="auto"&&(t=CE(e,s)),s=Object.keys(t);const d=s.map(h=>{const p=t[h];let g,m;if(p&&(p.startsWith("date:")||p.startsWith("utc:")))return g=p.split(/:(.+)?/,2),m=g[1],(m[0]==="'"&&m[m.length-1]==="'"||m[0]==='"'&&m[m.length-1]==='"')&&(m=m.slice(1,-1)),(g[0]==="utc"?i:n)(m);if(!uy[p])throw Error("Illegal format pattern: "+h+":"+p);return uy[p]});for(u=0,c=e.length,f=s.length;u<c;++u)for(o=e[u],l=0;l<f;++l)a=s[l],o[a]=d[l](o[a])}const d0=kH(typeof fetch<"u"&&fetch,null);function h0(e){const t=e||En,n=[],i={};return n.add=r=>{const s=t(r);return i[s]||(i[s]=1,n.push(r)),n},n.remove=r=>{const s=t(r);if(i[s]){i[s]=0;const o=n.indexOf(r);o>=0&&n.splice(o,1)}return n},n}async function p0(e,t){try{await t(e)}catch(n){e.error(n)}}const FE=Symbol("vega_id");let UH=1;function g0(e){return!!(e&&_e(e))}function _e(e){return e[FE]}function DE(e,t){return e[FE]=t,e}function nt(e){const t=e===Object(e)?e:{data:e};return _e(t)?t:DE(t,UH++)}function dy(e){return m0(e,nt({}))}function m0(e,t){for(const n in e)t[n]=e[n];return t}function TE(e,t){return DE(t,_e(e))}function Ta(e,t){return e?t?(n,i)=>e(n,i)||_e(t(n))-_e(t(i)):(n,i)=>e(n,i)||_e(n)-_e(i):null}function ME(e){return e&&e.constructor===Ao}function Ao(){const e=[],t=[],n=[],i=[],r=[];let s=null,o=!1;return{constructor:Ao,insert(a){const u=oe(a),l=u.length;for(let c=0;c<l;++c)e.push(u[c]);return this},remove(a){const u=Ie(a)?i:t,l=oe(a),c=l.length;for(let f=0;f<c;++f)u.push(l[f]);return this},modify(a,u,l){const c={field:u,value:kn(l)};return Ie(a)?(c.filter=a,r.push(c)):(c.tuple=a,n.push(c)),this},encode(a,u){return Ie(a)?r.push({filter:a,field:u}):n.push({tuple:a,field:u}),this},clean(a){return s=a,this},reflow(){return o=!0,this},pulse(a,u){const l={},c={};let f,d,h,p,g,m;for(f=0,d=u.length;f<d;++f)l[_e(u[f])]=1;for(f=0,d=t.length;f<d;++f)g=t[f],l[_e(g)]=-1;for(f=0,d=i.length;f<d;++f)p=i[f],u.forEach(b=>{p(b)&&(l[_e(b)]=-1)});for(f=0,d=e.length;f<d;++f)g=e[f],m=_e(g),l[m]?l[m]=1:a.add.push(nt(e[f]));for(f=0,d=u.length;f<d;++f)g=u[f],l[_e(g)]<0&&a.rem.push(g);function y(b,v,x){x?b[v]=x(b):a.encode=v,o||(c[_e(b)]=b)}for(f=0,d=n.length;f<d;++f)h=n[f],g=h.tuple,p=h.field,m=l[_e(g)],m>0&&(y(g,p,h.value),a.modifies(p));for(f=0,d=r.length;f<d;++f)h=r[f],p=h.filter,u.forEach(b=>{p(b)&&l[_e(b)]>0&&y(b,h.field,h.value)}),a.modifies(h.field);if(o)a.mod=t.length||i.length?u.filter(b=>l[_e(b)]>0):u.slice();else for(m in c)a.mod.push(c[m]);return(s||s==null&&(t.length||i.length))&&a.clean(!0),a}}}const y0="_:mod:_";function b0(){Object.defineProperty(this,y0,{writable:!0,value:{}})}b0.prototype={set(e,t,n,i){const r=this,s=r[e],o=r[y0];return t!=null&&t>=0?(s[t]!==n||i)&&(s[t]=n,o[t+":"+e]=-1,o[e]=-1):(s!==n||i)&&(r[e]=n,o[e]=W(n)?1+n.length:-1),r},modified(e,t){const n=this[y0];if(arguments.length){if(W(e)){for(let i=0;i<e.length;++i)if(n[e[i]])return!0;return!1}}else{for(const i in n)if(n[i])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[y0]={},this}};let jH=0;const qH="pulse",WH=new b0,HH=1,GH=2;function xt(e,t,n,i){this.id=++jH,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,i)}function NE(e){return function(t){const n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}xt.prototype={targets(){return this._targets||(this._targets=h0(Vc))},set(e){return this.value!==e?(this.value=e,1):0},skip:NE(HH),modified:NE(GH),parameters(e,t,n){t=t!==!1;const i=this._argval=this._argval||new b0,r=this._argops=this._argops||[],s=[];let o,a,u,l;const c=(f,d,h)=>{h instanceof xt?(h!==this&&(t&&h.targets().add(this),s.push(h)),r.push({op:h,name:f,index:d})):i.set(f,d,h)};for(o in e)if(a=e[o],o===qH)oe(a).forEach(f=>{f instanceof xt?f!==this&&(f.targets().add(this),s.push(f)):q("Pulse parameters must be operator instances.")}),this.source=a;else if(W(a))for(i.set(o,-1,Array(u=a.length)),l=0;l<u;++l)c(o,l,a[l]);else c(o,-1,a);return this.marshall().clear(),n&&(r.initonly=!0),s},marshall(e){const t=this._argval||WH,n=this._argops;let i,r,s,o;if(n){const a=n.length;for(r=0;r<a;++r)i=n[r],s=i.op,o=s.modified()&&s.stamp===e,t.set(i.name,i.index,s.value,o);if(n.initonly){for(r=0;r<a;++r)i=n[r],i.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,i,r;if(e)for(t=0,n=e.length;t<n;++t)i=e[t],r=i.op,r._targets&&r._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),i=t.call(this,n,e);if(n.clear(),i!==this.value)this.value=i;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function VH(e,t,n,i){let r=1,s;return e instanceof xt?s=e:e&&e.prototype instanceof xt?s=new e:Ie(e)?s=new xt(null,e):(r=0,s=new xt(e,t)),this.rank(s),r&&(i=n,n=t),n&&this.connect(s,s.parameters(n,i)),this.touch(s),s}function YH(e,t){const n=e.rank,i=t.length;for(let r=0;r<i;++r)if(n<t[r].rank){this.rerank(e);return}}let XH=0;function v0(e,t,n){this.id=++XH,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function $o(e,t,n){return new v0(e,t,n)}v0.prototype={_filter:Ui,_apply:En,targets(){return this._targets||(this._targets=h0(Vc))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,i=n?n.length:0;for(let r=0;r<i;++r)n[r].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=$o(e);return this.targets().add(t),t},apply(e){const t=$o(null,e);return this.targets().add(t),t},merge(){const e=$o();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=$o();return this.targets().add($o(null,null,k2(e,n=>{const i=n.dataflow;t.receive(n),i&&i.run&&i.run()}))),t},between(e,t){let n=!1;return e.targets().add($o(null,null,()=>n=!0)),t.targets().add($o(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=Ui,this._targets=null}};function KH(e,t,n,i){const r=this,s=$o(n,i),o=function(l){l.dataflow=r;try{s.receive(l)}catch(c){r.error(c)}finally{r.run()}};let a;typeof e=="string"&&typeof document<"u"?a=document.querySelectorAll(e):a=oe(e);const u=a.length;for(let l=0;l<u;++l)a[l].addEventListener(t,o);return s}function ZH(e,t){const n=this.locale();return SE(e,t,n.timeParse,n.utcParse)}function JH(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}async function QH(e,t){const n=this;let i=0,r;try{r=await n.loader().load(e,{context:"dataflow",response:$E(t&&t.type)});try{r=n.parse(r,t)}catch(s){i=-2,n.warn("Data ingestion failed",e,s)}}catch(s){i=-1,n.warn("Loading failed",e,s)}return{data:r,status:i}}async function eG(e,t,n){const i=this,r=i._pending||tG(i);r.requests+=1;const s=await i.request(t,n);return i.pulse(e,i.changeset().remove(Ui).insert(s.data||[])),r.done(),s}function tG(e){let t;const n=new Promise(i=>t=i);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}const nG={skip:!0};function iG(e,t,n,i,r){return(e instanceof xt?sG:rG)(this,e,t,n,i,r),this}function rG(e,t,n,i,r,s){const o=Oe({},s,nG);let a,u;Ie(n)||(n=kn(n)),i===void 0?a=l=>e.touch(n(l)):Ie(i)?(u=new xt(null,i,r,!1),a=l=>{u.evaluate(l);const c=n(l),f=u.value;ME(f)?e.pulse(c,f,s):e.update(c,f,o)}):a=l=>e.update(n(l),i,o),t.apply(a)}function sG(e,t,n,i,r,s){if(i===void 0)t.targets().add(n);else{const o=s||{},a=new xt(null,oG(n,i),r,!1);a.modified(o.force),a.rank=t.rank,t.targets().add(a),n&&(a.skip(!0),a.value=n.value,a.targets().add(n),e.connect(n,[a]))}}function oG(e,t){return t=Ie(t)?t:kn(t),e?function(n,i){const r=t(n,i);return e.skip()||(e.skip(r!==this.value).value=r),r}:t}function aG(e){e.rank=++this._rank}function uG(e){const t=[e];let n,i,r;for(;t.length;)if(this.rank(n=t.pop()),i=n._targets)for(r=i.length;--r>=0;)t.push(n=i[r]),n===e&&q("Cycle detected in dataflow graph.")}const x0={},Vr=1,So=2,Ls=4,lG=Vr|So,RE=Vr|Ls,bl=Vr|So|Ls,OE=8,hf=16,LE=32,IE=64;function Fo(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function hy(e,t){const n=[];return wo(e,t,i=>n.push(i)),n}function PE(e,t){const n={};return e.visit(t,i=>{n[_e(i)]=1}),i=>n[_e(i)]?null:i}function _0(e,t){return e?(n,i)=>e(n,i)&&t(n,i):t}Fo.prototype={StopPropagation:x0,ADD:Vr,REM:So,MOD:Ls,ADD_REM:lG,ADD_MOD:RE,ALL:bl,REFLOW:OE,SOURCE:hf,NO_SOURCE:LE,NO_FIELDS:IE,fork(e){return new Fo(this.dataflow).init(this,e)},clone(){const e=this.fork(bl);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(bl|hf)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new Fo(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&IE)&&(n.fields=e.fields),t&Vr?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&So?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&Ls?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&LE?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||bl;return t&Vr&&this.add.length||t&So&&this.rem.length||t&Ls&&this.mod.length},reflow(e){if(e)return this.fork(bl).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(Ls,PE(this,Vr))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return W(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return(t||this.mod.length)&&n?arguments.length?W(e)?e.some(i=>n[i]):n[e]:!!n:!1},filter(e,t){const n=this;return e&Vr&&(n.addF=_0(n.addF,t)),e&So&&(n.remF=_0(n.remF,t)),e&Ls&&(n.modF=_0(n.modF,t)),e&hf&&(n.srcF=_0(n.srcF,t)),n},materialize(e){e=e||bl;const t=this;return e&Vr&&t.addF&&(t.add=hy(t.add,t.addF),t.addF=null),e&So&&t.remF&&(t.rem=hy(t.rem,t.remF),t.remF=null),e&Ls&&t.modF&&(t.mod=hy(t.mod,t.modF),t.modF=null),e&hf&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,i=t;if(e&hf)return wo(n.source,n.srcF,i),n;e&Vr&&wo(n.add,n.addF,i),e&So&&wo(n.rem,n.remF,i),e&Ls&&wo(n.mod,n.modF,i);const r=n.source;if(e&OE&&r){const s=n.add.length+n.mod.length;s===r.length||(s?wo(r,PE(n,RE),i):wo(r,n.srcF,i))}return n}};function py(e,t,n,i){const r=this;let s=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=i||null,this.pulses=n;for(const o of n)if(o.stamp===t){if(o.fields){const a=r.fields||(r.fields={});for(const u in o.fields)a[u]=1}o.changed(r.ADD)&&(s|=r.ADD),o.changed(r.REM)&&(s|=r.REM),o.changed(r.MOD)&&(s|=r.MOD)}this.changes=s}ee(py,Fo,{fork(e){const t=new Fo(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?W(e)?e.some(i=>n[i]):n[e]:0},filter(){q("MultiPulse does not support filtering.")},materialize(){q("MultiPulse does not support materialization.")},visit(e,t){const n=this,i=n.pulses,r=i.length;let s=0;if(e&n.SOURCE)for(;s<r;++s)i[s].visit(e,t);else for(;s<r;++s)i[s].stamp===n.stamp&&i[s].visit(e,t);return n}});async function cG(e,t,n){const i=this,r=[];if(i._pulse)return zE(i);if(i._pending&&await i._pending,t&&await p0(i,t),!i._touched.length)return i.debug("Dataflow invoked, but nothing to do."),i;const s=++i._clock;i._pulse=new Fo(i,s,e),i._touched.forEach(c=>i._enqueue(c,!0)),i._touched=h0(Vc);let o=0,a,u,l;try{for(;i._heap.size()>0;){if(a=i._heap.pop(),a.rank!==a.qrank){i._enqueue(a,!0);continue}u=a.run(i._getPulse(a,e)),u.then?u=await u:u.async&&(r.push(u.async),u=x0),u!==x0&&a._targets&&a._targets.forEach(c=>i._enqueue(c)),++o}}catch(c){i._heap.clear(),l=c}if(i._input={},i._pulse=null,i.debug(`Pulse ${s}: ${o} operators`),l&&(i._postrun=[],i.error(l)),i._postrun.length){const c=i._postrun.sort((f,d)=>d.priority-f.priority);i._postrun=[];for(let f=0;f<c.length;++f)await p0(i,c[f].callback)}return n&&await p0(i,n),r.length&&Promise.all(r).then(c=>i.runAsync(null,()=>{c.forEach(f=>{try{f(i)}catch(d){i.error(d)}})})),i}async function fG(e,t,n){for(;this._running;)await this._running;const i=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(i,i),this._running}function dG(e,t,n){return this._pulse?zE(this):(this.evaluate(e,t,n),this)}function hG(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(i){this.error(i)}}function zE(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function pG(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function gG(e,t){const n=e.source,i=this._clock;return n&&W(n)?new py(this,i,n.map(r=>r.pulse),t):this._input[e.id]||mG(this._pulse,n&&n.pulse)}function mG(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==x0&&(e.source=t.source),e)}const gy={skip:!1,force:!1};function yG(e,t){const n=t||gy;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function bG(e,t,n){const i=n||gy;return(e.set(t)||i.force)&&this.touch(e,i),this}function vG(e,t,n){this.touch(e,n||gy);const i=new Fo(this,this._clock+(this._pulse?0:1)),r=e.pulse&&e.pulse.source||[];return i.target=e,this._input[e.id]=t.pulse(i,r),this}function xG(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),BE(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let i;return t.length?(i=t[0],t[0]=n,_G(t,0,e)):i=n,i}}}function BE(e,t,n,i){let r,s;const o=e[n];for(;n>t;){if(s=n-1>>1,r=e[s],i(o,r)<0){e[n]=r,n=s;continue}break}return e[n]=o}function _G(e,t,n){const i=t,r=e.length,s=e[t];let o=(t<<1)+1,a;for(;o<r;)a=o+1,a<r&&n(e[o],e[a])>=0&&(o=a),e[t]=e[o],t=o,o=(t<<1)+1;return e[t]=s,BE(e,i,t,n)}function vl(){this.logger(x2()),this.logLevel(b2),this._clock=0,this._rank=0,this._locale=ay();try{this._loader=d0()}catch{}this._touched=h0(Vc),this._input={},this._pulse=null,this._heap=xG((e,t)=>e.qrank-t.qrank),this._postrun=[]}function pf(e){return function(){return this._log[e].apply(this,arguments)}}vl.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:pf("error"),warn:pf("warn"),info:pf("info"),debug:pf("debug"),logLevel:pf("level"),cleanThreshold:1e4,add:VH,connect:YH,rank:aG,rerank:uG,pulse:vG,touch:yG,update:bG,changeset:Ao,ingest:JH,parse:ZH,preload:eG,request:QH,events:KH,on:iG,evaluate:cG,run:dG,runAsync:fG,runAfter:hG,_enqueue:pG,_getPulse:gG};function P(e,t){xt.call(this,e,null,t)}ee(P,xt,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const xl={};function UE(e){const t=jE(e);return t&&t.Definition||null}function jE(e){return e=e&&e.toLowerCase(),ue(xl,e)?xl[e]:null}function*qE(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let i of e)i=t(i,++n,e),i!=null&&i!==""&&(i=+i)>=i&&(yield i)}}function my(e,t,n){const i=Float64Array.from(qE(e,n));return i.sort(Ds),t.map(r=>d8(i,r))}function yy(e,t){return my(e,[.25,.5,.75],t)}function by(e,t){const n=e.length,i=Dq(e,t),r=yy(e,t),s=(r[2]-r[0])/1.34;return 1.06*(Math.min(i,s)||i||Math.abs(r[0])||1)*Math.pow(n,-.2)}function WE(e){const t=e.maxbins||20,n=e.base||10,i=Math.log(n),r=e.divide||[5,2];let s=e.extent[0],o=e.extent[1],a,u,l,c,f,d;const h=e.span||o-s||Math.abs(s)||1;if(e.step)a=e.step;else if(e.steps){for(c=h/t,f=0,d=e.steps.length;f<d&&e.steps[f]<c;++f);a=e.steps[Math.max(0,f-1)]}else{for(u=Math.ceil(Math.log(t)/i),l=e.minstep||0,a=Math.max(l,Math.pow(n,Math.round(Math.log(h)/i)-u));Math.ceil(h/a)>t;)a*=n;for(f=0,d=r.length;f<d;++f)c=a/r[f],c>=l&&h/c<=t&&(a=c)}c=Math.log(a);const p=c>=0?0:~~(-c/i)+1,g=Math.pow(n,-p-1);return(e.nice||e.nice===void 0)&&(c=Math.floor(s/a+g)*a,s=s<c?c-a:c,o=Math.ceil(o/a)*a),{start:s,stop:o===s?s+a:o,step:a}}var Wi=Math.random;function wG(e){Wi=e}function HE(e,t,n,i){if(!e.length)return[void 0,void 0];const r=Float64Array.from(qE(e,i)),s=r.length,o=t;let a,u,l,c;for(l=0,c=Array(o);l<o;++l){for(a=0,u=0;u<s;++u)a+=r[~~(Wi()*s)];c[l]=a/s}return c.sort(Ds),[P2(c,n/2),P2(c,1-n/2)]}function GE(e,t,n,i){i=i||(d=>d);const r=e.length,s=new Float64Array(r);let o=0,a=1,u=i(e[0]),l=u,c=u+t,f;for(;a<r;++a){if(f=i(e[a]),f>=c){for(l=(u+l)/2;o<a;++o)s[o]=l;c=f+t,u=f}l=f}for(l=(u+l)/2;o<a;++o)s[o]=l;return n?EG(s,t+t/4):s}function EG(e,t){const n=e.length;let i=0,r=1,s,o;for(;e[i]===e[r];)++r;for(;r<n;){for(s=r+1;e[r]===e[s];)++s;if(e[r]-e[r-1]<t){for(o=r+(i+s-r-r>>1);o<r;)e[o++]=e[r];for(;o>r;)e[o--]=e[i]}i=r,r=s}return e}function CG(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function kG(e,t){t==null&&(t=e,e=0);let n,i,r;const s={min(o){return arguments.length?(n=o||0,r=i-n,s):n},max(o){return arguments.length?(i=o||0,r=i-n,s):i},sample(){return n+Math.floor(r*Wi())},pdf(o){return o===Math.floor(o)&&o>=n&&o<i?1/r:0},cdf(o){const a=Math.floor(o);return a<n?0:a>=i?1:(a-n+1)/r},icdf(o){return o>=0&&o<=1?n-1+Math.floor(o*r):NaN}};return s.min(e).max(t)}const VE=Math.sqrt(2*Math.PI),AG=Math.SQRT2;let gf=NaN;function w0(e,t){e=e||0,t=t??1;let n=0,i=0,r,s;if(gf===gf)n=gf,gf=NaN;else{do n=Wi()*2-1,i=Wi()*2-1,r=n*n+i*i;while(r===0||r>1);s=Math.sqrt(-2*Math.log(r)/r),n*=s,gf=i*s}return e+n*t}function vy(e,t,n){n=n??1;const i=(e-(t||0))/n;return Math.exp(-.5*i*i)/(n*VE)}function E0(e,t,n){t=t||0,n=n??1;const i=(e-t)/n,r=Math.abs(i);let s;if(r>37)s=0;else{const o=Math.exp(-r*r/2);let a;r<7.07106781186547?(a=.0352624965998911*r+.700383064443688,a=a*r+6.37396220353165,a=a*r+33.912866078383,a=a*r+112.079291497871,a=a*r+221.213596169931,a=a*r+220.206867912376,s=o*a,a=.0883883476483184*r+1.75566716318264,a=a*r+16.064177579207,a=a*r+86.7807322029461,a=a*r+296.564248779674,a=a*r+637.333633378831,a=a*r+793.826512519948,a=a*r+440.413735824752,s=s/a):(a=r+.65,a=r+4/a,a=r+3/a,a=r+2/a,a=r+1/a,s=o/a/2.506628274631)}return i>0?1-s:s}function C0(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*AG*$G(2*e-1)}function $G(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function xy(e,t){let n,i;const r={mean(s){return arguments.length?(n=s||0,r):n},stdev(s){return arguments.length?(i=s??1,r):i},sample:()=>w0(n,i),pdf:s=>vy(s,n,i),cdf:s=>E0(s,n,i),icdf:s=>C0(s,n,i)};return r.mean(e).stdev(t)}function _y(e,t){const n=xy();let i=0;const r={data(s){return arguments.length?(e=s,i=s?s.length:0,r.bandwidth(t)):e},bandwidth(s){return arguments.length?(t=s,!t&&e&&(t=by(e)),r):t},sample(){return e[~~(Wi()*i)]+t*n.sample()},pdf(s){let o=0,a=0;for(;a<i;++a)o+=n.pdf((s-e[a])/t);return o/t/i},cdf(s){let o=0,a=0;for(;a<i;++a)o+=n.cdf((s-e[a])/t);return o/i},icdf(){throw Error("KDE icdf not supported.")}};return r.data(e)}function wy(e,t){return e=e||0,t=t??1,Math.exp(e+w0()*t)}function Ey(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;const i=(Math.log(e)-t)/n;return Math.exp(-.5*i*i)/(n*VE*e)}function Cy(e,t,n){return E0(Math.log(e),t,n)}function ky(e,t,n){return Math.exp(C0(e,t,n))}function YE(e,t){let n,i;const r={mean(s){return arguments.length?(n=s||0,r):n},stdev(s){return arguments.length?(i=s??1,r):i},sample:()=>wy(n,i),pdf:s=>Ey(s,n,i),cdf:s=>Cy(s,n,i),icdf:s=>ky(s,n,i)};return r.mean(e).stdev(t)}function XE(e,t){let n=0,i;function r(o){const a=[];let u=0,l;for(l=0;l<n;++l)u+=a[l]=o[l]==null?1:+o[l];for(l=0;l<n;++l)a[l]/=u;return a}const s={weights(o){return arguments.length?(i=r(t=o||[]),s):t},distributions(o){return arguments.length?(o?(n=o.length,e=o):(n=0,e=[]),s.weights(t)):e},sample(){const o=Wi();let a=e[n-1],u=i[0],l=0;for(;l<n-1;u+=i[++l])if(o<u){a=e[l];break}return a.sample()},pdf(o){let a=0,u=0;for(;u<n;++u)a+=i[u]*e[u].pdf(o);return a},cdf(o){let a=0,u=0;for(;u<n;++u)a+=i[u]*e[u].cdf(o);return a},icdf(){throw Error("Mixture icdf not supported.")}};return s.distributions(e).weights(t)}function Ay(e,t){return t==null&&(t=e??1,e=0),e+(t-e)*Wi()}function $y(e,t,n){return n==null&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function Sy(e,t,n){return n==null&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function Fy(e,t,n){return n==null&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function KE(e,t){let n,i;const r={min(s){return arguments.length?(n=s||0,r):n},max(s){return arguments.length?(i=s??1,r):i},sample:()=>Ay(n,i),pdf:s=>$y(s,n,i),cdf:s=>Sy(s,n,i),icdf:s=>Fy(s,n,i)};return t==null&&(t=e??1,e=0),r.min(e).max(t)}function Dy(e,t,n){let i=0,r=0;for(const s of e){const o=n(s);t(s)==null||o==null||isNaN(o)||(i+=(o-i)/++r)}return{coef:[i],predict:()=>i,rSquared:0}}function mf(e,t,n,i){const r=i-e*e,s=Math.abs(r)<1e-24?0:(n-e*t)/r;return[t-s*e,s]}function k0(e,t,n,i){e=e.filter(h=>{let p=t(h),g=n(h);return p!=null&&(p=+p)>=p&&g!=null&&(g=+g)>=g}),i&&e.sort((h,p)=>t(h)-t(p));const r=e.length,s=new Float64Array(r),o=new Float64Array(r);let a=0,u=0,l=0,c,f,d;for(d of e)s[a]=c=+t(d),o[a]=f=+n(d),++a,u+=(c-u)/a,l+=(f-l)/a;for(a=0;a<r;++a)s[a]-=u,o[a]-=l;return[s,o,u,l]}function yf(e,t,n,i){let r=-1,s,o;for(const a of e)s=t(a),o=n(a),s!=null&&(s=+s)>=s&&o!=null&&(o=+o)>=o&&i(s,o,++r)}function _l(e,t,n,i,r){let s=0,o=0;return yf(e,t,n,(a,u)=>{const l=u-r(a),c=u-i;s+=l*l,o+=c*c}),1-s/o}function Ty(e,t,n){let i=0,r=0,s=0,o=0,a=0;yf(e,t,n,(c,f)=>{++a,i+=(c-i)/a,r+=(f-r)/a,s+=(c*f-s)/a,o+=(c*c-o)/a});const u=mf(i,r,s,o),l=c=>u[0]+u[1]*c;return{coef:u,predict:l,rSquared:_l(e,t,n,r,l)}}function ZE(e,t,n){let i=0,r=0,s=0,o=0,a=0;yf(e,t,n,(c,f)=>{++a,c=Math.log(c),i+=(c-i)/a,r+=(f-r)/a,s+=(c*f-s)/a,o+=(c*c-o)/a});const u=mf(i,r,s,o),l=c=>u[0]+u[1]*Math.log(c);return{coef:u,predict:l,rSquared:_l(e,t,n,r,l)}}function JE(e,t,n){const[i,r,s,o]=k0(e,t,n);let a=0,u=0,l=0,c=0,f=0,d,h,p;yf(e,t,n,(b,v)=>{d=i[f++],h=Math.log(v),p=d*v,a+=(v*h-a)/f,u+=(p-u)/f,l+=(p*h-l)/f,c+=(d*p-c)/f});const[g,m]=mf(u/o,a/o,l/o,c/o),y=b=>Math.exp(g+m*(b-s));return{coef:[Math.exp(g-m*s),m],predict:y,rSquared:_l(e,t,n,o,y)}}function QE(e,t,n){let i=0,r=0,s=0,o=0,a=0,u=0;yf(e,t,n,(f,d)=>{const h=Math.log(f),p=Math.log(d);++u,i+=(h-i)/u,r+=(p-r)/u,s+=(h*p-s)/u,o+=(h*h-o)/u,a+=(d-a)/u});const l=mf(i,r,s,o),c=f=>l[0]*Math.pow(f,l[1]);return l[0]=Math.exp(l[0]),{coef:l,predict:c,rSquared:_l(e,t,n,a,c)}}function My(e,t,n){const[i,r,s,o]=k0(e,t,n),a=i.length;let u=0,l=0,c=0,f=0,d=0,h,p,g,m;for(h=0;h<a;)p=i[h],g=r[h++],m=p*p,u+=(m-u)/h,l+=(m*p-l)/h,c+=(m*m-c)/h,f+=(p*g-f)/h,d+=(m*g-d)/h;const y=c-u*u,b=u*y-l*l,v=(d*u-f*l)/b,x=(f*y-d*l)/b,_=-v*u,E=w=>(w=w-s,v*w*w+x*w+_+o);return{coef:[_-x*s+v*s*s+o,x-2*v*s,v],predict:E,rSquared:_l(e,t,n,o,E)}}function e9(e,t,n,i){if(i===0)return Dy(e,t,n);if(i===1)return Ty(e,t,n);if(i===2)return My(e,t,n);const[r,s,o,a]=k0(e,t,n),u=r.length,l=[],c=[],f=i+1;let d,h,p,g,m;for(d=0;d<f;++d){for(p=0,g=0;p<u;++p)g+=Math.pow(r[p],d)*s[p];for(l.push(g),m=new Float64Array(f),h=0;h<f;++h){for(p=0,g=0;p<u;++p)g+=Math.pow(r[p],d+h);m[h]=g}c.push(m)}c.push(l);const y=FG(c),b=v=>{v-=o;let x=a+y[0]+y[1]*v+y[2]*v*v;for(d=3;d<f;++d)x+=y[d]*Math.pow(v,d);return x};return{coef:SG(f,y,-o,a),predict:b,rSquared:_l(e,t,n,a,b)}}function SG(e,t,n,i){const r=Array(e);let s,o,a,u;for(s=0;s<e;++s)r[s]=0;for(s=e-1;s>=0;--s)for(a=t[s],u=1,r[s]+=a,o=1;o<=s;++o)u*=(s+1-o)/o,r[s-o]+=a*Math.pow(n,o)*u;return r[0]+=i,r}function FG(e){const t=e.length-1,n=[];let i,r,s,o,a;for(i=0;i<t;++i){for(o=i,r=i+1;r<t;++r)Math.abs(e[i][r])>Math.abs(e[i][o])&&(o=r);for(s=i;s<t+1;++s)a=e[s][i],e[s][i]=e[s][o],e[s][o]=a;for(r=i+1;r<t;++r)for(s=t;s>=i;s--)e[s][r]-=e[s][i]*e[i][r]/e[i][i]}for(r=t-1;r>=0;--r){for(a=0,s=r+1;s<t;++s)a+=e[s][r]*n[s];n[r]=(e[t][r]-a)/e[r][r]}return n}const t9=2,n9=1e-12;function i9(e,t,n,i){const[r,s,o,a]=k0(e,t,n,!0),u=r.length,l=Math.max(2,~~(i*u)),c=new Float64Array(u),f=new Float64Array(u),d=new Float64Array(u).fill(1);for(let h=-1;++h<=t9;){const p=[0,l-1];for(let m=0;m<u;++m){const y=r[m],b=p[0],v=p[1],x=y-r[b]>r[v]-y?b:v;let _=0,E=0,w=0,C=0,k=0;const S=1/Math.abs(r[x]-y||1);for(let R=b;R<=v;++R){const F=r[R],A=s[R],T=DG(Math.abs(y-F)*S)*d[R],B=F*T;_+=T,E+=B,w+=A*T,C+=A*B,k+=F*B}const[$,O]=mf(E/_,w/_,C/_,k/_);c[m]=$+O*y,f[m]=Math.abs(s[m]-c[m]),TG(r,m+1,p)}if(h===t9)break;const g=h8(f);if(Math.abs(g)<n9)break;for(let m=0,y,b;m<u;++m)y=f[m]/(6*g),d[m]=y>=1?n9:(b=1-y*y)*b}return MG(r,c,o,a)}function DG(e){return(e=1-e*e*e)*e*e}function TG(e,t,n){const i=e[t];let r=n[0],s=n[1]+1;if(!(s>=e.length))for(;t>r&&e[s]-i<=i-e[r];)n[0]=++r,n[1]=s,++s}function MG(e,t,n,i){const r=e.length,s=[];let o=0,a=0,u=[],l;for(;o<r;++o)l=e[o]+n,u[0]===l?u[1]+=(t[o]-u[1])/++a:(a=0,u[1]+=i,u=[l,t[o]],s.push(u));return u[1]+=i,s}const NG=.5*Math.PI/180;function A0(e,t,n,i){n=n||25,i=Math.max(n,i||200);const r=g=>[g,e(g)],s=t[0],o=t[1],a=o-s,u=a/i,l=[r(s)],c=[];if(n===i){for(let g=1;g<i;++g)l.push(r(s+g/n*a));return l.push(r(o)),l}else{c.push(r(o));for(let g=n;--g>0;)c.push(r(s+g/n*a))}let f=l[0],d=c[c.length-1];const h=1/a,p=RG(f[1],c);for(;d;){const g=r((f[0]+d[0])/2);g[0]-f[0]>=u&&OG(f,g,d,h,p)>NG?c.push(g):(f=d,l.push(d),c.pop()),d=c[c.length-1]}return l}function RG(e,t){let n=e,i=e;const r=t.length;for(let s=0;s<r;++s){const o=t[s][1];o<n&&(n=o),o>i&&(i=o)}return 1/(i-n)}function OG(e,t,n,i,r){const s=Math.atan2(r*(n[1]-e[1]),i*(n[0]-e[0])),o=Math.atan2(r*(t[1]-e[1]),i*(t[0]-e[0]));return Math.abs(s-o)}function LG(e){return t=>{const n=e.length;let i=1,r=String(e[0](t));for(;i<n;++i)r+="|"+e[i](t);return r}}function Ny(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:LG(e)}function r9(e,t,n){return n||e+(t?"_"+t:"")}const Ry=()=>{},IG={init:Ry,add:Ry,rem:Ry,idx:0},bf={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.valid?e.sum:void 0,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(e,t)=>{e.exp=0,e.exp_r=t},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,t)=>e.exp=e.exp_r*e.exp+t,rem:(e,t)=>e.exp=(e.exp-t/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},vf=Object.keys(bf).filter(e=>e!=="__count__");function PG(e,t){return(n,i)=>Oe({name:e,aggregate_param:i,out:n||e},IG,t)}[...vf,"__count__"].forEach(e=>{bf[e]=PG(e,bf[e])});function s9(e,t,n){return bf[e](n,t)}function o9(e,t){return e.idx-t.idx}function zG(e){const t={};e.forEach(i=>t[i.name]=i);const n=i=>{i.req&&i.req.forEach(r=>{t[r]||n(t[r]=bf[r]())})};return e.forEach(n),Object.values(t).sort(o9)}function BG(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.aggregate_param==null?e.init(this):e.init(this,e.aggregate_param))}function UG(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function jG(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function qG(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function a9(e,t){const n=t||En,i=zG(e),r=e.slice().sort(o9);function s(o){this._ops=i,this._out=r,this.cell=o,this.init()}return s.prototype.init=BG,s.prototype.add=UG,s.prototype.rem=jG,s.prototype.set=qG,s.prototype.get=n,s.fields=e.map(o=>o.out),s}function Oy(e){this._key=e?Bi(e):_e,this.reset()}const fn=Oy.prototype;fn.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null},fn.add=function(e){this._add.push(e)},fn.rem=function(e){this._rem.push(e)},fn.values=function(){if(this._get=null,this._rem.length===0)return this._add;const e=this._add,t=this._rem,n=this._key,i=e.length,r=t.length,s=Array(i-r),o={};let a,u,l;for(a=0;a<r;++a)o[n(t[a])]=1;for(a=0,u=0;a<i;++a)o[n(l=e[a])]?o[n(l)]=0:s[u++]=l;return this._rem=[],this._add=s},fn.distinct=function(e){const t=this.values(),n={};let i=t.length,r=0,s;for(;--i>=0;)s=e(t[i])+"",ue(n,s)||(n[s]=1,++r);return r},fn.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=H4(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext},fn.argmin=function(e){return this.extent(e)[0]||{}},fn.argmax=function(e){return this.extent(e)[1]||{}},fn.min=function(e){const t=this.extent(e)[0];return t!=null?e(t):void 0},fn.max=function(e){const t=this.extent(e)[1];return t!=null?e(t):void 0},fn.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=yy(this.values(),e),this._get=e),this._q},fn.q1=function(e){return this.quartile(e)[0]},fn.q2=function(e){return this.quartile(e)[1]},fn.q3=function(e){return this.quartile(e)[2]},fn.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=HE(this.values(),1e3,.05,e),this._get=e),this._ci},fn.ci0=function(e){return this.ci(e)[0]},fn.ci1=function(e){return this.ci(e)[1]};function Do(e){P.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}Do.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:vf},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]},ee(Do,P,{transform(e,t){const n=this,i=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.modified();return n.stamp=i.stamp,n.value&&(r||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=r?n.init(e):Object.create(null),t.visit(t.SOURCE,s=>n.add(s))):(n.value=n.value||n.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),i.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&i.clean(!0).runAfter(()=>this.clean()),n.changes(i)},cross(){const e=this,t=e.value,n=e._dnames,i=n.map(()=>({})),r=n.length;function s(a){let u,l,c,f;for(u in a)for(c=a[u].tuple,l=0;l<r;++l)i[l][f=c[n[l]]]=f}s(e._prev),s(t);function o(a,u,l){const c=n[l],f=i[l++];for(const d in f){const h=a?a+"|"+d:d;u[c]=f[d],l<r?o(h,u,l):t[h]||e.cell(h,u)}}o("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],i={};function r(b){const v=oe(wn(b)),x=v.length;let _=0,E;for(;_<x;++_)i[E=v[_]]||(i[E]=1,t.push(E))}this._dims=oe(e.groupby),this._dnames=this._dims.map(b=>{const v=Tt(b);return r(b),n.push(v),v}),this.cellkey=e.key?e.key:Ny(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const s=e.fields||[null],o=e.ops||["count"],a=e.aggregate_params||[null],u=e.as||[],l=s.length,c={};let f,d,h,p,g,m,y;for(l!==o.length&&q("Unmatched number of fields and aggregate ops."),y=0;y<l;++y){if(f=s[y],d=o[y],h=a[y]||null,f==null&&d!=="count"&&q("Null aggregate field specified."),g=Tt(f),m=r9(d,g,u[y]),n.push(m),d==="count"){this._counts.push(m);continue}p=c[g],p||(r(f),p=c[g]=[],p.field=f,this._measures.push(p)),d!=="count"&&(this._countOnly=!1),p.push(s9(d,h,m))}return this._measures=this._measures.map(b=>a9(b,b.field)),Object.create(null)},cellkey:Ny(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const i=this._measures,r=i.length;n.agg=Array(r);for(let s=0;s<r;++s)n.agg[s]=new i[s](n)}return n.store&&(n.data=new Oy),n},newtuple(e,t){const n=this._dnames,i=this._dims,r=i.length,s={};for(let o=0;o<r;++o)s[n[o]]=i[o](e);return t?TE(t.tuple,s):nt(s)},clean(){const e=this.value;for(const t in e)e[t].num===0&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const i=n.agg;for(let r=0,s=i.length;r<s;++r)i[r].add(i[r].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const i=n.agg;for(let r=0,s=i.length;r<s;++r)i[r].rem(i[r].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let i=0,r=n.length;i<r;++i)t[n[i]]=e.num;if(!this._countOnly){const i=e.agg;for(let r=0,s=i.length;r<s;++r)i[r].set(t)}return t},changes(e){const t=this._adds,n=this._mods,i=this._prev,r=this._drop,s=e.add,o=e.rem,a=e.mod;let u,l,c,f;if(i)for(l in i)u=i[l],(!r||u.num)&&o.push(u.tuple);for(c=0,f=this._alen;c<f;++c)s.push(this.celltuple(t[c])),t[c]=null;for(c=0,f=this._mlen;c<f;++c)u=n[c],(u.num===0&&r?o:a).push(this.celltuple(u)),n[c]=null;return this._alen=this._mlen=0,this._prev=null,e}});const WG=1e-14;function Ly(e){P.call(this,null,e)}Ly.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]},ee(Ly,P,{transform(e,t){const n=e.interval!==!1,i=this._bins(e),r=i.start,s=i.step,o=e.as||["bin0","bin1"],a=o[0],u=o[1];let l;return e.modified()?(t=t.reflow(!0),l=t.SOURCE):l=t.modified(wn(e.field))?t.ADD_MOD:t.ADD,t.visit(l,n?c=>{const f=i(c);c[a]=f,c[u]=f==null?null:r+s*(1+(f-r)/s)}:c=>c[a]=i(c)),t.modifies(n?o:a)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=WE(e),i=n.step;let r=n.start,s=r+Math.ceil((n.stop-r)/i)*i,o,a;(o=e.anchor)!=null&&(a=o-(r+i*Math.floor((o-r)/i)),r+=a,s+=a);const u=function(l){let c=Cn(t(l));return c==null?null:c<r?-1/0:c>s?1/0:(c=Math.max(r,Math.min(c,s-i)),r+i*Math.floor(WG+(c-r)/i))};return u.start=r,u.stop=n.stop,u.step=i,this.value=ii(u,wn(t),e.name||"bin_"+Tt(t))}});function u9(e,t,n){const i=e;let r=t||[],s=n||[],o={},a=0;return{add:u=>s.push(u),remove:u=>o[i(u)]=++a,size:()=>r.length,data:(u,l)=>(a&&(r=r.filter(c=>!o[i(c)]),o={},a=0),l&&u&&r.sort(u),s.length&&(r=u?K4(u,r,s.sort(u)):r.concat(s),s=[]),r)}}function Iy(e){P.call(this,[],e)}Iy.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]},ee(Iy,P,{transform(e,t){const n=t.fork(t.ALL),i=u9(_e,this.value,n.materialize(n.ADD).add),r=e.sort,s=t.changed()||r&&(e.modified("sort")||t.modified(r.fields));return n.visit(n.REM,i.remove),this.modified(s),this.value=n.source=i.data(Ta(r),s),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function l9(e){xt.call(this,null,HG,e)}ee(l9,xt);function HG(e){return this.value&&!e.modified()?this.value:C2(e.fields,e.orders)}function Py(e){P.call(this,null,e)}Py.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function GG(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}ee(Py,P,{transform(e,t){const n=f=>d=>{for(var h=GG(a(d),e.case,s)||[],p,g=0,m=h.length;g<m;++g)o.test(p=h[g])||f(p)},i=this._parameterCheck(e,t),r=this._counts,s=this._match,o=this._stop,a=e.field,u=e.as||["text","count"],l=n(f=>r[f]=1+(r[f]||0)),c=n(f=>r[f]-=1);return i?t.visit(t.SOURCE,l):(t.visit(t.ADD,l),t.visit(t.REM,c)),this._finish(t,u)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,i=this._tuples||(this._tuples={}),r=t[0],s=t[1],o=e.fork(e.NO_SOURCE|e.NO_FIELDS);let a,u,l;for(a in n)u=i[a],l=n[a]||0,!u&&l?(i[a]=u=nt({}),u[r]=a,u[s]=l,o.add.push(u)):l===0?(u&&o.rem.push(u),n[a]=null,i[a]=null):u[s]!==l&&(u[s]=l,o.mod.push(u));return o.modifies(t)}});function zy(e){P.call(this,null,e)}zy.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]},ee(zy,P,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.as||["a","b"],r=i[0],s=i[1],o=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let a=this.value;return o?(a&&(n.rem=a),a=t.materialize(t.SOURCE).source,n.add=this.value=VG(a,r,s,e.filter||Ui)):n.mod=a,n.source=this.value,n.modifies(i)}});function VG(e,t,n,i){for(var r=[],s={},o=e.length,a=0,u,l;a<o;++a)for(s[t]=l=e[a],u=0;u<o;++u)s[n]=e[u],i(s)&&(r.push(nt(s)),s={},s[t]=l);return r}const c9={kde:_y,mixture:XE,normal:xy,lognormal:YE,uniform:KE},YG="distributions",f9="function",XG="field";function d9(e,t){const n=e[f9];ue(c9,n)||q("Unknown distribution function: "+n);const i=c9[n]();for(const r in e)r===XG?i.data((e.from||t()).map(e[r])):r===YG?i[r](e[r].map(s=>d9(s,t))):typeof i[r]===f9&&i[r](e[r]);return i}function By(e){P.call(this,null,e)}const h9=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],KG={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:h9},{name:"weights",type:"number",array:!0}]};By.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:h9.concat(KG)},{name:"as",type:"string",array:!0,default:["value","density"]}]},ee(By,P,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const i=d9(e.distribution,ZG(t)),r=e.steps||e.minsteps||25,s=e.steps||e.maxsteps||200;let o=e.method||"pdf";o!=="pdf"&&o!=="cdf"&&q("Invalid density method: "+o),!e.extent&&!i.data&&q("Missing density extent parameter."),o=i[o];const a=e.as||["value","density"],u=e.extent||qr(i.data()),l=A0(o,u,r,s).map(c=>{const f={};return f[a[0]]=c[0],f[a[1]]=c[1],nt(f)});this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function ZG(e){return()=>e.materialize(e.SOURCE).source}function p9(e,t){return e?e.map((n,i)=>t[i]||Tt(n)):null}function Uy(e,t,n){const i=[],r=f=>f(u);let s,o,a,u,l,c;if(t==null)i.push(e.map(n));else for(s={},o=0,a=e.length;o<a;++o)u=e[o],l=t.map(r),c=s[l],c||(s[l]=c=[],c.dims=l,i.push(c)),c.push(n(u));return i}const g9="bin";function jy(e){P.call(this,null,e)}jy.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:g9}]};const JG=(e,t)=>Xc(qr(e,t))/30;ee(jy,P,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;const n=t.materialize(t.SOURCE).source,i=Uy(t.source,e.groupby,En),r=e.smooth||!1,s=e.field,o=e.step||JG(n,s),a=Ta((p,g)=>s(p)-s(g)),u=e.as||g9,l=i.length;let c=1/0,f=-1/0,d=0,h;for(;d<l;++d){const p=i[d].sort(a);h=-1;for(const g of GE(p,o,r,s))g<c&&(c=g),g>f&&(f=g),p[++h][u]=g}return this.value={start:c,stop:f,step:o},t.reflow(!0).modifies(u)}});function m9(e){xt.call(this,null,QG,e),this.modified(!0)}ee(m9,xt);function QG(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:ii(n=>t(n,e),wn(t),Tt(t))}function qy(e){P.call(this,[void 0,void 0],e)}qy.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]},ee(qy,P,{transform(e,t){const n=this.value,i=e.field,r=t.changed()||t.modified(i.fields)||e.modified("field");let s=n[0],o=n[1];if((r||s==null)&&(s=1/0,o=-1/0),t.visit(r?t.SOURCE:t.ADD,a=>{const u=Cn(i(a));u!=null&&(u<s&&(s=u),u>o&&(o=u))}),!Number.isFinite(s)||!Number.isFinite(o)){let a=Tt(i);a&&(a=` for field "${a}"`),t.dataflow.warn(`Infinite extent${a}: [${s}, ${o}]`),s=o=void 0}this.value=[s,o]}});function Wy(e,t){xt.call(this,e),this.parent=t,this.count=0}ee(Wy,xt,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function $0(e){P.call(this,{},e),this._keys=sl();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let i=0,r=t.active;i<r;++i)n(t[i],i,t)}}ee($0,P,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,i){const r=this.value;let s=ue(r,e)&&r[e],o,a;return s?s.value.stamp<n.stamp&&(s.init(n),this.activate(s)):(a=i||(a=this._group[e])&&a.tuple,o=n.dataflow,s=new Wy(n.fork(n.NO_SOURCE),this),o.add(s).connect(t(o,e,a)),r[e]=s,this.activate(s)),s},clean(){const e=this.value;let t=0;for(const n in e)if(e[n].count===0){const i=e[n].detachSubflow;i&&i(),delete e[n],++t}if(t){const n=this._targets.filter(i=>i&&i.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,i=e?e.length:0;let r=0;for(;r<i;++r)t[r]=e[r];for(;r<n&&t[r]!=null;++r)t[r]=null;t.active=i},transform(e,t){const n=t.dataflow,i=e.key,r=e.subflow,s=this._keys,o=e.modified("key"),a=u=>this.subflow(u,r,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,u=>{const l=_e(u),c=s.get(l);c!==void 0&&(s.delete(l),a(c).rem(u))}),t.visit(t.ADD,u=>{const l=i(u);s.set(_e(u),l),a(l).add(u)}),o||t.modified(i.fields)?t.visit(t.MOD,u=>{const l=_e(u),c=s.get(l),f=i(u);c===f?a(f).mod(u):(s.set(l,f),a(c).rem(u),a(f).add(u))}):t.changed(t.MOD)&&t.visit(t.MOD,u=>{a(s.get(_e(u))).mod(u)}),o&&t.visit(t.REFLOW,u=>{const l=_e(u),c=s.get(l),f=i(u);c!==f&&(s.set(l,f),a(c).rem(u),a(f).add(u))}),t.clean()?n.runAfter(()=>{this.clean(),s.clean()}):s.empty>n.cleanThreshold&&n.runAfter(s.clean),t}});function y9(e){xt.call(this,null,eV,e)}ee(y9,xt);function eV(e){return this.value&&!e.modified()?this.value:W(e.name)?oe(e.name).map(t=>Bi(t)):Bi(e.name,e.as)}function Hy(e){P.call(this,sl(),e)}Hy.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]},ee(Hy,P,{transform(e,t){const n=t.dataflow,i=this.value,r=t.fork(),s=r.add,o=r.rem,a=r.mod,u=e.expr;let l=!0;t.visit(t.REM,f=>{const d=_e(f);i.has(d)?i.delete(d):o.push(f)}),t.visit(t.ADD,f=>{u(f,e)?s.push(f):i.set(_e(f),1)});function c(f){const d=_e(f),h=u(f,e),p=i.get(d);h&&p?(i.delete(d),s.push(f)):!h&&!p?(i.set(d,1),o.push(f)):l&&h&&!p&&a.push(f)}return t.visit(t.MOD,c),e.modified()&&(l=!1,t.visit(t.REFLOW,c)),i.empty>n.cleanThreshold&&n.runAfter(i.clean),r}});function Gy(e){P.call(this,[],e)}Gy.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]},ee(Gy,P,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.fields,r=p9(i,e.as||[]),s=e.index||null,o=r.length;return n.rem=this.value,t.visit(t.SOURCE,a=>{const u=i.map(p=>p(a)),l=u.reduce((p,g)=>Math.max(p,g.length),0);let c=0,f,d,h;for(;c<l;++c){for(d=dy(a),f=0;f<o;++f)d[r[f]]=(h=u[f][c])==null?null:h;s&&(d[s]=c),n.add.push(d)}}),this.value=n.source=n.add,s&&n.modifies(s),n.modifies(r)}});function Vy(e){P.call(this,[],e)}Vy.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]},ee(Vy,P,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.fields,r=i.map(Tt),s=e.as||["key","value"],o=s[0],a=s[1],u=i.length;return n.rem=this.value,t.visit(t.SOURCE,l=>{for(let c=0,f;c<u;++c)f=dy(l),f[o]=r[c],f[a]=i[c](l),n.add.push(f)}),this.value=n.source=n.add,n.modifies(s)}});function Yy(e){P.call(this,null,e)}Yy.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]},ee(Yy,P,{transform(e,t){const n=e.expr,i=e.as,r=e.modified(),s=e.initonly?t.ADD:r?t.SOURCE:t.modified(n.fields)||t.modified(i)?t.ADD_MOD:t.ADD;return r&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(i),t.visit(s,o=>o[i]=n(o,e))}});function b9(e){P.call(this,[],e)}ee(b9,P,{transform(e,t){const n=t.fork(t.ALL),i=e.generator;let r=this.value,s=e.size-r.length,o,a,u;if(s>0){for(o=[];--s>=0;)o.push(u=nt(i(e))),r.push(u);n.add=n.add.length?n.materialize(n.ADD).add.concat(o):o}else a=r.slice(0,-s),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(a):a,r=r.slice(-s);return n.source=this.value=r,n}});const S0={value:"value",median:h8,mean:Lq,min:I2,max:Aa},tV=[];function Xy(e){P.call(this,[],e)}Xy.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function nV(e){var t=e.method||S0.value,n;if(S0[t]==null)q("Unrecognized imputation method: "+t);else return t===S0.value?(n=e.value!==void 0?e.value:0,()=>n):S0[t]}function iV(e){const t=e.field;return n=>n?t(n):NaN}ee(Xy,P,{transform(e,t){var n=t.fork(t.ALL),i=nV(e),r=iV(e),s=Tt(e.field),o=Tt(e.key),a=(e.groupby||[]).map(Tt),u=rV(t.source,e.groupby,e.key,e.keyvals),l=[],c=this.value,f=u.domain.length,d,h,p,g,m,y,b,v,x,_;for(m=0,v=u.length;m<v;++m)for(d=u[m],p=d.values,h=NaN,b=0;b<f;++b)if(d[b]==null){for(g=u.domain[b],_={_impute:!0},y=0,x=p.length;y<x;++y)_[a[y]]=p[y];_[o]=g,_[s]=Number.isNaN(h)?h=i(d,r):h,l.push(nt(_))}return l.length&&(n.add=n.materialize(n.ADD).add.concat(l)),c.length&&(n.rem=n.materialize(n.REM).rem.concat(c)),this.value=l,n}});function rV(e,t,n,i){var r=y=>y(m),s=[],o=i?i.slice():[],a={},u={},l,c,f,d,h,p,g,m;for(o.forEach((y,b)=>a[y]=b+1),d=0,g=e.length;d<g;++d)m=e[d],p=n(m),h=a[p]||(a[p]=o.push(p)),c=(l=t?t.map(r):tV)+"",(f=u[c])||(f=u[c]=[],s.push(f),f.values=l),f[h-1]=m;return s.domain=o,s}function Ky(e){Do.call(this,e)}Ky.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:vf},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]},ee(Ky,Do,{transform(e,t){const n=this,i=e.modified();let r;return n.value&&(i||t.modified(n._inputs,!0))?(r=n.value=i?n.init(e):{},t.visit(t.SOURCE,s=>n.add(s))):(r=n.value=n.value||this.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),n.changes(),t.visit(t.SOURCE,s=>{Oe(s,r[n.cellkey(s)].tuple)}),t.reflow(i).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,i;for(n=0,i=this._alen;n<i;++n)this.celltuple(e[n]),e[n]=null;for(n=0,i=this._mlen;n<i;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function Zy(e){P.call(this,null,e)}Zy.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]},ee(Zy,P,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const i=t.materialize(t.SOURCE).source,r=Uy(i,e.groupby,e.field),s=(e.groupby||[]).map(Tt),o=e.bandwidth,a=e.cumulative?"cdf":"pdf",u=e.as||["value","density"],l=[];let c=e.extent,f=e.steps||e.minsteps||25,d=e.steps||e.maxsteps||200;a!=="pdf"&&a!=="cdf"&&q("Invalid density method: "+a),e.resolve==="shared"&&(c||(c=qr(i,e.field)),f=d=e.steps||d),r.forEach(h=>{const p=_y(h,o)[a],g=e.counts?h.length:1,m=c||qr(h);A0(p,m,f,d).forEach(y=>{const b={};for(let v=0;v<s.length;++v)b[s[v]]=h.dims[v];b[u[0]]=y[0],b[u[1]]=y[1]*g,l.push(nt(b))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function v9(e){xt.call(this,null,sV,e)}ee(v9,xt);function sV(e){return this.value&&!e.modified()?this.value:$2(e.fields,e.flat)}function x9(e){P.call(this,[],e),this._pending=null}ee(x9,P,{transform(e,t){const n=t.dataflow;return this._pending?Jy(this,t,this._pending):oV(e)?t.StopPropagation:e.values?Jy(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(r=>(this._pending=oe(r.data),s=>s.touch(this)))}:n.request(e.url,e.format).then(i=>Jy(this,t,oe(i.data)))}});function oV(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function Jy(e,t,n){n.forEach(nt);const i=t.fork(t.NO_FIELDS&t.NO_SOURCE);return i.rem=e.value,e.value=i.source=i.add=n,e._pending=null,i.rem.length&&i.clean(!0),i}function Qy(e){P.call(this,{},e)}Qy.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]},ee(Qy,P,{transform(e,t){const n=e.fields,i=e.index,r=e.values,s=e.default==null?null:e.default,o=e.modified(),a=n.length;let u=o?t.SOURCE:t.ADD,l=t,c=e.as,f,d,h;return r?(d=r.length,a>1&&!c&&q('Multi-field lookup requires explicit "as" parameter.'),c&&c.length!==a*d&&q('The "as" parameter has too few output field names.'),c=c||r.map(Tt),f=function(p){for(var g=0,m=0,y,b;g<a;++g)if(b=i.get(n[g](p)),b==null)for(y=0;y<d;++y,++m)p[c[m]]=s;else for(y=0;y<d;++y,++m)p[c[m]]=r[y](b)}):(c||q("Missing output field names."),f=function(p){for(var g=0,m;g<a;++g)m=i.get(n[g](p)),p[c[g]]=m??s}),o?l=t.reflow(!0):(h=n.some(p=>t.modified(p.fields)),u|=h?t.MOD:0),t.visit(u,f),l.modifies(c)}});function _9(e){xt.call(this,null,aV,e)}ee(_9,xt);function aV(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let i=1/0,r=-1/0,s,o;for(s=0;s<n;++s)o=t[s],o[0]<i&&(i=o[0]),o[1]>r&&(r=o[1]);return[i,r]}function w9(e){xt.call(this,null,uV,e)}ee(w9,xt);function uV(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function E9(e){P.call(this,null,e)}ee(E9,P,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function eb(e){Do.call(this,e)}eb.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:vf,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]},ee(eb,Do,{_transform:Do.prototype.transform,transform(e,t){return this._transform(lV(e,t),t)}});function lV(e,t){const n=e.field,i=e.value,r=(e.op==="count"?"__count__":e.op)||"sum",s=wn(n).concat(wn(i)),o=fV(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:o.map(()=>r),fields:o.map(a=>cV(a,n,i,s)),as:o.map(a=>a+""),modified:e.modified.bind(e)}}function cV(e,t,n,i){return ii(r=>t(r)===e?n(r):NaN,i,e+"")}function fV(e,t,n){const i={},r=[];return n.visit(n.SOURCE,s=>{const o=e(s);i[o]||(i[o]=1,r.push(o))}),r.sort(rl),t?r.slice(0,t):r}function C9(e){$0.call(this,e)}ee(C9,$0,{transform(e,t){const n=e.subflow,i=e.field,r=s=>this.subflow(_e(s),n,t,s);return(e.modified("field")||i&&t.modified(wn(i)))&&q("PreFacet does not support field modification."),this.initTargets(),i?(t.visit(t.MOD,s=>{const o=r(s);i(s).forEach(a=>o.mod(a))}),t.visit(t.ADD,s=>{const o=r(s);i(s).forEach(a=>o.add(nt(a)))}),t.visit(t.REM,s=>{const o=r(s);i(s).forEach(a=>o.rem(a))})):(t.visit(t.MOD,s=>r(s).mod(s)),t.visit(t.ADD,s=>r(s).add(s)),t.visit(t.REM,s=>r(s).rem(s))),t.clean()&&t.runAfter(()=>this.clean()),t}});function tb(e){P.call(this,null,e)}tb.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]},ee(tb,P,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.fields,r=p9(e.fields,e.as||[]),s=i?(a,u)=>dV(a,u,i,r):m0;let o;return this.value?o=this.value:(t=t.addAll(),o=this.value={}),t.visit(t.REM,a=>{const u=_e(a);n.rem.push(o[u]),o[u]=null}),t.visit(t.ADD,a=>{const u=s(a,nt({}));o[_e(a)]=u,n.add.push(u)}),t.visit(t.MOD,a=>{n.mod.push(s(a,o[_e(a)]))}),n}});function dV(e,t,n,i){for(let r=0,s=n.length;r<s;++r)t[i[r]]=n[r](e);return t}function k9(e){P.call(this,null,e)}ee(k9,P,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function nb(e){P.call(this,null,e)}nb.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const hV=1e-14;ee(nb,P,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const r=t.materialize(t.SOURCE).source,s=Uy(r,e.groupby,e.field),o=(e.groupby||[]).map(Tt),a=[],u=e.step||.01,l=e.probs||Ei(u/2,1-hV,u),c=l.length;return s.forEach(f=>{const d=my(f,l);for(let h=0;h<c;++h){const p={};for(let g=0;g<o.length;++g)p[o[g]]=f.dims[g];p[i[0]]=l[h],p[i[1]]=d[h],a.push(nt(p))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=a,n}});function A9(e){P.call(this,null,e)}ee(A9,P,{transform(e,t){let n,i;return this.value?i=this.value:(n=t=t.addAll(),i=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,r=>{const s=_e(r);n.rem.push(i[s]),i[s]=null}),t.visit(t.ADD,r=>{const s=dy(r);i[_e(r)]=s,n.add.push(s)}),t.visit(t.MOD,r=>{const s=i[_e(r)];for(const o in r)s[o]=r[o],n.modifies(o);n.mod.push(s)})),n}});function ib(e){P.call(this,[],e),this.count=0}ib.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]},ee(ib,P,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.modified("size"),r=e.size,s=this.value.reduce((c,f)=>(c[_e(f)]=1,c),{});let o=this.value,a=this.count,u=0;function l(c){let f,d;o.length<r?o.push(c):(d=~~((a+1)*Wi()),d<o.length&&d>=u&&(f=o[d],s[_e(f)]&&n.rem.push(f),o[d]=c)),++a}if(t.rem.length&&(t.visit(t.REM,c=>{const f=_e(c);s[f]&&(s[f]=-1,n.rem.push(c)),--a}),o=o.filter(c=>s[_e(c)]!==-1)),(t.rem.length||i)&&o.length<r&&t.source&&(u=a=o.length,t.visit(t.SOURCE,c=>{s[_e(c)]||l(c)}),u=-1),i&&o.length>r){const c=o.length-r;for(let f=0;f<c;++f)s[_e(o[f])]=-1,n.rem.push(o[f]);o=o.slice(c)}return t.mod.length&&t.visit(t.MOD,c=>{s[_e(c)]&&n.mod.push(c)}),t.add.length&&t.visit(t.ADD,l),(t.add.length||u<0)&&(n.add=o.filter(c=>!s[_e(c)])),this.count=a,this.value=n.source=o,n}});function rb(e){P.call(this,null,e)}rb.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]},ee(rb,P,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),i=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=Ei(e.start,e.stop,e.step||1).map(r=>{const s={};return s[i]=r,nt(s)}),n.add=t.add.concat(this.value),n}});function $9(e){P.call(this,null,e),this.modified(!0)}ee($9,P,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function sb(e){P.call(this,null,e)}const S9=["unit0","unit1"];sb.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:H2,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:S9}]},ee(sb,P,{transform(e,t){const n=e.field,i=e.interval!==!1,r=e.timezone==="utc",s=this._floor(e,t),o=(r?ml:gl)(s.unit).offset,a=e.as||S9,u=a[0],l=a[1],c=s.step;let f=s.start||1/0,d=s.stop||-1/0,h=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(wn(n)))&&(t=t.reflow(!0),h=t.SOURCE,f=1/0,d=-1/0),t.visit(h,p=>{const g=n(p);let m,y;g==null?(p[u]=null,i&&(p[l]=null)):(p[u]=m=y=s(g),i&&(p[l]=y=o(m,c)),m<f&&(f=m),y>d&&(d=y))}),s.start=f,s.stop=d,t.modifies(i?a:u)},_floor(e,t){const n=e.timezone==="utc",{units:i,step:r}=e.units?{units:e.units,step:e.step||1}:X8({extent:e.extent||qr(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),s=V2(i),o=this.value||{},a=(n?P8:I8)(s,r);return a.unit=Ge(s),a.units=s,a.step=r,a.start=o.start,a.stop=o.stop,this.value=a}});function F9(e){P.call(this,sl(),e)}ee(F9,P,{transform(e,t){const n=t.dataflow,i=e.field,r=this.value,s=a=>r.set(i(a),a);let o=!0;return e.modified("field")||t.modified(i.fields)?(r.clear(),t.visit(t.SOURCE,s)):t.changed()?(t.visit(t.REM,a=>r.delete(i(a))),t.visit(t.ADD,s)):o=!1,this.modified(o),r.empty>n.cleanThreshold&&n.runAfter(r.clean),t.fork()}});function D9(e){P.call(this,null,e)}ee(D9,P,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(Ta(e.sort)):t.source).map(e.field))}});function pV(e,t,n,i){const r=xf[e](t,n);return{init:r.init||bo,update:function(s,o){o[i]=r.next(s)}}}const xf={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,i=t.data;return n&&t.compare(i[n-1],i[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,i=t.data;return n&&t.compare(i[n-1],i[n])?++e:e}}},percent_rank:function(){const e=xf.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,i=t.compare;let r=t.index;if(e<r){for(;r+1<n.length&&!i(n[r],n[r+1]);)++r;e=r}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||q("ntile num must be greater than zero.");const n=xf.cume_dist(),i=n.next;return{init:n.init,next:r=>Math.ceil(t*i(r))}},lag:function(e,t){return t=+t||1,{next:n=>{const i=n.index-t;return i>=0?e(n.data[i]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const i=n.index+t,r=n.data;return i<r.length?e(r[i]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||q("nth_value nth must be greater than zero."),{next:n=>{const i=n.i0+(t-1);return i<n.i1?e(n.data[i]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const i=e(n.data[n.index]);return i!=null?t=i:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:i=>{const r=i.data;return i.index<=n?t:(n=gV(e,r,i.index))<0?(n=r.length,t=null):t=e(r[n])}}}};function gV(e,t,n){for(let i=t.length;n<i;++n)if(e(t[n])!=null)return n;return-1}const mV=Object.keys(xf);function T9(e){const t=oe(e.ops),n=oe(e.fields),i=oe(e.params),r=oe(e.aggregate_params),s=oe(e.as),o=this.outputs=[],a=this.windows=[],u={},l={},c=[],f=[];let d=!0;function h(p){oe(wn(p)).forEach(g=>u[g]=1)}h(e.sort),t.forEach((p,g)=>{const m=n[g],y=i[g],b=r[g]||null,v=Tt(m),x=r9(p,v,s[g]);if(h(m),o.push(x),ue(xf,p))a.push(pV(p,m,y,x));else{if(m==null&&p!=="count"&&q("Null aggregate field specified."),p==="count"){c.push(x);return}d=!1;let _=l[v];_||(_=l[v]=[],_.field=m,f.push(_)),_.push(s9(p,b,x))}}),(c.length||f.length)&&(this.cell=yV(f,c,d)),this.inputs=Object.keys(u)}const M9=T9.prototype;M9.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()},M9.update=function(e,t){const n=this.cell,i=this.windows,r=e.data,s=i&&i.length;let o;if(n){for(o=e.p0;o<e.i0;++o)n.rem(r[o]);for(o=e.p1;o<e.i1;++o)n.add(r[o]);n.set(t)}for(o=0;o<s;++o)i[o].update(e,t)};function yV(e,t,n){e=e.map(u=>a9(u,u.field));const i={num:0,agg:null,store:!1,count:t};if(!n)for(var r=e.length,s=i.agg=Array(r),o=0;o<r;++o)s[o]=new e[o](i);if(i.store)var a=i.data=new Oy;return i.add=function(u){if(i.num+=1,!n){a&&a.add(u);for(let l=0;l<r;++l)s[l].add(s[l].get(u),u)}},i.rem=function(u){if(i.num-=1,!n){a&&a.rem(u);for(let l=0;l<r;++l)s[l].rem(s[l].get(u),u)}},i.set=function(u){let l,c;for(a&&a.values(),l=0,c=t.length;l<c;++l)u[t[l]]=i.num;if(!n)for(l=0,c=s.length;l<c;++l)s[l].set(u)},i.init=function(){i.num=0,a&&a.reset();for(let u=0;u<r;++u)s[u].init()},i}function ob(e){P.call(this,{},e),this._mlen=0,this._mods=[]}ob.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:mV.concat(vf)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]},ee(ob,P,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),i=Ta(e.sort),r=Ny(e.groupby),s=a=>this.group(r(a));let o=this.state;(!o||n)&&(o=this.state=new T9(e)),n||t.modified(o.inputs)?(this.value={},t.visit(t.SOURCE,a=>s(a).add(a))):(t.visit(t.REM,a=>s(a).remove(a)),t.visit(t.ADD,a=>s(a).add(a)));for(let a=0,u=this._mlen;a<u;++a)bV(this._mods[a],o,i,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(o.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=u9(_e),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function bV(e,t,n,i){const r=i.sort,s=r&&!i.ignorePeers,o=i.frame||[null,0],a=e.data(n),u=a.length,l=s?al(r):null,c={i0:0,i1:0,p0:0,p1:0,index:0,data:a,compare:r||kn(-1)};t.init();for(let f=0;f<u;++f)vV(c,o,f,u),s&&xV(c,l),t.update(c,a[f])}function vV(e,t,n,i){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?i:Math.min(i,n+Math.abs(t[1])+1),e.index=n}function xV(e,t){const n=e.i0,i=e.i1-1,r=e.compare,s=e.data,o=s.length-1;n>0&&!r(s[n],s[n-1])&&(e.i0=t.left(s,s[n])),i<o&&!r(s[i],s[i+1])&&(e.i1=t.right(s,s[i]))}const _V=Object.freeze(Object.defineProperty({__proto__:null,aggregate:Do,bin:Ly,collect:Iy,compare:l9,countpattern:Py,cross:zy,density:By,dotbin:jy,expression:m9,extent:qy,facet:$0,field:y9,filter:Hy,flatten:Gy,fold:Vy,formula:Yy,generate:b9,impute:Xy,joinaggregate:Ky,kde:Zy,key:v9,load:x9,lookup:Qy,multiextent:_9,multivalues:w9,params:E9,pivot:eb,prefacet:C9,project:tb,proxy:k9,quantile:nb,relay:A9,sample:ib,sequence:rb,sieve:$9,subflow:Wy,timeunit:sb,tupleindex:F9,values:D9,window:ob},Symbol.toStringTag,{value:"Module"}));function rt(e){return function(){return e}}const N9=Math.abs,Sn=Math.atan2,Ma=Math.cos,wV=Math.max,ab=Math.min,Yr=Math.sin,Na=Math.sqrt,Fn=1e-12,wl=Math.PI,F0=wl/2,R9=2*wl;function EV(e){return e>1?0:e<-1?wl:Math.acos(e)}function O9(e){return e>=1?F0:e<=-1?-F0:Math.asin(e)}const ub=Math.PI,lb=2*ub,Ra=1e-6,CV=lb-Ra;function L9(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function kV(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return L9;const n=10**t;return function(i){this._+=i[0];for(let r=1,s=i.length;r<s;++r)this._+=Math.round(arguments[r]*n)/n+i[r]}}let cb=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?L9:kV(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,i,r){this._append`Q${+t},${+n},${this._x1=+i},${this._y1=+r}`}bezierCurveTo(t,n,i,r,s,o){this._append`C${+t},${+n},${+i},${+r},${this._x1=+s},${this._y1=+o}`}arcTo(t,n,i,r,s){if(t=+t,n=+n,i=+i,r=+r,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,u=i-t,l=r-n,c=o-t,f=a-n,d=c*c+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(d>Ra)if(!(Math.abs(f*u-l*c)>Ra)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let h=i-o,p=r-a,g=u*u+l*l,m=h*h+p*p,y=Math.sqrt(g),b=Math.sqrt(d),v=s*Math.tan((ub-Math.acos((g+d-m)/(2*y*b)))/2),x=v/b,_=v/y;Math.abs(x-1)>Ra&&this._append`L${t+x*c},${n+x*f}`,this._append`A${s},${s},0,0,${+(f*h>c*p)},${this._x1=t+_*u},${this._y1=n+_*l}`}}arc(t,n,i,r,s,o){if(t=+t,n=+n,i=+i,o=!!o,i<0)throw new Error(`negative radius: ${i}`);let a=i*Math.cos(r),u=i*Math.sin(r),l=t+a,c=n+u,f=1^o,d=o?r-s:s-r;this._x1===null?this._append`M${l},${c}`:(Math.abs(this._x1-l)>Ra||Math.abs(this._y1-c)>Ra)&&this._append`L${l},${c}`,i&&(d<0&&(d=d%lb+lb),d>CV?this._append`A${i},${i},0,1,${f},${t-a},${n-u}A${i},${i},0,1,${f},${this._x1=l},${this._y1=c}`:d>Ra&&this._append`A${i},${i},0,${+(d>=ub)},${f},${this._x1=t+i*Math.cos(s)},${this._y1=n+i*Math.sin(s)}`)}rect(t,n,i,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${i=+i}v${+r}h${-i}Z`}toString(){return this._}};function D0(){return new cb}D0.prototype=cb.prototype;function T0(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const i=Math.floor(n);if(!(i>=0))throw new RangeError(`invalid digits: ${n}`);t=i}return e},()=>new cb(t)}function AV(e){return e.innerRadius}function $V(e){return e.outerRadius}function SV(e){return e.startAngle}function FV(e){return e.endAngle}function DV(e){return e&&e.padAngle}function TV(e,t,n,i,r,s,o,a){var u=n-e,l=i-t,c=o-r,f=a-s,d=f*u-c*l;if(!(d*d<Fn))return d=(c*(t-s)-f*(e-r))/d,[e+d*u,t+d*l]}function M0(e,t,n,i,r,s,o){var a=e-n,u=t-i,l=(o?s:-s)/Na(a*a+u*u),c=l*u,f=-l*a,d=e+c,h=t+f,p=n+c,g=i+f,m=(d+p)/2,y=(h+g)/2,b=p-d,v=g-h,x=b*b+v*v,_=r-s,E=d*g-p*h,w=(v<0?-1:1)*Na(wV(0,_*_*x-E*E)),C=(E*v-b*w)/x,k=(-E*b-v*w)/x,S=(E*v+b*w)/x,$=(-E*b+v*w)/x,O=C-m,R=k-y,F=S-m,A=$-y;return O*O+R*R>F*F+A*A&&(C=S,k=$),{cx:C,cy:k,x01:-c,y01:-f,x11:C*(r/_-1),y11:k*(r/_-1)}}function MV(){var e=AV,t=$V,n=rt(0),i=null,r=SV,s=FV,o=DV,a=null,u=T0(l);function l(){var c,f,d=+e.apply(this,arguments),h=+t.apply(this,arguments),p=r.apply(this,arguments)-F0,g=s.apply(this,arguments)-F0,m=N9(g-p),y=g>p;if(a||(a=c=u()),h<d&&(f=h,h=d,d=f),!(h>Fn))a.moveTo(0,0);else if(m>R9-Fn)a.moveTo(h*Ma(p),h*Yr(p)),a.arc(0,0,h,p,g,!y),d>Fn&&(a.moveTo(d*Ma(g),d*Yr(g)),a.arc(0,0,d,g,p,y));else{var b=p,v=g,x=p,_=g,E=m,w=m,C=o.apply(this,arguments)/2,k=C>Fn&&(i?+i.apply(this,arguments):Na(d*d+h*h)),S=ab(N9(h-d)/2,+n.apply(this,arguments)),$=S,O=S,R,F;if(k>Fn){var A=O9(k/d*Yr(C)),T=O9(k/h*Yr(C));(E-=A*2)>Fn?(A*=y?1:-1,x+=A,_-=A):(E=0,x=_=(p+g)/2),(w-=T*2)>Fn?(T*=y?1:-1,b+=T,v-=T):(w=0,b=v=(p+g)/2)}var B=h*Ma(b),H=h*Yr(b),z=d*Ma(_),ne=d*Yr(_);if(S>Fn){var be=h*Ma(v),de=h*Yr(v),Te=d*Ma(x),ct=d*Yr(x),$e;if(m<wl)if($e=TV(B,H,Te,ct,be,de,z,ne)){var Ot=B-$e[0],or=H-$e[1],Ii=be-$e[0],le=de-$e[1],Re=1/Yr(EV((Ot*Ii+or*le)/(Na(Ot*Ot+or*or)*Na(Ii*Ii+le*le)))/2),Le=Na($e[0]*$e[0]+$e[1]*$e[1]);$=ab(S,(d-Le)/(Re-1)),O=ab(S,(h-Le)/(Re+1))}else $=O=0}w>Fn?O>Fn?(R=M0(Te,ct,B,H,h,O,y),F=M0(be,de,z,ne,h,O,y),a.moveTo(R.cx+R.x01,R.cy+R.y01),O<S?a.arc(R.cx,R.cy,O,Sn(R.y01,R.x01),Sn(F.y01,F.x01),!y):(a.arc(R.cx,R.cy,O,Sn(R.y01,R.x01),Sn(R.y11,R.x11),!y),a.arc(0,0,h,Sn(R.cy+R.y11,R.cx+R.x11),Sn(F.cy+F.y11,F.cx+F.x11),!y),a.arc(F.cx,F.cy,O,Sn(F.y11,F.x11),Sn(F.y01,F.x01),!y))):(a.moveTo(B,H),a.arc(0,0,h,b,v,!y)):a.moveTo(B,H),!(d>Fn)||!(E>Fn)?a.lineTo(z,ne):$>Fn?(R=M0(z,ne,be,de,d,-$,y),F=M0(B,H,Te,ct,d,-$,y),a.lineTo(R.cx+R.x01,R.cy+R.y01),$<S?a.arc(R.cx,R.cy,$,Sn(R.y01,R.x01),Sn(F.y01,F.x01),!y):(a.arc(R.cx,R.cy,$,Sn(R.y01,R.x01),Sn(R.y11,R.x11),!y),a.arc(0,0,d,Sn(R.cy+R.y11,R.cx+R.x11),Sn(F.cy+F.y11,F.cx+F.x11),y),a.arc(F.cx,F.cy,$,Sn(F.y11,F.x11),Sn(F.y01,F.x01),!y))):a.arc(0,0,d,_,x,y)}if(a.closePath(),c)return a=null,c+""||null}return l.centroid=function(){var c=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,f=(+r.apply(this,arguments)+ +s.apply(this,arguments))/2-wl/2;return[Ma(f)*c,Yr(f)*c]},l.innerRadius=function(c){return arguments.length?(e=typeof c=="function"?c:rt(+c),l):e},l.outerRadius=function(c){return arguments.length?(t=typeof c=="function"?c:rt(+c),l):t},l.cornerRadius=function(c){return arguments.length?(n=typeof c=="function"?c:rt(+c),l):n},l.padRadius=function(c){return arguments.length?(i=c==null?null:typeof c=="function"?c:rt(+c),l):i},l.startAngle=function(c){return arguments.length?(r=typeof c=="function"?c:rt(+c),l):r},l.endAngle=function(c){return arguments.length?(s=typeof c=="function"?c:rt(+c),l):s},l.padAngle=function(c){return arguments.length?(o=typeof c=="function"?c:rt(+c),l):o},l.context=function(c){return arguments.length?(a=c??null,l):a},l}function I9(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function P9(e){this._context=e}P9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function fb(e){return new P9(e)}function z9(e){return e[0]}function B9(e){return e[1]}function U9(e,t){var n=rt(!0),i=null,r=fb,s=null,o=T0(a);e=typeof e=="function"?e:e===void 0?z9:rt(e),t=typeof t=="function"?t:t===void 0?B9:rt(t);function a(u){var l,c=(u=I9(u)).length,f,d=!1,h;for(i==null&&(s=r(h=o())),l=0;l<=c;++l)!(l<c&&n(f=u[l],l,u))===d&&((d=!d)?s.lineStart():s.lineEnd()),d&&s.point(+e(f,l,u),+t(f,l,u));if(h)return s=null,h+""||null}return a.x=function(u){return arguments.length?(e=typeof u=="function"?u:rt(+u),a):e},a.y=function(u){return arguments.length?(t=typeof u=="function"?u:rt(+u),a):t},a.defined=function(u){return arguments.length?(n=typeof u=="function"?u:rt(!!u),a):n},a.curve=function(u){return arguments.length?(r=u,i!=null&&(s=r(i)),a):r},a.context=function(u){return arguments.length?(u==null?i=s=null:s=r(i=u),a):i},a}function j9(e,t,n){var i=null,r=rt(!0),s=null,o=fb,a=null,u=T0(l);e=typeof e=="function"?e:e===void 0?z9:rt(+e),t=typeof t=="function"?t:rt(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?B9:rt(+n);function l(f){var d,h,p,g=(f=I9(f)).length,m,y=!1,b,v=new Array(g),x=new Array(g);for(s==null&&(a=o(b=u())),d=0;d<=g;++d){if(!(d<g&&r(m=f[d],d,f))===y)if(y=!y)h=d,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),p=d-1;p>=h;--p)a.point(v[p],x[p]);a.lineEnd(),a.areaEnd()}y&&(v[d]=+e(m,d,f),x[d]=+t(m,d,f),a.point(i?+i(m,d,f):v[d],n?+n(m,d,f):x[d]))}if(b)return a=null,b+""||null}function c(){return U9().defined(r).curve(o).context(s)}return l.x=function(f){return arguments.length?(e=typeof f=="function"?f:rt(+f),i=null,l):e},l.x0=function(f){return arguments.length?(e=typeof f=="function"?f:rt(+f),l):e},l.x1=function(f){return arguments.length?(i=f==null?null:typeof f=="function"?f:rt(+f),l):i},l.y=function(f){return arguments.length?(t=typeof f=="function"?f:rt(+f),n=null,l):t},l.y0=function(f){return arguments.length?(t=typeof f=="function"?f:rt(+f),l):t},l.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:rt(+f),l):n},l.lineX0=l.lineY0=function(){return c().x(e).y(t)},l.lineY1=function(){return c().x(e).y(n)},l.lineX1=function(){return c().x(i).y(t)},l.defined=function(f){return arguments.length?(r=typeof f=="function"?f:rt(!!f),l):r},l.curve=function(f){return arguments.length?(o=f,s!=null&&(a=o(s)),l):o},l.context=function(f){return arguments.length?(f==null?s=a=null:a=o(s=f),l):s},l}const NV={draw(e,t){const n=Na(t/wl);e.moveTo(n,0),e.arc(0,0,n,0,R9)}};function RV(e,t){let n=null,i=T0(r);e=typeof e=="function"?e:rt(e||NV),t=typeof t=="function"?t:rt(t===void 0?64:+t);function r(){let s;if(n||(n=s=i()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),s)return n=null,s+""||null}return r.type=function(s){return arguments.length?(e=typeof s=="function"?s:rt(s),r):e},r.size=function(s){return arguments.length?(t=typeof s=="function"?s:rt(+s),r):t},r.context=function(s){return arguments.length?(n=s??null,r):n},r}function To(){}function N0(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function R0(e){this._context=e}R0.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:N0(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:N0(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function OV(e){return new R0(e)}function q9(e){this._context=e}q9.prototype={areaStart:To,areaEnd:To,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:N0(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function LV(e){return new q9(e)}function W9(e){this._context=e}W9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,i=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:N0(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function IV(e){return new W9(e)}function H9(e,t){this._basis=new R0(e),this._beta=t}H9.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var i=e[0],r=t[0],s=e[n]-i,o=t[n]-r,a=-1,u;++a<=n;)u=a/n,this._basis.point(this._beta*e[a]+(1-this._beta)*(i+u*s),this._beta*t[a]+(1-this._beta)*(r+u*o));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const PV=function e(t){function n(i){return t===1?new R0(i):new H9(i,t)}return n.beta=function(i){return e(+i)},n}(.85);function O0(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function db(e,t){this._context=e,this._k=(1-t)/6}db.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:O0(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:O0(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const zV=function e(t){function n(i){return new db(i,t)}return n.tension=function(i){return e(+i)},n}(0);function hb(e,t){this._context=e,this._k=(1-t)/6}hb.prototype={areaStart:To,areaEnd:To,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:O0(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const BV=function e(t){function n(i){return new hb(i,t)}return n.tension=function(i){return e(+i)},n}(0);function pb(e,t){this._context=e,this._k=(1-t)/6}pb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:O0(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const UV=function e(t){function n(i){return new pb(i,t)}return n.tension=function(i){return e(+i)},n}(0);function gb(e,t,n){var i=e._x1,r=e._y1,s=e._x2,o=e._y2;if(e._l01_a>Fn){var a=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,u=3*e._l01_a*(e._l01_a+e._l12_a);i=(i*a-e._x0*e._l12_2a+e._x2*e._l01_2a)/u,r=(r*a-e._y0*e._l12_2a+e._y2*e._l01_2a)/u}if(e._l23_a>Fn){var l=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);s=(s*l+e._x1*e._l23_2a-t*e._l12_2a)/c,o=(o*l+e._y1*e._l23_2a-n*e._l12_2a)/c}e._context.bezierCurveTo(i,r,s,o,e._x2,e._y2)}function G9(e,t){this._context=e,this._alpha=t}G9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:gb(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const jV=function e(t){function n(i){return t?new G9(i,t):new db(i,0)}return n.alpha=function(i){return e(+i)},n}(.5);function V9(e,t){this._context=e,this._alpha=t}V9.prototype={areaStart:To,areaEnd:To,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:gb(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const qV=function e(t){function n(i){return t?new V9(i,t):new hb(i,0)}return n.alpha=function(i){return e(+i)},n}(.5);function Y9(e,t){this._context=e,this._alpha=t}Y9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:gb(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const WV=function e(t){function n(i){return t?new Y9(i,t):new pb(i,0)}return n.alpha=function(i){return e(+i)},n}(.5);function X9(e){this._context=e}X9.prototype={areaStart:To,areaEnd:To,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function HV(e){return new X9(e)}function K9(e){return e<0?-1:1}function Z9(e,t,n){var i=e._x1-e._x0,r=t-e._x1,s=(e._y1-e._y0)/(i||r<0&&-0),o=(n-e._y1)/(r||i<0&&-0),a=(s*r+o*i)/(i+r);return(K9(s)+K9(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function J9(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function mb(e,t,n){var i=e._x0,r=e._y0,s=e._x1,o=e._y1,a=(s-i)/3;e._context.bezierCurveTo(i+a,r+a*t,s-a,o-a*n,s,o)}function L0(e){this._context=e}L0.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:mb(this,this._t0,J9(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,mb(this,J9(this,n=Z9(this,e,t)),n);break;default:mb(this,this._t0,n=Z9(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function Q9(e){this._context=new eC(e)}(Q9.prototype=Object.create(L0.prototype)).point=function(e,t){L0.prototype.point.call(this,t,e)};function eC(e){this._context=e}eC.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,i,r,s){this._context.bezierCurveTo(t,e,i,n,s,r)}};function GV(e){return new L0(e)}function VV(e){return new Q9(e)}function tC(e){this._context=e}tC.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var i=nC(e),r=nC(t),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(i[0][s],r[0][s],i[1][s],r[1][s],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function nC(e){var t,n=e.length-1,i,r=new Array(n),s=new Array(n),o=new Array(n);for(r[0]=0,s[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)r[t]=1,s[t]=4,o[t]=4*e[t]+2*e[t+1];for(r[n-1]=2,s[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)i=r[t]/s[t-1],s[t]-=i,o[t]-=i*o[t-1];for(r[n-1]=o[n-1]/s[n-1],t=n-2;t>=0;--t)r[t]=(o[t]-r[t+1])/s[t];for(s[n-1]=(e[n]+r[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-r[t+1];return[r,s]}function YV(e){return new tC(e)}function I0(e,t){this._context=e,this._t=t}I0.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function XV(e){return new I0(e,.5)}function KV(e){return new I0(e,0)}function ZV(e){return new I0(e,1)}function Mo(e,t){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const JV=()=>typeof Image<"u"?Image:null;function Xr(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function No(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const yb=Symbol("implicit");function bb(){var e=new o8,t=[],n=[],i=yb;function r(s){let o=e.get(s);if(o===void 0){if(i!==yb)return i;e.set(s,o=t.push(s)-1)}return n[o%n.length]}return r.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new o8;for(const o of s)e.has(o)||e.set(o,t.push(o)-1);return r},r.range=function(s){return arguments.length?(n=Array.from(s),r):n.slice()},r.unknown=function(s){return arguments.length?(i=s,r):i},r.copy=function(){return bb(t,n).unknown(i)},Xr.apply(r,arguments),r}function El(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function _f(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function Ro(){}var Oa=.7,Cl=1/Oa,kl="\\s*([+-]?\\d+)\\s*",wf="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Kr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",QV=/^#([0-9a-f]{3,8})$/,eY=new RegExp(`^rgb\\(${kl},${kl},${kl}\\)$`),tY=new RegExp(`^rgb\\(${Kr},${Kr},${Kr}\\)$`),nY=new RegExp(`^rgba\\(${kl},${kl},${kl},${wf}\\)$`),iY=new RegExp(`^rgba\\(${Kr},${Kr},${Kr},${wf}\\)$`),rY=new RegExp(`^hsl\\(${wf},${Kr},${Kr}\\)$`),sY=new RegExp(`^hsla\\(${wf},${Kr},${Kr},${wf}\\)$`),iC={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};El(Ro,Ef,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:rC,formatHex:rC,formatHex8:oY,formatHsl:aY,formatRgb:sC,toString:sC});function rC(){return this.rgb().formatHex()}function oY(){return this.rgb().formatHex8()}function aY(){return cC(this).formatHsl()}function sC(){return this.rgb().formatRgb()}function Ef(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=QV.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?oC(t):n===3?new Jt(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?P0(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?P0(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=eY.exec(e))?new Jt(t[1],t[2],t[3],1):(t=tY.exec(e))?new Jt(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=nY.exec(e))?P0(t[1],t[2],t[3],t[4]):(t=iY.exec(e))?P0(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=rY.exec(e))?lC(t[1],t[2]/100,t[3]/100,1):(t=sY.exec(e))?lC(t[1],t[2]/100,t[3]/100,t[4]):iC.hasOwnProperty(e)?oC(iC[e]):e==="transparent"?new Jt(NaN,NaN,NaN,0):null}function oC(e){return new Jt(e>>16&255,e>>8&255,e&255,1)}function P0(e,t,n,i){return i<=0&&(e=t=n=NaN),new Jt(e,t,n,i)}function vb(e){return e instanceof Ro||(e=Ef(e)),e?(e=e.rgb(),new Jt(e.r,e.g,e.b,e.opacity)):new Jt}function Oo(e,t,n,i){return arguments.length===1?vb(e):new Jt(e,t,n,i??1)}function Jt(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}El(Jt,Oo,_f(Ro,{brighter(e){return e=e==null?Cl:Math.pow(Cl,e),new Jt(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Oa:Math.pow(Oa,e),new Jt(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Jt(La(this.r),La(this.g),La(this.b),z0(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:aC,formatHex:aC,formatHex8:uY,formatRgb:uC,toString:uC}));function aC(){return`#${Ia(this.r)}${Ia(this.g)}${Ia(this.b)}`}function uY(){return`#${Ia(this.r)}${Ia(this.g)}${Ia(this.b)}${Ia((isNaN(this.opacity)?1:this.opacity)*255)}`}function uC(){const e=z0(this.opacity);return`${e===1?"rgb(":"rgba("}${La(this.r)}, ${La(this.g)}, ${La(this.b)}${e===1?")":`, ${e})`}`}function z0(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function La(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Ia(e){return e=La(e),(e<16?"0":"")+e.toString(16)}function lC(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new fr(e,t,n,i)}function cC(e){if(e instanceof fr)return new fr(e.h,e.s,e.l,e.opacity);if(e instanceof Ro||(e=Ef(e)),!e)return new fr;if(e instanceof fr)return e;e=e.rgb();var t=e.r/255,n=e.g/255,i=e.b/255,r=Math.min(t,n,i),s=Math.max(t,n,i),o=NaN,a=s-r,u=(s+r)/2;return a?(t===s?o=(n-i)/a+(n<i)*6:n===s?o=(i-t)/a+2:o=(t-n)/a+4,a/=u<.5?s+r:2-s-r,o*=60):a=u>0&&u<1?0:o,new fr(o,a,u,e.opacity)}function B0(e,t,n,i){return arguments.length===1?cC(e):new fr(e,t,n,i??1)}function fr(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}El(fr,B0,_f(Ro,{brighter(e){return e=e==null?Cl:Math.pow(Cl,e),new fr(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Oa:Math.pow(Oa,e),new fr(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,r=2*n-i;return new Jt(xb(e>=240?e-240:e+120,r,i),xb(e,r,i),xb(e<120?e+240:e-120,r,i),this.opacity)},clamp(){return new fr(fC(this.h),U0(this.s),U0(this.l),z0(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=z0(this.opacity);return`${e===1?"hsl(":"hsla("}${fC(this.h)}, ${U0(this.s)*100}%, ${U0(this.l)*100}%${e===1?")":`, ${e})`}`}}));function fC(e){return e=(e||0)%360,e<0?e+360:e}function U0(e){return Math.max(0,Math.min(1,e||0))}function xb(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const dC=Math.PI/180,hC=180/Math.PI,j0=18,pC=.96422,gC=1,mC=.82521,yC=4/29,Al=6/29,bC=3*Al*Al,lY=Al*Al*Al;function vC(e){if(e instanceof Zr)return new Zr(e.l,e.a,e.b,e.opacity);if(e instanceof Is)return xC(e);e instanceof Jt||(e=vb(e));var t=Cb(e.r),n=Cb(e.g),i=Cb(e.b),r=_b((.2225045*t+.7168786*n+.0606169*i)/gC),s,o;return t===n&&n===i?s=o=r:(s=_b((.4360747*t+.3850649*n+.1430804*i)/pC),o=_b((.0139322*t+.0971045*n+.7141733*i)/mC)),new Zr(116*r-16,500*(s-r),200*(r-o),e.opacity)}function q0(e,t,n,i){return arguments.length===1?vC(e):new Zr(e,t,n,i??1)}function Zr(e,t,n,i){this.l=+e,this.a=+t,this.b=+n,this.opacity=+i}El(Zr,q0,_f(Ro,{brighter(e){return new Zr(this.l+j0*(e??1),this.a,this.b,this.opacity)},darker(e){return new Zr(this.l-j0*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=pC*wb(t),e=gC*wb(e),n=mC*wb(n),new Jt(Eb(3.1338561*t-1.6168667*e-.4906146*n),Eb(-.9787684*t+1.9161415*e+.033454*n),Eb(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function _b(e){return e>lY?Math.pow(e,1/3):e/bC+yC}function wb(e){return e>Al?e*e*e:bC*(e-yC)}function Eb(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function Cb(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function cY(e){if(e instanceof Is)return new Is(e.h,e.c,e.l,e.opacity);if(e instanceof Zr||(e=vC(e)),e.a===0&&e.b===0)return new Is(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*hC;return new Is(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function W0(e,t,n,i){return arguments.length===1?cY(e):new Is(e,t,n,i??1)}function Is(e,t,n,i){this.h=+e,this.c=+t,this.l=+n,this.opacity=+i}function xC(e){if(isNaN(e.h))return new Zr(e.l,0,0,e.opacity);var t=e.h*dC;return new Zr(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}El(Is,W0,_f(Ro,{brighter(e){return new Is(this.h,this.c,this.l+j0*(e??1),this.opacity)},darker(e){return new Is(this.h,this.c,this.l-j0*(e??1),this.opacity)},rgb(){return xC(this).rgb()}}));var _C=-.14861,kb=1.78277,Ab=-.29227,H0=-.90649,Cf=1.97294,wC=Cf*H0,EC=Cf*kb,CC=kb*Ab-H0*_C;function fY(e){if(e instanceof Pa)return new Pa(e.h,e.s,e.l,e.opacity);e instanceof Jt||(e=vb(e));var t=e.r/255,n=e.g/255,i=e.b/255,r=(CC*i+wC*t-EC*n)/(CC+wC-EC),s=i-r,o=(Cf*(n-r)-Ab*s)/H0,a=Math.sqrt(o*o+s*s)/(Cf*r*(1-r)),u=a?Math.atan2(o,s)*hC-120:NaN;return new Pa(u<0?u+360:u,a,r,e.opacity)}function $b(e,t,n,i){return arguments.length===1?fY(e):new Pa(e,t,n,i??1)}function Pa(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}El(Pa,$b,_f(Ro,{brighter(e){return e=e==null?Cl:Math.pow(Cl,e),new Pa(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Oa:Math.pow(Oa,e),new Pa(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*dC,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),i=Math.cos(e),r=Math.sin(e);return new Jt(255*(t+n*(_C*i+kb*r)),255*(t+n*(Ab*i+H0*r)),255*(t+n*(Cf*i)),this.opacity)}}));function kC(e,t,n,i,r){var s=e*e,o=s*e;return((1-3*e+3*s-o)*t+(4-6*s+3*o)*n+(1+3*e+3*s-3*o)*i+o*r)/6}function AC(e){var t=e.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),r=e[i],s=e[i+1],o=i>0?e[i-1]:2*r-s,a=i<t-1?e[i+2]:2*s-r;return kC((n-i/t)*t,o,r,s,a)}}function $C(e){var t=e.length;return function(n){var i=Math.floor(((n%=1)<0?++n:n)*t),r=e[(i+t-1)%t],s=e[i%t],o=e[(i+1)%t],a=e[(i+2)%t];return kC((n-i/t)*t,r,s,o,a)}}const G0=e=>()=>e;function SC(e,t){return function(n){return e+n*t}}function dY(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}function V0(e,t){var n=t-e;return n?SC(e,n>180||n<-180?n-360*Math.round(n/360):n):G0(isNaN(e)?t:e)}function hY(e){return(e=+e)==1?Qt:function(t,n){return n-t?dY(t,n,e):G0(isNaN(t)?n:t)}}function Qt(e,t){var n=t-e;return n?SC(e,n):G0(isNaN(e)?t:e)}const Sb=function e(t){var n=hY(t);function i(r,s){var o=n((r=Oo(r)).r,(s=Oo(s)).r),a=n(r.g,s.g),u=n(r.b,s.b),l=Qt(r.opacity,s.opacity);return function(c){return r.r=o(c),r.g=a(c),r.b=u(c),r.opacity=l(c),r+""}}return i.gamma=e,i}(1);function FC(e){return function(t){var n=t.length,i=new Array(n),r=new Array(n),s=new Array(n),o,a;for(o=0;o<n;++o)a=Oo(t[o]),i[o]=a.r||0,r[o]=a.g||0,s[o]=a.b||0;return i=e(i),r=e(r),s=e(s),a.opacity=1,function(u){return a.r=i(u),a.g=r(u),a.b=s(u),a+""}}}var pY=FC(AC),gY=FC($C);function Fb(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,i=t.slice(),r;return function(s){for(r=0;r<n;++r)i[r]=e[r]*(1-s)+t[r]*s;return i}}function DC(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function mY(e,t){return(DC(t)?Fb:TC)(e,t)}function TC(e,t){var n=t?t.length:0,i=e?Math.min(n,e.length):0,r=new Array(i),s=new Array(n),o;for(o=0;o<i;++o)r[o]=Lo(e[o],t[o]);for(;o<n;++o)s[o]=t[o];return function(a){for(o=0;o<i;++o)s[o]=r[o](a);return s}}function MC(e,t){var n=new Date;return e=+e,t=+t,function(i){return n.setTime(e*(1-i)+t*i),n}}function dr(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function NC(e,t){var n={},i={},r;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(r in t)r in e?n[r]=Lo(e[r],t[r]):i[r]=t[r];return function(s){for(r in n)i[r]=n[r](s);return i}}var Db=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Tb=new RegExp(Db.source,"g");function yY(e){return function(){return e}}function bY(e){return function(t){return e(t)+""}}function RC(e,t){var n=Db.lastIndex=Tb.lastIndex=0,i,r,s,o=-1,a=[],u=[];for(e=e+"",t=t+"";(i=Db.exec(e))&&(r=Tb.exec(t));)(s=r.index)>n&&(s=t.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(i=i[0])===(r=r[0])?a[o]?a[o]+=r:a[++o]=r:(a[++o]=null,u.push({i:o,x:dr(i,r)})),n=Tb.lastIndex;return n<t.length&&(s=t.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?u[0]?bY(u[0].x):yY(t):(t=u.length,function(l){for(var c=0,f;c<t;++c)a[(f=u[c]).i]=f.x(l);return a.join("")})}function Lo(e,t){var n=typeof t,i;return t==null||n==="boolean"?G0(t):(n==="number"?dr:n==="string"?(i=Ef(t))?(t=i,Sb):RC:t instanceof Ef?Sb:t instanceof Date?MC:DC(t)?Fb:Array.isArray(t)?TC:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?NC:dr)(e,t)}function vY(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function xY(e,t){var n=V0(+e,+t);return function(i){var r=n(i);return r-360*Math.floor(r/360)}}function kf(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var OC=180/Math.PI,Mb={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function LC(e,t,n,i,r,s){var o,a,u;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(u=e*n+t*i)&&(n-=e*u,i-=t*u),(a=Math.sqrt(n*n+i*i))&&(n/=a,i/=a,u/=a),e*i<t*n&&(e=-e,t=-t,u=-u,o=-o),{translateX:r,translateY:s,rotate:Math.atan2(t,e)*OC,skewX:Math.atan(u)*OC,scaleX:o,scaleY:a}}var Y0;function _Y(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Mb:LC(t.a,t.b,t.c,t.d,t.e,t.f)}function wY(e){return e==null||(Y0||(Y0=document.createElementNS("http://www.w3.org/2000/svg","g")),Y0.setAttribute("transform",e),!(e=Y0.transform.baseVal.consolidate()))?Mb:(e=e.matrix,LC(e.a,e.b,e.c,e.d,e.e,e.f))}function IC(e,t,n,i){function r(l){return l.length?l.pop()+" ":""}function s(l,c,f,d,h,p){if(l!==f||c!==d){var g=h.push("translate(",null,t,null,n);p.push({i:g-4,x:dr(l,f)},{i:g-2,x:dr(c,d)})}else(f||d)&&h.push("translate("+f+t+d+n)}function o(l,c,f,d){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),d.push({i:f.push(r(f)+"rotate(",null,i)-2,x:dr(l,c)})):c&&f.push(r(f)+"rotate("+c+i)}function a(l,c,f,d){l!==c?d.push({i:f.push(r(f)+"skewX(",null,i)-2,x:dr(l,c)}):c&&f.push(r(f)+"skewX("+c+i)}function u(l,c,f,d,h,p){if(l!==f||c!==d){var g=h.push(r(h)+"scale(",null,",",null,")");p.push({i:g-4,x:dr(l,f)},{i:g-2,x:dr(c,d)})}else(f!==1||d!==1)&&h.push(r(h)+"scale("+f+","+d+")")}return function(l,c){var f=[],d=[];return l=e(l),c=e(c),s(l.translateX,l.translateY,c.translateX,c.translateY,f,d),o(l.rotate,c.rotate,f,d),a(l.skewX,c.skewX,f,d),u(l.scaleX,l.scaleY,c.scaleX,c.scaleY,f,d),l=c=null,function(h){for(var p=-1,g=d.length,m;++p<g;)f[(m=d[p]).i]=m.x(h);return f.join("")}}}var EY=IC(_Y,"px, ","px)","deg)"),CY=IC(wY,", ",")",")"),kY=1e-12;function PC(e){return((e=Math.exp(e))+1/e)/2}function AY(e){return((e=Math.exp(e))-1/e)/2}function $Y(e){return((e=Math.exp(2*e))-1)/(e+1)}const SY=function e(t,n,i){function r(s,o){var a=s[0],u=s[1],l=s[2],c=o[0],f=o[1],d=o[2],h=c-a,p=f-u,g=h*h+p*p,m,y;if(g<kY)y=Math.log(d/l)/t,m=function(w){return[a+w*h,u+w*p,l*Math.exp(t*w*y)]};else{var b=Math.sqrt(g),v=(d*d-l*l+i*g)/(2*l*n*b),x=(d*d-l*l-i*g)/(2*d*n*b),_=Math.log(Math.sqrt(v*v+1)-v),E=Math.log(Math.sqrt(x*x+1)-x);y=(E-_)/t,m=function(w){var C=w*y,k=PC(_),S=l/(n*b)*(k*$Y(t*C+_)-AY(_));return[a+S*h,u+S*p,l*k/PC(t*C+_)]}}return m.duration=y*1e3*t/Math.SQRT2,m}return r.rho=function(s){var o=Math.max(.001,+s),a=o*o,u=a*a;return e(o,a,u)},r}(Math.SQRT2,2,4);function zC(e){return function(t,n){var i=e((t=B0(t)).h,(n=B0(n)).h),r=Qt(t.s,n.s),s=Qt(t.l,n.l),o=Qt(t.opacity,n.opacity);return function(a){return t.h=i(a),t.s=r(a),t.l=s(a),t.opacity=o(a),t+""}}}const FY=zC(V0);var DY=zC(Qt);function TY(e,t){var n=Qt((e=q0(e)).l,(t=q0(t)).l),i=Qt(e.a,t.a),r=Qt(e.b,t.b),s=Qt(e.opacity,t.opacity);return function(o){return e.l=n(o),e.a=i(o),e.b=r(o),e.opacity=s(o),e+""}}function BC(e){return function(t,n){var i=e((t=W0(t)).h,(n=W0(n)).h),r=Qt(t.c,n.c),s=Qt(t.l,n.l),o=Qt(t.opacity,n.opacity);return function(a){return t.h=i(a),t.c=r(a),t.l=s(a),t.opacity=o(a),t+""}}}const MY=BC(V0);var NY=BC(Qt);function UC(e){return function t(n){n=+n;function i(r,s){var o=e((r=$b(r)).h,(s=$b(s)).h),a=Qt(r.s,s.s),u=Qt(r.l,s.l),l=Qt(r.opacity,s.opacity);return function(c){return r.h=o(c),r.s=a(c),r.l=u(Math.pow(c,n)),r.opacity=l(c),r+""}}return i.gamma=t,i}(1)}const RY=UC(V0);var OY=UC(Qt);function Nb(e,t){t===void 0&&(t=e,e=Lo);for(var n=0,i=t.length-1,r=t[0],s=new Array(i<0?0:i);n<i;)s[n]=e(r,r=t[++n]);return function(o){var a=Math.max(0,Math.min(i-1,Math.floor(o*=i)));return s[a](o-a)}}function LY(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e(i/(t-1));return n}const IY=Object.freeze(Object.defineProperty({__proto__:null,interpolate:Lo,interpolateArray:mY,interpolateBasis:AC,interpolateBasisClosed:$C,interpolateCubehelix:RY,interpolateCubehelixLong:OY,interpolateDate:MC,interpolateDiscrete:vY,interpolateHcl:MY,interpolateHclLong:NY,interpolateHsl:FY,interpolateHslLong:DY,interpolateHue:xY,interpolateLab:TY,interpolateNumber:dr,interpolateNumberArray:Fb,interpolateObject:NC,interpolateRgb:Sb,interpolateRgbBasis:pY,interpolateRgbBasisClosed:gY,interpolateRound:kf,interpolateString:RC,interpolateTransformCss:EY,interpolateTransformSvg:CY,interpolateZoom:SY,piecewise:Nb,quantize:LY},Symbol.toStringTag,{value:"Module"}));function PY(e){return function(){return e}}function Rb(e){return+e}var jC=[0,1];function ai(e){return e}function Ob(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:PY(isNaN(t)?NaN:.5)}function zY(e,t){var n;return e>t&&(n=e,e=t,t=n),function(i){return Math.max(e,Math.min(t,i))}}function BY(e,t,n){var i=e[0],r=e[1],s=t[0],o=t[1];return r<i?(i=Ob(r,i),s=n(o,s)):(i=Ob(i,r),s=n(s,o)),function(a){return s(i(a))}}function UY(e,t,n){var i=Math.min(e.length,t.length)-1,r=new Array(i),s=new Array(i),o=-1;for(e[i]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<i;)r[o]=Ob(e[o],e[o+1]),s[o]=n(t[o],t[o+1]);return function(a){var u=Eo(e,a,1,i)-1;return s[u](r[u](a))}}function Af(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function X0(){var e=jC,t=jC,n=Lo,i,r,s,o=ai,a,u,l;function c(){var d=Math.min(e.length,t.length);return o!==ai&&(o=zY(e[0],e[d-1])),a=d>2?UY:BY,u=l=null,f}function f(d){return d==null||isNaN(d=+d)?s:(u||(u=a(e.map(i),t,n)))(i(o(d)))}return f.invert=function(d){return o(r((l||(l=a(t,e.map(i),dr)))(d)))},f.domain=function(d){return arguments.length?(e=Array.from(d,Rb),c()):e.slice()},f.range=function(d){return arguments.length?(t=Array.from(d),c()):t.slice()},f.rangeRound=function(d){return t=Array.from(d),n=kf,c()},f.clamp=function(d){return arguments.length?(o=d?!0:ai,c()):o!==ai},f.interpolate=function(d){return arguments.length?(n=d,c()):n},f.unknown=function(d){return arguments.length?(s=d,f):s},function(d,h){return i=d,r=h,c()}}function qC(){return X0()(ai,ai)}function WC(e,t,n,i){var r=Co(e,t,n),s;switch(i=$a(i??",f"),i.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return i.precision==null&&!isNaN(s=C8(r,o))&&(i.precision=s),B2(i,o)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(s=k8(r,Math.max(Math.abs(e),Math.abs(t))))&&(i.precision=s-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(s=E8(r))&&(i.precision=s-(i.type==="%")*2);break}}return t0(i)}function za(e){var t=e.domain;return e.ticks=function(n){var i=t();return O2(i[0],i[i.length-1],n??10)},e.tickFormat=function(n,i){var r=t();return WC(r[0],r[r.length-1],n??10,i)},e.nice=function(n){n==null&&(n=10);var i=t(),r=0,s=i.length-1,o=i[r],a=i[s],u,l,c=10;for(a<o&&(l=o,o=a,a=l,l=r,r=s,s=l);c-- >0;){if(l=L2(o,a,n),l===u)return i[r]=o,i[s]=a,t(i);if(l>0)o=Math.floor(o/l)*l,a=Math.ceil(a/l)*l;else if(l<0)o=Math.ceil(o*l)/l,a=Math.floor(a*l)/l;else break;u=l}return e},e}function HC(){var e=qC();return e.copy=function(){return Af(e,HC())},Xr.apply(e,arguments),za(e)}function GC(e){var t;function n(i){return i==null||isNaN(i=+i)?t:i}return n.invert=n,n.domain=n.range=function(i){return arguments.length?(e=Array.from(i,Rb),n):e.slice()},n.unknown=function(i){return arguments.length?(t=i,n):t},n.copy=function(){return GC(e).unknown(t)},e=arguments.length?Array.from(e,Rb):[0,1],za(n)}function VC(e,t){e=e.slice();var n=0,i=e.length-1,r=e[n],s=e[i],o;return s<r&&(o=n,n=i,i=o,o=r,r=s,s=o),e[n]=t.floor(r),e[i]=t.ceil(s),e}function YC(e){return Math.log(e)}function XC(e){return Math.exp(e)}function jY(e){return-Math.log(-e)}function qY(e){return-Math.exp(-e)}function WY(e){return isFinite(e)?+("1e"+e):e<0?0:e}function HY(e){return e===10?WY:e===Math.E?Math.exp:t=>Math.pow(e,t)}function GY(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function KC(e){return(t,n)=>-e(-t,n)}function Lb(e){const t=e(YC,XC),n=t.domain;let i=10,r,s;function o(){return r=GY(i),s=HY(i),n()[0]<0?(r=KC(r),s=KC(s),e(jY,qY)):e(YC,XC),t}return t.base=function(a){return arguments.length?(i=+a,o()):i},t.domain=function(a){return arguments.length?(n(a),o()):n()},t.ticks=a=>{const u=n();let l=u[0],c=u[u.length-1];const f=c<l;f&&([l,c]=[c,l]);let d=r(l),h=r(c),p,g;const m=a==null?10:+a;let y=[];if(!(i%1)&&h-d<m){if(d=Math.floor(d),h=Math.ceil(h),l>0){for(;d<=h;++d)for(p=1;p<i;++p)if(g=d<0?p/s(-d):p*s(d),!(g<l)){if(g>c)break;y.push(g)}}else for(;d<=h;++d)for(p=i-1;p>=1;--p)if(g=d>0?p/s(-d):p*s(d),!(g<l)){if(g>c)break;y.push(g)}y.length*2<m&&(y=O2(l,c,m))}else y=O2(d,h,Math.min(h-d,m)).map(s);return f?y.reverse():y},t.tickFormat=(a,u)=>{if(a==null&&(a=10),u==null&&(u=i===10?"s":","),typeof u!="function"&&(!(i%1)&&(u=$a(u)).precision==null&&(u.trim=!0),u=t0(u)),a===1/0)return u;const l=Math.max(1,i*a/t.ticks().length);return c=>{let f=c/s(Math.round(r(c)));return f*i<i-.5&&(f*=i),f<=l?u(c):""}},t.nice=()=>n(VC(n(),{floor:a=>s(Math.floor(r(a))),ceil:a=>s(Math.ceil(r(a)))})),t}function ZC(){const e=Lb(X0()).domain([1,10]);return e.copy=()=>Af(e,ZC()).base(e.base()),Xr.apply(e,arguments),e}function JC(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function QC(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Ib(e){var t=1,n=e(JC(t),QC(t));return n.constant=function(i){return arguments.length?e(JC(t=+i),QC(t)):t},za(n)}function ek(){var e=Ib(X0());return e.copy=function(){return Af(e,ek()).constant(e.constant())},Xr.apply(e,arguments)}function tk(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function VY(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function YY(e){return e<0?-e*e:e*e}function Pb(e){var t=e(ai,ai),n=1;function i(){return n===1?e(ai,ai):n===.5?e(VY,YY):e(tk(n),tk(1/n))}return t.exponent=function(r){return arguments.length?(n=+r,i()):n},za(t)}function zb(){var e=Pb(X0());return e.copy=function(){return Af(e,zb()).exponent(e.exponent())},Xr.apply(e,arguments),e}function XY(){return zb.apply(null,arguments).exponent(.5)}function nk(){var e=[],t=[],n=[],i;function r(){var o=0,a=Math.max(1,t.length);for(n=new Array(a-1);++o<a;)n[o-1]=d8(e,o/a);return s}function s(o){return o==null||isNaN(o=+o)?i:t[Eo(n,o)]}return s.invertExtent=function(o){var a=t.indexOf(o);return a<0?[NaN,NaN]:[a>0?n[a-1]:e[0],a<n.length?n[a]:e[e.length-1]]},s.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let a of o)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(Ds),r()},s.range=function(o){return arguments.length?(t=Array.from(o),r()):t.slice()},s.unknown=function(o){return arguments.length?(i=o,s):i},s.quantiles=function(){return n.slice()},s.copy=function(){return nk().domain(e).range(t).unknown(i)},Xr.apply(s,arguments)}function ik(){var e=0,t=1,n=1,i=[.5],r=[0,1],s;function o(u){return u!=null&&u<=u?r[Eo(i,u,0,n)]:s}function a(){var u=-1;for(i=new Array(n);++u<n;)i[u]=((u+1)*t-(u-n)*e)/(n+1);return o}return o.domain=function(u){return arguments.length?([e,t]=u,e=+e,t=+t,a()):[e,t]},o.range=function(u){return arguments.length?(n=(r=Array.from(u)).length-1,a()):r.slice()},o.invertExtent=function(u){var l=r.indexOf(u);return l<0?[NaN,NaN]:l<1?[e,i[0]]:l>=n?[i[n-1],t]:[i[l-1],i[l]]},o.unknown=function(u){return arguments.length&&(s=u),o},o.thresholds=function(){return i.slice()},o.copy=function(){return ik().domain([e,t]).range(r).unknown(s)},Xr.apply(za(o),arguments)}function rk(){var e=[.5],t=[0,1],n,i=1;function r(s){return s!=null&&s<=s?t[Eo(e,s,0,i)]:n}return r.domain=function(s){return arguments.length?(e=Array.from(s),i=Math.min(e.length,t.length-1),r):e.slice()},r.range=function(s){return arguments.length?(t=Array.from(s),i=Math.min(e.length,t.length-1),r):t.slice()},r.invertExtent=function(s){var o=t.indexOf(s);return[e[o-1],e[o]]},r.unknown=function(s){return arguments.length?(n=s,r):n},r.copy=function(){return rk().domain(e).range(t).unknown(n)},Xr.apply(r,arguments)}function KY(e){return new Date(e)}function ZY(e){return e instanceof Date?+e:+new Date(+e)}function Bb(e,t,n,i,r,s,o,a,u,l){var c=qC(),f=c.invert,d=c.domain,h=l(".%L"),p=l(":%S"),g=l("%I:%M"),m=l("%I %p"),y=l("%a %d"),b=l("%b %d"),v=l("%B"),x=l("%Y");function _(E){return(u(E)<E?h:a(E)<E?p:o(E)<E?g:s(E)<E?m:i(E)<E?r(E)<E?y:b:n(E)<E?v:x)(E)}return c.invert=function(E){return new Date(f(E))},c.domain=function(E){return arguments.length?d(Array.from(E,ZY)):d().map(KY)},c.ticks=function(E){var w=d();return e(w[0],w[w.length-1],E??10)},c.tickFormat=function(E,w){return w==null?_:l(w)},c.nice=function(E){var w=d();return(!E||typeof E.range!="function")&&(E=t(w[0],w[w.length-1],E??10)),E?d(VC(w,E)):c},c.copy=function(){return Af(c,Bb(e,t,n,i,r,s,o,a,u,l))},c}function JY(){return Xr.apply(Bb(rW,sW,Wr,Jc,cl,Os,r0,n0,Rs,ny).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function QY(){return Xr.apply(Bb(nW,iW,Hr,Qc,dl,ko,s0,i0,Rs,iy).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function K0(){var e=0,t=1,n,i,r,s,o=ai,a=!1,u;function l(f){return f==null||isNaN(f=+f)?u:o(r===0?.5:(f=(s(f)-n)*r,a?Math.max(0,Math.min(1,f)):f))}l.domain=function(f){return arguments.length?([e,t]=f,n=s(e=+e),i=s(t=+t),r=n===i?0:1/(i-n),l):[e,t]},l.clamp=function(f){return arguments.length?(a=!!f,l):a},l.interpolator=function(f){return arguments.length?(o=f,l):o};function c(f){return function(d){var h,p;return arguments.length?([h,p]=d,o=f(h,p),l):[o(0),o(1)]}}return l.range=c(Lo),l.rangeRound=c(kf),l.unknown=function(f){return arguments.length?(u=f,l):u},function(f){return s=f,n=f(e),i=f(t),r=n===i?0:1/(i-n),l}}function Io(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function Ub(){var e=za(K0()(ai));return e.copy=function(){return Io(e,Ub())},No.apply(e,arguments)}function sk(){var e=Lb(K0()).domain([1,10]);return e.copy=function(){return Io(e,sk()).base(e.base())},No.apply(e,arguments)}function ok(){var e=Ib(K0());return e.copy=function(){return Io(e,ok()).constant(e.constant())},No.apply(e,arguments)}function jb(){var e=Pb(K0());return e.copy=function(){return Io(e,jb()).exponent(e.exponent())},No.apply(e,arguments)}function eX(){return jb.apply(null,arguments).exponent(.5)}function Z0(){var e=0,t=.5,n=1,i=1,r,s,o,a,u,l=ai,c,f=!1,d;function h(g){return isNaN(g=+g)?d:(g=.5+((g=+c(g))-s)*(i*g<i*s?a:u),l(f?Math.max(0,Math.min(1,g)):g))}h.domain=function(g){return arguments.length?([e,t,n]=g,r=c(e=+e),s=c(t=+t),o=c(n=+n),a=r===s?0:.5/(s-r),u=s===o?0:.5/(o-s),i=s<r?-1:1,h):[e,t,n]},h.clamp=function(g){return arguments.length?(f=!!g,h):f},h.interpolator=function(g){return arguments.length?(l=g,h):l};function p(g){return function(m){var y,b,v;return arguments.length?([y,b,v]=m,l=Nb(g,[y,b,v]),h):[l(0),l(.5),l(1)]}}return h.range=p(Lo),h.rangeRound=p(kf),h.unknown=function(g){return arguments.length?(d=g,h):d},function(g){return c=g,r=g(e),s=g(t),o=g(n),a=r===s?0:.5/(s-r),u=s===o?0:.5/(o-s),i=s<r?-1:1,h}}function ak(){var e=za(Z0()(ai));return e.copy=function(){return Io(e,ak())},No.apply(e,arguments)}function uk(){var e=Lb(Z0()).domain([.1,1,10]);return e.copy=function(){return Io(e,uk()).base(e.base())},No.apply(e,arguments)}function lk(){var e=Ib(Z0());return e.copy=function(){return Io(e,lk()).constant(e.constant())},No.apply(e,arguments)}function qb(){var e=Pb(Z0());return e.copy=function(){return Io(e,qb()).exponent(e.exponent())},No.apply(e,arguments)}function tX(){return qb.apply(null,arguments).exponent(.5)}function Jr(e){for(var t=e.length/6|0,n=new Array(t),i=0;i<t;)n[i]="#"+e.slice(i*6,++i*6);return n}const nX=Jr("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),iX=Jr("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),rX=Jr("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),sX=Jr("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),oX=Jr("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),aX=Jr("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),uX=Jr("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),lX=Jr("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),cX=Jr("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),fX=Jr("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f");function Wb(e,t,n){const i=e-t+n*2;return e?i>0?i:1:0}const dX="identity",$l="linear",Ps="log",$f="pow",Sf="sqrt",J0="symlog",Ba="time",Ua="utc",Qr="sequential",Sl="diverging",Fl="quantile",Q0="quantize",ep="threshold",Hb="ordinal",Gb="point",ck="band",Vb="bin-ordinal",Ht="continuous",Ff="discrete",Df="discretizing",Hi="interpolating",Yb="temporal";function hX(e){return function(t){let n=t[0],i=t[1],r;return i<n&&(r=n,n=i,i=r),[e.invert(n),e.invert(i)]}}function pX(e){return function(t){const n=e.range();let i=t[0],r=t[1],s=-1,o,a,u,l;for(r<i&&(a=i,i=r,r=a),u=0,l=n.length;u<l;++u)n[u]>=i&&n[u]<=r&&(s<0&&(s=u),o=u);if(!(s<0))return i=e.invertExtent(n[s]),r=e.invertExtent(n[o]),[i[0]===void 0?i[1]:i[0],r[1]===void 0?r[0]:r[1]]}}function Xb(){const e=bb().unknown(void 0),t=e.domain,n=e.range;let i=[0,1],r,s,o=!1,a=0,u=0,l=.5;delete e.unknown;function c(){const f=t().length,d=i[1]<i[0],h=i[1-d],p=Wb(f,a,u);let g=i[d-0];r=(h-g)/(p||1),o&&(r=Math.floor(r)),g+=(h-g-r*(f-a))*l,s=r*(1-a),o&&(g=Math.round(g),s=Math.round(s));const m=Ei(f).map(y=>g+r*y);return n(d?m.reverse():m)}return e.domain=function(f){return arguments.length?(t(f),c()):t()},e.range=function(f){return arguments.length?(i=[+f[0],+f[1]],c()):i.slice()},e.rangeRound=function(f){return i=[+f[0],+f[1]],o=!0,c()},e.bandwidth=function(){return s},e.step=function(){return r},e.round=function(f){return arguments.length?(o=!!f,c()):o},e.padding=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),a=u,c()):a},e.paddingInner=function(f){return arguments.length?(a=Math.max(0,Math.min(1,f)),c()):a},e.paddingOuter=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),c()):u},e.align=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),c()):l},e.invertRange=function(f){if(f[0]==null||f[1]==null)return;const d=i[1]<i[0],h=d?n().reverse():n(),p=h.length-1;let g=+f[0],m=+f[1],y,b,v;if(!(g!==g||m!==m)&&(m<g&&(v=g,g=m,m=v),!(m<h[0]||g>i[1-d])))return y=Math.max(0,Eo(h,g)-1),b=g===m?y:Eo(h,m)-1,g-h[y]>s+1e-10&&++y,d&&(v=y,y=p-b,b=p-v),y>b?void 0:t().slice(y,b+1)},e.invert=function(f){const d=e.invertRange([f,f]);return d&&d[0]},e.copy=function(){return Xb().domain(t()).range(i).round(o).paddingInner(a).paddingOuter(u).align(l)},c()}function fk(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return fk(t())},e}function gX(){return fk(Xb().paddingInner(1))}var mX=Array.prototype.map;function yX(e){return mX.call(e,Cn)}const bX=Array.prototype.slice;function dk(){let e=[],t=[];function n(i){return i==null||i!==i?void 0:t[(Eo(e,i)-1)%t.length]}return n.domain=function(i){return arguments.length?(e=yX(i),n):e.slice()},n.range=function(i){return arguments.length?(t=bX.call(i),n):t.slice()},n.tickFormat=function(i,r){return WC(e[0],Ge(e),i??10,r)},n.copy=function(){return dk().domain(n.domain()).range(n.range())},n}const tp=new Map,hk=Symbol("vega_scale");function pk(e){return e[hk]=!0,e}function vX(e){return e&&e[hk]===!0}function xX(e,t,n){const i=function(){const s=t();return s.invertRange||(s.invertRange=s.invert?hX(s):s.invertExtent?pX(s):void 0),s.type=e,pk(s)};return i.metadata=lr(oe(n)),i}function Qe(e,t,n){return arguments.length>1?(tp.set(e,xX(e,t,n)),this):gk(e)?tp.get(e):void 0}Qe(dX,GC),Qe($l,HC,Ht),Qe(Ps,ZC,[Ht,Ps]),Qe($f,zb,Ht),Qe(Sf,XY,Ht),Qe(J0,ek,Ht),Qe(Ba,JY,[Ht,Yb]),Qe(Ua,QY,[Ht,Yb]),Qe(Qr,Ub,[Ht,Hi]),Qe(`${Qr}-${$l}`,Ub,[Ht,Hi]),Qe(`${Qr}-${Ps}`,sk,[Ht,Hi,Ps]),Qe(`${Qr}-${$f}`,jb,[Ht,Hi]),Qe(`${Qr}-${Sf}`,eX,[Ht,Hi]),Qe(`${Qr}-${J0}`,ok,[Ht,Hi]),Qe(`${Sl}-${$l}`,ak,[Ht,Hi]),Qe(`${Sl}-${Ps}`,uk,[Ht,Hi,Ps]),Qe(`${Sl}-${$f}`,qb,[Ht,Hi]),Qe(`${Sl}-${Sf}`,tX,[Ht,Hi]),Qe(`${Sl}-${J0}`,lk,[Ht,Hi]),Qe(Fl,nk,[Df,Fl]),Qe(Q0,ik,Df),Qe(ep,rk,Df),Qe(Vb,dk,[Ff,Df]),Qe(Hb,bb,Ff),Qe(ck,Xb,Ff),Qe(Gb,gX,Ff);function gk(e){return tp.has(e)}function ja(e,t){const n=tp.get(e);return n&&n.metadata[t]}function Kb(e){return ja(e,Ht)}function Dl(e){return ja(e,Ff)}function Zb(e){return ja(e,Df)}function mk(e){return ja(e,Ps)}function _X(e){return ja(e,Yb)}function yk(e){return ja(e,Hi)}function bk(e){return ja(e,Fl)}const wX=["clamp","base","constant","exponent"];function vk(e,t){const n=t[0],i=Ge(t)-n;return function(r){return e(n+r*i)}}function np(e,t,n){return Nb(Jb(t||"rgb",n),e)}function xk(e,t){const n=new Array(t),i=t+1;for(let r=0;r<t;)n[r]=e(++r/i);return n}function _k(e,t,n){const i=n-t;let r,s,o;return!i||!Number.isFinite(i)?kn(.5):(r=(s=e.type).indexOf("-"),s=r<0?s:s.slice(r+1),o=Qe(s)().domain([t,n]).range([0,1]),wX.forEach(a=>e[a]?o[a](e[a]()):0),o)}function Jb(e,t){const n=IY[EX(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function EX(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const CX={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},kX={accent:iX,category10:nX,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:rX,observable10:sX,paired:oX,pastel1:aX,pastel2:uX,set1:lX,set2:cX,set3:fX,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"};function wk(e){if(W(e))return e;const t=e.length/6|0,n=new Array(t);for(let i=0;i<t;)n[i]="#"+e.slice(i*6,++i*6);return n}function Ek(e,t){for(const n in e)Qb(n,t(e[n]))}const Ck={};Ek(kX,wk),Ek(CX,e=>np(wk(e)));function Qb(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(Ck[e]=t,this):Ck[e]}const ip="symbol",AX="discrete",$X="gradient",SX=e=>W(e)?e.map(t=>String(t)):String(e),FX=(e,t)=>e[1]-t[1],DX=(e,t)=>t[1]-e[1];function e3(e,t,n){let i;return Ze(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(Xc(e.domain())/n||1)+1))),re(t)&&(i=t.step,t=t.interval),se(t)&&(t=e.type===Ba?gl(t):e.type==Ua?ml(t):q("Only time and utc scales accept interval strings."),i&&(t=t.every(i))),t}function kk(e,t,n){let i=e.range(),r=i[0],s=Ge(i),o=FX;if(r>s&&(i=s,s=r,r=i,o=DX),r=Math.floor(r),s=Math.ceil(s),t=t.map(a=>[a,e(a)]).filter(a=>r<=a[1]&&a[1]<=s).sort(o).map(a=>a[0]),n>0&&t.length>1){const a=[t[0],Ge(t)];for(;t.length>n&&t.length>=3;)t=t.filter((u,l)=>!(l%2));t.length<3&&(t=a)}return t}function t3(e,t){return e.bins?kk(e,e.bins,t):e.ticks?e.ticks(t):e.domain()}function Ak(e,t,n,i,r,s){const o=t.type;let a=SX;if(o===Ba||r===Ba)a=e.timeFormat(i);else if(o===Ua||r===Ua)a=e.utcFormat(i);else if(mk(o)){const u=e.formatFloat(i);if(s||t.bins)a=u;else{const l=$k(t,n,!1);a=c=>l(c)?u(c):""}}else if(t.tickFormat){const u=t.domain();a=e.formatSpan(u[0],u[u.length-1],n,i)}else i&&(a=e.format(i));return a}function $k(e,t,n){const i=t3(e,t),r=e.base(),s=Math.log(r),o=Math.max(1,r*t/i.length),a=u=>{let l=u/Math.pow(r,Math.round(Math.log(u)/s));return l*r<r-.5&&(l*=r),l<=o};return n?i.filter(a):a}const n3={[Fl]:"quantiles",[Q0]:"thresholds",[ep]:"domain"},Sk={[Fl]:"quantiles",[Q0]:"domain"};function Fk(e,t){return e.bins?NX(e.bins):e.type===Ps?$k(e,t,!0):n3[e.type]?MX(e[n3[e.type]]()):t3(e,t)}function TX(e,t,n){const i=t[Sk[t.type]](),r=i.length;let s=r>1?i[1]-i[0]:i[0],o;for(o=1;o<r;++o)s=Math.min(s,i[o]-i[o-1]);return e.formatSpan(0,s,3*10,n)}function MX(e){const t=[-1/0].concat(e);return t.max=1/0,t}function NX(e){const t=e.slice(0,-1);return t.max=Ge(e),t}const RX=e=>n3[e.type]||e.bins;function Dk(e,t,n,i,r,s,o){const a=Sk[t.type]&&s!==Ba&&s!==Ua?TX(e,t,r):Ak(e,t,n,r,s,o);return i===ip&&RX(t)?OX(a):i===AX?LX(a):IX(a)}const OX=e=>(t,n,i)=>{const r=Tk(i[n+1],Tk(i.max,1/0)),s=Mk(t,e),o=Mk(r,e);return s&&o?s+"  "+o:o?"< "+o:" "+s},Tk=(e,t)=>e??t,LX=e=>(t,n)=>n?e(t):null,IX=e=>t=>e(t),Mk=(e,t)=>Number.isFinite(e)?t(e):null;function PX(e){const t=e.domain(),n=t.length-1;let i=+t[0],r=+Ge(t),s=r-i;if(e.type===ep){const o=n?s/n:.1;i-=o,r+=o,s=r-i}return o=>(o-i)/s}function zX(e,t,n,i){const r=i||t.type;return se(n)&&_X(r)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&r===Ba?e.timeFormat("%A, %d %B %Y, %X"):!n&&r===Ua?e.utcFormat("%A, %d %B %Y, %X UTC"):Dk(e,t,5,null,n,i,!0)}function Nk(e,t,n){n=n||{};const i=Math.max(3,n.maxlen||7),r=zX(e,t,n.format,n.formatType);if(Zb(t.type)){const s=Fk(t).slice(1).map(r),o=s.length;return`${o} boundar${o===1?"y":"ies"}: ${s.join(", ")}`}else if(Dl(t.type)){const s=t.domain(),o=s.length,a=o>i?s.slice(0,i-2).map(r).join(", ")+", ending with "+s.slice(-1).map(r):s.map(r).join(", ");return`${o} value${o===1?"":"s"}: ${a}`}else{const s=t.domain();return`values from ${r(s[0])} to ${r(Ge(s))}`}}let Rk=0;function BX(){Rk=0}const rp="p_";function i3(e){return e&&e.gradient}function Ok(e,t,n){const i=e.gradient;let r=e.id,s=i==="radial"?rp:"";return r||(r=e.id="gradient_"+Rk++,i==="radial"?(e.x1=es(e.x1,.5),e.y1=es(e.y1,.5),e.r1=es(e.r1,0),e.x2=es(e.x2,.5),e.y2=es(e.y2,.5),e.r2=es(e.r2,.5),s=rp):(e.x1=es(e.x1,0),e.y1=es(e.y1,0),e.x2=es(e.x2,1),e.y2=es(e.y2,0))),t[r]=e,"url("+(n||"")+"#"+s+r+")"}function es(e,t){return e??t}function Lk(e,t){var n=[],i;return i={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(r,s){return n.push({offset:r,color:s}),i}}}const Ik={basis:{curve:OV},"basis-closed":{curve:LV},"basis-open":{curve:IV},bundle:{curve:PV,tension:"beta",value:.85},cardinal:{curve:zV,tension:"tension",value:0},"cardinal-open":{curve:UV,tension:"tension",value:0},"cardinal-closed":{curve:BV,tension:"tension",value:0},"catmull-rom":{curve:jV,tension:"alpha",value:.5},"catmull-rom-closed":{curve:qV,tension:"alpha",value:.5},"catmull-rom-open":{curve:WV,tension:"alpha",value:.5},linear:{curve:fb},"linear-closed":{curve:HV},monotone:{horizontal:VV,vertical:GV},natural:{curve:YV},step:{curve:XV},"step-after":{curve:ZV},"step-before":{curve:KV}};function r3(e,t,n){var i=ue(Ik,e)&&Ik[e],r=null;return i&&(r=i.curve||i[t||"vertical"],i.tension&&n!=null&&(r=r[i.tension](n))),r}const UX={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},jX=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,qX=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,WX=/^((\s+,?\s*)|(,\s*))/,HX=/^[01]/;function Tl(e){const t=[];return(e.match(jX)||[]).forEach(i=>{let r=i[0];const s=r.toLowerCase(),o=UX[s],a=GX(s,o,i.slice(1).trim()),u=a.length;if(u<o||u&&u%o!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([r,...a.slice(0,o)]),u!==o){s==="m"&&(r=r==="M"?"L":"l");for(let l=o;l<u;l+=o)t.push([r,...a.slice(l,l+o)])}}),t}function GX(e,t,n){const i=[];for(let r=0;t&&r<n.length;)for(let s=0;s<t;++s){const o=e==="a"&&(s===3||s===4)?HX:qX,a=n.slice(r).match(o);if(a===null)throw Error("Invalid SVG path, incorrect parameter type");r+=a[0].length,i.push(+a[0]);const u=n.slice(r).match(WX);u!==null&&(r+=u[0].length)}return i}const Po=Math.PI/180,VX=1e-14,qa=Math.PI/2,ts=Math.PI*2,Ml=Math.sqrt(3)/2;var s3={},o3={},Pk=[].join;function YX(e,t,n,i,r,s,o,a,u){const l=Pk.call(arguments);if(s3[l])return s3[l];const c=o*Po,f=Math.sin(c),d=Math.cos(c);n=Math.abs(n),i=Math.abs(i);const h=d*(a-e)*.5+f*(u-t)*.5,p=d*(u-t)*.5-f*(a-e)*.5;let g=h*h/(n*n)+p*p/(i*i);g>1&&(g=Math.sqrt(g),n*=g,i*=g);const m=d/n,y=f/n,b=-f/i,v=d/i,x=m*a+y*u,_=b*a+v*u,E=m*e+y*t,w=b*e+v*t;let k=1/((E-x)*(E-x)+(w-_)*(w-_))-.25;k<0&&(k=0);let S=Math.sqrt(k);s==r&&(S=-S);const $=.5*(x+E)-S*(w-_),O=.5*(_+w)+S*(E-x),R=Math.atan2(_-O,x-$);let A=Math.atan2(w-O,E-$)-R;A<0&&s===1?A+=ts:A>0&&s===0&&(A-=ts);const T=Math.ceil(Math.abs(A/(qa+.001))),B=[];for(let H=0;H<T;++H){const z=R+H*A/T,ne=R+(H+1)*A/T;B[H]=[$,O,z,ne,n,i,f,d]}return s3[l]=B}function XX(e){const t=Pk.call(e);if(o3[t])return o3[t];var n=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],u=e[6],l=e[7];const c=l*o,f=-u*a,d=u*o,h=l*a,p=Math.cos(r),g=Math.sin(r),m=Math.cos(s),y=Math.sin(s),b=.5*(s-r),v=Math.sin(b*.5),x=8/3*v*v/Math.sin(b),_=n+p-x*g,E=i+g+x*p,w=n+m,C=i+y,k=w+x*y,S=C-x*m;return o3[t]=[c*_+f*E,d*_+h*E,c*k+f*S,d*k+h*S,c*w+f*C,d*w+h*C]}const Gi=["l",0,0,0,0,0,0,0];function KX(e,t,n){const i=Gi[0]=e[0];if(i==="a"||i==="A")Gi[1]=t*e[1],Gi[2]=n*e[2],Gi[3]=e[3],Gi[4]=e[4],Gi[5]=e[5],Gi[6]=t*e[6],Gi[7]=n*e[7];else if(i==="h"||i==="H")Gi[1]=t*e[1];else if(i==="v"||i==="V")Gi[1]=n*e[1];else for(var r=1,s=e.length;r<s;++r)Gi[r]=(r%2==1?t:n)*e[r];return Gi}function Tf(e,t,n,i,r,s){var o,a=null,u=0,l=0,c=0,f=0,d,h,p,g,m=0,y=0;n==null&&(n=0),i==null&&(i=0),r==null&&(r=1),s==null&&(s=r),e.beginPath&&e.beginPath();for(var b=0,v=t.length;b<v;++b){switch(o=t[b],(r!==1||s!==1)&&(o=KX(o,r,s)),o[0]){case"l":u+=o[1],l+=o[2],e.lineTo(u+n,l+i);break;case"L":u=o[1],l=o[2],e.lineTo(u+n,l+i);break;case"h":u+=o[1],e.lineTo(u+n,l+i);break;case"H":u=o[1],e.lineTo(u+n,l+i);break;case"v":l+=o[1],e.lineTo(u+n,l+i);break;case"V":l=o[1],e.lineTo(u+n,l+i);break;case"m":u+=o[1],l+=o[2],m=u,y=l,e.moveTo(u+n,l+i);break;case"M":u=o[1],l=o[2],m=u,y=l,e.moveTo(u+n,l+i);break;case"c":d=u+o[5],h=l+o[6],c=u+o[3],f=l+o[4],e.bezierCurveTo(u+o[1]+n,l+o[2]+i,c+n,f+i,d+n,h+i),u=d,l=h;break;case"C":u=o[5],l=o[6],c=o[3],f=o[4],e.bezierCurveTo(o[1]+n,o[2]+i,c+n,f+i,u+n,l+i);break;case"s":d=u+o[3],h=l+o[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+i,u+o[1]+n,l+o[2]+i,d+n,h+i),c=u+o[1],f=l+o[2],u=d,l=h;break;case"S":d=o[3],h=o[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+i,o[1]+n,o[2]+i,d+n,h+i),u=d,l=h,c=o[1],f=o[2];break;case"q":d=u+o[3],h=l+o[4],c=u+o[1],f=l+o[2],e.quadraticCurveTo(c+n,f+i,d+n,h+i),u=d,l=h;break;case"Q":d=o[3],h=o[4],e.quadraticCurveTo(o[1]+n,o[2]+i,d+n,h+i),u=d,l=h,c=o[1],f=o[2];break;case"t":d=u+o[1],h=l+o[2],a[0].match(/[QqTt]/)===null?(c=u,f=l):a[0]==="t"?(c=2*u-p,f=2*l-g):a[0]==="q"&&(c=2*u-c,f=2*l-f),p=c,g=f,e.quadraticCurveTo(c+n,f+i,d+n,h+i),u=d,l=h,c=u+o[1],f=l+o[2];break;case"T":d=o[1],h=o[2],c=2*u-c,f=2*l-f,e.quadraticCurveTo(c+n,f+i,d+n,h+i),u=d,l=h;break;case"a":zk(e,u+n,l+i,[o[1],o[2],o[3],o[4],o[5],o[6]+u+n,o[7]+l+i]),u+=o[6],l+=o[7];break;case"A":zk(e,u+n,l+i,[o[1],o[2],o[3],o[4],o[5],o[6]+n,o[7]+i]),u=o[6],l=o[7];break;case"z":case"Z":u=m,l=y,e.closePath();break}a=o}}function zk(e,t,n,i){const r=YX(i[5],i[6],i[0],i[1],i[3],i[4],i[2],t,n);for(let s=0;s<r.length;++s){const o=XX(r[s]);e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5])}}const Bk=.5773502691896257,Uk={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,ts)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,i=n/2.5;e.moveTo(-n,-i),e.lineTo(-n,i),e.lineTo(-i,i),e.lineTo(-i,n),e.lineTo(i,n),e.lineTo(i,i),e.lineTo(n,i),e.lineTo(n,-i),e.lineTo(i,-i),e.lineTo(i,-n),e.lineTo(-i,-n),e.lineTo(-i,-i),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),i=-n/2;e.rect(i,i,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,i=n/7,r=n/2.5,s=n/8;e.moveTo(-i,n),e.lineTo(i,n),e.lineTo(i,-s),e.lineTo(r,-s),e.lineTo(0,-n),e.lineTo(-r,-s),e.lineTo(-i,-s),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,i=Ml*n,r=i-n*Bk,s=n/4;e.moveTo(0,-i-r),e.lineTo(-s,i-r),e.lineTo(s,i-r),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,i=Ml*n,r=i-n*Bk;e.moveTo(0,-i-r),e.lineTo(-n,i-r),e.lineTo(n,i-r),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,i=Ml*n;e.moveTo(0,-i),e.lineTo(-n,i),e.lineTo(n,i),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,i=Ml*n;e.moveTo(0,i),e.lineTo(-n,-i),e.lineTo(n,-i),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,i=Ml*n;e.moveTo(i,0),e.lineTo(-i,-n),e.lineTo(-i,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,i=Ml*n;e.moveTo(-i,0),e.lineTo(i,-n),e.lineTo(i,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function jk(e){return ue(Uk,e)?Uk[e]:ZX(e)}var a3={};function ZX(e){if(!ue(a3,e)){const t=Tl(e);a3[e]={draw:function(n,i){Tf(n,t,0,0,Math.sqrt(i)/2)}}}return a3[e]}const zo=.448084975506;function JX(e){return e.x}function QX(e){return e.y}function eK(e){return e.width}function tK(e){return e.height}function zs(e){return typeof e=="function"?e:()=>+e}function sp(e,t,n){return Math.max(t,Math.min(e,n))}function qk(){var e=JX,t=QX,n=eK,i=tK,r=zs(0),s=r,o=r,a=r,u=null;function l(c,f,d){var h,p=f??+e.call(this,c),g=d??+t.call(this,c),m=+n.call(this,c),y=+i.call(this,c),b=Math.min(m,y)/2,v=sp(+r.call(this,c),0,b),x=sp(+s.call(this,c),0,b),_=sp(+o.call(this,c),0,b),E=sp(+a.call(this,c),0,b);if(u||(u=h=D0()),v<=0&&x<=0&&_<=0&&E<=0)u.rect(p,g,m,y);else{var w=p+m,C=g+y;u.moveTo(p+v,g),u.lineTo(w-x,g),u.bezierCurveTo(w-zo*x,g,w,g+zo*x,w,g+x),u.lineTo(w,C-E),u.bezierCurveTo(w,C-zo*E,w-zo*E,C,w-E,C),u.lineTo(p+_,C),u.bezierCurveTo(p+zo*_,C,p,C-zo*_,p,C-_),u.lineTo(p,g+v),u.bezierCurveTo(p,g+zo*v,p+zo*v,g,p+v,g),u.closePath()}if(h)return u=null,h+""||null}return l.x=function(c){return arguments.length?(e=zs(c),l):e},l.y=function(c){return arguments.length?(t=zs(c),l):t},l.width=function(c){return arguments.length?(n=zs(c),l):n},l.height=function(c){return arguments.length?(i=zs(c),l):i},l.cornerRadius=function(c,f,d,h){return arguments.length?(r=zs(c),s=f!=null?zs(f):r,a=d!=null?zs(d):r,o=h!=null?zs(h):s,l):r},l.context=function(c){return arguments.length?(u=c??null,l):u},l}function Wk(){var e,t,n,i,r=null,s,o,a,u;function l(f,d,h){const p=h/2;if(s){var g=a-d,m=f-o;if(g||m){var y=Math.hypot(g,m),b=(g/=y)*u,v=(m/=y)*u,x=Math.atan2(m,g);r.moveTo(o-b,a-v),r.lineTo(f-g*p,d-m*p),r.arc(f,d,p,x-Math.PI,x),r.lineTo(o+b,a+v),r.arc(o,a,u,x,x+Math.PI)}else r.arc(f,d,p,0,ts);r.closePath()}else s=1;o=f,a=d,u=p}function c(f){var d,h=f.length,p,g=!1,m;for(r==null&&(r=m=D0()),d=0;d<=h;++d)!(d<h&&i(p=f[d],d,f))===g&&(g=!g)&&(s=0),g&&l(+e(p,d,f),+t(p,d,f),+n(p,d,f));if(m)return r=null,m+""||null}return c.x=function(f){return arguments.length?(e=f,c):e},c.y=function(f){return arguments.length?(t=f,c):t},c.size=function(f){return arguments.length?(n=f,c):n},c.defined=function(f){return arguments.length?(i=f,c):i},c.context=function(f){return arguments.length?(f==null?r=null:r=f,c):r},c}function Mf(e,t){return e??t}const Nf=e=>e.x||0,Rf=e=>e.y||0,nK=e=>e.width||0,iK=e=>e.height||0,rK=e=>(e.x||0)+(e.width||0),sK=e=>(e.y||0)+(e.height||0),oK=e=>e.startAngle||0,aK=e=>e.endAngle||0,uK=e=>e.padAngle||0,lK=e=>e.innerRadius||0,cK=e=>e.outerRadius||0,fK=e=>e.cornerRadius||0,dK=e=>Mf(e.cornerRadiusTopLeft,e.cornerRadius)||0,hK=e=>Mf(e.cornerRadiusTopRight,e.cornerRadius)||0,pK=e=>Mf(e.cornerRadiusBottomRight,e.cornerRadius)||0,gK=e=>Mf(e.cornerRadiusBottomLeft,e.cornerRadius)||0,mK=e=>Mf(e.size,64),yK=e=>e.size||1,op=e=>e.defined!==!1,bK=e=>jk(e.shape||"circle"),vK=MV().startAngle(oK).endAngle(aK).padAngle(uK).innerRadius(lK).outerRadius(cK).cornerRadius(fK),xK=j9().x(Nf).y1(Rf).y0(sK).defined(op),_K=j9().y(Rf).x1(Nf).x0(rK).defined(op),wK=U9().x(Nf).y(Rf).defined(op),EK=qk().x(Nf).y(Rf).width(nK).height(iK).cornerRadius(dK,hK,pK,gK),CK=RV().type(bK).size(mK),kK=Wk().x(Nf).y(Rf).defined(op).size(yK);function u3(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function AK(e,t){return vK.context(e)(t)}function $K(e,t){const n=t[0],i=n.interpolate||"linear";return(n.orient==="horizontal"?_K:xK).curve(r3(i,n.orient,n.tension)).context(e)(t)}function SK(e,t){const n=t[0],i=n.interpolate||"linear";return wK.curve(r3(i,n.orient,n.tension)).context(e)(t)}function Nl(e,t,n,i){return EK.context(e)(t,n,i)}function FK(e,t){return(t.mark.shape||t.shape).context(e)(t)}function DK(e,t){return CK.context(e)(t)}function TK(e,t){return kK.context(e)(t)}var Hk=1;function Gk(){Hk=1}function l3(e,t,n){var i=t.clip,r=e._defs,s=t.clip_id||(t.clip_id="clip"+Hk++),o=r.clipping[s]||(r.clipping[s]={id:s});return Ie(i)?o.path=i(null):u3(n)?o.path=Nl(null,n,0,0):(o.width=n.width||0,o.height=n.height||0),"url(#"+s+")"}function Ut(e){this.clear(),e&&this.union(e)}Ut.prototype={clone(){return new Ut(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,i){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),i<t?(this.y2=t,this.y1=i):(this.y1=t,this.y2=i),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const i=this.rotatedPoints(e,t,n);return this.clear().add(i[0],i[1]).add(i[2],i[3]).add(i[4],i[5]).add(i[6],i[7])},rotatedPoints(e,t,n){var{x1:i,y1:r,x2:s,y2:o}=this,a=Math.cos(e),u=Math.sin(e),l=t-t*a+n*u,c=n-t*u-n*a;return[a*i-u*r+l,u*i+a*r+c,a*i-u*o+l,u*i+a*o+c,a*s-u*r+l,u*s+a*r+c,a*s-u*o+l,u*s+a*o+c]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function ap(e){this.mark=e,this.bounds=this.bounds||new Ut}function up(e){ap.call(this,e),this.items=this.items||[]}ee(up,ap);class Vk{constructor(t){this._pending=0,this._loader=t||d0()}pending(){return this._pending}sanitizeURL(t){const n=this;return Yk(n),n._loader.sanitize(t,{context:"href"}).then(i=>(Of(n),i)).catch(()=>(Of(n),null))}loadImage(t){const n=this,i=JV();return Yk(n),n._loader.sanitize(t,{context:"image"}).then(r=>{const s=r.href;if(!s||!i)throw{url:s};const o=new i,a=ue(r,"crossOrigin")?r.crossOrigin:"anonymous";return a!=null&&(o.crossOrigin=a),o.onload=()=>Of(n),o.onerror=()=>Of(n),o.src=s,o}).catch(r=>(Of(n),{complete:!1,width:0,height:0,src:r&&r.url||""}))}ready(){const t=this;return new Promise(n=>{function i(r){t.pending()?setTimeout(()=>{i(!0)},10):n(r)}i(!1)})}}function Yk(e){e._pending+=1}function Of(e){e._pending-=1}function Bs(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const i=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(i+(n?MK(t,i):0))}return e}function MK(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}const NK=ts-1e-8;let lp,cp,fp,Wa,c3,dp,f3,d3;const Bo=(e,t)=>lp.add(e,t),hp=(e,t)=>Bo(cp=e,fp=t),Xk=e=>Bo(e,lp.y1),Kk=e=>Bo(lp.x1,e),Ha=(e,t)=>c3*e+f3*t,Ga=(e,t)=>dp*e+d3*t,h3=(e,t)=>Bo(Ha(e,t),Ga(e,t)),p3=(e,t)=>hp(Ha(e,t),Ga(e,t));function Lf(e,t){return lp=e,t?(Wa=t*Po,c3=d3=Math.cos(Wa),dp=Math.sin(Wa),f3=-dp):(c3=d3=1,Wa=dp=f3=0),RK}const RK={beginPath(){},closePath(){},moveTo:p3,lineTo:p3,rect(e,t,n,i){Wa?(h3(e+n,t),h3(e+n,t+i),h3(e,t+i),p3(e,t)):(Bo(e+n,t+i),hp(e,t))},quadraticCurveTo(e,t,n,i){const r=Ha(e,t),s=Ga(e,t),o=Ha(n,i),a=Ga(n,i);Zk(cp,r,o,Xk),Zk(fp,s,a,Kk),hp(o,a)},bezierCurveTo(e,t,n,i,r,s){const o=Ha(e,t),a=Ga(e,t),u=Ha(n,i),l=Ga(n,i),c=Ha(r,s),f=Ga(r,s);Jk(cp,o,u,c,Xk),Jk(fp,a,l,f,Kk),hp(c,f)},arc(e,t,n,i,r,s){if(i+=Wa,r+=Wa,cp=n*Math.cos(r)+e,fp=n*Math.sin(r)+t,Math.abs(r-i)>NK)Bo(e-n,t-n),Bo(e+n,t+n);else{const o=l=>Bo(n*Math.cos(l)+e,n*Math.sin(l)+t);let a,u;if(o(i),o(r),r!==i)if(i=i%ts,i<0&&(i+=ts),r=r%ts,r<0&&(r+=ts),r<i&&(s=!s,a=i,i=r,r=a),s)for(r-=ts,a=i-i%qa,u=0;u<4&&a>r;++u,a-=qa)o(a);else for(a=i-i%qa+qa,u=0;u<4&&a<r;++u,a=a+qa)o(a)}}};function Zk(e,t,n,i){const r=(e-t)/(e+n-2*t);0<r&&r<1&&i(e+(t-e)*r)}function Jk(e,t,n,i,r){const s=i-e+3*t-3*n,o=e+n-2*t,a=e-t;let u=0,l=0,c;Math.abs(s)>VX?(c=o*o+a*s,c>=0&&(c=Math.sqrt(c),u=(-o+c)/s,l=(-o-c)/s)):u=.5*a/o,0<u&&u<1&&r(Qk(u,e,t,n,i)),0<l&&l<1&&r(Qk(l,e,t,n,i))}function Qk(e,t,n,i,r){const s=1-e,o=s*s,a=e*e;return o*s*t+3*o*e*n+3*s*a*i+a*e*r}var Uo=(Uo=Mo(1,1))?Uo.getContext("2d"):null;const g3=new Ut;function m3(e){return function(t,n){if(!Uo)return!0;e(Uo,t),g3.clear().union(t.bounds).intersect(n).round();const{x1:i,y1:r,x2:s,y2:o}=g3;for(let a=r;a<=o;++a)for(let u=i;u<=s;++u)if(Uo.isPointInPath(u,a))return!0;return!1}}function y3(e,t){return t.contains(e.x||0,e.y||0)}function eA(e,t){const n=e.x||0,i=e.y||0,r=e.width||0,s=e.height||0;return t.intersects(g3.set(n,i,n+r,i+s))}function tA(e,t){const n=e.x||0,i=e.y||0,r=e.x2!=null?e.x2:n,s=e.y2!=null?e.y2:i;return Rl(t,n,i,r,s)}function Rl(e,t,n,i,r){const{x1:s,y1:o,x2:a,y2:u}=e,l=i-t,c=r-n;let f=0,d=1,h,p,g,m;for(m=0;m<4;++m){if(m===0&&(h=-l,p=-(s-t)),m===1&&(h=l,p=a-t),m===2&&(h=-c,p=-(o-n)),m===3&&(h=c,p=u-n),Math.abs(h)<1e-10&&p<0)return!1;if(g=p/h,h<0){if(g>d)return!1;g>f&&(f=g)}else if(h>0){if(g<f)return!1;g<d&&(d=g)}}return!0}function Ol(e,t){e.globalCompositeOperation=t.blend||"source-over"}function hr(e,t){return e??t}function nA(e,t){const n=t.length;for(let i=0;i<n;++i)e.addColorStop(t[i].offset,t[i].color);return e}function OK(e,t,n){const i=n.width(),r=n.height();let s;if(t.gradient==="radial")s=e.createRadialGradient(n.x1+hr(t.x1,.5)*i,n.y1+hr(t.y1,.5)*r,Math.max(i,r)*hr(t.r1,0),n.x1+hr(t.x2,.5)*i,n.y1+hr(t.y2,.5)*r,Math.max(i,r)*hr(t.r2,.5));else{const o=hr(t.x1,0),a=hr(t.y1,0),u=hr(t.x2,1),l=hr(t.y2,0);if(o===u||a===l||i===r)s=e.createLinearGradient(n.x1+o*i,n.y1+a*r,n.x1+u*i,n.y1+l*r);else{const c=Mo(Math.ceil(i),Math.ceil(r)),f=c.getContext("2d");return f.scale(i,r),f.fillStyle=nA(f.createLinearGradient(o,a,u,l),t.stops),f.fillRect(0,0,i,r),e.createPattern(c,"no-repeat")}}return nA(s,t.stops)}function iA(e,t,n){return i3(n)?OK(e,n,t.bounds):n}function pp(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=iA(e,t,t.fill),!0):!1}var LK=[];function Ll(e,t,n){var i=(i=t.strokeWidth)!=null?i:1;return i<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=iA(e,t,t.stroke),e.lineWidth=i,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||LK),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function IK(e,t){return e.zindex-t.zindex||e.index-t.index}function b3(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],i,r,s;for(r=0,s=t.length;r<s;++r)i=t[r],i.index=r,i.zindex&&n.push(i);return e.zdirty=!1,e.zitems=n.sort(IK)}function pr(e,t){var n=e.items,i,r;if(!n||!n.length)return;const s=b3(e);if(s&&s.length){for(i=0,r=n.length;i<r;++i)n[i].zindex||t(n[i]);n=s}for(i=0,r=n.length;i<r;++i)t(n[i])}function gp(e,t){var n=e.items,i,r;if(!n||!n.length)return null;const s=b3(e);for(s&&s.length&&(n=s),r=n.length;--r>=0;)if(i=t(n[r]))return i;if(n===s){for(n=e.items,r=n.length;--r>=0;)if(!n[r].zindex&&(i=t(n[r])))return i}return null}function v3(e){return function(t,n,i){pr(n,r=>{(!i||i.intersects(r.bounds))&&rA(e,t,r,r)})}}function PK(e){return function(t,n,i){n.items.length&&(!i||i.intersects(n.bounds))&&rA(e,t,n.items[0],n.items)}}function rA(e,t,n,i){var r=n.opacity==null?1:n.opacity;r!==0&&(e(t,i)||(Ol(t,n),n.fill&&pp(t,n,r)&&t.fill(),n.stroke&&Ll(t,n,r)&&t.stroke()))}function mp(e){return e=e||Ui,function(t,n,i,r,s,o){return i*=t.pixelRatio,r*=t.pixelRatio,gp(n,a=>{const u=a.bounds;if(!(u&&!u.contains(s,o)||!u)&&e(t,a,i,r,s,o))return a})}}function If(e,t){return function(n,i,r,s){var o=Array.isArray(i)?i[0]:i,a=t??o.fill,u=o.stroke&&n.isPointInStroke,l,c;return u&&(l=o.strokeWidth,c=o.strokeCap,n.lineWidth=l??1,n.lineCap=c??"butt"),e(n,i)?!1:a&&n.isPointInPath(r,s)||u&&n.isPointInStroke(r,s)}}function x3(e){return mp(If(e))}function Va(e,t){return"translate("+e+","+t+")"}function _3(e){return"rotate("+e+")"}function zK(e,t){return"scale("+e+","+t+")"}function sA(e){return Va(e.x||0,e.y||0)}function BK(e){return Va(e.x||0,e.y||0)+(e.angle?" "+_3(e.angle):"")}function UK(e){return Va(e.x||0,e.y||0)+(e.angle?" "+_3(e.angle):"")+(e.scaleX||e.scaleY?" "+zK(e.scaleX||1,e.scaleY||1):"")}function w3(e,t,n){function i(o,a){o("transform",BK(a)),o("d",t(null,a))}function r(o,a){return t(Lf(o,a.angle),a),Bs(o,a).translate(a.x||0,a.y||0)}function s(o,a){var u=a.x||0,l=a.y||0,c=a.angle||0;o.translate(u,l),c&&o.rotate(c*=Po),o.beginPath(),t(o,a),c&&o.rotate(-c),o.translate(-u,-l)}return{type:e,tag:"path",nested:!1,attr:i,bound:r,draw:v3(s),pick:x3(s),isect:n||m3(s)}}var jK=w3("arc",AK);function qK(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],i=e[0].orient==="horizontal"?"y":"x",r=e.length,s=1/0,o,a;--r>=0;)e[r].defined!==!1&&(a=Math.abs(e[r][i]-n),a<s&&(s=a,o=e[r]));return o}function WK(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),i=e.length,r,s,o;--i>=0;)if(e[i].defined!==!1&&(r=e[i].x-t[0],s=e[i].y-t[1],o=r*r+s*s,o<n))return e[i];return null}function HK(e,t){for(var n=e.length,i,r,s;--n>=0;)if(e[n].defined!==!1&&(i=e[n].x-t[0],r=e[n].y-t[1],s=i*i+r*r,i=e[n].size||1,s<i*i))return e[n];return null}function E3(e,t,n){function i(u,l){var c=l.mark.items;c.length&&u("d",t(null,c))}function r(u,l){var c=l.items;return c.length===0?u:(t(Lf(u),c),Bs(u,c[0]))}function s(u,l){u.beginPath(),t(u,l)}const o=If(s);function a(u,l,c,f,d,h){var p=l.items,g=l.bounds;return!p||!p.length||g&&!g.contains(d,h)?null:(c*=u.pixelRatio,f*=u.pixelRatio,o(u,p,c,f)?p[0]:null)}return{type:e,tag:"path",nested:!0,attr:i,bound:r,draw:PK(s),pick:a,isect:y3,tip:n}}var GK=E3("area",$K,qK);function VK(e,t){var n=t.clip;e.save(),Ie(n)?(e.beginPath(),n(e),e.clip()):oA(e,t.group)}function oA(e,t){e.beginPath(),u3(t)?Nl(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function aA(e){const t=hr(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function YK(e,t){e("transform",sA(t))}function uA(e,t){const n=aA(t);e("d",Nl(null,t,n,n))}function XK(e,t){e("class","background"),e("aria-hidden",!0),uA(e,t)}function KK(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?uA(e,t):e("d","")}function ZK(e,t,n){const i=t.clip?l3(n,t,t):null;e("clip-path",i)}function JK(e,t){if(!t.clip&&t.items){const n=t.items,i=n.length;for(let r=0;r<i;++r)e.union(n[r].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),Bs(e,t),e.translate(t.x||0,t.y||0)}function Pf(e,t,n,i){const r=aA(t);e.beginPath(),Nl(e,t,(n||0)+r,(i||0)+r)}const QK=If(Pf),eZ=If(Pf,!1),tZ=If(Pf,!0);function nZ(e,t,n,i){pr(t,r=>{const s=r.x||0,o=r.y||0,a=r.strokeForeground,u=r.opacity==null?1:r.opacity;(r.stroke||r.fill)&&u&&(Pf(e,r,s,o),Ol(e,r),r.fill&&pp(e,r,u)&&e.fill(),r.stroke&&!a&&Ll(e,r,u)&&e.stroke()),e.save(),e.translate(s,o),r.clip&&oA(e,r),n&&n.translate(-s,-o),pr(r,l=>{(l.marktype==="group"||i==null||i.includes(l.marktype))&&this.draw(e,l,n,i)}),n&&n.translate(s,o),e.restore(),a&&r.stroke&&u&&(Pf(e,r,s,o),Ol(e,r),Ll(e,r,u)&&e.stroke())})}function iZ(e,t,n,i,r,s){if(t.bounds&&!t.bounds.contains(r,s)||!t.items)return null;const o=n*e.pixelRatio,a=i*e.pixelRatio;return gp(t,u=>{let l,c,f;const d=u.bounds;if(d&&!d.contains(r,s))return;c=u.x||0,f=u.y||0;const h=c+(u.width||0),p=f+(u.height||0),g=u.clip;if(g&&(r<c||r>h||s<f||s>p))return;if(e.save(),e.translate(c,f),c=r-c,f=s-f,g&&u3(u)&&!tZ(e,u,o,a))return e.restore(),null;const m=u.strokeForeground,y=t.interactive!==!1;return y&&m&&u.stroke&&eZ(e,u,o,a)?(e.restore(),u):(l=gp(u,b=>rZ(b,c,f)?this.pick(b,n,i,c,f):null),!l&&y&&(u.fill||!m&&u.stroke)&&QK(e,u,o,a)&&(l=u),e.restore(),l||null)})}function rZ(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var sZ={type:"group",tag:"g",nested:!1,attr:YK,bound:JK,draw:nZ,pick:iZ,isect:eA,content:ZK,background:XK,foreground:KK},zf={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function C3(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(i=>{e.image=i,e.image.url=e.url})),n}function k3(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function A3(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function yp(e,t){return e==="center"?t/2:e==="right"?t:0}function bp(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function oZ(e,t,n){const i=C3(t,n),r=k3(t,i),s=A3(t,i),o=(t.x||0)-yp(t.align,r),a=(t.y||0)-bp(t.baseline,s),u=!i.src&&i.toDataURL?i.toDataURL():i.src||"";e("href",u,zf["xmlns:xlink"],"xlink:href"),e("transform",Va(o,a)),e("width",r),e("height",s),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function aZ(e,t){const n=t.image,i=k3(t,n),r=A3(t,n),s=(t.x||0)-yp(t.align,i),o=(t.y||0)-bp(t.baseline,r);return e.set(s,o,s+i,o+r)}function uZ(e,t,n){pr(t,i=>{if(n&&!n.intersects(i.bounds))return;const r=C3(i,this);let s=k3(i,r),o=A3(i,r);if(s===0||o===0)return;let a=(i.x||0)-yp(i.align,s),u=(i.y||0)-bp(i.baseline,o),l,c,f,d;i.aspect!==!1&&(c=r.width/r.height,f=i.width/i.height,c===c&&f===f&&c!==f&&(f<c?(d=s/c,u+=(o-d)/2,o=d):(d=o*c,a+=(s-d)/2,s=d))),(r.complete||r.toDataURL)&&(Ol(e,i),e.globalAlpha=(l=i.opacity)!=null?l:1,e.imageSmoothingEnabled=i.smooth!==!1,e.drawImage(r,a,u,s,o))})}var lZ={type:"image",tag:"image",nested:!1,attr:oZ,bound:aZ,draw:uZ,pick:mp(),isect:Ui,get:C3,xOffset:yp,yOffset:bp},cZ=E3("line",SK,WK);function fZ(e,t){var n=t.scaleX||1,i=t.scaleY||1;(n!==1||i!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",UK(t)),e("d",t.path)}function vp(e,t){var n=t.path;if(n==null)return!0;var i=t.x||0,r=t.y||0,s=t.scaleX||1,o=t.scaleY||1,a=(t.angle||0)*Po,u=t.pathCache;(!u||u.path!==n)&&((t.pathCache=u=Tl(n)).path=n),a&&e.rotate&&e.translate?(e.translate(i,r),e.rotate(a),Tf(e,u,0,0,s,o),e.rotate(-a),e.translate(-i,-r)):Tf(e,u,i,r,s,o)}function dZ(e,t){return vp(Lf(e,t.angle),t)?e.set(0,0,0,0):Bs(e,t,!0)}var hZ={type:"path",tag:"path",nested:!1,attr:fZ,bound:dZ,draw:v3(vp),pick:x3(vp),isect:m3(vp)};function pZ(e,t){e("d",Nl(null,t))}function gZ(e,t){var n,i;return Bs(e.set(n=t.x||0,i=t.y||0,n+t.width||0,i+t.height||0),t)}function lA(e,t){e.beginPath(),Nl(e,t)}var mZ={type:"rect",tag:"path",nested:!1,attr:pZ,bound:gZ,draw:v3(lA),pick:x3(lA),isect:eA};function yZ(e,t){e("transform",sA(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function bZ(e,t){var n,i;return Bs(e.set(n=t.x||0,i=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:i),t)}function cA(e,t,n){var i,r,s,o;return t.stroke&&Ll(e,t,n)?(i=t.x||0,r=t.y||0,s=t.x2!=null?t.x2:i,o=t.y2!=null?t.y2:r,e.beginPath(),e.moveTo(i,r),e.lineTo(s,o),!0):!1}function vZ(e,t,n){pr(t,i=>{if(!(n&&!n.intersects(i.bounds))){var r=i.opacity==null?1:i.opacity;r&&cA(e,i,r)&&(Ol(e,i),e.stroke())}})}function xZ(e,t,n,i){return e.isPointInStroke?cA(e,t,1)&&e.isPointInStroke(n,i):!1}var _Z={type:"rule",tag:"line",nested:!1,attr:yZ,bound:bZ,draw:vZ,pick:mp(xZ),isect:tA},wZ=w3("shape",FK),EZ=w3("symbol",DK,y3);const fA=X4();var Ai={height:ns,measureWidth:$3,estimateWidth:xp,width:xp,canvas:dA};dA(!0);function dA(e){Ai.width=e&&Uo?$3:xp}function xp(e,t){return hA(qo(e,t),ns(e))}function hA(e,t){return~~(.8*e.length*t)}function $3(e,t){return ns(e)<=0||!(t=qo(e,t))?0:pA(t,_p(e))}function pA(e,t){const n=`(${t}) ${e}`;let i=fA.get(n);return i===void 0&&(Uo.font=t,i=Uo.measureText(e).width,fA.set(n,i)),i}function ns(e){return e.fontSize!=null?+e.fontSize||0:11}function jo(e){return e.lineHeight!=null?e.lineHeight:ns(e)+2}function CZ(e){return W(e)?e.length>1?e:e[0]:e}function Bf(e){return CZ(e.lineBreak&&e.text&&!W(e.text)?e.text.split(e.lineBreak):e.text)}function S3(e){const t=Bf(e);return(W(t)?t.length-1:0)*jo(e)}function qo(e,t){const n=t==null?"":(t+"").trim();return e.limit>0&&n.length?AZ(e,n):n}function kZ(e){if(Ai.width===$3){const t=_p(e);return n=>pA(n,t)}else if(Ai.width===xp){const t=ns(e);return n=>hA(n,t)}else return t=>Ai.width(e,t)}function AZ(e,t){var n=+e.limit,i=kZ(e);if(i(t)<n)return t;var r=e.ellipsis||"",s=e.dir==="rtl",o=0,a=t.length,u;if(n-=i(r),s){for(;o<a;)u=o+a>>>1,i(t.slice(u))>n?o=u+1:a=u;return r+t.slice(o)}else{for(;o<a;)u=1+(o+a>>>1),i(t.slice(0,u))<n?o=u:a=u-1;return t.slice(0,o)+r}}function Uf(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function _p(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+ns(e)+"px "+Uf(e,t)}function F3(e){var t=e.baseline,n=ns(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*jo(e):t==="line-bottom"?.29*n-.5*jo(e):0)}const $Z={left:"start",center:"middle",right:"end"},jf=new Ut;function wp(e){var t=e.x||0,n=e.y||0,i=e.radius||0,r;return i&&(r=(e.theta||0)-qa,t+=i*Math.cos(r),n+=i*Math.sin(r)),jf.x1=t,jf.y1=n,jf}function SZ(e,t){var n=t.dx||0,i=(t.dy||0)+F3(t),r=wp(t),s=r.x1,o=r.y1,a=t.angle||0,u;e("text-anchor",$Z[t.align]||"start"),a?(u=Va(s,o)+" "+_3(a),(n||i)&&(u+=" "+Va(n,i))):u=Va(s+n,o+i),e("transform",u)}function D3(e,t,n){var i=Ai.height(t),r=t.align,s=wp(t),o=s.x1,a=s.y1,u=t.dx||0,l=(t.dy||0)+F3(t)-Math.round(.8*i),c=Bf(t),f;if(W(c)?(i+=jo(t)*(c.length-1),f=c.reduce((d,h)=>Math.max(d,Ai.width(t,h)),0)):f=Ai.width(t,c),r==="center"?u-=f/2:r==="right"&&(u-=f),e.set(u+=o,l+=a,u+f,l+i),t.angle&&!n)e.rotate(t.angle*Po,o,a);else if(n===2)return e.rotatedPoints(t.angle*Po,o,a);return e}function FZ(e,t,n){pr(t,i=>{var r=i.opacity==null?1:i.opacity,s,o,a,u,l,c,f;if(!(n&&!n.intersects(i.bounds)||r===0||i.fontSize<=0||i.text==null||i.text.length===0)){if(e.font=_p(i),e.textAlign=i.align||"left",s=wp(i),o=s.x1,a=s.y1,i.angle&&(e.save(),e.translate(o,a),e.rotate(i.angle*Po),o=a=0),o+=i.dx||0,a+=(i.dy||0)+F3(i),c=Bf(i),Ol(e,i),W(c))for(l=jo(i),u=0;u<c.length;++u)f=qo(i,c[u]),i.fill&&pp(e,i,r)&&e.fillText(f,o,a),i.stroke&&Ll(e,i,r)&&e.strokeText(f,o,a),a+=l;else f=qo(i,c),i.fill&&pp(e,i,r)&&e.fillText(f,o,a),i.stroke&&Ll(e,i,r)&&e.strokeText(f,o,a);i.angle&&e.restore()}})}function DZ(e,t,n,i,r,s){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var o=wp(t),a=o.x1,u=o.y1,l=D3(jf,t,1),c=-t.angle*Po,f=Math.cos(c),d=Math.sin(c),h=f*r-d*s+(a-f*a+d*u),p=d*r+f*s+(u-d*a-f*u);return l.contains(h,p)}function TZ(e,t){const n=D3(jf,e,2);return Rl(t,n[0],n[1],n[2],n[3])||Rl(t,n[0],n[1],n[4],n[5])||Rl(t,n[4],n[5],n[6],n[7])||Rl(t,n[2],n[3],n[6],n[7])}var MZ={type:"text",tag:"text",nested:!1,attr:SZ,bound:D3,draw:FZ,pick:mp(DZ),isect:TZ},NZ=E3("trail",TK,HK),$i={arc:jK,area:GK,group:sZ,image:lZ,line:cZ,path:hZ,rect:mZ,rule:_Z,shape:wZ,symbol:EZ,text:MZ,trail:NZ};function T3(e,t,n){var i=$i[e.mark.marktype],r=t||i.bound;return i.nested&&(e=e.mark),r(e.bounds||(e.bounds=new Ut),e,n)}var gA={mark:null};function mA(e,t,n){var i=$i[e.marktype],r=i.bound,s=e.items,o=s&&s.length,a,u,l,c;if(i.nested)return o?l=s[0]:(gA.mark=e,l=gA),c=T3(l,r,n),t=t&&t.union(c)||c,t;if(t=t||e.bounds&&e.bounds.clear()||new Ut,o)for(a=0,u=s.length;a<u;++a)t.union(T3(s[a],r,n));return e.bounds=t}const RZ=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function yA(e,t){return JSON.stringify(e,RZ,t)}function bA(e){const t=typeof e=="string"?JSON.parse(e):e;return vA(t)}function vA(e){var t=e.marktype,n=e.items,i,r,s;if(n)for(r=0,s=n.length;r<s;++r)i=t?"mark":"group",n[r][i]=e,n[r].zindex&&(n[r][i].zdirty=!0),(t||i)==="group"&&vA(n[r]);return t&&mA(e),e}class xA{constructor(t){arguments.length?this.root=bA(t):(this.root=_A({marktype:"group",name:"root",role:"frame"}),this.root.items=[new up(this.root)])}toJSON(t){return yA(this.root,t||0)}mark(t,n,i){n=n||this.root.items[0];const r=_A(t,n);return n.items[i]=r,r.zindex&&(r.group.zdirty=!0),r}}function _A(e,t){const n={bounds:new Ut,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function Wo(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function M3(e,t){t=t.toLowerCase();for(var n=e.childNodes,i=0,r=n.length;i<r;++i)if(n[i].tagName.toLowerCase()===t)return n[i]}function Gt(e,t,n,i){var r=e.childNodes[t],s;return(!r||r.tagName.toLowerCase()!==n.toLowerCase())&&(s=r||null,r=Wo(e.ownerDocument,n,i),e.insertBefore(r,s)),r}function Vi(e,t){for(var n=e.childNodes,i=n.length;i>t;)e.removeChild(n[--i]);return e}function wA(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function Ep(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function OZ(e,t,n,i){var r=e&&e.mark,s,o;if(r&&(s=$i[r.marktype]).tip){for(o=Ep(t,n),o[0]-=i[0],o[1]-=i[1];e=e.mark.group;)o[0]-=e.x||0,o[1]-=e.y||0;e=s.tip(r.items,o)}return e}let N3=class{constructor(t,n){this._active=null,this._handlers={},this._loader=t||d0(),this._tooltip=n||LZ}initialize(t,n,i){return this._el=t,this._obj=i||null,this.origin(n)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}origin(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()}scene(t){return arguments.length?(this._scene=t,this):this._scene}on(){}off(){}_handlerIndex(t,n,i){for(let r=t?t.length:0;--r>=0;)if(t[r].type===n&&(!i||t[r].handler===i))return r;return-1}handlers(t){const n=this._handlers,i=[];if(t)i.push(...n[this.eventName(t)]);else for(const r in n)i.push(...n[r]);return i}eventName(t){const n=t.indexOf(".");return n<0?t:t.slice(0,n)}handleHref(t,n,i){this._loader.sanitize(i,{context:"href"}).then(r=>{const s=new MouseEvent(t.type,t),o=Wo(null,"a");for(const a in r)o.setAttribute(a,r[a]);o.dispatchEvent(s)}).catch(()=>{})}handleTooltip(t,n,i){if(n&&n.tooltip!=null){n=OZ(n,t,this.canvas(),this._origin);const r=i&&n&&n.tooltip||null;this._tooltip.call(this._obj,this,t,n,r)}}getItemBoundingClientRect(t){const n=this.canvas();if(!n)return;const i=n.getBoundingClientRect(),r=this._origin,s=t.bounds,o=s.width(),a=s.height();let u=s.x1+r[0]+i.left,l=s.y1+r[1]+i.top;for(;t.mark&&(t=t.mark.group);)u+=t.x||0,l+=t.y||0;return{x:u,y:l,width:o,height:a,left:u,top:l,right:u+o,bottom:l+a}}};function LZ(e,t,n,i){e.element().setAttribute("title",i||"")}class qf{constructor(t){this._el=null,this._bgcolor=null,this._loader=new Vk(t)}initialize(t,n,i,r,s){return this._el=t,this.resize(n,i,r,s)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}background(t){return arguments.length===0?this._bgcolor:(this._bgcolor=t,this)}resize(t,n,i,r){return this._width=t,this._height=n,this._origin=i||[0,0],this._scale=r||1,this}dirty(){}render(t,n){const i=this;return i._call=function(){i._render(t,n)},i._call(),i._call=null,i}_render(){}renderAsync(t,n){const i=this.render(t,n);return this._ready?this._ready.then(()=>i):Promise.resolve(i)}_load(t,n){var i=this,r=i._loader[t](n);if(!i._ready){const s=i._call;i._ready=i._loader.ready().then(o=>{o&&s(),i._ready=null})}return r}sanitizeURL(t){return this._load("sanitizeURL",t)}loadImage(t){return this._load("loadImage",t)}}const IZ="keydown",PZ="keypress",zZ="keyup",EA="dragenter",Cp="dragleave",CA="dragover",R3="pointerdown",BZ="pointerup",kp="pointermove",Ap="pointerout",kA="pointerover",O3="mousedown",UZ="mouseup",AA="mousemove",$p="mouseout",$A="mouseover",Sp="click",jZ="dblclick",qZ="wheel",SA="mousewheel",Fp="touchstart",Dp="touchmove",Tp="touchend",WZ=[IZ,PZ,zZ,EA,Cp,CA,R3,BZ,kp,Ap,kA,O3,UZ,AA,$p,$A,Sp,jZ,qZ,SA,Fp,Dp,Tp],L3=kp,Wf=$p,I3=Sp;class Hf extends N3{constructor(t,n){super(t,n),this._down=null,this._touch=null,this._first=!0,this._events={},this.events=WZ,this.pointermove=DA([kp,AA],[kA,$A],[Ap,$p]),this.dragover=DA([CA],[EA],[Cp]),this.pointerout=TA([Ap,$p]),this.dragleave=TA([Cp])}initialize(t,n,i){return this._canvas=t&&M3(t,"canvas"),[Sp,O3,R3,kp,Ap,Cp].forEach(r=>FA(this,r)),super.initialize(t,n,i)}canvas(){return this._canvas}context(){return this._canvas.getContext("2d")}DOMMouseScroll(t){this.fire(SA,t)}pointerdown(t){this._down=this._active,this.fire(R3,t)}mousedown(t){this._down=this._active,this.fire(O3,t)}click(t){this._down===this._active&&(this.fire(Sp,t),this._down=null)}touchstart(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(Fp,t,!0)}touchmove(t){this.fire(Dp,t,!0)}touchend(t){this.fire(Tp,t,!0),this._touch=null}fire(t,n,i){const r=i?this._touch:this._active,s=this._handlers[t];if(n.vegaType=t,t===I3&&r&&r.href?this.handleHref(n,r,r.href):(t===L3||t===Wf)&&this.handleTooltip(n,r,t!==Wf),s)for(let o=0,a=s.length;o<a;++o)s[o].handler.call(this._obj,n,r)}on(t,n){const i=this.eventName(t),r=this._handlers;return this._handlerIndex(r[i],t,n)<0&&(FA(this,t),(r[i]||(r[i]=[])).push({type:t,handler:n})),this}off(t,n){const i=this.eventName(t),r=this._handlers[i],s=this._handlerIndex(r,t,n);return s>=0&&r.splice(s,1),this}pickEvent(t){const n=Ep(t,this._canvas),i=this._origin;return this.pick(this._scene,n[0],n[1],n[0]-i[0],n[1]-i[1])}pick(t,n,i,r,s){const o=this.context();return $i[t.marktype].pick.call(this,o,t,n,i,r,s)}}const HZ=e=>e===Fp||e===Dp||e===Tp?[Fp,Dp,Tp]:[e];function FA(e,t){HZ(t).forEach(n=>GZ(e,n))}function GZ(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?i=>e[t](i):i=>e.fire(t,i)))}function Gf(e,t,n){t.forEach(i=>e.fire(i,n))}function DA(e,t,n){return function(i){const r=this._active,s=this.pickEvent(i);s===r?Gf(this,e,i):((!r||!r.exit)&&Gf(this,n,i),this._active=s,Gf(this,t,i),Gf(this,e,i))}}function TA(e){return function(t){Gf(this,e,t),this._active=null}}function VZ(){return typeof window<"u"&&window.devicePixelRatio||1}function YZ(e,t,n,i,r,s){const o=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,a=e.getContext("2d"),u=o?VZ():r;e.width=t*u,e.height=n*u;for(const l in s)a[l]=s[l];return o&&u!==1&&(e.style.width=t+"px",e.style.height=n+"px"),a.pixelRatio=u,a.setTransform(u,0,0,u,u*i[0],u*i[1]),e}class Mp extends qf{constructor(t){super(t),this._options={},this._redraw=!1,this._dirty=new Ut,this._tempb=new Ut}initialize(t,n,i,r,s,o){return this._options=o||{},this._canvas=this._options.externalContext?null:Mo(1,1,this._options.type),t&&this._canvas&&(Vi(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),super.initialize(t,n,i,r,s)}resize(t,n,i,r){if(super.resize(t,n,i,r),this._canvas)YZ(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const s=this._options.externalContext;s||q("CanvasRenderer is missing a valid canvas or context"),s.scale(this._scale,this._scale),s.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this}canvas(){return this._canvas}context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)}dirty(t){const n=this._tempb.clear().union(t.bounds);let i=t.mark.group;for(;i;)n.translate(i.x||0,i.y||0),i=i.mark.group;this._dirty.union(n)}_render(t,n){const i=this.context(),r=this._origin,s=this._width,o=this._height,a=this._dirty,u=XZ(r,s,o);i.save();const l=this._redraw||a.empty()?(this._redraw=!1,u.expand(1)):KZ(i,u.intersect(a),r);return this.clear(-r[0],-r[1],s,o),this.draw(i,t,l,n),i.restore(),a.clear(),this}draw(t,n,i,r){if(n.marktype!=="group"&&r!=null&&!r.includes(n.marktype))return;const s=$i[n.marktype];n.clip&&VK(t,n),s.draw.call(this,t,n,i,r),n.clip&&t.restore()}clear(t,n,i,r){const s=this._options,o=this.context();s.type!=="pdf"&&!s.externalContext&&o.clearRect(t,n,i,r),this._bgcolor!=null&&(o.fillStyle=this._bgcolor,o.fillRect(t,n,i,r))}}const XZ=(e,t,n)=>new Ut().set(0,0,t,n).translate(-e[0],-e[1]);function KZ(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}class MA extends N3{constructor(t,n){super(t,n);const i=this;i._hrefHandler=P3(i,(r,s)=>{s&&s.href&&i.handleHref(r,s,s.href)}),i._tooltipHandler=P3(i,(r,s)=>{i.handleTooltip(r,s,r.type!==Wf)})}initialize(t,n,i){let r=this._svg;return r&&(r.removeEventListener(I3,this._hrefHandler),r.removeEventListener(L3,this._tooltipHandler),r.removeEventListener(Wf,this._tooltipHandler)),this._svg=r=t&&M3(t,"svg"),r&&(r.addEventListener(I3,this._hrefHandler),r.addEventListener(L3,this._tooltipHandler),r.addEventListener(Wf,this._tooltipHandler)),super.initialize(t,n,i)}canvas(){return this._svg}on(t,n){const i=this.eventName(t),r=this._handlers;if(this._handlerIndex(r[i],t,n)<0){const o={type:t,handler:n,listener:P3(this,n)};(r[i]||(r[i]=[])).push(o),this._svg&&this._svg.addEventListener(i,o.listener)}return this}off(t,n){const i=this.eventName(t),r=this._handlers[i],s=this._handlerIndex(r,t,n);return s>=0&&(this._svg&&this._svg.removeEventListener(i,r[s].listener),r.splice(s,1)),this}}const P3=(e,t)=>n=>{let i=n.target.__data__;i=Array.isArray(i)?i[0]:i,n.vegaType=n.type,t.call(e._obj,n,i)},NA="aria-hidden",z3="aria-label",B3="role",U3="aria-roledescription",RA="graphics-object",j3="graphics-symbol",OA=(e,t,n)=>({[B3]:e,[U3]:t,[z3]:n||void 0}),ZZ=lr(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),LA={axis:{desc:"axis",caption:eJ},legend:{desc:"legend",caption:tJ},"title-text":{desc:"title",caption:e=>`Title text '${BA(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${BA(e)}'`}},IA={ariaRole:B3,ariaRoleDescription:U3,description:z3};function PA(e,t){const n=t.aria===!1;if(e(NA,n||void 0),n||t.description==null)for(const i in IA)e(IA[i],void 0);else{const i=t.mark.marktype;e(z3,t.description),e(B3,t.ariaRole||(i==="group"?RA:j3)),e(U3,t.ariaRoleDescription||`${i} mark`)}}function zA(e){return e.aria===!1?{[NA]:!0}:ZZ[e.role]?null:LA[e.role]?QZ(e,LA[e.role]):JZ(e)}function JZ(e){const t=e.marktype,n=t==="group"||t==="text"||e.items.some(i=>i.description!=null&&i.aria!==!1);return OA(n?RA:j3,`${t} mark container`,e.description)}function QZ(e,t){try{const n=e.items[0],i=t.caption||(()=>"");return OA(t.role||j3,t.desc,n.description||i(n))}catch{return null}}function BA(e){return oe(e.text).join(" ")}function eJ(e){const t=e.datum,n=e.orient,i=t.title?UA(e):null,r=e.context,s=r.scales[t.scale].value,o=r.dataflow.locale(),a=s.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(i?` titled '${i}'`:"")+` for a ${Dl(a)?"discrete":a} scale with ${Nk(o,s,e)}`}function tJ(e){const t=e.datum,n=t.title?UA(e):null,i=`${t.type||""} legend`.trim(),r=t.scales,s=Object.keys(r),o=e.context,a=o.scales[r[s[0]]].value,u=o.dataflow.locale();return iJ(i)+(n?` titled '${n}'`:"")+` for ${nJ(s)} with ${Nk(u,a,e)}`}function UA(e){try{return oe(Ge(e.items).items[0].text).join(" ")}catch{return null}}function nJ(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+Ge(e)}function iJ(e){return e.length?e[0].toUpperCase()+e.slice(1):e}const jA=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),rJ=e=>jA(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function q3(){let e="",t="",n="";const i=[],r=()=>t=n="",s=u=>{t&&(e+=`${t}>${n}`,r()),i.push(u)},o=(u,l)=>(l!=null&&(t+=` ${u}="${rJ(l)}"`),a),a={open(u){s(u),t="<"+u;for(var l=arguments.length,c=new Array(l>1?l-1:0),f=1;f<l;f++)c[f-1]=arguments[f];for(const d of c)for(const h in d)o(h,d[h]);return a},close(){const u=i.pop();return t?e+=t+(n?`>${n}</${u}>`:"/>"):e+=`</${u}>`,r(),a},attr:o,text:u=>(n+=jA(u),a),toString:()=>e};return a}const qA=e=>WA(q3(),e)+"";function WA(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,i=n.length;for(let r=0;r<i;++r)e.attr(n[r].name,n[r].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const i of n)i.nodeType===3?e.text(i.nodeValue):WA(e,i)}return e.close()}const Np={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},Rp={blend:"mix-blend-mode"},HA={fill:"none","stroke-miterlimit":10},Vf=0,GA="http://www.w3.org/2000/xmlns/",Vt=zf.xmlns;class W3 extends qf{constructor(t){super(t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}initialize(t,n,i,r,s){return this._defs={},this._clearDefs(),t&&(this._svg=Gt(t,0,"svg",Vt),this._svg.setAttributeNS(GA,"xmlns",Vt),this._svg.setAttributeNS(GA,"xmlns:xlink",zf["xmlns:xlink"]),this._svg.setAttribute("version",zf.version),this._svg.setAttribute("class","marks"),Vi(t,1),this._root=Gt(this._svg,Vf,"g",Vt),Ho(this._root,HA),Vi(this._svg,Vf+1)),this.background(this._bgcolor),super.initialize(t,n,i,r,s)}background(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),super.background(...arguments)}resize(t,n,i,r){return super.resize(t,n,i,r),this._svg&&(Ho(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this}canvas(){return this._svg}svg(){const t=this._svg,n=this._bgcolor;if(!t)return null;let i;n&&(t.removeAttribute("style"),i=Gt(t,Vf,"rect",Vt),Ho(i,{width:this._width,height:this._height,fill:n}));const r=qA(t);return n&&(t.removeChild(i),this._svg.style.setProperty("background-color",n)),r}_render(t,n){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t,void 0,n),Vi(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this}dirty(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))}isDirty(t){return this._dirtyAll||!t._svg||!t._svg.ownerSVGElement||t.dirty===this._dirtyID}_dirtyCheck(){this._dirtyAll=!0;const t=this._dirty;if(!t.length||!this._dirtyID)return!0;const n=++this._dirtyID;let i,r,s,o,a,u,l;for(a=0,u=t.length;a<u;++a)if(i=t[a],r=i.mark,r.marktype!==s&&(s=r.marktype,o=$i[s]),r.zdirty&&r.dirty!==n&&(this._dirtyAll=!1,VA(i,n),r.items.forEach(c=>{c.dirty=n})),!r.zdirty){if(i.exit){o.nested&&r.items.length?(l=r.items[0],l._svg&&this._update(o,l._svg,l)):i._svg&&(l=i._svg.parentNode,l&&l.removeChild(i._svg)),i._svg=null;continue}i=o.nested?r.items[0]:i,i._update!==n&&(!i._svg||!i._svg.ownerSVGElement?(this._dirtyAll=!1,VA(i,n)):this._update(o,i._svg,i),i._update=n)}return!this._dirtyAll}mark(t,n,i,r){if(!this.isDirty(n))return n._svg;const s=this._svg,o=n.marktype,a=$i[o],u=n.interactive===!1?"none":null,l=a.tag==="g",c=YA(n,t,i,"g",s);if(o!=="group"&&r!=null&&!r.includes(o))return Vi(c,0),n._svg;c.setAttribute("class",wA(n));const f=zA(n);for(const g in f)Bn(c,g,f[g]);l||Bn(c,"pointer-events",u),Bn(c,"clip-path",n.clip?l3(this,n,n.group):null);let d=null,h=0;const p=g=>{const m=this.isDirty(g),y=YA(g,c,d,a.tag,s);m&&(this._update(a,y,g),l&&aJ(this,y,g,r)),d=y,++h};return a.nested?n.items.length&&p(n.items[0]):pr(n,p),Vi(c,h),c}_update(t,n,i){Us=n,Dn=n.__values__,PA(Yf,i),t.attr(Yf,i,this);const r=lJ[t.type];r&&r.call(this,t,n,i),Us&&this.style(Us,i)}style(t,n){if(n!=null){for(const i in Np){let r=i==="font"?Uf(n):n[i];if(r===Dn[i])continue;const s=Np[i];r==null?t.removeAttribute(s):(i3(r)&&(r=Ok(r,this._defs.gradient,XA())),t.setAttribute(s,r+"")),Dn[i]=r}for(const i in Rp)Op(t,Rp[i],n[i])}}defs(){const t=this._svg,n=this._defs;let i=n.el,r=0;for(const s in n.gradient)i||(n.el=i=Gt(t,Vf+1,"defs",Vt)),r=sJ(i,n.gradient[s],r);for(const s in n.clipping)i||(n.el=i=Gt(t,Vf+1,"defs",Vt)),r=oJ(i,n.clipping[s],r);i&&(r===0?(t.removeChild(i),n.el=null):Vi(i,r))}_clearDefs(){const t=this._defs;t.gradient={},t.clipping={}}}function VA(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function sJ(e,t,n){let i,r,s;if(t.gradient==="radial"){let o=Gt(e,n++,"pattern",Vt);Ho(o,{id:rp+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),o=Gt(o,0,"rect",Vt),Ho(o,{width:1,height:1,fill:`url(${XA()}#${t.id})`}),e=Gt(e,n++,"radialGradient",Vt),Ho(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=Gt(e,n++,"linearGradient",Vt),Ho(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(i=0,r=t.stops.length;i<r;++i)s=Gt(e,i,"stop",Vt),s.setAttribute("offset",t.stops[i].offset),s.setAttribute("stop-color",t.stops[i].color);return Vi(e,i),n}function oJ(e,t,n){let i;return e=Gt(e,n,"clipPath",Vt),e.setAttribute("id",t.id),t.path?(i=Gt(e,0,"path",Vt),i.setAttribute("d",t.path)):(i=Gt(e,0,"rect",Vt),Ho(i,{x:0,y:0,width:t.width,height:t.height})),Vi(e,1),n+1}function aJ(e,t,n,i){t=t.lastChild.previousSibling;let r,s=0;pr(n,o=>{r=e.mark(t,o,r,i),++s}),Vi(t,1+s)}function YA(e,t,n,i,r){let s=e._svg,o;if(!s&&(o=t.ownerDocument,s=Wo(o,i,Vt),e._svg=s,e.mark&&(s.__data__=e,s.__values__={fill:"default"},i==="g"))){const a=Wo(o,"path",Vt);s.appendChild(a),a.__data__=e;const u=Wo(o,"g",Vt);s.appendChild(u),u.__data__=e;const l=Wo(o,"path",Vt);s.appendChild(l),l.__data__=e,l.__values__={fill:"default"}}return(s.ownerSVGElement!==r||uJ(s,n))&&t.insertBefore(s,n?n.nextSibling:t.firstChild),s}function uJ(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}let Us=null,Dn=null;const lJ={group(e,t,n){const i=Us=t.childNodes[2];Dn=i.__values__,e.foreground(Yf,n,this),Dn=t.__values__,Us=t.childNodes[1],e.content(Yf,n,this);const r=Us=t.childNodes[0];e.background(Yf,n,this);const s=n.mark.interactive===!1?"none":null;if(s!==Dn.events&&(Bn(i,"pointer-events",s),Bn(r,"pointer-events",s),Dn.events=s),n.strokeForeground&&n.stroke){const o=n.fill;Bn(i,"display",null),this.style(r,n),Bn(r,"stroke",null),o&&(n.fill=null),Dn=i.__values__,this.style(i,n),o&&(n.fill=o),Us=null}else Bn(i,"display","none")},image(e,t,n){n.smooth===!1?(Op(t,"image-rendering","optimizeSpeed"),Op(t,"image-rendering","pixelated")):Op(t,"image-rendering",null)},text(e,t,n){const i=Bf(n);let r,s,o,a;W(i)?(s=i.map(u=>qo(n,u)),r=s.join(`
`),r!==Dn.text&&(Vi(t,0),o=t.ownerDocument,a=jo(n),s.forEach((u,l)=>{const c=Wo(o,"tspan",Vt);c.__data__=n,c.textContent=u,l&&(c.setAttribute("x",0),c.setAttribute("dy",a)),t.appendChild(c)}),Dn.text=r)):(s=qo(n,i),s!==Dn.text&&(t.textContent=s,Dn.text=s)),Bn(t,"font-family",Uf(n)),Bn(t,"font-size",ns(n)+"px"),Bn(t,"font-style",n.fontStyle),Bn(t,"font-variant",n.fontVariant),Bn(t,"font-weight",n.fontWeight)}};function Yf(e,t,n){t!==Dn[e]&&(n?cJ(Us,e,t,n):Bn(Us,e,t),Dn[e]=t)}function Op(e,t,n){n!==Dn[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),Dn[t]=n)}function Ho(e,t){for(const n in t)Bn(e,n,t[n])}function Bn(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function cJ(e,t,n,i){n!=null?e.setAttributeNS(i,t,n):e.removeAttributeNS(i,t)}function XA(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}class KA extends qf{constructor(t){super(t),this._text=null,this._defs={gradient:{},clipping:{}}}svg(){return this._text}_render(t){const n=q3();n.open("svg",Oe({},zf,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const i=this._bgcolor;return i&&i!=="transparent"&&i!=="none"&&n.open("rect",{width:this._width,height:this._height,fill:i}).close(),n.open("g",HA,{transform:"translate("+this._origin+")"}),this.mark(n,t),n.close(),this.defs(n),this._text=n.close()+"",this}mark(t,n){const i=$i[n.marktype],r=i.tag,s=[PA,i.attr];t.open("g",{class:wA(n),"clip-path":n.clip?l3(this,n,n.group):null},zA(n),{"pointer-events":r!=="g"&&n.interactive===!1?"none":null});const o=a=>{const u=this.href(a);if(u&&t.open("a",u),t.open(r,this.attr(n,a,s,r!=="g"?r:null)),r==="text"){const l=Bf(a);if(W(l)){const c={x:0,dy:jo(a)};for(let f=0;f<l.length;++f)t.open("tspan",f?c:null).text(qo(a,l[f])).close()}else t.text(qo(a,l))}else if(r==="g"){const l=a.strokeForeground,c=a.fill,f=a.stroke;l&&f&&(a.stroke=null),t.open("path",this.attr(n,a,i.background,"bgrect")).close(),t.open("g",this.attr(n,a,i.content)),pr(a,d=>this.mark(t,d)),t.close(),l&&f?(c&&(a.fill=null),a.stroke=f,t.open("path",this.attr(n,a,i.foreground,"bgrect")).close(),c&&(a.fill=c)):t.open("path",this.attr(n,a,i.foreground,"bgfore")).close()}t.close(),u&&t.close()};return i.nested?n.items&&n.items.length&&o(n.items[0]):pr(n,o),t.close()}href(t){const n=t.href;let i;if(n){if(i=this._hrefs&&this._hrefs[n])return i;this.sanitizeURL(n).then(r=>{r["xlink:href"]=r.href,r.href=null,(this._hrefs||(this._hrefs={}))[n]=r})}return null}attr(t,n,i,r){const s={},o=(a,u,l,c)=>{s[c||a]=u};return Array.isArray(i)?i.forEach(a=>a(o,n,this)):i(o,n,this),r&&fJ(s,n,t,r,this._defs),s}defs(t){const n=this._defs.gradient,i=this._defs.clipping;if(Object.keys(n).length+Object.keys(i).length!==0){t.open("defs");for(const s in n){const o=n[s],a=o.stops;o.gradient==="radial"?(t.open("pattern",{id:rp+s,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+s+")"}).close(),t.close(),t.open("radialGradient",{id:s,fx:o.x1,fy:o.y1,fr:o.r1,cx:o.x2,cy:o.y2,r:o.r2})):t.open("linearGradient",{id:s,x1:o.x1,x2:o.x2,y1:o.y1,y2:o.y2});for(let u=0;u<a.length;++u)t.open("stop",{offset:a[u].offset,"stop-color":a[u].color}).close();t.close()}for(const s in i){const o=i[s];t.open("clipPath",{id:s}),o.path?t.open("path",{d:o.path}).close():t.open("rect",{x:0,y:0,width:o.width,height:o.height}).close(),t.close()}t.close()}}}function fJ(e,t,n,i,r){let s;if(t==null||(i==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),i==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;i==="image"&&t.smooth===!1&&(s=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),i==="text"&&(e["font-family"]=Uf(t),e["font-size"]=ns(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const o in Np){let a=t[o];const u=Np[o];a==="transparent"&&(u==="fill"||u==="stroke")||a!=null&&(i3(a)&&(a=Ok(a,r.gradient,"")),e[u]=a)}for(const o in Rp){const a=t[o];a!=null&&(s=s||[],s.push(`${Rp[o]}: ${a};`))}return s&&(e.style=s.join(" ")),e}const gr={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function dJ(e){gr.svgMarkTypes=e.svgMarkTypes??["text"],gr.svgOnTop=e.svgOnTop??!0,gr.debug=e.debug??!1}class H3 extends qf{constructor(t){super(t),this._svgRenderer=new W3(t),this._canvasRenderer=new Mp(t)}initialize(t,n,i,r,s){this._root_el=Gt(t,0,"div");const o=Gt(this._root_el,0,"div"),a=Gt(this._root_el,1,"div");return this._root_el.style.position="relative",gr.debug||(o.style.height="100%",a.style.position="absolute",a.style.top="0",a.style.left="0",a.style.height="100%",a.style.width="100%"),this._svgEl=gr.svgOnTop?a:o,this._canvasEl=gr.svgOnTop?o:a,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,n,i,r,s),this._svgRenderer.initialize(this._svgEl,n,i,r,s),super.initialize(t,n,i,r,s)}dirty(t){return gr.svgMarkTypes.includes(t.mark.marktype)?this._svgRenderer.dirty(t):this._canvasRenderer.dirty(t),this}_render(t,n){const r=(n??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(s=>!gr.svgMarkTypes.includes(s));this._svgRenderer.render(t,gr.svgMarkTypes),this._canvasRenderer.render(t,r)}resize(t,n,i,r){return super.resize(t,n,i,r),this._svgRenderer.resize(t,n,i,r),this._canvasRenderer.resize(t,n,i,r),this}background(t){return gr.svgOnTop?this._canvasRenderer.background(t):this._svgRenderer.background(t),this}}class ZA extends Hf{constructor(t,n){super(t,n)}initialize(t,n,i){const r=Gt(Gt(t,0,"div"),gr.svgOnTop?0:1,"div");return super.initialize(r,n,i)}}const JA="canvas",QA="hybrid",e$="png",t$="svg",n$="none",Go={Canvas:JA,PNG:e$,SVG:t$,Hybrid:QA,None:n$},Ya={};Ya[JA]=Ya[e$]={renderer:Mp,headless:Mp,handler:Hf},Ya[t$]={renderer:W3,headless:KA,handler:MA},Ya[QA]={renderer:H3,headless:H3,handler:ZA},Ya[n$]={};function Lp(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(Ya[e]=t,this):Ya[e]}function i$(e,t,n){const i=[],r=new Ut().union(t),s=e.marktype;return s?r$(e,r,n,i):s==="group"?s$(e,r,n,i):q("Intersect scene must be mark node or group item.")}function r$(e,t,n,i){if(hJ(e,t,n)){const r=e.items,s=e.marktype,o=r.length;let a=0;if(s==="group")for(;a<o;++a)s$(r[a],t,n,i);else for(const u=$i[s].isect;a<o;++a){const l=r[a];o$(l,t,u)&&i.push(l)}}return i}function hJ(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function s$(e,t,n,i){n&&n(e.mark)&&o$(e,t,$i.group.isect)&&i.push(e);const r=e.items,s=r&&r.length;if(s){const o=e.x||0,a=e.y||0;t.translate(-o,-a);for(let u=0;u<s;++u)r$(r[u],t,n,i);t.translate(o,a)}return i}function o$(e,t,n){const i=e.bounds;return t.encloses(i)||t.intersects(i)&&n(e,t)}const G3=new Ut;function a$(e){const t=e.clip;if(Ie(t))t(Lf(G3.clear()));else if(t)G3.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(G3)}const pJ=1e-9;function V3(e,t,n){return e===t?!0:n==="path"?u$(e,t):e instanceof Date&&t instanceof Date?+e==+t:Ze(e)&&Ze(t)?Math.abs(e-t)<=pJ:!e||!t||!re(e)&&!re(t)?e==t:gJ(e,t)}function u$(e,t){return V3(Tl(e),Tl(t))}function gJ(e,t){var n=Object.keys(e),i=Object.keys(t),r,s;if(n.length!==i.length)return!1;for(n.sort(),i.sort(),s=n.length-1;s>=0;s--)if(n[s]!=i[s])return!1;for(s=n.length-1;s>=0;s--)if(r=n[s],!V3(e[r],t[r],r))return!1;return typeof e==typeof t}function mJ(){Gk(),BX()}const Il="top",mr="left",yr="right",Vo="bottom",yJ="top-left",bJ="top-right",vJ="bottom-left",xJ="bottom-right",Y3="start",X3="middle",Un="end",_J="x",wJ="y",Ip="group",K3="axis",Z3="title",EJ="frame",CJ="scope",J3="legend",l$="row-header",c$="row-footer",f$="row-title",d$="column-header",h$="column-footer",p$="column-title",kJ="padding",AJ="symbol",g$="fit",m$="fit-x",y$="fit-y",$J="pad",Q3="none",Pp="all",ev="each",tv="flush",Yo="column",Xo="row";function b$(e){P.call(this,null,e)}ee(b$,P,{transform(e,t){const n=t.dataflow,i=e.mark,r=i.marktype,s=$i[r],o=s.bound;let a=i.bounds,u;if(s.nested)i.items.length&&n.dirty(i.items[0]),a=zp(i,o),i.items.forEach(l=>{l.bounds.clear().union(a)});else if(r===Ip||e.modified())switch(t.visit(t.MOD,l=>n.dirty(l)),a.clear(),i.items.forEach(l=>a.union(zp(l,o))),i.role){case K3:case J3:case Z3:t.reflow()}else u=t.changed(t.REM),t.visit(t.ADD,l=>{a.union(zp(l,o))}),t.visit(t.MOD,l=>{u=u||a.alignsWith(l.bounds),n.dirty(l),a.union(zp(l,o))}),u&&(a.clear(),i.items.forEach(l=>a.union(l.bounds)));return a$(i),t.modifies("bounds")}});function zp(e,t,n){return t(e.bounds.clear(),e,n)}const v$=":vega_identifier:";function nv(e){P.call(this,0,e)}nv.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]},ee(nv,P,{transform(e,t){const n=SJ(t.dataflow),i=e.as;let r=n.value;return t.visit(t.ADD,s=>s[i]=s[i]||++r),n.set(this.value=r),t}});function SJ(e){return e._signals[v$]||(e._signals[v$]=e.add(0))}function x$(e){P.call(this,null,e)}ee(x$,P,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,FJ(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const i=n.marktype===Ip?up:ap;return t.visit(t.ADD,r=>i.call(r,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function FJ(e){const t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function _$(e){P.call(this,null,e)}const w$={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((i,r)=>!r||!E$(n.bounds,i.bounds,t)?(n=i,1):i.opacity=0)}},E$=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),C$=(e,t)=>{for(var n=1,i=e.length,r=e[0].bounds,s;n<i;r=s,++n)if(E$(r,s=e[n].bounds,t))return!0},DJ=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},TJ=(e,t,n)=>{var i=e.range(),r=new Ut;return t===Il||t===Vo?r.set(i[0],-1/0,i[1],1/0):r.set(-1/0,i[0],1/0,i[1]),r.expand(n||1),s=>r.encloses(s.bounds)},k$=e=>(e.forEach(t=>t.opacity=1),e),A$=(e,t)=>e.reflow(t.modified()).modifies("opacity");ee(_$,P,{transform(e,t){const n=w$[e.method]||w$.parity,i=e.separation||0;let r=t.materialize(t.SOURCE).source,s,o;if(!r||!r.length)return;if(!e.method)return e.modified("method")&&(k$(r),t=A$(t,e)),t;if(r=r.filter(DJ),!r.length)return;if(e.sort&&(r=r.slice().sort(e.sort)),s=k$(r),t=A$(t,e),s.length>=3&&C$(s,i)){do s=n(s,i);while(s.length>=3&&C$(s,i));s.length<3&&!Ge(r).opacity&&(s.length>1&&(Ge(s).opacity=0),Ge(r).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(o=TJ(e.boundScale,e.boundOrient,+e.boundTolerance),r.forEach(u=>{o(u)||(u.opacity=0)}));const a=s[0].mark.bounds.clear();return r.forEach(u=>{u.opacity&&a.union(u.bounds)}),t}});function $$(e){P.call(this,null,e)}ee($$,P,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,i=>n.dirty(i)),t.fields&&t.fields.zindex){const i=t.source&&t.source[0];i&&(i.mark.zdirty=!0)}}});const Tn=new Ut;function Pl(e,t,n){return e[t]===n?0:(e[t]=n,1)}function MJ(e){var t=e.items[0].orient;return t===mr||t===yr}function NJ(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function RJ(e,t,n,i){var r=t.items[0],s=r.datum,o=r.translate!=null?r.translate:.5,a=r.orient,u=NJ(s),l=r.range,c=r.offset,f=r.position,d=r.minExtent,h=r.maxExtent,p=s.title&&r.items[u[2]].items[0],g=r.titlePadding,m=r.bounds,y=p&&S3(p),b=0,v=0,x,_;switch(Tn.clear().union(m),m.clear(),(x=u[0])>-1&&m.union(r.items[x].bounds),(x=u[1])>-1&&m.union(r.items[x].bounds),a){case Il:b=f||0,v=-c,_=Math.max(d,Math.min(h,-m.y1)),m.add(0,-_).add(l,0),p&&Bp(e,p,_,g,y,0,-1,m);break;case mr:b=-c,v=f||0,_=Math.max(d,Math.min(h,-m.x1)),m.add(-_,0).add(0,l),p&&Bp(e,p,_,g,y,1,-1,m);break;case yr:b=n+c,v=f||0,_=Math.max(d,Math.min(h,m.x2)),m.add(0,0).add(_,l),p&&Bp(e,p,_,g,y,1,1,m);break;case Vo:b=f||0,v=i+c,_=Math.max(d,Math.min(h,m.y2)),m.add(0,0).add(l,_),p&&Bp(e,p,_,g,0,0,1,m);break;default:b=r.x,v=r.y}return Bs(m.translate(b,v),r),Pl(r,"x",b+o)|Pl(r,"y",v+o)&&(r.bounds=Tn,e.dirty(r),r.bounds=m,e.dirty(r)),r.mark.bounds.clear().union(m)}function Bp(e,t,n,i,r,s,o,a){const u=t.bounds;if(t.auto){const l=o*(n+r+i);let c=0,f=0;e.dirty(t),s?c=(t.x||0)-(t.x=l):f=(t.y||0)-(t.y=l),t.mark.bounds.clear().union(u.translate(-c,-f)),e.dirty(t)}a.union(u)}const S$=(e,t)=>Math.floor(Math.min(e,t)),F$=(e,t)=>Math.ceil(Math.max(e,t));function OJ(e){var t=e.items,n=t.length,i=0,r,s;const o={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;i<n;++i)if(r=t[i],s=r.items,r.marktype===Ip)switch(r.role){case K3:case J3:case Z3:break;case l$:o.rowheaders.push(...s);break;case c$:o.rowfooters.push(...s);break;case d$:o.colheaders.push(...s);break;case h$:o.colfooters.push(...s);break;case f$:o.rowtitle=s[0];break;case p$:o.coltitle=s[0];break;default:o.marks.push(...s)}return o}function LJ(e){return new Ut().set(0,0,e.width||0,e.height||0)}function IJ(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function kt(e,t,n){const i=re(e)?e[t]:e;return i??(n!==void 0?n:0)}function D$(e){return e<0?Math.ceil(-e):0}function T$(e,t,n){var i=!n.nodirty,r=n.bounds===tv?LJ:IJ,s=Tn.set(0,0,0,0),o=kt(n.align,Yo),a=kt(n.align,Xo),u=kt(n.padding,Yo),l=kt(n.padding,Xo),c=n.columns||t.length,f=c<=0?1:Math.ceil(t.length/c),d=t.length,h=Array(d),p=Array(c),g=0,m=Array(d),y=Array(f),b=0,v=Array(d),x=Array(d),_=Array(d),E,w,C,k,S,$,O,R,F,A,T;for(w=0;w<c;++w)p[w]=0;for(w=0;w<f;++w)y[w]=0;for(w=0;w<d;++w)$=t[w],S=_[w]=r($),$.x=$.x||0,v[w]=0,$.y=$.y||0,x[w]=0,C=w%c,k=~~(w/c),g=Math.max(g,O=Math.ceil(S.x2)),b=Math.max(b,R=Math.ceil(S.y2)),p[C]=Math.max(p[C],O),y[k]=Math.max(y[k],R),h[w]=u+D$(S.x1),m[w]=l+D$(S.y1),i&&e.dirty(t[w]);for(w=0;w<d;++w)w%c===0&&(h[w]=0),w<c&&(m[w]=0);if(o===ev)for(C=1;C<c;++C){for(T=0,w=C;w<d;w+=c)T<h[w]&&(T=h[w]);for(w=C;w<d;w+=c)h[w]=T+p[C-1]}else if(o===Pp){for(T=0,w=0;w<d;++w)w%c&&T<h[w]&&(T=h[w]);for(w=0;w<d;++w)w%c&&(h[w]=T+g)}else for(o=!1,C=1;C<c;++C)for(w=C;w<d;w+=c)h[w]+=p[C-1];if(a===ev)for(k=1;k<f;++k){for(T=0,w=k*c,E=w+c;w<E;++w)T<m[w]&&(T=m[w]);for(w=k*c;w<E;++w)m[w]=T+y[k-1]}else if(a===Pp){for(T=0,w=c;w<d;++w)T<m[w]&&(T=m[w]);for(w=c;w<d;++w)m[w]=T+b}else for(a=!1,k=1;k<f;++k)for(w=k*c,E=w+c;w<E;++w)m[w]+=y[k-1];for(F=0,w=0;w<d;++w)F=h[w]+(w%c?F:0),v[w]+=F-t[w].x;for(C=0;C<c;++C)for(A=0,w=C;w<d;w+=c)A+=m[w],x[w]+=A-t[w].y;if(o&&kt(n.center,Yo)&&f>1)for(w=0;w<d;++w)S=o===Pp?g:p[w%c],F=S-_[w].x2-t[w].x-v[w],F>0&&(v[w]+=F/2);if(a&&kt(n.center,Xo)&&c!==1)for(w=0;w<d;++w)S=a===Pp?b:y[~~(w/c)],A=S-_[w].y2-t[w].y-x[w],A>0&&(x[w]+=A/2);for(w=0;w<d;++w)s.union(_[w].translate(v[w],x[w]));switch(F=kt(n.anchor,_J),A=kt(n.anchor,wJ),kt(n.anchor,Yo)){case Un:F-=s.width();break;case X3:F-=s.width()/2}switch(kt(n.anchor,Xo)){case Un:A-=s.height();break;case X3:A-=s.height()/2}for(F=Math.round(F),A=Math.round(A),s.clear(),w=0;w<d;++w)t[w].mark.bounds.clear();for(w=0;w<d;++w)$=t[w],$.x+=v[w]+=F,$.y+=x[w]+=A,s.union($.mark.bounds.union($.bounds.translate(v[w],x[w]))),i&&e.dirty($);return s}function PJ(e,t,n){var i=OJ(t),r=i.marks,s=n.bounds===tv?zJ:BJ,o=n.offset,a=n.columns||r.length,u=a<=0?1:Math.ceil(r.length/a),l=u*a,c,f,d,h,p,g,m;const y=T$(e,r,n);y.empty()&&y.set(0,0,0,0),i.rowheaders&&(g=kt(n.headerBand,Xo,null),c=Up(e,i.rowheaders,r,a,u,-kt(o,"rowHeader"),S$,0,s,"x1",0,a,1,g)),i.colheaders&&(g=kt(n.headerBand,Yo,null),f=Up(e,i.colheaders,r,a,a,-kt(o,"columnHeader"),S$,1,s,"y1",0,1,a,g)),i.rowfooters&&(g=kt(n.footerBand,Xo,null),d=Up(e,i.rowfooters,r,a,u,kt(o,"rowFooter"),F$,0,s,"x2",a-1,a,1,g)),i.colfooters&&(g=kt(n.footerBand,Yo,null),h=Up(e,i.colfooters,r,a,a,kt(o,"columnFooter"),F$,1,s,"y2",l-a,1,a,g)),i.rowtitle&&(p=kt(n.titleAnchor,Xo),m=kt(o,"rowTitle"),m=p===Un?d+m:c-m,g=kt(n.titleBand,Xo,.5),M$(e,i.rowtitle,m,0,y,g)),i.coltitle&&(p=kt(n.titleAnchor,Yo),m=kt(o,"columnTitle"),m=p===Un?h+m:f-m,g=kt(n.titleBand,Yo,.5),M$(e,i.coltitle,m,1,y,g))}function zJ(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function BJ(e,t){return e.bounds[t]}function Up(e,t,n,i,r,s,o,a,u,l,c,f,d,h){var p=n.length,g=0,m=0,y,b,v,x,_,E,w,C,k;if(!p)return g;for(y=c;y<p;y+=f)n[y]&&(g=o(g,u(n[y],l)));if(!t.length)return g;for(t.length>r&&(e.warn("Grid headers exceed limit: "+r),t=t.slice(0,r)),g+=s,b=0,x=t.length;b<x;++b)e.dirty(t[b]),t[b].mark.bounds.clear();for(y=c,b=0,x=t.length;b<x;++b,y+=f){for(E=t[b],_=E.mark.bounds,v=y;v>=0&&(w=n[v])==null;v-=d);a?(C=h==null?w.x:Math.round(w.bounds.x1+h*w.bounds.width()),k=g):(C=g,k=h==null?w.y:Math.round(w.bounds.y1+h*w.bounds.height())),_.union(E.bounds.translate(C-(E.x||0),k-(E.y||0))),E.x=C,E.y=k,e.dirty(E),m=o(m,_[l])}return m}function M$(e,t,n,i,r,s){if(t){e.dirty(t);var o=n,a=n;i?o=Math.round(r.x1+s*r.width()):a=Math.round(r.y1+s*r.height()),t.bounds.translate(o-(t.x||0),a-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=o,t.y=a,e.dirty(t)}}function UJ(e,t){const n=e[t]||{};return(i,r)=>n[i]!=null?n[i]:e[i]!=null?e[i]:r}function jJ(e,t){let n=-1/0;return e.forEach(i=>{i.offset!=null&&(n=Math.max(n,i.offset))}),n>-1/0?n:t}function qJ(e,t,n,i,r,s,o){const a=UJ(n,t),u=jJ(e,a("offset",0)),l=a("anchor",Y3),c=l===Un?1:l===X3?.5:0,f={align:ev,bounds:a("bounds",tv),columns:a("direction")==="vertical"?1:e.length,padding:a("margin",8),center:a("center"),nodirty:!0};switch(t){case mr:f.anchor={x:Math.floor(i.x1)-u,column:Un,y:c*(o||i.height()+2*i.y1),row:l};break;case yr:f.anchor={x:Math.ceil(i.x2)+u,y:c*(o||i.height()+2*i.y1),row:l};break;case Il:f.anchor={y:Math.floor(r.y1)-u,row:Un,x:c*(s||r.width()+2*r.x1),column:l};break;case Vo:f.anchor={y:Math.ceil(r.y2)+u,x:c*(s||r.width()+2*r.x1),column:l};break;case yJ:f.anchor={x:u,y:u};break;case bJ:f.anchor={x:s-u,y:u,column:Un};break;case vJ:f.anchor={x:u,y:o-u,row:Un};break;case xJ:f.anchor={x:s-u,y:o-u,column:Un,row:Un};break}return f}function WJ(e,t){var n=t.items[0],i=n.datum,r=n.orient,s=n.bounds,o=n.x,a=n.y,u,l;return n._bounds?n._bounds.clear().union(s):n._bounds=s.clone(),s.clear(),GJ(e,n,n.items[0].items[0]),s=HJ(n,s),u=2*n.padding,l=2*n.padding,s.empty()||(u=Math.ceil(s.width()+u),l=Math.ceil(s.height()+l)),i.type===AJ&&VJ(n.items[0].items[0].items[0].items),r!==Q3&&(n.x=o=0,n.y=a=0),n.width=u,n.height=l,Bs(s.set(o,a,o+u,a+l),n),n.mark.bounds.clear().union(s),n}function HJ(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function GJ(e,t,n){var i=t.padding,r=i-n.x,s=i-n.y;if(!t.datum.title)(r||s)&&Xf(e,n,r,s);else{var o=t.items[1].items[0],a=o.anchor,u=t.titlePadding||0,l=i-o.x,c=i-o.y;switch(o.orient){case mr:r+=Math.ceil(o.bounds.width())+u;break;case yr:case Vo:break;default:s+=o.bounds.height()+u}switch((r||s)&&Xf(e,n,r,s),o.orient){case mr:c+=zl(t,n,o,a,1,1);break;case yr:l+=zl(t,n,o,Un,0,0)+u,c+=zl(t,n,o,a,1,1);break;case Vo:l+=zl(t,n,o,a,0,0),c+=zl(t,n,o,Un,-1,0,1)+u;break;default:l+=zl(t,n,o,a,0,0)}(l||c)&&Xf(e,o,l,c),(l=Math.round(o.bounds.x1-i))<0&&(Xf(e,n,-l,0),Xf(e,o,-l,0))}}function zl(e,t,n,i,r,s,o){const a=e.datum.type!=="symbol",u=n.datum.vgrad,l=a&&(s||!u)&&!o?t.items[0]:t,c=l.bounds[r?"y2":"x2"]-e.padding,f=u&&s?c:0,d=u&&s?0:c,h=r<=0?0:S3(n);return Math.round(i===Y3?f:i===Un?d-h:.5*(c-h))}function Xf(e,t,n,i){t.x+=n,t.y+=i,t.bounds.translate(n,i),t.mark.bounds.translate(n,i),e.dirty(t)}function VJ(e){const t=e.reduce((n,i)=>(n[i.column]=Math.max(i.bounds.x2-i.x,n[i.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function YJ(e,t,n,i,r){var s=t.items[0],o=s.frame,a=s.orient,u=s.anchor,l=s.offset,c=s.padding,f=s.items[0].items[0],d=s.items[1]&&s.items[1].items[0],h=a===mr||a===yr?i:n,p=0,g=0,m=0,y=0,b=0,v;if(o!==Ip?a===mr?(p=r.y2,h=r.y1):a===yr?(p=r.y1,h=r.y2):(p=r.x1,h=r.x2):a===mr&&(p=i,h=0),v=u===Y3?p:u===Un?h:(p+h)/2,d&&d.text){switch(a){case Il:case Vo:b=f.bounds.height()+c;break;case mr:y=f.bounds.width()+c;break;case yr:y=-f.bounds.width()-c;break}Tn.clear().union(d.bounds),Tn.translate(y-(d.x||0),b-(d.y||0)),Pl(d,"x",y)|Pl(d,"y",b)&&(e.dirty(d),d.bounds.clear().union(Tn),d.mark.bounds.clear().union(Tn),e.dirty(d)),Tn.clear().union(d.bounds)}else Tn.clear();switch(Tn.union(f.bounds),a){case Il:g=v,m=r.y1-Tn.height()-l;break;case mr:g=r.x1-Tn.width()-l,m=v;break;case yr:g=r.x2+Tn.width()+l,m=v;break;case Vo:g=v,m=r.y2+l;break;default:g=s.x,m=s.y}return Pl(s,"x",g)|Pl(s,"y",m)&&(Tn.translate(g,m),e.dirty(s),s.bounds.clear().union(Tn),t.bounds.clear().union(Tn),e.dirty(s)),s.bounds}function N$(e){P.call(this,null,e)}ee(N$,P,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(i=>{e.layout&&PJ(n,i,e.layout),KJ(n,i,e)}),XJ(e.mark.group)?t.reflow():t}});function XJ(e){return e&&e.mark.role!=="legend-entry"}function KJ(e,t,n){var i=t.items,r=Math.max(0,t.width||0),s=Math.max(0,t.height||0),o=new Ut().set(0,0,r,s),a=o.clone(),u=o.clone(),l=[],c,f,d,h,p,g;for(p=0,g=i.length;p<g;++p)switch(f=i[p],f.role){case K3:h=MJ(f)?a:u,h.union(RJ(e,f,r,s));break;case Z3:c=f;break;case J3:l.push(WJ(e,f));break;case EJ:case CJ:case l$:case c$:case f$:case d$:case h$:case p$:a.union(f.bounds),u.union(f.bounds);break;default:o.union(f.bounds)}if(l.length){const m={};l.forEach(y=>{d=y.orient||yr,d!==Q3&&(m[d]||(m[d]=[])).push(y)});for(const y in m){const b=m[y];T$(e,b,qJ(b,y,n.legends,a,u,r,s))}l.forEach(y=>{const b=y.bounds;if(b.equals(y._bounds)||(y.bounds=y._bounds,e.dirty(y),y.bounds=b,e.dirty(y)),n.autosize&&(n.autosize.type===g$||n.autosize.type===m$||n.autosize.type===y$))switch(y.orient){case mr:case yr:o.add(b.x1,0).add(b.x2,0);break;case Il:case Vo:o.add(0,b.y1).add(0,b.y2)}else o.union(b)})}o.union(a).union(u),c&&o.union(YJ(e,c,r,s,o)),t.clip&&o.set(0,0,t.width||0,t.height||0),ZJ(e,t,o,n)}function ZJ(e,t,n,i){const r=i.autosize||{},s=r.type;if(e._autosize<1||!s)return;let o=e._width,a=e._height,u=Math.max(0,t.width||0),l=Math.max(0,Math.ceil(-n.x1)),c=Math.max(0,t.height||0),f=Math.max(0,Math.ceil(-n.y1));const d=Math.max(0,Math.ceil(n.x2-u)),h=Math.max(0,Math.ceil(n.y2-c));if(r.contains===kJ){const p=e.padding();o-=p.left+p.right,a-=p.top+p.bottom}s===Q3?(l=0,f=0,u=o,c=a):s===g$?(u=Math.max(0,o-l-d),c=Math.max(0,a-f-h)):s===m$?(u=Math.max(0,o-l-d),a=c+f+h):s===y$?(o=u+l+d,c=Math.max(0,a-f-h)):s===$J&&(o=u+l+d,a=c+f+h),e._resizeView(o,a,u,c,[l,f],r.resize)}const JJ=Object.freeze(Object.defineProperty({__proto__:null,bound:b$,identifier:nv,mark:x$,overlap:_$,render:$$,viewlayout:N$},Symbol.toStringTag,{value:"Module"}));function R$(e){P.call(this,null,e)}ee(R$,P,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),i=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=this.value,s=e.scale,o=e.count==null?e.values?e.values.length:10:e.count,a=e3(s,o,e.minstep),u=e.format||Ak(n,s,a,e.formatSpecifier,e.formatType,!!e.values),l=e.values?kk(s,e.values,a):t3(s,a);return r&&(i.rem=r),r=l.map((c,f)=>nt({index:f/(l.length-1||1),value:c,label:u(c)})),e.extra&&r.length&&r.push(nt({index:-1,extra:{value:r[0].value},label:""})),i.source=r,i.add=r,this.value=r,i}});function O$(e){P.call(this,null,e)}function QJ(){return nt({})}function eQ(e){const t=sl().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}ee(O$,P,{transform(e,t){var n=t.dataflow,i=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.item||QJ,s=e.key||_e,o=this.value;return W(i.encode)&&(i.encode=null),o&&(e.modified("key")||t.modified(s))&&q("DataJoin does not support modified key function or fields."),o||(t=t.addAll(),this.value=o=eQ(s)),t.visit(t.ADD,a=>{const u=s(a);let l=o.get(u);l?l.exit?(o.empty--,i.add.push(l)):i.mod.push(l):(l=r(a),o.set(u,l),i.add.push(l)),l.datum=a,l.exit=!1}),t.visit(t.MOD,a=>{const u=s(a),l=o.get(u);l&&(l.datum=a,i.mod.push(l))}),t.visit(t.REM,a=>{const u=s(a),l=o.get(u);a===l.datum&&!l.exit&&(i.rem.push(l),l.exit=!0,++o.empty)}),t.changed(t.ADD_MOD)&&i.modifies("datum"),(t.clean()||e.clean&&o.empty>n.cleanThreshold)&&n.runAfter(o.clean),i}});function L$(e){P.call(this,null,e)}ee(L$,P,{transform(e,t){var n=t.fork(t.ADD_REM),i=e.mod||!1,r=e.encoders,s=t.encode;if(W(s))if(n.changed()||s.every(f=>r[f]))s=s[0],n.encode=null;else return t.StopPropagation;var o=s==="enter",a=r.update||vo,u=r.enter||vo,l=r.exit||vo,c=(s&&!o?r[s]:a)||vo;if(t.changed(t.ADD)&&(t.visit(t.ADD,f=>{u(f,e),a(f,e)}),n.modifies(u.output),n.modifies(a.output),c!==vo&&c!==a&&(t.visit(t.ADD,f=>{c(f,e)}),n.modifies(c.output))),t.changed(t.REM)&&l!==vo&&(t.visit(t.REM,f=>{l(f,e)}),n.modifies(l.output)),o||c!==vo){const f=t.MOD|(e.modified()?t.REFLOW:0);o?(t.visit(f,d=>{const h=u(d,e)||i;(c(d,e)||h)&&n.mod.push(d)}),n.mod.length&&n.modifies(u.output)):t.visit(f,d=>{(c(d,e)||i)&&n.mod.push(d)}),n.mod.length&&n.modifies(c.output)}return n.changed()?n:t.StopPropagation}});function I$(e){P.call(this,[],e)}ee(I$,P,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),i=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=this.value,s=e.type||ip,o=e.scale,a=+e.limit,u=e3(o,e.count==null?5:e.count,e.minstep),l=!!e.values||s===ip,c=e.format||Dk(n,o,u,s,e.formatSpecifier,e.formatType,l),f=e.values||Fk(o,u),d,h,p,g,m;return r&&(i.rem=r),s===ip?(a&&f.length>a?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),r=f.slice(0,a-1),m=!0):r=f,Ie(p=e.size)?(!e.values&&o(r[0])===0&&(r=r.slice(1)),g=r.reduce((y,b)=>Math.max(y,p(b,e)),0)):p=kn(g=p||8),r=r.map((y,b)=>nt({index:b,label:c(y,b,r),value:y,offset:g,size:p(y,e)})),m&&(m=f[r.length],r.push(nt({index:r.length,label:`${f.length-r.length} entries`,value:m,offset:g,size:p(m,e)})))):s===$X?(d=o.domain(),h=_k(o,d[0],Ge(d)),f.length<3&&!e.values&&d[0]!==Ge(d)&&(f=[d[0],Ge(d)]),r=f.map((y,b)=>nt({index:b,label:c(y,b,f),value:y,perc:h(y)}))):(p=f.length-1,h=PX(o),r=f.map((y,b)=>nt({index:b,label:c(y,b,f),value:y,perc:b?h(y):0,perc2:b===p?1:h(f[b+1])}))),i.source=r,i.add=r,this.value=r,i}});const tQ=e=>e.source.x,nQ=e=>e.source.y,iQ=e=>e.target.x,rQ=e=>e.target.y;function iv(e){P.call(this,{},e)}iv.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]},ee(iv,P,{transform(e,t){var n=e.sourceX||tQ,i=e.sourceY||nQ,r=e.targetX||iQ,s=e.targetY||rQ,o=e.as||"path",a=e.orient||"vertical",u=e.shape||"line",l=U$.get(u+"-"+a)||U$.get(u);return l||q("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,c=>{c[o]=l(n(c),i(c),r(c),s(c))}),t.reflow(e.modified()).modifies(o)}});const P$=(e,t,n,i)=>"M"+e+","+t+"L"+n+","+i,sQ=(e,t,n,i)=>P$(t*Math.cos(e),t*Math.sin(e),i*Math.cos(n),i*Math.sin(n)),z$=(e,t,n,i)=>{var r=n-e,s=i-t,o=Math.hypot(r,s)/2,a=180*Math.atan2(s,r)/Math.PI;return"M"+e+","+t+"A"+o+","+o+" "+a+" 0 1 "+n+","+i},oQ=(e,t,n,i)=>z$(t*Math.cos(e),t*Math.sin(e),i*Math.cos(n),i*Math.sin(n)),B$=(e,t,n,i)=>{const r=n-e,s=i-t,o=.2*(r+s),a=.2*(s-r);return"M"+e+","+t+"C"+(e+o)+","+(t+a)+" "+(n+a)+","+(i-o)+" "+n+","+i},U$=sl({line:P$,"line-radial":sQ,arc:z$,"arc-radial":oQ,curve:B$,"curve-radial":(e,t,n,i)=>B$(t*Math.cos(e),t*Math.sin(e),i*Math.cos(n),i*Math.sin(n)),"orthogonal-horizontal":(e,t,n,i)=>"M"+e+","+t+"V"+i+"H"+n,"orthogonal-vertical":(e,t,n,i)=>"M"+e+","+t+"H"+n+"V"+i,"orthogonal-radial":(e,t,n,i)=>{const r=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),u=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*r+","+t*s+"A"+t+","+t+" 0 0,"+(u?1:0)+" "+t*o+","+t*a+"L"+i*o+","+i*a},"diagonal-horizontal":(e,t,n,i)=>{const r=(e+n)/2;return"M"+e+","+t+"C"+r+","+t+" "+r+","+i+" "+n+","+i},"diagonal-vertical":(e,t,n,i)=>{const r=(t+i)/2;return"M"+e+","+t+"C"+e+","+r+" "+n+","+r+" "+n+","+i},"diagonal-radial":(e,t,n,i)=>{const r=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),u=(t+i)/2;return"M"+t*r+","+t*s+"C"+u*r+","+u*s+" "+u*o+","+u*a+" "+i*o+","+i*a}});function rv(e){P.call(this,null,e)}rv.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]},ee(rv,P,{transform(e,t){var n=e.as||["startAngle","endAngle"],i=n[0],r=n[1],s=e.field||tl,o=e.startAngle||0,a=e.endAngle!=null?e.endAngle:2*Math.PI,u=t.source,l=u.map(s),c=l.length,f=o,d=(a-o)/g8(l),h=Ei(c),p,g,m;for(e.sort&&h.sort((y,b)=>l[y]-l[b]),p=0;p<c;++p)m=l[h[p]],g=u[h[p]],g[i]=f,g[r]=f+=m*d;return this.value=l,t.reflow(e.modified()).modifies(n)}});const aQ=5;function uQ(e){const t=e.type;return!e.bins&&(t===$l||t===$f||t===Sf)}function j$(e){return Kb(e)&&e!==Qr}const lQ=lr(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function q$(e){P.call(this,null,e),this.modified(!0)}ee(q$,P,{transform(e,t){var n=t.dataflow,i=this.value,r=cQ(e);(!i||r!==i.type)&&(this.value=i=Qe(r)());for(r in e)if(!lQ[r]){if(r==="padding"&&j$(i.type))continue;Ie(i[r])?i[r](e[r]):n.warn("Unsupported scale property: "+r)}return mQ(i,e,gQ(i,e,dQ(i,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function cQ(e){var t=e.type,n="",i;return t===Qr?Qr+"-"+$l:(fQ(e)&&(i=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=i===2?Qr+"-":i===3?Sl+"-":""),(n+t||$l).toLowerCase())}function fQ(e){const t=e.type;return Kb(t)&&t!==Ba&&t!==Ua&&(e.scheme||e.range&&e.range.length&&e.range.every(se))}function dQ(e,t,n){const i=hQ(e,t.domainRaw,n);if(i>-1)return i;var r=t.domain,s=e.type,o=t.zero||t.zero===void 0&&uQ(e),a,u;if(!r)return 0;if((o||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(a=(r=r.slice()).length-1||1,o&&(r[0]>0&&(r[0]=0),r[a]<0&&(r[a]=0)),t.domainMin!=null&&(r[0]=t.domainMin),t.domainMax!=null&&(r[a]=t.domainMax),t.domainMid!=null)){u=t.domainMid;const l=u>r[a]?a+1:u<r[0]?0:a;l!==a&&n.warn("Scale domainMid exceeds domain min or max.",u),r.splice(l,0,u)}return j$(s)&&t.padding&&r[0]!==Ge(r)&&(r=pQ(s,r,t.range,t.padding,t.exponent,t.constant)),e.domain(W$(s,r,n)),s===Hb&&e.unknown(t.domainImplicit?yb:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&e3(e,t.nice)||null),r.length}function hQ(e,t,n){return t?(e.domain(W$(e.type,t,n)),t.length):-1}function pQ(e,t,n,i,r,s){var o=Math.abs(Ge(n)-n[0]),a=o/(o-2*i),u=e===Ps?w2(t,null,a):e===Sf?Xh(t,null,a,.5):e===$f?Xh(t,null,a,r||1):e===J0?E2(t,null,a,s||1):_2(t,null,a);return t=t.slice(),t[0]=u[0],t[t.length-1]=u[1],t}function W$(e,t,n){if(mk(e)){var i=Math.abs(t.reduce((r,s)=>r+(s<0?-1:s>0?1:0),0));i!==t.length&&n.warn("Log scale domain includes zero: "+Q(t))}return t}function gQ(e,t,n){let i=t.bins;if(i&&!W(i)){const r=e.domain(),s=r[0],o=Ge(r),a=i.step;let u=i.start==null?s:i.start,l=i.stop==null?o:i.stop;a||q("Scale bins parameter missing step property."),u<s&&(u=a*Math.ceil(s/a)),l>o&&(l=a*Math.floor(o/a)),i=Ei(u,l+a/2,a)}return i?e.bins=i:e.bins&&delete e.bins,e.type===Vb&&(i?!t.domain&&!t.domainRaw&&(e.domain(i),n=i.length):e.bins=e.domain()),n}function mQ(e,t,n){var i=e.type,r=t.round||!1,s=t.range;if(t.rangeStep!=null)s=yQ(i,t,n);else if(t.scheme&&(s=bQ(i,t,n),Ie(s))){if(e.interpolator)return e.interpolator(s);q(`Scale type ${i} does not support interpolating color schemes.`)}if(s&&yk(i))return e.interpolator(np(sv(s,t.reverse),t.interpolate,t.interpolateGamma));s&&t.interpolate&&e.interpolate?e.interpolate(Jb(t.interpolate,t.interpolateGamma)):Ie(e.round)?e.round(r):Ie(e.rangeRound)&&e.interpolate(r?kf:Lo),s&&e.range(sv(s,t.reverse))}function yQ(e,t,n){e!==ck&&e!==Gb&&q("Only band and point scales support rangeStep.");var i=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,r=e===Gb?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*Wb(n,r,i)]}function bQ(e,t,n){var i=t.schemeExtent,r,s;return W(t.scheme)?s=np(t.scheme,t.interpolate,t.interpolateGamma):(r=t.scheme.toLowerCase(),s=Qb(r),s||q(`Unrecognized scheme name: ${t.scheme}`)),n=e===ep?n+1:e===Vb?n-1:e===Fl||e===Q0?+t.schemeCount||aQ:n,yk(e)?H$(s,i,t.reverse):Ie(s)?xk(H$(s,i),n):e===Hb?s:s.slice(0,n)}function H$(e,t,n){return Ie(e)&&(t||n)?vk(e,sv(t||[0,1],n)):e}function sv(e,t){return t?e.slice().reverse():e}function G$(e){P.call(this,null,e)}ee(G$,P,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(Ta(e.sort)),this.modified(n),t}});const V$="zero",Y$="center",X$="normalize",K$=["y0","y1"];function ov(e){P.call(this,null,e)}ov.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:V$,values:[V$,Y$,X$]},{name:"as",type:"string",array:!0,length:2,default:K$}]},ee(ov,P,{transform(e,t){var n=e.as||K$,i=n[0],r=n[1],s=Ta(e.sort),o=e.field||tl,a=e.offset===Y$?vQ:e.offset===X$?xQ:_Q,u,l,c,f;for(u=wQ(t.source,e.groupby,s,o),l=0,c=u.length,f=u.max;l<c;++l)a(u[l],f,o,i,r);return t.reflow(e.modified()).modifies(n)}});function vQ(e,t,n,i,r){for(var s=(t-e.sum)/2,o=e.length,a=0,u;a<o;++a)u=e[a],u[i]=s,u[r]=s+=Math.abs(n(u))}function xQ(e,t,n,i,r){for(var s=1/e.sum,o=0,a=e.length,u=0,l=0,c;u<a;++u)c=e[u],c[i]=o,c[r]=o=s*(l+=Math.abs(n(c)))}function _Q(e,t,n,i,r){for(var s=0,o=0,a=e.length,u=0,l,c;u<a;++u)c=e[u],l=+n(c),l<0?(c[i]=o,c[r]=o+=l):(c[i]=s,c[r]=s+=l)}function wQ(e,t,n,i){var r=[],s=g=>g(c),o,a,u,l,c,f,d,h,p;if(t==null)r.push(e.slice());else for(o={},a=0,u=e.length;a<u;++a)c=e[a],f=t.map(s),d=o[f],d||(o[f]=d=[],r.push(d)),d.push(c);for(f=0,p=0,l=r.length;f<l;++f){for(d=r[f],a=0,h=0,u=d.length;a<u;++a)h+=Math.abs(i(d[a]));d.sum=h,h>p&&(p=h),n&&d.sort(n)}return r.max=p,r}const EQ=Object.freeze(Object.defineProperty({__proto__:null,axisticks:R$,datajoin:O$,encode:L$,legendentries:I$,linkpath:iv,pie:rv,scale:q$,sortitems:G$,stack:ov},Symbol.toStringTag,{value:"Module"}));var Ae=1e-6,av=1e-12,je=Math.PI,Mt=je/2,jp=je/4,jn=je*2,It=180/je,ze=je/180,Ve=Math.abs,Bl=Math.atan,Yi=Math.atan2,ke=Math.cos,qp=Math.ceil,Z$=Math.exp,uv=Math.hypot,Wp=Math.log,lv=Math.pow,we=Math.sin,Xi=Math.sign||function(e){return e>0?1:e<0?-1:0},qn=Math.sqrt,cv=Math.tan;function J$(e){return e>1?0:e<-1?je:Math.acos(e)}function ui(e){return e>1?Mt:e<-1?-Mt:Math.asin(e)}function dn(){}function Hp(e,t){e&&eS.hasOwnProperty(e.type)&&eS[e.type](e,t)}var Q$={Feature:function(e,t){Hp(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,i=-1,r=n.length;++i<r;)Hp(n[i].geometry,t)}},eS={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)e=n[i],t.point(e[0],e[1],e[2])},LineString:function(e,t){fv(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)fv(n[i],t,0)},Polygon:function(e,t){tS(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)tS(n[i],t)},GeometryCollection:function(e,t){for(var n=e.geometries,i=-1,r=n.length;++i<r;)Hp(n[i],t)}};function fv(e,t,n){var i=-1,r=e.length-n,s;for(t.lineStart();++i<r;)s=e[i],t.point(s[0],s[1],s[2]);t.lineEnd()}function tS(e,t){var n=-1,i=e.length;for(t.polygonStart();++n<i;)fv(e[n],t,1);t.polygonEnd()}function js(e,t){e&&Q$.hasOwnProperty(e.type)?Q$[e.type](e,t):Hp(e,t)}var Gp=new zn,Vp=new zn,nS,iS,dv,hv,pv,is={point:dn,lineStart:dn,lineEnd:dn,polygonStart:function(){Gp=new zn,is.lineStart=CQ,is.lineEnd=kQ},polygonEnd:function(){var e=+Gp;Vp.add(e<0?jn+e:e),this.lineStart=this.lineEnd=this.point=dn},sphere:function(){Vp.add(jn)}};function CQ(){is.point=AQ}function kQ(){rS(nS,iS)}function AQ(e,t){is.point=rS,nS=e,iS=t,e*=ze,t*=ze,dv=e,hv=ke(t=t/2+jp),pv=we(t)}function rS(e,t){e*=ze,t*=ze,t=t/2+jp;var n=e-dv,i=n>=0?1:-1,r=i*n,s=ke(t),o=we(t),a=pv*o,u=hv*s+a*ke(r),l=a*i*we(r);Gp.add(Yi(l,u)),dv=e,hv=s,pv=o}function $Q(e){return Vp=new zn,js(e,is),Vp*2}function Yp(e){return[Yi(e[1],e[0]),ui(e[2])]}function Xa(e){var t=e[0],n=e[1],i=ke(n);return[i*ke(t),i*we(t),we(n)]}function Xp(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Ul(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function gv(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function Kp(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function Zp(e){var t=qn(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var St,li,Nt,Si,Ka,sS,oS,jl,Kf,Ko,qs,Ws={point:mv,lineStart:uS,lineEnd:lS,polygonStart:function(){Ws.point=cS,Ws.lineStart=SQ,Ws.lineEnd=FQ,Kf=new zn,is.polygonStart()},polygonEnd:function(){is.polygonEnd(),Ws.point=mv,Ws.lineStart=uS,Ws.lineEnd=lS,Gp<0?(St=-(Nt=180),li=-(Si=90)):Kf>Ae?Si=90:Kf<-1e-6&&(li=-90),qs[0]=St,qs[1]=Nt},sphere:function(){St=-(Nt=180),li=-(Si=90)}};function mv(e,t){Ko.push(qs=[St=e,Nt=e]),t<li&&(li=t),t>Si&&(Si=t)}function aS(e,t){var n=Xa([e*ze,t*ze]);if(jl){var i=Ul(jl,n),r=[i[1],-i[0],0],s=Ul(r,i);Zp(s),s=Yp(s);var o=e-Ka,a=o>0?1:-1,u=s[0]*It*a,l,c=Ve(o)>180;c^(a*Ka<u&&u<a*e)?(l=s[1]*It,l>Si&&(Si=l)):(u=(u+360)%360-180,c^(a*Ka<u&&u<a*e)?(l=-s[1]*It,l<li&&(li=l)):(t<li&&(li=t),t>Si&&(Si=t))),c?e<Ka?Fi(St,e)>Fi(St,Nt)&&(Nt=e):Fi(e,Nt)>Fi(St,Nt)&&(St=e):Nt>=St?(e<St&&(St=e),e>Nt&&(Nt=e)):e>Ka?Fi(St,e)>Fi(St,Nt)&&(Nt=e):Fi(e,Nt)>Fi(St,Nt)&&(St=e)}else Ko.push(qs=[St=e,Nt=e]);t<li&&(li=t),t>Si&&(Si=t),jl=n,Ka=e}function uS(){Ws.point=aS}function lS(){qs[0]=St,qs[1]=Nt,Ws.point=mv,jl=null}function cS(e,t){if(jl){var n=e-Ka;Kf.add(Ve(n)>180?n+(n>0?360:-360):n)}else sS=e,oS=t;is.point(e,t),aS(e,t)}function SQ(){is.lineStart()}function FQ(){cS(sS,oS),is.lineEnd(),Ve(Kf)>Ae&&(St=-(Nt=180)),qs[0]=St,qs[1]=Nt,jl=null}function Fi(e,t){return(t-=e)<0?t+360:t}function DQ(e,t){return e[0]-t[0]}function fS(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function TQ(e){var t,n,i,r,s,o,a;if(Si=Nt=-(St=li=1/0),Ko=[],js(e,Ws),n=Ko.length){for(Ko.sort(DQ),t=1,i=Ko[0],s=[i];t<n;++t)r=Ko[t],fS(i,r[0])||fS(i,r[1])?(Fi(i[0],r[1])>Fi(i[0],i[1])&&(i[1]=r[1]),Fi(r[0],i[1])>Fi(i[0],i[1])&&(i[0]=r[0])):s.push(i=r);for(o=-1/0,n=s.length-1,t=0,i=s[n];t<=n;i=r,++t)r=s[t],(a=Fi(i[1],r[0]))>o&&(o=a,St=r[0],Nt=i[1])}return Ko=qs=null,St===1/0||li===1/0?[[NaN,NaN],[NaN,NaN]]:[[St,li],[Nt,Si]]}var Zf,Jp,Qp,eg,tg,ng,ig,rg,yv,bv,vv,dS,hS,Wn,Hn,Gn,br={sphere:dn,point:xv,lineStart:pS,lineEnd:gS,polygonStart:function(){br.lineStart=RQ,br.lineEnd=OQ},polygonEnd:function(){br.lineStart=pS,br.lineEnd=gS}};function xv(e,t){e*=ze,t*=ze;var n=ke(t);Jf(n*ke(e),n*we(e),we(t))}function Jf(e,t,n){++Zf,Qp+=(e-Qp)/Zf,eg+=(t-eg)/Zf,tg+=(n-tg)/Zf}function pS(){br.point=MQ}function MQ(e,t){e*=ze,t*=ze;var n=ke(t);Wn=n*ke(e),Hn=n*we(e),Gn=we(t),br.point=NQ,Jf(Wn,Hn,Gn)}function NQ(e,t){e*=ze,t*=ze;var n=ke(t),i=n*ke(e),r=n*we(e),s=we(t),o=Yi(qn((o=Hn*s-Gn*r)*o+(o=Gn*i-Wn*s)*o+(o=Wn*r-Hn*i)*o),Wn*i+Hn*r+Gn*s);Jp+=o,ng+=o*(Wn+(Wn=i)),ig+=o*(Hn+(Hn=r)),rg+=o*(Gn+(Gn=s)),Jf(Wn,Hn,Gn)}function gS(){br.point=xv}function RQ(){br.point=LQ}function OQ(){mS(dS,hS),br.point=xv}function LQ(e,t){dS=e,hS=t,e*=ze,t*=ze,br.point=mS;var n=ke(t);Wn=n*ke(e),Hn=n*we(e),Gn=we(t),Jf(Wn,Hn,Gn)}function mS(e,t){e*=ze,t*=ze;var n=ke(t),i=n*ke(e),r=n*we(e),s=we(t),o=Hn*s-Gn*r,a=Gn*i-Wn*s,u=Wn*r-Hn*i,l=uv(o,a,u),c=ui(l),f=l&&-c/l;yv.add(f*o),bv.add(f*a),vv.add(f*u),Jp+=c,ng+=c*(Wn+(Wn=i)),ig+=c*(Hn+(Hn=r)),rg+=c*(Gn+(Gn=s)),Jf(Wn,Hn,Gn)}function IQ(e){Zf=Jp=Qp=eg=tg=ng=ig=rg=0,yv=new zn,bv=new zn,vv=new zn,js(e,br);var t=+yv,n=+bv,i=+vv,r=uv(t,n,i);return r<av&&(t=ng,n=ig,i=rg,Jp<Ae&&(t=Qp,n=eg,i=tg),r=uv(t,n,i),r<av)?[NaN,NaN]:[Yi(n,t)*It,ui(i/r)*It]}function _v(e,t){function n(i,r){return i=e(i,r),t(i[0],i[1])}return e.invert&&t.invert&&(n.invert=function(i,r){return i=t.invert(i,r),i&&e.invert(i[0],i[1])}),n}function wv(e,t){return Ve(e)>je&&(e-=Math.round(e/jn)*jn),[e,t]}wv.invert=wv;function yS(e,t,n){return(e%=jn)?t||n?_v(vS(e),xS(t,n)):vS(e):t||n?xS(t,n):wv}function bS(e){return function(t,n){return t+=e,Ve(t)>je&&(t-=Math.round(t/jn)*jn),[t,n]}}function vS(e){var t=bS(e);return t.invert=bS(-e),t}function xS(e,t){var n=ke(e),i=we(e),r=ke(t),s=we(t);function o(a,u){var l=ke(u),c=ke(a)*l,f=we(a)*l,d=we(u),h=d*n+c*i;return[Yi(f*r-h*s,c*n-d*i),ui(h*r+f*s)]}return o.invert=function(a,u){var l=ke(u),c=ke(a)*l,f=we(a)*l,d=we(u),h=d*r-f*s;return[Yi(f*r+d*s,c*n+h*i),ui(h*n-c*i)]},o}function PQ(e){e=yS(e[0]*ze,e[1]*ze,e.length>2?e[2]*ze:0);function t(n){return n=e(n[0]*ze,n[1]*ze),n[0]*=It,n[1]*=It,n}return t.invert=function(n){return n=e.invert(n[0]*ze,n[1]*ze),n[0]*=It,n[1]*=It,n},t}function zQ(e,t,n,i,r,s){if(n){var o=ke(t),a=we(t),u=i*n;r==null?(r=t+i*jn,s=t-u/2):(r=_S(o,r),s=_S(o,s),(i>0?r<s:r>s)&&(r+=i*jn));for(var l,c=r;i>0?c>s:c<s;c-=u)l=Yp([o,-a*ke(c),-a*we(c)]),e.point(l[0],l[1])}}function _S(e,t){t=Xa(t),t[0]-=e,Zp(t);var n=J$(-t[1]);return((-t[2]<0?-n:n)+jn-Ae)%jn}function wS(){var e=[],t;return{point:function(n,i,r){t.push([n,i,r])},lineStart:function(){e.push(t=[])},lineEnd:dn,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function sg(e,t){return Ve(e[0]-t[0])<Ae&&Ve(e[1]-t[1])<Ae}function og(e,t,n,i){this.x=e,this.z=t,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function ES(e,t,n,i,r){var s=[],o=[],a,u;if(e.forEach(function(p){if(!((g=p.length-1)<=0)){var g,m=p[0],y=p[g],b;if(sg(m,y)){if(!m[2]&&!y[2]){for(r.lineStart(),a=0;a<g;++a)r.point((m=p[a])[0],m[1]);r.lineEnd();return}y[0]+=2*Ae}s.push(b=new og(m,p,null,!0)),o.push(b.o=new og(m,null,b,!1)),s.push(b=new og(y,p,null,!1)),o.push(b.o=new og(y,null,b,!0))}}),!!s.length){for(o.sort(t),CS(s),CS(o),a=0,u=o.length;a<u;++a)o[a].e=n=!n;for(var l=s[0],c,f;;){for(var d=l,h=!0;d.v;)if((d=d.n)===l)return;c=d.z,r.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(a=0,u=c.length;a<u;++a)r.point((f=c[a])[0],f[1]);else i(d.x,d.n.x,1,r);d=d.n}else{if(h)for(c=d.p.z,a=c.length-1;a>=0;--a)r.point((f=c[a])[0],f[1]);else i(d.x,d.p.x,-1,r);d=d.p}d=d.o,c=d.z,h=!h}while(!d.v);r.lineEnd()}}}function CS(e){if(t=e.length){for(var t,n=0,i=e[0],r;++n<t;)i.n=r=e[n],r.p=i,i=r;i.n=r=e[0],r.p=i}}function Ev(e){return Ve(e[0])<=je?e[0]:Xi(e[0])*((Ve(e[0])+je)%jn-je)}function BQ(e,t){var n=Ev(t),i=t[1],r=we(i),s=[we(n),-ke(n),0],o=0,a=0,u=new zn;r===1?i=Mt+Ae:r===-1&&(i=-Mt-Ae);for(var l=0,c=e.length;l<c;++l)if(d=(f=e[l]).length)for(var f,d,h=f[d-1],p=Ev(h),g=h[1]/2+jp,m=we(g),y=ke(g),b=0;b<d;++b,p=x,m=E,y=w,h=v){var v=f[b],x=Ev(v),_=v[1]/2+jp,E=we(_),w=ke(_),C=x-p,k=C>=0?1:-1,S=k*C,$=S>je,O=m*E;if(u.add(Yi(O*k*we(S),y*w+O*ke(S))),o+=$?C+k*jn:C,$^p>=n^x>=n){var R=Ul(Xa(h),Xa(v));Zp(R);var F=Ul(s,R);Zp(F);var A=($^C>=0?-1:1)*ui(F[2]);(i>A||i===A&&(R[0]||R[1]))&&(a+=$^C>=0?1:-1)}}return(o<-1e-6||o<Ae&&u<-1e-12)^a&1}function kS(e,t,n,i){return function(r){var s=t(r),o=wS(),a=t(o),u=!1,l,c,f,d={point:h,lineStart:g,lineEnd:m,polygonStart:function(){d.point=y,d.lineStart=b,d.lineEnd=v,c=[],l=[]},polygonEnd:function(){d.point=h,d.lineStart=g,d.lineEnd=m,c=p8(c);var x=BQ(l,i);c.length?(u||(r.polygonStart(),u=!0),ES(c,jQ,x,n,r)):x&&(u||(r.polygonStart(),u=!0),r.lineStart(),n(null,null,1,r),r.lineEnd()),u&&(r.polygonEnd(),u=!1),c=l=null},sphere:function(){r.polygonStart(),r.lineStart(),n(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function h(x,_){e(x,_)&&r.point(x,_)}function p(x,_){s.point(x,_)}function g(){d.point=p,s.lineStart()}function m(){d.point=h,s.lineEnd()}function y(x,_){f.push([x,_]),a.point(x,_)}function b(){a.lineStart(),f=[]}function v(){y(f[0][0],f[0][1]),a.lineEnd();var x=a.clean(),_=o.result(),E,w=_.length,C,k,S;if(f.pop(),l.push(f),f=null,!!w){if(x&1){if(k=_[0],(C=k.length-1)>0){for(u||(r.polygonStart(),u=!0),r.lineStart(),E=0;E<C;++E)r.point((S=k[E])[0],S[1]);r.lineEnd()}return}w>1&&x&2&&_.push(_.pop().concat(_.shift())),c.push(_.filter(UQ))}}return d}}function UQ(e){return e.length>1}function jQ(e,t){return((e=e.x)[0]<0?e[1]-Mt-Ae:Mt-e[1])-((t=t.x)[0]<0?t[1]-Mt-Ae:Mt-t[1])}const AS=kS(function(){return!0},qQ,HQ,[-je,-Mt]);function qQ(e){var t=NaN,n=NaN,i=NaN,r;return{lineStart:function(){e.lineStart(),r=1},point:function(s,o){var a=s>0?je:-je,u=Ve(s-t);Ve(u-je)<Ae?(e.point(t,n=(n+o)/2>0?Mt:-Mt),e.point(i,n),e.lineEnd(),e.lineStart(),e.point(a,n),e.point(s,n),r=0):i!==a&&u>=je&&(Ve(t-i)<Ae&&(t-=i*Ae),Ve(s-a)<Ae&&(s-=a*Ae),n=WQ(t,n,s,o),e.point(i,n),e.lineEnd(),e.lineStart(),e.point(a,n),r=0),e.point(t=s,n=o),i=a},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-r}}}function WQ(e,t,n,i){var r,s,o=we(e-n);return Ve(o)>Ae?Bl((we(t)*(s=ke(i))*we(n)-we(i)*(r=ke(t))*we(e))/(r*s*o)):(t+i)/2}function HQ(e,t,n,i){var r;if(e==null)r=n*Mt,i.point(-je,r),i.point(0,r),i.point(je,r),i.point(je,0),i.point(je,-r),i.point(0,-r),i.point(-je,-r),i.point(-je,0),i.point(-je,r);else if(Ve(e[0]-t[0])>Ae){var s=e[0]<t[0]?je:-je;r=n*s/2,i.point(-s,r),i.point(0,r),i.point(s,r)}else i.point(t[0],t[1])}function GQ(e){var t=ke(e),n=2*ze,i=t>0,r=Ve(t)>Ae;function s(c,f,d,h){zQ(h,e,n,d,c,f)}function o(c,f){return ke(c)*ke(f)>t}function a(c){var f,d,h,p,g;return{lineStart:function(){p=h=!1,g=1},point:function(m,y){var b=[m,y],v,x=o(m,y),_=i?x?0:l(m,y):x?l(m+(m<0?je:-je),y):0;if(!f&&(p=h=x)&&c.lineStart(),x!==h&&(v=u(f,b),(!v||sg(f,v)||sg(b,v))&&(b[2]=1)),x!==h)g=0,x?(c.lineStart(),v=u(b,f),c.point(v[0],v[1])):(v=u(f,b),c.point(v[0],v[1],2),c.lineEnd()),f=v;else if(r&&f&&i^x){var E;!(_&d)&&(E=u(b,f,!0))&&(g=0,i?(c.lineStart(),c.point(E[0][0],E[0][1]),c.point(E[1][0],E[1][1]),c.lineEnd()):(c.point(E[1][0],E[1][1]),c.lineEnd(),c.lineStart(),c.point(E[0][0],E[0][1],3)))}x&&(!f||!sg(f,b))&&c.point(b[0],b[1]),f=b,h=x,d=_},lineEnd:function(){h&&c.lineEnd(),f=null},clean:function(){return g|(p&&h)<<1}}}function u(c,f,d){var h=Xa(c),p=Xa(f),g=[1,0,0],m=Ul(h,p),y=Xp(m,m),b=m[0],v=y-b*b;if(!v)return!d&&c;var x=t*y/v,_=-t*b/v,E=Ul(g,m),w=Kp(g,x),C=Kp(m,_);gv(w,C);var k=E,S=Xp(w,k),$=Xp(k,k),O=S*S-$*(Xp(w,w)-1);if(!(O<0)){var R=qn(O),F=Kp(k,(-S-R)/$);if(gv(F,w),F=Yp(F),!d)return F;var A=c[0],T=f[0],B=c[1],H=f[1],z;T<A&&(z=A,A=T,T=z);var ne=T-A,be=Ve(ne-je)<Ae,de=be||ne<Ae;if(!be&&H<B&&(z=B,B=H,H=z),de?be?B+H>0^F[1]<(Ve(F[0]-A)<Ae?B:H):B<=F[1]&&F[1]<=H:ne>je^(A<=F[0]&&F[0]<=T)){var Te=Kp(k,(-S+R)/$);return gv(Te,w),[F,Yp(Te)]}}}function l(c,f){var d=i?e:je-e,h=0;return c<-d?h|=1:c>d&&(h|=2),f<-d?h|=4:f>d&&(h|=8),h}return kS(o,a,s,i?[0,-e]:[-je,e-je])}function VQ(e,t,n,i,r,s){var o=e[0],a=e[1],u=t[0],l=t[1],c=0,f=1,d=u-o,h=l-a,p;if(p=n-o,!(!d&&p>0)){if(p/=d,d<0){if(p<c)return;p<f&&(f=p)}else if(d>0){if(p>f)return;p>c&&(c=p)}if(p=r-o,!(!d&&p<0)){if(p/=d,d<0){if(p>f)return;p>c&&(c=p)}else if(d>0){if(p<c)return;p<f&&(f=p)}if(p=i-a,!(!h&&p>0)){if(p/=h,h<0){if(p<c)return;p<f&&(f=p)}else if(h>0){if(p>f)return;p>c&&(c=p)}if(p=s-a,!(!h&&p<0)){if(p/=h,h<0){if(p>f)return;p>c&&(c=p)}else if(h>0){if(p<c)return;p<f&&(f=p)}return c>0&&(e[0]=o+c*d,e[1]=a+c*h),f<1&&(t[0]=o+f*d,t[1]=a+f*h),!0}}}}}var ag=1e9,ug=-1e9;function $S(e,t,n,i){function r(l,c){return e<=l&&l<=n&&t<=c&&c<=i}function s(l,c,f,d){var h=0,p=0;if(l==null||(h=o(l,f))!==(p=o(c,f))||u(l,c)<0^f>0)do d.point(h===0||h===3?e:n,h>1?i:t);while((h=(h+f+4)%4)!==p);else d.point(c[0],c[1])}function o(l,c){return Ve(l[0]-e)<Ae?c>0?0:3:Ve(l[0]-n)<Ae?c>0?2:1:Ve(l[1]-t)<Ae?c>0?1:0:c>0?3:2}function a(l,c){return u(l.x,c.x)}function u(l,c){var f=o(l,1),d=o(c,1);return f!==d?f-d:f===0?c[1]-l[1]:f===1?l[0]-c[0]:f===2?l[1]-c[1]:c[0]-l[0]}return function(l){var c=l,f=wS(),d,h,p,g,m,y,b,v,x,_,E,w={point:C,lineStart:O,lineEnd:R,polygonStart:S,polygonEnd:$};function C(A,T){r(A,T)&&c.point(A,T)}function k(){for(var A=0,T=0,B=h.length;T<B;++T)for(var H=h[T],z=1,ne=H.length,be=H[0],de,Te,ct=be[0],$e=be[1];z<ne;++z)de=ct,Te=$e,be=H[z],ct=be[0],$e=be[1],Te<=i?$e>i&&(ct-de)*(i-Te)>($e-Te)*(e-de)&&++A:$e<=i&&(ct-de)*(i-Te)<($e-Te)*(e-de)&&--A;return A}function S(){c=f,d=[],h=[],E=!0}function $(){var A=k(),T=E&&A,B=(d=p8(d)).length;(T||B)&&(l.polygonStart(),T&&(l.lineStart(),s(null,null,1,l),l.lineEnd()),B&&ES(d,a,A,s,l),l.polygonEnd()),c=l,d=h=p=null}function O(){w.point=F,h&&h.push(p=[]),_=!0,x=!1,b=v=NaN}function R(){d&&(F(g,m),y&&x&&f.rejoin(),d.push(f.result())),w.point=C,x&&c.lineEnd()}function F(A,T){var B=r(A,T);if(h&&p.push([A,T]),_)g=A,m=T,y=B,_=!1,B&&(c.lineStart(),c.point(A,T));else if(B&&x)c.point(A,T);else{var H=[b=Math.max(ug,Math.min(ag,b)),v=Math.max(ug,Math.min(ag,v))],z=[A=Math.max(ug,Math.min(ag,A)),T=Math.max(ug,Math.min(ag,T))];VQ(H,z,e,t,n,i)?(x||(c.lineStart(),c.point(H[0],H[1])),c.point(z[0],z[1]),B||c.lineEnd(),E=!1):B&&(c.lineStart(),c.point(A,T),E=!1)}b=A,v=T,x=B}return w}}function SS(e,t,n){var i=Ei(e,t-Ae,n).concat(t);return function(r){return i.map(function(s){return[r,s]})}}function FS(e,t,n){var i=Ei(e,t-Ae,n).concat(t);return function(r){return i.map(function(s){return[s,r]})}}function YQ(){var e,t,n,i,r,s,o,a,u=10,l=u,c=90,f=360,d,h,p,g,m=2.5;function y(){return{type:"MultiLineString",coordinates:b()}}function b(){return Ei(qp(i/c)*c,n,c).map(p).concat(Ei(qp(a/f)*f,o,f).map(g)).concat(Ei(qp(t/u)*u,e,u).filter(function(v){return Ve(v%c)>Ae}).map(d)).concat(Ei(qp(s/l)*l,r,l).filter(function(v){return Ve(v%f)>Ae}).map(h))}return y.lines=function(){return b().map(function(v){return{type:"LineString",coordinates:v}})},y.outline=function(){return{type:"Polygon",coordinates:[p(i).concat(g(o).slice(1),p(n).reverse().slice(1),g(a).reverse().slice(1))]}},y.extent=function(v){return arguments.length?y.extentMajor(v).extentMinor(v):y.extentMinor()},y.extentMajor=function(v){return arguments.length?(i=+v[0][0],n=+v[1][0],a=+v[0][1],o=+v[1][1],i>n&&(v=i,i=n,n=v),a>o&&(v=a,a=o,o=v),y.precision(m)):[[i,a],[n,o]]},y.extentMinor=function(v){return arguments.length?(t=+v[0][0],e=+v[1][0],s=+v[0][1],r=+v[1][1],t>e&&(v=t,t=e,e=v),s>r&&(v=s,s=r,r=v),y.precision(m)):[[t,s],[e,r]]},y.step=function(v){return arguments.length?y.stepMajor(v).stepMinor(v):y.stepMinor()},y.stepMajor=function(v){return arguments.length?(c=+v[0],f=+v[1],y):[c,f]},y.stepMinor=function(v){return arguments.length?(u=+v[0],l=+v[1],y):[u,l]},y.precision=function(v){return arguments.length?(m=+v,d=SS(s,r,90),h=FS(t,e,m),p=SS(a,o,90),g=FS(i,n,m),y):m},y.extentMajor([[-180,-90+Ae],[180,90-Ae]]).extentMinor([[-180,-80-Ae],[180,80+Ae]])}const Qf=e=>e;var Cv=new zn,kv=new zn,DS,TS,Av,$v,Hs={point:dn,lineStart:dn,lineEnd:dn,polygonStart:function(){Hs.lineStart=XQ,Hs.lineEnd=ZQ},polygonEnd:function(){Hs.lineStart=Hs.lineEnd=Hs.point=dn,Cv.add(Ve(kv)),kv=new zn},result:function(){var e=Cv/2;return Cv=new zn,e}};function XQ(){Hs.point=KQ}function KQ(e,t){Hs.point=MS,DS=Av=e,TS=$v=t}function MS(e,t){kv.add($v*e-Av*t),Av=e,$v=t}function ZQ(){MS(DS,TS)}var ql=1/0,lg=ql,ed=-ql,cg=ed,fg={point:JQ,lineStart:dn,lineEnd:dn,polygonStart:dn,polygonEnd:dn,result:function(){var e=[[ql,lg],[ed,cg]];return ed=cg=-(lg=ql=1/0),e}};function JQ(e,t){e<ql&&(ql=e),e>ed&&(ed=e),t<lg&&(lg=t),t>cg&&(cg=t)}var Sv=0,Fv=0,td=0,dg=0,hg=0,Wl=0,Dv=0,Tv=0,nd=0,NS,RS,rs,ss,Ki={point:Za,lineStart:OS,lineEnd:LS,polygonStart:function(){Ki.lineStart=tee,Ki.lineEnd=nee},polygonEnd:function(){Ki.point=Za,Ki.lineStart=OS,Ki.lineEnd=LS},result:function(){var e=nd?[Dv/nd,Tv/nd]:Wl?[dg/Wl,hg/Wl]:td?[Sv/td,Fv/td]:[NaN,NaN];return Sv=Fv=td=dg=hg=Wl=Dv=Tv=nd=0,e}};function Za(e,t){Sv+=e,Fv+=t,++td}function OS(){Ki.point=QQ}function QQ(e,t){Ki.point=eee,Za(rs=e,ss=t)}function eee(e,t){var n=e-rs,i=t-ss,r=qn(n*n+i*i);dg+=r*(rs+e)/2,hg+=r*(ss+t)/2,Wl+=r,Za(rs=e,ss=t)}function LS(){Ki.point=Za}function tee(){Ki.point=iee}function nee(){IS(NS,RS)}function iee(e,t){Ki.point=IS,Za(NS=rs=e,RS=ss=t)}function IS(e,t){var n=e-rs,i=t-ss,r=qn(n*n+i*i);dg+=r*(rs+e)/2,hg+=r*(ss+t)/2,Wl+=r,r=ss*e-rs*t,Dv+=r*(rs+e),Tv+=r*(ss+t),nd+=r*3,Za(rs=e,ss=t)}function PS(e){this._context=e}PS.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,jn);break}}},result:dn};var Mv=new zn,Nv,zS,BS,id,rd,sd={point:dn,lineStart:function(){sd.point=ree},lineEnd:function(){Nv&&US(zS,BS),sd.point=dn},polygonStart:function(){Nv=!0},polygonEnd:function(){Nv=null},result:function(){var e=+Mv;return Mv=new zn,e}};function ree(e,t){sd.point=US,zS=id=e,BS=rd=t}function US(e,t){id-=e,rd-=t,Mv.add(qn(id*id+rd*rd)),id=e,rd=t}let jS,pg,qS,WS;class HS{constructor(t){this._append=t==null?GS:see(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==qS||this._append!==pg){const i=this._radius,r=this._;this._="",this._append`m0,${i}a${i},${i} 0 1,1 0,${-2*i}a${i},${i} 0 1,1 0,${2*i}z`,qS=i,pg=this._append,WS=this._,this._=r}this._+=WS;break}}}result(){const t=this._;return this._="",t.length?t:null}}function GS(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function see(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return GS;if(t!==jS){const n=10**t;jS=t,pg=function(r){let s=1;this._+=r[0];for(const o=r.length;s<o;++s)this._+=Math.round(arguments[s]*n)/n+r[s]}}return pg}function VS(e,t){let n=3,i=4.5,r,s;function o(a){return a&&(typeof i=="function"&&s.pointRadius(+i.apply(this,arguments)),js(a,r(s))),s.result()}return o.area=function(a){return js(a,r(Hs)),Hs.result()},o.measure=function(a){return js(a,r(sd)),sd.result()},o.bounds=function(a){return js(a,r(fg)),fg.result()},o.centroid=function(a){return js(a,r(Ki)),Ki.result()},o.projection=function(a){return arguments.length?(r=a==null?(e=null,Qf):(e=a).stream,o):e},o.context=function(a){return arguments.length?(s=a==null?(t=null,new HS(n)):new PS(t=a),typeof i!="function"&&s.pointRadius(i),o):t},o.pointRadius=function(a){return arguments.length?(i=typeof a=="function"?a:(s.pointRadius(+a),+a),o):i},o.digits=function(a){if(!arguments.length)return n;if(a==null)n=null;else{const u=Math.floor(a);if(!(u>=0))throw new RangeError(`invalid digits: ${a}`);n=u}return t===null&&(s=new HS(n)),o},o.projection(e).digits(n).context(t)}function gg(e){return function(t){var n=new Rv;for(var i in e)n[i]=e[i];return n.stream=t,n}}function Rv(){}Rv.prototype={constructor:Rv,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Ov(e,t,n){var i=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),i!=null&&e.clipExtent(null),js(n,e.stream(fg)),t(fg.result()),i!=null&&e.clipExtent(i),e}function mg(e,t,n){return Ov(e,function(i){var r=t[1][0]-t[0][0],s=t[1][1]-t[0][1],o=Math.min(r/(i[1][0]-i[0][0]),s/(i[1][1]-i[0][1])),a=+t[0][0]+(r-o*(i[1][0]+i[0][0]))/2,u=+t[0][1]+(s-o*(i[1][1]+i[0][1]))/2;e.scale(150*o).translate([a,u])},n)}function Lv(e,t,n){return mg(e,[[0,0],t],n)}function Iv(e,t,n){return Ov(e,function(i){var r=+t,s=r/(i[1][0]-i[0][0]),o=(r-s*(i[1][0]+i[0][0]))/2,a=-s*i[0][1];e.scale(150*s).translate([o,a])},n)}function Pv(e,t,n){return Ov(e,function(i){var r=+t,s=r/(i[1][1]-i[0][1]),o=-s*i[0][0],a=(r-s*(i[1][1]+i[0][1]))/2;e.scale(150*s).translate([o,a])},n)}var YS=16,oee=ke(30*ze);function XS(e,t){return+t?uee(e,t):aee(e)}function aee(e){return gg({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function uee(e,t){function n(i,r,s,o,a,u,l,c,f,d,h,p,g,m){var y=l-i,b=c-r,v=y*y+b*b;if(v>4*t&&g--){var x=o+d,_=a+h,E=u+p,w=qn(x*x+_*_+E*E),C=ui(E/=w),k=Ve(Ve(E)-1)<Ae||Ve(s-f)<Ae?(s+f)/2:Yi(_,x),S=e(k,C),$=S[0],O=S[1],R=$-i,F=O-r,A=b*R-y*F;(A*A/v>t||Ve((y*R+b*F)/v-.5)>.3||o*d+a*h+u*p<oee)&&(n(i,r,s,o,a,u,$,O,k,x/=w,_/=w,E,g,m),m.point($,O),n($,O,k,x,_,E,l,c,f,d,h,p,g,m))}}return function(i){var r,s,o,a,u,l,c,f,d,h,p,g,m={point:y,lineStart:b,lineEnd:x,polygonStart:function(){i.polygonStart(),m.lineStart=_},polygonEnd:function(){i.polygonEnd(),m.lineStart=b}};function y(C,k){C=e(C,k),i.point(C[0],C[1])}function b(){f=NaN,m.point=v,i.lineStart()}function v(C,k){var S=Xa([C,k]),$=e(C,k);n(f,d,c,h,p,g,f=$[0],d=$[1],c=C,h=S[0],p=S[1],g=S[2],YS,i),i.point(f,d)}function x(){m.point=y,i.lineEnd()}function _(){b(),m.point=E,m.lineEnd=w}function E(C,k){v(r=C,k),s=f,o=d,a=h,u=p,l=g,m.point=v}function w(){n(f,d,c,h,p,g,s,o,r,a,u,l,YS,i),m.lineEnd=x,x()}return m}}var lee=gg({point:function(e,t){this.stream.point(e*ze,t*ze)}});function cee(e){return gg({point:function(t,n){var i=e(t,n);return this.stream.point(i[0],i[1])}})}function fee(e,t,n,i,r){function s(o,a){return o*=i,a*=r,[t+e*o,n-e*a]}return s.invert=function(o,a){return[(o-t)/e*i,(n-a)/e*r]},s}function KS(e,t,n,i,r,s){if(!s)return fee(e,t,n,i,r);var o=ke(s),a=we(s),u=o*e,l=a*e,c=o/e,f=a/e,d=(a*n-o*t)/e,h=(a*t+o*n)/e;function p(g,m){return g*=i,m*=r,[u*g-l*m+t,n-l*g-u*m]}return p.invert=function(g,m){return[i*(c*g-f*m+d),r*(h-f*g-c*m)]},p}function os(e){return ZS(function(){return e})()}function ZS(e){var t,n=150,i=480,r=250,s=0,o=0,a=0,u=0,l=0,c,f=0,d=1,h=1,p=null,g=AS,m=null,y,b,v,x=Qf,_=.5,E,w,C,k,S;function $(A){return C(A[0]*ze,A[1]*ze)}function O(A){return A=C.invert(A[0],A[1]),A&&[A[0]*It,A[1]*It]}$.stream=function(A){return k&&S===A?k:k=lee(cee(c)(g(E(x(S=A)))))},$.preclip=function(A){return arguments.length?(g=A,p=void 0,F()):g},$.postclip=function(A){return arguments.length?(x=A,m=y=b=v=null,F()):x},$.clipAngle=function(A){return arguments.length?(g=+A?GQ(p=A*ze):(p=null,AS),F()):p*It},$.clipExtent=function(A){return arguments.length?(x=A==null?(m=y=b=v=null,Qf):$S(m=+A[0][0],y=+A[0][1],b=+A[1][0],v=+A[1][1]),F()):m==null?null:[[m,y],[b,v]]},$.scale=function(A){return arguments.length?(n=+A,R()):n},$.translate=function(A){return arguments.length?(i=+A[0],r=+A[1],R()):[i,r]},$.center=function(A){return arguments.length?(s=A[0]%360*ze,o=A[1]%360*ze,R()):[s*It,o*It]},$.rotate=function(A){return arguments.length?(a=A[0]%360*ze,u=A[1]%360*ze,l=A.length>2?A[2]%360*ze:0,R()):[a*It,u*It,l*It]},$.angle=function(A){return arguments.length?(f=A%360*ze,R()):f*It},$.reflectX=function(A){return arguments.length?(d=A?-1:1,R()):d<0},$.reflectY=function(A){return arguments.length?(h=A?-1:1,R()):h<0},$.precision=function(A){return arguments.length?(E=XS(w,_=A*A),F()):qn(_)},$.fitExtent=function(A,T){return mg($,A,T)},$.fitSize=function(A,T){return Lv($,A,T)},$.fitWidth=function(A,T){return Iv($,A,T)},$.fitHeight=function(A,T){return Pv($,A,T)};function R(){var A=KS(n,0,0,d,h,f).apply(null,t(s,o)),T=KS(n,i-A[0],r-A[1],d,h,f);return c=yS(a,u,l),w=_v(t,T),C=_v(c,w),E=XS(w,_),F()}function F(){return k=S=null,$}return function(){return t=e.apply(this,arguments),$.invert=t.invert&&O,R()}}function zv(e){var t=0,n=je/3,i=ZS(e),r=i(t,n);return r.parallels=function(s){return arguments.length?i(t=s[0]*ze,n=s[1]*ze):[t*It,n*It]},r}function dee(e){var t=ke(e);function n(i,r){return[i*t,we(r)/t]}return n.invert=function(i,r){return[i/t,ui(r*t)]},n}function hee(e,t){var n=we(e),i=(n+we(t))/2;if(Ve(i)<Ae)return dee(e);var r=1+n*(2*i-n),s=qn(r)/i;function o(a,u){var l=qn(r-2*i*we(u))/i;return[l*we(a*=i),s-l*ke(a)]}return o.invert=function(a,u){var l=s-u,c=Yi(a,Ve(l))*Xi(l);return l*i<0&&(c-=je*Xi(a)*Xi(l)),[c/i,ui((r-(a*a+l*l)*i*i)/(2*i))]},o}function yg(){return zv(hee).scale(155.424).center([0,33.6442])}function JS(){return yg().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function pee(e){var t=e.length;return{point:function(n,i){for(var r=-1;++r<t;)e[r].point(n,i)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function gee(){var e,t,n=JS(),i,r=yg().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s,o=yg().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,u,l={point:function(d,h){u=[d,h]}};function c(d){var h=d[0],p=d[1];return u=null,i.point(h,p),u||(s.point(h,p),u)||(a.point(h,p),u)}c.invert=function(d){var h=n.scale(),p=n.translate(),g=(d[0]-p[0])/h,m=(d[1]-p[1])/h;return(m>=.12&&m<.234&&g>=-.425&&g<-.214?r:m>=.166&&m<.234&&g>=-.214&&g<-.115?o:n).invert(d)},c.stream=function(d){return e&&t===d?e:e=pee([n.stream(t=d),r.stream(d),o.stream(d)])},c.precision=function(d){return arguments.length?(n.precision(d),r.precision(d),o.precision(d),f()):n.precision()},c.scale=function(d){return arguments.length?(n.scale(d),r.scale(d*.35),o.scale(d),c.translate(n.translate())):n.scale()},c.translate=function(d){if(!arguments.length)return n.translate();var h=n.scale(),p=+d[0],g=+d[1];return i=n.translate(d).clipExtent([[p-.455*h,g-.238*h],[p+.455*h,g+.238*h]]).stream(l),s=r.translate([p-.307*h,g+.201*h]).clipExtent([[p-.425*h+Ae,g+.12*h+Ae],[p-.214*h-Ae,g+.234*h-Ae]]).stream(l),a=o.translate([p-.205*h,g+.212*h]).clipExtent([[p-.214*h+Ae,g+.166*h+Ae],[p-.115*h-Ae,g+.234*h-Ae]]).stream(l),f()},c.fitExtent=function(d,h){return mg(c,d,h)},c.fitSize=function(d,h){return Lv(c,d,h)},c.fitWidth=function(d,h){return Iv(c,d,h)},c.fitHeight=function(d,h){return Pv(c,d,h)};function f(){return e=t=null,c}return c.scale(1070)}function QS(e){return function(t,n){var i=ke(t),r=ke(n),s=e(i*r);return s===1/0?[2,0]:[s*r*we(t),s*we(n)]}}function od(e){return function(t,n){var i=qn(t*t+n*n),r=e(i),s=we(r),o=ke(r);return[Yi(t*s,i*o),ui(i&&n*s/i)]}}var eF=QS(function(e){return qn(2/(1+e))});eF.invert=od(function(e){return 2*ui(e/2)});function mee(){return os(eF).scale(124.75).clipAngle(180-.001)}var tF=QS(function(e){return(e=J$(e))&&e/we(e)});tF.invert=od(function(e){return e});function yee(){return os(tF).scale(79.4188).clipAngle(180-.001)}function bg(e,t){return[e,Wp(cv((Mt+t)/2))]}bg.invert=function(e,t){return[e,2*Bl(Z$(t))-Mt]};function bee(){return nF(bg).scale(961/jn)}function nF(e){var t=os(e),n=t.center,i=t.scale,r=t.translate,s=t.clipExtent,o=null,a,u,l;t.scale=function(f){return arguments.length?(i(f),c()):i()},t.translate=function(f){return arguments.length?(r(f),c()):r()},t.center=function(f){return arguments.length?(n(f),c()):n()},t.clipExtent=function(f){return arguments.length?(f==null?o=a=u=l=null:(o=+f[0][0],a=+f[0][1],u=+f[1][0],l=+f[1][1]),c()):o==null?null:[[o,a],[u,l]]};function c(){var f=je*i(),d=t(PQ(t.rotate()).invert([0,0]));return s(o==null?[[d[0]-f,d[1]-f],[d[0]+f,d[1]+f]]:e===bg?[[Math.max(d[0]-f,o),a],[Math.min(d[0]+f,u),l]]:[[o,Math.max(d[1]-f,a)],[u,Math.min(d[1]+f,l)]])}return c()}function vg(e){return cv((Mt+e)/2)}function vee(e,t){var n=ke(e),i=e===t?we(e):Wp(n/ke(t))/Wp(vg(t)/vg(e)),r=n*lv(vg(e),i)/i;if(!i)return bg;function s(o,a){r>0?a<-Mt+Ae&&(a=-Mt+Ae):a>Mt-Ae&&(a=Mt-Ae);var u=r/lv(vg(a),i);return[u*we(i*o),r-u*ke(i*o)]}return s.invert=function(o,a){var u=r-a,l=Xi(i)*qn(o*o+u*u),c=Yi(o,Ve(u))*Xi(u);return u*i<0&&(c-=je*Xi(o)*Xi(u)),[c/i,2*Bl(lv(r/l,1/i))-Mt]},s}function xee(){return zv(vee).scale(109.5).parallels([30,30])}function xg(e,t){return[e,t]}xg.invert=xg;function _ee(){return os(xg).scale(152.63)}function wee(e,t){var n=ke(e),i=e===t?we(e):(n-ke(t))/(t-e),r=n/i+e;if(Ve(i)<Ae)return xg;function s(o,a){var u=r-a,l=i*o;return[u*we(l),r-u*ke(l)]}return s.invert=function(o,a){var u=r-a,l=Yi(o,Ve(u))*Xi(u);return u*i<0&&(l-=je*Xi(o)*Xi(u)),[l/i,r-Xi(i)*qn(o*o+u*u)]},s}function Eee(){return zv(wee).scale(131.154).center([0,13.9389])}var ad=1.340264,ud=-.081106,ld=893e-6,cd=.003796,_g=qn(3)/2,Cee=12;function iF(e,t){var n=ui(_g*we(t)),i=n*n,r=i*i*i;return[e*ke(n)/(_g*(ad+3*ud*i+r*(7*ld+9*cd*i))),n*(ad+ud*i+r*(ld+cd*i))]}iF.invert=function(e,t){for(var n=t,i=n*n,r=i*i*i,s=0,o,a,u;s<Cee&&(a=n*(ad+ud*i+r*(ld+cd*i))-t,u=ad+3*ud*i+r*(7*ld+9*cd*i),n-=o=a/u,i=n*n,r=i*i*i,!(Ve(o)<av));++s);return[_g*e*(ad+3*ud*i+r*(7*ld+9*cd*i))/ke(n),ui(we(n)/_g)]};function kee(){return os(iF).scale(177.158)}function rF(e,t){var n=ke(t),i=ke(e)*n;return[n*we(e)/i,we(t)/i]}rF.invert=od(Bl);function Aee(){return os(rF).scale(144.049).clipAngle(60)}function $ee(){var e=1,t=0,n=0,i=1,r=1,s=0,o,a,u=null,l,c,f,d=1,h=1,p=gg({point:function(x,_){var E=v([x,_]);this.stream.point(E[0],E[1])}}),g=Qf,m,y;function b(){return d=e*i,h=e*r,m=y=null,v}function v(x){var _=x[0]*d,E=x[1]*h;if(s){var w=E*o-_*a;_=_*o+E*a,E=w}return[_+t,E+n]}return v.invert=function(x){var _=x[0]-t,E=x[1]-n;if(s){var w=E*o+_*a;_=_*o-E*a,E=w}return[_/d,E/h]},v.stream=function(x){return m&&y===x?m:m=p(g(y=x))},v.postclip=function(x){return arguments.length?(g=x,u=l=c=f=null,b()):g},v.clipExtent=function(x){return arguments.length?(g=x==null?(u=l=c=f=null,Qf):$S(u=+x[0][0],l=+x[0][1],c=+x[1][0],f=+x[1][1]),b()):u==null?null:[[u,l],[c,f]]},v.scale=function(x){return arguments.length?(e=+x,b()):e},v.translate=function(x){return arguments.length?(t=+x[0],n=+x[1],b()):[t,n]},v.angle=function(x){return arguments.length?(s=x%360*ze,a=we(s),o=ke(s),b()):s*It},v.reflectX=function(x){return arguments.length?(i=x?-1:1,b()):i<0},v.reflectY=function(x){return arguments.length?(r=x?-1:1,b()):r<0},v.fitExtent=function(x,_){return mg(v,x,_)},v.fitSize=function(x,_){return Lv(v,x,_)},v.fitWidth=function(x,_){return Iv(v,x,_)},v.fitHeight=function(x,_){return Pv(v,x,_)},v}function sF(e,t){var n=t*t,i=n*n;return[e*(.8707-.131979*n+i*(-.013791+i*(.003971*n-.001529*i))),t*(1.007226+n*(.015085+i*(-.044475+.028874*n-.005916*i)))]}sF.invert=function(e,t){var n=t,i=25,r;do{var s=n*n,o=s*s;n-=r=(n*(1.007226+s*(.015085+o*(-.044475+.028874*s-.005916*o)))-t)/(1.007226+s*(.015085*3+o*(-.044475*7+.028874*9*s-.005916*11*o)))}while(Ve(r)>Ae&&--i>0);return[e/(.8707+(s=n*n)*(-.131979+s*(-.013791+s*s*s*(.003971-.001529*s)))),n]};function See(){return os(sF).scale(175.295)}function oF(e,t){return[ke(t)*we(e),we(t)]}oF.invert=od(ui);function Fee(){return os(oF).scale(249.5).clipAngle(90+Ae)}function aF(e,t){var n=ke(t),i=1+ke(e)*n;return[n*we(e)/i,we(t)/i]}aF.invert=od(function(e){return 2*Bl(e)});function Dee(){return os(aF).scale(250).clipAngle(142)}function uF(e,t){return[Wp(cv((Mt+t)/2)),-e]}uF.invert=function(e,t){return[-t,2*Bl(Z$(e))-Mt]};function Tee(){var e=nF(uF),t=e.center,n=e.rotate;return e.center=function(i){return arguments.length?t([-i[1],i[0]]):(i=t(),[i[1],-i[0]])},e.rotate=function(i){return arguments.length?n([i[0],i[1],i.length>2?i[2]+90:90]):(i=n(),[i[0],i[1],i[2]-90])},n([0,0,90]).scale(159.155)}var Mee=Math.abs,Bv=Math.cos,wg=Math.sin,Nee=1e-6,lF=Math.PI,Uv=lF/2,cF=Ree(2);function fF(e){return e>1?Uv:e<-1?-Uv:Math.asin(e)}function Ree(e){return e>0?Math.sqrt(e):0}function Oee(e,t){var n=e*wg(t),i=30,r;do t-=r=(t+wg(t)-n)/(1+Bv(t));while(Mee(r)>Nee&&--i>0);return t/2}function Lee(e,t,n){function i(r,s){return[e*r*Bv(s=Oee(n,s)),t*wg(s)]}return i.invert=function(r,s){return s=fF(s/t),[r/(e*Bv(s)),fF((2*s+wg(2*s))/n)]},i}var Iee=Lee(cF/Uv,cF,lF);function Pee(){return os(Iee).scale(169.529)}const zee=VS(),jv=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function Bee(e,t){return function n(){const i=t();return i.type=e,i.path=VS().projection(i),i.copy=i.copy||function(){const r=n();return jv.forEach(s=>{i[s]&&r[s](i[s]())}),r.path.pointRadius(i.path.pointRadius()),r},pk(i)}}function qv(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(Eg[e]=Bee(e,t),this):Eg[e]||null}function dF(e){return e&&e.path||zee}const Eg={albers:JS,albersusa:gee,azimuthalequalarea:mee,azimuthalequidistant:yee,conicconformal:xee,conicequalarea:yg,conicequidistant:Eee,equalEarth:kee,equirectangular:_ee,gnomonic:Aee,identity:$ee,mercator:bee,mollweide:Pee,naturalEarth1:See,orthographic:Fee,stereographic:Dee,transversemercator:Tee};for(const e in Eg)qv(e,Eg[e]);function Uee(){}const Gs=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function hF(){var e=1,t=1,n=a;function i(u,l){return l.map(c=>r(u,c))}function r(u,l){var c=[],f=[];return s(u,l,d=>{n(d,u,l),jee(d)>0?c.push([d]):f.push(d)}),f.forEach(d=>{for(var h=0,p=c.length,g;h<p;++h)if(qee((g=c[h])[0],d)!==-1){g.push(d);return}}),{type:"MultiPolygon",value:l,coordinates:c}}function s(u,l,c){var f=[],d=[],h,p,g,m,y,b;for(h=p=-1,m=u[0]>=l,Gs[m<<1].forEach(v);++h<e-1;)g=m,m=u[h+1]>=l,Gs[g|m<<1].forEach(v);for(Gs[m<<0].forEach(v);++p<t-1;){for(h=-1,m=u[p*e+e]>=l,y=u[p*e]>=l,Gs[m<<1|y<<2].forEach(v);++h<e-1;)g=m,m=u[p*e+e+h+1]>=l,b=y,y=u[p*e+h+1]>=l,Gs[g|m<<1|y<<2|b<<3].forEach(v);Gs[m|y<<3].forEach(v)}for(h=-1,y=u[p*e]>=l,Gs[y<<2].forEach(v);++h<e-1;)b=y,y=u[p*e+h+1]>=l,Gs[y<<2|b<<3].forEach(v);Gs[y<<3].forEach(v);function v(x){var _=[x[0][0]+h,x[0][1]+p],E=[x[1][0]+h,x[1][1]+p],w=o(_),C=o(E),k,S;(k=d[w])?(S=f[C])?(delete d[k.end],delete f[S.start],k===S?(k.ring.push(E),c(k.ring)):f[k.start]=d[S.end]={start:k.start,end:S.end,ring:k.ring.concat(S.ring)}):(delete d[k.end],k.ring.push(E),d[k.end=C]=k):(k=f[C])?(S=d[w])?(delete f[k.start],delete d[S.end],k===S?(k.ring.push(E),c(k.ring)):f[S.start]=d[k.end]={start:S.start,end:k.end,ring:S.ring.concat(k.ring)}):(delete f[k.start],k.ring.unshift(_),f[k.start=w]=k):f[w]=d[C]={start:w,end:C,ring:[_,E]}}}function o(u){return u[0]*2+u[1]*(e+1)*4}function a(u,l,c){u.forEach(f=>{var d=f[0],h=f[1],p=d|0,g=h|0,m,y=l[g*e+p];d>0&&d<e&&p===d&&(m=l[g*e+p-1],f[0]=d+(c-m)/(y-m)-.5),h>0&&h<t&&g===h&&(m=l[(g-1)*e+p],f[1]=h+(c-m)/(y-m)-.5)})}return i.contour=r,i.size=function(u){if(!arguments.length)return[e,t];var l=Math.floor(u[0]),c=Math.floor(u[1]);return l>=0&&c>=0||q("invalid size"),e=l,t=c,i},i.smooth=function(u){return arguments.length?(n=u?a:Uee,i):n===a},i}function jee(e){for(var t=0,n=e.length,i=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)i+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return i}function qee(e,t){for(var n=-1,i=t.length,r;++n<i;)if(r=Wee(e,t[n]))return r;return 0}function Wee(e,t){for(var n=t[0],i=t[1],r=-1,s=0,o=e.length,a=o-1;s<o;a=s++){var u=e[s],l=u[0],c=u[1],f=e[a],d=f[0],h=f[1];if(Hee(u,f,t))return 0;c>i!=h>i&&n<(d-l)*(i-c)/(h-c)+l&&(r=-r)}return r}function Hee(e,t,n){var i;return Gee(e,t,n)&&Vee(e[i=+(e[0]===t[0])],n[i],t[i])}function Gee(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function Vee(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function pF(e,t,n){return function(i){var r=qr(i),s=n?Math.min(r[0],0):r[0],o=r[1],a=o-s,u=t?Co(s,o,e):a/(e+1);return Ei(s+u,o,u)}}function Wv(e){P.call(this,null,e)}Wv.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]},ee(Wv,P,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=t.materialize(t.SOURCE).source,r=e.field||En,s=hF().smooth(e.smooth!==!1),o=e.thresholds||Yee(i,r,e),a=e.as===null?null:e.as||"contour",u=[];return i.forEach(l=>{const c=r(l),f=s.size([c.width,c.height])(c.values,W(o)?o:o(c.values));Xee(f,c,l,e),f.forEach(d=>{u.push(m0(l,nt(a!=null?{[a]:d}:d)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function Yee(e,t,n){const i=pF(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?i:i(e.map(r=>Aa(t(r).values)))}function Xee(e,t,n,i){let r=i.scale||t.scale,s=i.translate||t.translate;if(Ie(r)&&(r=r(n,i)),Ie(s)&&(s=s(n,i)),(r===1||r==null)&&!s)return;const o=(Ze(r)?r:r[0])||1,a=(Ze(r)?r:r[1])||1,u=s&&s[0]||0,l=s&&s[1]||0;e.forEach(gF(t,o,a,u,l))}function gF(e,t,n,i,r){const s=e.x1||0,o=e.y1||0,a=t*n<0;function u(f){f.forEach(l)}function l(f){a&&f.reverse(),f.forEach(c)}function c(f){f[0]=(f[0]-s)*t+i,f[1]=(f[1]-o)*n+r}return function(f){return f.coordinates.forEach(u),f}}function mF(e,t,n){const i=e>=0?e:by(t,n);return Math.round((Math.sqrt(4*i*i+1)-1)/2)}function Hv(e){return Ie(e)?e:kn(+e)}function yF(){var e=u=>u[0],t=u=>u[1],n=tl,i=[-1,-1],r=960,s=500,o=2;function a(u,l){const c=mF(i[0],u,e)>>o,f=mF(i[1],u,t)>>o,d=c?c+2:0,h=f?f+2:0,p=2*d+(r>>o),g=2*h+(s>>o),m=new Float32Array(p*g),y=new Float32Array(p*g);let b=m;u.forEach(x=>{const _=d+(+e(x)>>o),E=h+(+t(x)>>o);_>=0&&_<p&&E>=0&&E<g&&(m[_+E*p]+=+n(x))}),c>0&&f>0?(Hl(p,g,m,y,c),Gl(p,g,y,m,f),Hl(p,g,m,y,c),Gl(p,g,y,m,f),Hl(p,g,m,y,c),Gl(p,g,y,m,f)):c>0?(Hl(p,g,m,y,c),Hl(p,g,y,m,c),Hl(p,g,m,y,c),b=y):f>0&&(Gl(p,g,m,y,f),Gl(p,g,y,m,f),Gl(p,g,m,y,f),b=y);const v=l?Math.pow(2,-2*o):1/g8(b);for(let x=0,_=p*g;x<_;++x)b[x]*=v;return{values:b,scale:1<<o,width:p,height:g,x1:d,y1:h,x2:d+(r>>o),y2:h+(s>>o)}}return a.x=function(u){return arguments.length?(e=Hv(u),a):e},a.y=function(u){return arguments.length?(t=Hv(u),a):t},a.weight=function(u){return arguments.length?(n=Hv(u),a):n},a.size=function(u){if(!arguments.length)return[r,s];var l=+u[0],c=+u[1];return l>=0&&c>=0||q("invalid size"),r=l,s=c,a},a.cellSize=function(u){return arguments.length?((u=+u)>=1||q("invalid cell size"),o=Math.floor(Math.log(u)/Math.LN2),a):1<<o},a.bandwidth=function(u){return arguments.length?(u=oe(u),u.length===1&&(u=[+u[0],+u[0]]),u.length!==2&&q("invalid bandwidth"),i=u,a):i},a}function Hl(e,t,n,i,r){const s=(r<<1)+1;for(let o=0;o<t;++o)for(let a=0,u=0;a<e+r;++a)a<e&&(u+=n[a+o*e]),a>=r&&(a>=s&&(u-=n[a-s+o*e]),i[a-r+o*e]=u/Math.min(a+1,e-1+s-a,s))}function Gl(e,t,n,i,r){const s=(r<<1)+1;for(let o=0;o<e;++o)for(let a=0,u=0;a<t+r;++a)a<t&&(u+=n[o+a*e]),a>=r&&(a>=s&&(u-=n[o+(a-s)*e]),i[o+(a-r)*e]=u/Math.min(a+1,t-1+s-a,s))}function Gv(e){P.call(this,null,e)}Gv.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const Kee=["x","y","weight","size","cellSize","bandwidth"];function bF(e,t){return Kee.forEach(n=>t[n]!=null?e[n](t[n]):0),e}ee(Gv,P,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=t.materialize(t.SOURCE).source,r=Zee(i,e.groupby),s=(e.groupby||[]).map(Tt),o=bF(yF(),e),a=e.as||"grid",u=[];function l(c,f){for(let d=0;d<s.length;++d)c[s[d]]=f[d];return c}return u=r.map(c=>nt(l({[a]:o(c,e.counts)},c.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function Zee(e,t){var n=[],i=c=>c(a),r,s,o,a,u,l;if(t==null)n.push(e);else for(r={},s=0,o=e.length;s<o;++s)a=e[s],u=t.map(i),l=r[u],l||(r[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function Vv(e){P.call(this,null,e)}Vv.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]},ee(Vv,P,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=hF().smooth(e.smooth!==!1),r=e.values,s=e.thresholds||pF(e.count||10,e.nice,!!r),o=e.size,a,u;return r||(r=t.materialize(t.SOURCE).source,a=bF(yF(),e)(r,!0),u=gF(a,a.scale||1,a.scale||1,0,0),o=[a.width,a.height],r=a.values),s=W(s)?s:s(r),r=i.size(o)(r,s),u&&r.forEach(u),this.value&&(n.rem=this.value),this.value=n.source=n.add=(r||[]).map(nt),n}});const Yv="Feature",Xv="FeatureCollection",Jee="MultiPoint";function Kv(e){P.call(this,null,e)}Kv.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]},ee(Kv,P,{transform(e,t){var n=this._features,i=this._points,r=e.fields,s=r&&r[0],o=r&&r[1],a=e.geojson||!r&&En,u=t.ADD,l;l=e.modified()||t.changed(t.REM)||t.modified(wn(a))||s&&t.modified(wn(s))||o&&t.modified(wn(o)),(!this.value||l)&&(u=t.SOURCE,this._features=n=[],this._points=i=[]),a&&t.visit(u,c=>n.push(a(c))),s&&o&&(t.visit(u,c=>{var f=s(c),d=o(c);f!=null&&d!=null&&(f=+f)===f&&(d=+d)===d&&i.push([f,d])}),n=n.concat({type:Yv,geometry:{type:Jee,coordinates:i}})),this.value={type:Xv,features:n}}});function Zv(e){P.call(this,null,e)}Zv.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]},ee(Zv,P,{transform(e,t){var n=t.fork(t.ALL),i=this.value,r=e.field||En,s=e.as||"path",o=n.SOURCE;!i||e.modified()?(this.value=i=dF(e.projection),n.materialize().reflow()):o=r===En||t.modified(r.fields)?n.ADD_MOD:n.ADD;const a=Qee(i,e.pointRadius);return n.visit(o,u=>u[s]=i(r(u))),i.pointRadius(a),n.modifies(s)}});function Qee(e,t){const n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function Jv(e){P.call(this,null,e)}Jv.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]},ee(Jv,P,{transform(e,t){var n=e.projection,i=e.fields[0],r=e.fields[1],s=e.as||["x","y"],o=s[0],a=s[1],u;function l(c){const f=n([i(c),r(c)]);f?(c[o]=f[0],c[a]=f[1]):(c[o]=void 0,c[a]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,l):(u=t.modified(i.fields)||t.modified(r.fields),t.visit(u?t.ADD_MOD:t.ADD,l)),t.modifies(s)}});function Qv(e){P.call(this,null,e)}Qv.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]},ee(Qv,P,{transform(e,t){var n=t.fork(t.ALL),i=this.value,r=e.as||"shape",s=n.ADD;return(!i||e.modified())&&(this.value=i=ete(dF(e.projection),e.field||Bi("datum"),e.pointRadius),n.materialize().reflow(),s=n.SOURCE),n.visit(s,o=>o[r]=i),n.modifies(r)}});function ete(e,t,n){const i=n==null?r=>e(t(r)):r=>{var s=e.pointRadius(),o=e.pointRadius(n)(t(r));return e.pointRadius(s),o};return i.context=r=>(e.context(r),i),i}function ex(e){P.call(this,[],e),this.generator=YQ()}ex.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]},ee(ex,P,{transform(e,t){var n=this.value,i=this.generator,r;if(!n.length||e.modified())for(const s in e)Ie(i[s])&&i[s](e[s]);return r=i(),n.length?t.mod.push(TE(n[0],r)):t.add.push(nt(r)),n[0]=r,t}});function tx(e){P.call(this,null,e)}tx.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]},ee(tx,P,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,i=e.resolve==="shared",r=e.field||En,s=nte(e.opacity,e),o=tte(e.color,e),a=e.as||"image",u={$x:0,$y:0,$value:0,$max:i?Aa(n.map(l=>Aa(r(l).values))):0};return n.forEach(l=>{const c=r(l),f=Oe({},l,u);i||(f.$max=Aa(c.values||[])),l[a]=ite(c,f,o.dep?o:kn(o(f)),s.dep?s:kn(s(f)))}),t.reflow(!0).modifies(a)}});function tte(e,t){let n;return Ie(e)?(n=i=>Oo(e(i,t)),n.dep=vF(e)):n=kn(Oo(e||"#888")),n}function nte(e,t){let n;return Ie(e)?(n=i=>e(i,t),n.dep=vF(e)):e?n=kn(e):(n=i=>i.$value/i.$max||0,n.dep=!0),n}function vF(e){if(!Ie(e))return!1;const t=lr(wn(e));return t.$x||t.$y||t.$value||t.$max}function ite(e,t,n,i){const r=e.width,s=e.height,o=e.x1||0,a=e.y1||0,u=e.x2||r,l=e.y2||s,c=e.values,f=c?m=>c[m]:bo,d=Mo(u-o,l-a),h=d.getContext("2d"),p=h.getImageData(0,0,u-o,l-a),g=p.data;for(let m=a,y=0;m<l;++m){t.$y=m-a;for(let b=o,v=m*r;b<u;++b,y+=4){t.$x=b-o,t.$value=f(b+v);const x=n(t);g[y+0]=x.r,g[y+1]=x.g,g[y+2]=x.b,g[y+3]=~~(255*i(t))}}return h.putImageData(p,0,0),d}function xF(e){P.call(this,null,e),this.modified(!0)}ee(xF,P,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=ste(e.type),jv.forEach(i=>{e[i]!=null&&_F(n,i,e[i])})):jv.forEach(i=>{e.modified(i)&&_F(n,i,e[i])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&rte(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function rte(e,t){const n=ote(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function ste(e){const t=qv((e||"mercator").toLowerCase());return t||q("Unrecognized projection type: "+e),t()}function _F(e,t,n){Ie(e[t])&&e[t](n)}function ote(e){return e=oe(e),e.length===1?e[0]:{type:Xv,features:e.reduce((t,n)=>t.concat(ate(n)),[])}}function ate(e){return e.type===Xv?e.features:oe(e).filter(t=>t!=null).map(t=>t.type===Yv?t:{type:Yv,geometry:t})}const ute=Object.freeze(Object.defineProperty({__proto__:null,contour:Vv,geojson:Kv,geopath:Zv,geopoint:Jv,geoshape:Qv,graticule:ex,heatmap:tx,isocontour:Wv,kde2d:Gv,projection:xF},Symbol.toStringTag,{value:"Module"}));function lte(e,t){var n,i=1;e==null&&(e=0),t==null&&(t=0);function r(){var s,o=n.length,a,u=0,l=0;for(s=0;s<o;++s)a=n[s],u+=a.x,l+=a.y;for(u=(u/o-e)*i,l=(l/o-t)*i,s=0;s<o;++s)a=n[s],a.x-=u,a.y-=l}return r.initialize=function(s){n=s},r.x=function(s){return arguments.length?(e=+s,r):e},r.y=function(s){return arguments.length?(t=+s,r):t},r.strength=function(s){return arguments.length?(i=+s,r):i},r}function cte(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return wF(this.cover(t,n),t,n,e)}function wF(e,t,n,i){if(isNaN(t)||isNaN(n))return e;var r,s=e._root,o={data:i},a=e._x0,u=e._y0,l=e._x1,c=e._y1,f,d,h,p,g,m,y,b;if(!s)return e._root=o,e;for(;s.length;)if((g=t>=(f=(a+l)/2))?a=f:l=f,(m=n>=(d=(u+c)/2))?u=d:c=d,r=s,!(s=s[y=m<<1|g]))return r[y]=o,e;if(h=+e._x.call(null,s.data),p=+e._y.call(null,s.data),t===h&&n===p)return o.next=s,r?r[y]=o:e._root=o,e;do r=r?r[y]=new Array(4):e._root=new Array(4),(g=t>=(f=(a+l)/2))?a=f:l=f,(m=n>=(d=(u+c)/2))?u=d:c=d;while((y=m<<1|g)===(b=(p>=d)<<1|h>=f));return r[b]=s,r[y]=o,e}function fte(e){var t,n,i=e.length,r,s,o=new Array(i),a=new Array(i),u=1/0,l=1/0,c=-1/0,f=-1/0;for(n=0;n<i;++n)isNaN(r=+this._x.call(null,t=e[n]))||isNaN(s=+this._y.call(null,t))||(o[n]=r,a[n]=s,r<u&&(u=r),r>c&&(c=r),s<l&&(l=s),s>f&&(f=s));if(u>c||l>f)return this;for(this.cover(u,l).cover(c,f),n=0;n<i;++n)wF(this,o[n],a[n],e[n]);return this}function dte(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,i=this._y0,r=this._x1,s=this._y1;if(isNaN(n))r=(n=Math.floor(e))+1,s=(i=Math.floor(t))+1;else{for(var o=r-n||1,a=this._root,u,l;n>e||e>=r||i>t||t>=s;)switch(l=(t<i)<<1|e<n,u=new Array(4),u[l]=a,a=u,o*=2,l){case 0:r=n+o,s=i+o;break;case 1:n=r-o,s=i+o;break;case 2:r=n+o,i=s-o;break;case 3:n=r-o,i=s-o;break}this._root&&this._root.length&&(this._root=a)}return this._x0=n,this._y0=i,this._x1=r,this._y1=s,this}function hte(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function pte(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Vn(e,t,n,i,r){this.node=e,this.x0=t,this.y0=n,this.x1=i,this.y1=r}function gte(e,t,n){var i,r=this._x0,s=this._y0,o,a,u,l,c=this._x1,f=this._y1,d=[],h=this._root,p,g;for(h&&d.push(new Vn(h,r,s,c,f)),n==null?n=1/0:(r=e-n,s=t-n,c=e+n,f=t+n,n*=n);p=d.pop();)if(!(!(h=p.node)||(o=p.x0)>c||(a=p.y0)>f||(u=p.x1)<r||(l=p.y1)<s))if(h.length){var m=(o+u)/2,y=(a+l)/2;d.push(new Vn(h[3],m,y,u,l),new Vn(h[2],o,y,m,l),new Vn(h[1],m,a,u,y),new Vn(h[0],o,a,m,y)),(g=(t>=y)<<1|e>=m)&&(p=d[d.length-1],d[d.length-1]=d[d.length-1-g],d[d.length-1-g]=p)}else{var b=e-+this._x.call(null,h.data),v=t-+this._y.call(null,h.data),x=b*b+v*v;if(x<n){var _=Math.sqrt(n=x);r=e-_,s=t-_,c=e+_,f=t+_,i=h.data}}return i}function mte(e){if(isNaN(c=+this._x.call(null,e))||isNaN(f=+this._y.call(null,e)))return this;var t,n=this._root,i,r,s,o=this._x0,a=this._y0,u=this._x1,l=this._y1,c,f,d,h,p,g,m,y;if(!n)return this;if(n.length)for(;;){if((p=c>=(d=(o+u)/2))?o=d:u=d,(g=f>=(h=(a+l)/2))?a=h:l=h,t=n,!(n=n[m=g<<1|p]))return this;if(!n.length)break;(t[m+1&3]||t[m+2&3]||t[m+3&3])&&(i=t,y=m)}for(;n.data!==e;)if(r=n,!(n=n.next))return this;return(s=n.next)&&delete n.next,r?(s?r.next=s:delete r.next,this):t?(s?t[m]=s:delete t[m],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(i?i[y]=n:this._root=n),this):(this._root=s,this)}function yte(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function bte(){return this._root}function vte(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function xte(e){var t=[],n,i=this._root,r,s,o,a,u;for(i&&t.push(new Vn(i,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(i=n.node,s=n.x0,o=n.y0,a=n.x1,u=n.y1)&&i.length){var l=(s+a)/2,c=(o+u)/2;(r=i[3])&&t.push(new Vn(r,l,c,a,u)),(r=i[2])&&t.push(new Vn(r,s,c,l,u)),(r=i[1])&&t.push(new Vn(r,l,o,a,c)),(r=i[0])&&t.push(new Vn(r,s,o,l,c))}return this}function _te(e){var t=[],n=[],i;for(this._root&&t.push(new Vn(this._root,this._x0,this._y0,this._x1,this._y1));i=t.pop();){var r=i.node;if(r.length){var s,o=i.x0,a=i.y0,u=i.x1,l=i.y1,c=(o+u)/2,f=(a+l)/2;(s=r[0])&&t.push(new Vn(s,o,a,c,f)),(s=r[1])&&t.push(new Vn(s,c,a,u,f)),(s=r[2])&&t.push(new Vn(s,o,f,c,l)),(s=r[3])&&t.push(new Vn(s,c,f,u,l))}n.push(i)}for(;i=n.pop();)e(i.node,i.x0,i.y0,i.x1,i.y1);return this}function wte(e){return e[0]}function Ete(e){return arguments.length?(this._x=e,this):this._x}function Cte(e){return e[1]}function kte(e){return arguments.length?(this._y=e,this):this._y}function nx(e,t,n){var i=new ix(t??wte,n??Cte,NaN,NaN,NaN,NaN);return e==null?i:i.addAll(e)}function ix(e,t,n,i,r,s){this._x=e,this._y=t,this._x0=n,this._y0=i,this._x1=r,this._y1=s,this._root=void 0}function EF(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var Yn=nx.prototype=ix.prototype;Yn.copy=function(){var e=new ix(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,i;if(!t)return e;if(!t.length)return e._root=EF(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var r=0;r<4;++r)(i=t.source[r])&&(i.length?n.push({source:i,target:t.target[r]=new Array(4)}):t.target[r]=EF(i));return e},Yn.add=cte,Yn.addAll=fte,Yn.cover=dte,Yn.data=hte,Yn.extent=pte,Yn.find=gte,Yn.remove=mte,Yn.removeAll=yte,Yn.root=bte,Yn.size=vte,Yn.visit=xte,Yn.visitAfter=_te,Yn.x=Ete,Yn.y=kte;function Xn(e){return function(){return e}}function Zo(e){return(e()-.5)*1e-6}function Ate(e){return e.x+e.vx}function $te(e){return e.y+e.vy}function Ste(e){var t,n,i,r=1,s=1;typeof e!="function"&&(e=Xn(e==null?1:+e));function o(){for(var l,c=t.length,f,d,h,p,g,m,y=0;y<s;++y)for(f=nx(t,Ate,$te).visitAfter(a),l=0;l<c;++l)d=t[l],g=n[d.index],m=g*g,h=d.x+d.vx,p=d.y+d.vy,f.visit(b);function b(v,x,_,E,w){var C=v.data,k=v.r,S=g+k;if(C){if(C.index>d.index){var $=h-C.x-C.vx,O=p-C.y-C.vy,R=$*$+O*O;R<S*S&&($===0&&($=Zo(i),R+=$*$),O===0&&(O=Zo(i),R+=O*O),R=(S-(R=Math.sqrt(R)))/R*r,d.vx+=($*=R)*(S=(k*=k)/(m+k)),d.vy+=(O*=R)*S,C.vx-=$*(S=1-S),C.vy-=O*S)}return}return x>h+S||E<h-S||_>p+S||w<p-S}}function a(l){if(l.data)return l.r=n[l.data.index];for(var c=l.r=0;c<4;++c)l[c]&&l[c].r>l.r&&(l.r=l[c].r)}function u(){if(t){var l,c=t.length,f;for(n=new Array(c),l=0;l<c;++l)f=t[l],n[f.index]=+e(f,l,t)}}return o.initialize=function(l,c){t=l,i=c,u()},o.iterations=function(l){return arguments.length?(s=+l,o):s},o.strength=function(l){return arguments.length?(r=+l,o):r},o.radius=function(l){return arguments.length?(e=typeof l=="function"?l:Xn(+l),u(),o):e},o}function Fte(e){return e.index}function CF(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function Dte(e){var t=Fte,n=f,i,r=Xn(30),s,o,a,u,l,c=1;e==null&&(e=[]);function f(m){return 1/Math.min(a[m.source.index],a[m.target.index])}function d(m){for(var y=0,b=e.length;y<c;++y)for(var v=0,x,_,E,w,C,k,S;v<b;++v)x=e[v],_=x.source,E=x.target,w=E.x+E.vx-_.x-_.vx||Zo(l),C=E.y+E.vy-_.y-_.vy||Zo(l),k=Math.sqrt(w*w+C*C),k=(k-s[v])/k*m*i[v],w*=k,C*=k,E.vx-=w*(S=u[v]),E.vy-=C*S,_.vx+=w*(S=1-S),_.vy+=C*S}function h(){if(o){var m,y=o.length,b=e.length,v=new Map(o.map((_,E)=>[t(_,E,o),_])),x;for(m=0,a=new Array(y);m<b;++m)x=e[m],x.index=m,typeof x.source!="object"&&(x.source=CF(v,x.source)),typeof x.target!="object"&&(x.target=CF(v,x.target)),a[x.source.index]=(a[x.source.index]||0)+1,a[x.target.index]=(a[x.target.index]||0)+1;for(m=0,u=new Array(b);m<b;++m)x=e[m],u[m]=a[x.source.index]/(a[x.source.index]+a[x.target.index]);i=new Array(b),p(),s=new Array(b),g()}}function p(){if(o)for(var m=0,y=e.length;m<y;++m)i[m]=+n(e[m],m,e)}function g(){if(o)for(var m=0,y=e.length;m<y;++m)s[m]=+r(e[m],m,e)}return d.initialize=function(m,y){o=m,l=y,h()},d.links=function(m){return arguments.length?(e=m,h(),d):e},d.id=function(m){return arguments.length?(t=m,d):t},d.iterations=function(m){return arguments.length?(c=+m,d):c},d.strength=function(m){return arguments.length?(n=typeof m=="function"?m:Xn(+m),p(),d):n},d.distance=function(m){return arguments.length?(r=typeof m=="function"?m:Xn(+m),g(),d):r},d}var Tte={value:()=>{}};function kF(){for(var e=0,t=arguments.length,n={},i;e<t;++e){if(!(i=arguments[e]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new Cg(n)}function Cg(e){this._=e}function Mte(e,t){return e.trim().split(/^|\s+/).map(function(n){var i="",r=n.indexOf(".");if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}Cg.prototype=kF.prototype={constructor:Cg,on:function(e,t){var n=this._,i=Mte(e+"",n),r,s=-1,o=i.length;if(arguments.length<2){for(;++s<o;)if((r=(e=i[s]).type)&&(r=Nte(n[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(r=(e=i[s]).type)n[r]=AF(n[r],e.name,t);else if(t==null)for(r in n)n[r]=AF(n[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Cg(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var n=new Array(r),i=0,r,s;i<r;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],i=0,r=s.length;i<r;++i)s[i].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],r=0,s=i.length;r<s;++r)i[r].value.apply(t,n)}};function Nte(e,t){for(var n=0,i=e.length,r;n<i;++n)if((r=e[n]).name===t)return r.value}function AF(e,t,n){for(var i=0,r=e.length;i<r;++i)if(e[i].name===t){e[i]=Tte,e=e.slice(0,i).concat(e.slice(i+1));break}return n!=null&&e.push({name:t,value:n}),e}var Vl=0,fd=0,dd=0,$F=1e3,kg,hd,Ag=0,Ja=0,$g=0,pd=typeof performance=="object"&&performance.now?performance:Date,SF=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function rx(){return Ja||(SF(Rte),Ja=pd.now()+$g)}function Rte(){Ja=0}function Sg(){this._call=this._time=this._next=null}Sg.prototype=FF.prototype={constructor:Sg,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?rx():+n)+(t==null?0:+t),!this._next&&hd!==this&&(hd?hd._next=this:kg=this,hd=this),this._call=e,this._time=n,sx()},stop:function(){this._call&&(this._call=null,this._time=1/0,sx())}};function FF(e,t,n){var i=new Sg;return i.restart(e,t,n),i}function Ote(){rx(),++Vl;for(var e=kg,t;e;)(t=Ja-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Vl}function DF(){Ja=(Ag=pd.now())+$g,Vl=fd=0;try{Ote()}finally{Vl=0,Ite(),Ja=0}}function Lte(){var e=pd.now(),t=e-Ag;t>$F&&($g-=t,Ag=e)}function Ite(){for(var e,t=kg,n,i=1/0;t;)t._call?(i>t._time&&(i=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:kg=n);hd=e,sx(i)}function sx(e){if(!Vl){fd&&(fd=clearTimeout(fd));var t=e-Ja;t>24?(e<1/0&&(fd=setTimeout(DF,e-pd.now()-$g)),dd&&(dd=clearInterval(dd))):(dd||(Ag=pd.now(),dd=setInterval(Lte,$F)),Vl=1,SF(DF))}}function Pte(e,t,n){var i=new Sg,r=t;return t==null?(i.restart(e,t,n),i):(i._restart=i.restart,i.restart=function(s,o,a){o=+o,a=a==null?rx():+a,i._restart(function u(l){l+=r,i._restart(u,r+=o,a),s(l)},o,a)},i.restart(e,t,n),i)}const zte=1664525,Bte=1013904223,TF=4294967296;function Ute(){let e=1;return()=>(e=(zte*e+Bte)%TF)/TF}function jte(e){return e.x}function qte(e){return e.y}var Wte=10,Hte=Math.PI*(3-Math.sqrt(5));function Gte(e){var t,n=1,i=.001,r=1-Math.pow(i,1/300),s=0,o=.6,a=new Map,u=FF(f),l=kF("tick","end"),c=Ute();e==null&&(e=[]);function f(){d(),l.call("tick",t),n<i&&(u.stop(),l.call("end",t))}function d(g){var m,y=e.length,b;g===void 0&&(g=1);for(var v=0;v<g;++v)for(n+=(s-n)*r,a.forEach(function(x){x(n)}),m=0;m<y;++m)b=e[m],b.fx==null?b.x+=b.vx*=o:(b.x=b.fx,b.vx=0),b.fy==null?b.y+=b.vy*=o:(b.y=b.fy,b.vy=0);return t}function h(){for(var g=0,m=e.length,y;g<m;++g){if(y=e[g],y.index=g,y.fx!=null&&(y.x=y.fx),y.fy!=null&&(y.y=y.fy),isNaN(y.x)||isNaN(y.y)){var b=Wte*Math.sqrt(.5+g),v=g*Hte;y.x=b*Math.cos(v),y.y=b*Math.sin(v)}(isNaN(y.vx)||isNaN(y.vy))&&(y.vx=y.vy=0)}}function p(g){return g.initialize&&g.initialize(e,c),g}return h(),t={tick:d,restart:function(){return u.restart(f),t},stop:function(){return u.stop(),t},nodes:function(g){return arguments.length?(e=g,h(),a.forEach(p),t):e},alpha:function(g){return arguments.length?(n=+g,t):n},alphaMin:function(g){return arguments.length?(i=+g,t):i},alphaDecay:function(g){return arguments.length?(r=+g,t):+r},alphaTarget:function(g){return arguments.length?(s=+g,t):s},velocityDecay:function(g){return arguments.length?(o=1-g,t):1-o},randomSource:function(g){return arguments.length?(c=g,a.forEach(p),t):c},force:function(g,m){return arguments.length>1?(m==null?a.delete(g):a.set(g,p(m)),t):a.get(g)},find:function(g,m,y){var b=0,v=e.length,x,_,E,w,C;for(y==null?y=1/0:y*=y,b=0;b<v;++b)w=e[b],x=g-w.x,_=m-w.y,E=x*x+_*_,E<y&&(C=w,y=E);return C},on:function(g,m){return arguments.length>1?(l.on(g,m),t):l.on(g)}}}function Vte(){var e,t,n,i,r=Xn(-30),s,o=1,a=1/0,u=.81;function l(h){var p,g=e.length,m=nx(e,jte,qte).visitAfter(f);for(i=h,p=0;p<g;++p)t=e[p],m.visit(d)}function c(){if(e){var h,p=e.length,g;for(s=new Array(p),h=0;h<p;++h)g=e[h],s[g.index]=+r(g,h,e)}}function f(h){var p=0,g,m,y=0,b,v,x;if(h.length){for(b=v=x=0;x<4;++x)(g=h[x])&&(m=Math.abs(g.value))&&(p+=g.value,y+=m,b+=m*g.x,v+=m*g.y);h.x=b/y,h.y=v/y}else{g=h,g.x=g.data.x,g.y=g.data.y;do p+=s[g.data.index];while(g=g.next)}h.value=p}function d(h,p,g,m){if(!h.value)return!0;var y=h.x-t.x,b=h.y-t.y,v=m-p,x=y*y+b*b;if(v*v/u<x)return x<a&&(y===0&&(y=Zo(n),x+=y*y),b===0&&(b=Zo(n),x+=b*b),x<o&&(x=Math.sqrt(o*x)),t.vx+=y*h.value*i/x,t.vy+=b*h.value*i/x),!0;if(h.length||x>=a)return;(h.data!==t||h.next)&&(y===0&&(y=Zo(n),x+=y*y),b===0&&(b=Zo(n),x+=b*b),x<o&&(x=Math.sqrt(o*x)));do h.data!==t&&(v=s[h.data.index]*i/x,t.vx+=y*v,t.vy+=b*v);while(h=h.next)}return l.initialize=function(h,p){e=h,n=p,c()},l.strength=function(h){return arguments.length?(r=typeof h=="function"?h:Xn(+h),c(),l):r},l.distanceMin=function(h){return arguments.length?(o=h*h,l):Math.sqrt(o)},l.distanceMax=function(h){return arguments.length?(a=h*h,l):Math.sqrt(a)},l.theta=function(h){return arguments.length?(u=h*h,l):Math.sqrt(u)},l}function Yte(e){var t=Xn(.1),n,i,r;typeof e!="function"&&(e=Xn(e==null?0:+e));function s(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vx+=(r[u]-c.x)*i[u]*a}function o(){if(n){var a,u=n.length;for(i=new Array(u),r=new Array(u),a=0;a<u;++a)i[a]=isNaN(r[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:Xn(+a),o(),s):t},s.x=function(a){return arguments.length?(e=typeof a=="function"?a:Xn(+a),o(),s):e},s}function Xte(e){var t=Xn(.1),n,i,r;typeof e!="function"&&(e=Xn(e==null?0:+e));function s(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vy+=(r[u]-c.y)*i[u]*a}function o(){if(n){var a,u=n.length;for(i=new Array(u),r=new Array(u),a=0;a<u;++a)i[a]=isNaN(r[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:Xn(+a),o(),s):t},s.y=function(a){return arguments.length?(e=typeof a=="function"?a:Xn(+a),o(),s):e},s}const MF={center:lte,collide:Ste,nbody:Vte,link:Dte,x:Yte,y:Xte},gd="forces",ox=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],Kte=["static","iterations"],NF=["x","y","vx","vy"];function ax(e){P.call(this,null,e)}ax.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:NF}]},ee(ax,P,{transform(e,t){var n=this.value,i=t.changed(t.ADD_REM),r=e.modified(ox),s=e.iterations||300;if(n?(i&&(t.modifies("index"),n.nodes(t.source)),(r||t.changed(t.MOD))&&RF(n,e,0,t)):(this.value=n=Jte(t.source,e),n.on("tick",Zte(t.dataflow,this)),e.static||(i=!0,n.tick()),t.modifies("index")),r||i||e.modified(Kte)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/s)),e.static)for(n.stop();--s>=0;)n.tick();else if(n.stopped()&&n.restart(),!i)return t.StopPropagation}return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let a=this._argops,u=0,l=a.length,c;u<l;++u)if(c=a[u],!(c.name!==gd||c.op._argval.force!=="link")){for(var i=c.op._argops,r=0,s=i.length,o;r<s;++r)if(i[r].name==="links"&&(o=i[r].op.source)){n.pulse(o,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies(NF)}});function Zte(e,t){return()=>e.touch(t).run()}function Jte(e,t){const n=Gte(e),i=n.stop,r=n.restart;let s=!1;return n.stopped=()=>s,n.restart=()=>(s=!1,r()),n.stop=()=>(s=!0,i()),RF(n,t,!0).on("end",()=>s=!0)}function RF(e,t,n,i){var r=oe(t.forces),s,o,a,u;for(s=0,o=ox.length;s<o;++s)a=ox[s],a!==gd&&t.modified(a)&&e[a](t[a]);for(s=0,o=r.length;s<o;++s)u=gd+s,a=n||t.modified(gd,s)?ene(r[s]):i&&Qte(r[s],i)?e.force(u):null,a&&e.force(u,a);for(o=e.numForces||0;s<o;++s)e.force(gd+s,null);return e.numForces=r.length,e}function Qte(e,t){var n,i;for(n in e)if(Ie(i=e[n])&&t.modified(wn(i)))return 1;return 0}function ene(e){var t,n;ue(MF,e.force)||q("Unrecognized force: "+e.force),t=MF[e.force]();for(n in e)Ie(t[n])&&tne(t[n],e[n],e);return t}function tne(e,t,n){e(Ie(t)?i=>t(i,n):t)}const nne=Object.freeze(Object.defineProperty({__proto__:null,force:ax},Symbol.toStringTag,{value:"Module"}));function ine(e,t){return e.parent===t.parent?1:2}function rne(e){return e.reduce(sne,0)/e.length}function sne(e,t){return e+t.x}function one(e){return 1+e.reduce(ane,0)}function ane(e,t){return Math.max(e,t.y)}function une(e){for(var t;t=e.children;)e=t[0];return e}function lne(e){for(var t;t=e.children;)e=t[t.length-1];return e}function cne(){var e=ine,t=1,n=1,i=!1;function r(s){var o,a=0;s.eachAfter(function(d){var h=d.children;h?(d.x=rne(h),d.y=one(h)):(d.x=o?a+=e(d,o):0,d.y=0,o=d)});var u=une(s),l=lne(s),c=u.x-e(u,l)/2,f=l.x+e(l,u)/2;return s.eachAfter(i?function(d){d.x=(d.x-s.x)*t,d.y=(s.y-d.y)*n}:function(d){d.x=(d.x-c)/(f-c)*t,d.y=(1-(s.y?d.y/s.y:1))*n})}return r.separation=function(s){return arguments.length?(e=s,r):e},r.size=function(s){return arguments.length?(i=!1,t=+s[0],n=+s[1],r):i?null:[t,n]},r.nodeSize=function(s){return arguments.length?(i=!0,t=+s[0],n=+s[1],r):i?[t,n]:null},r}function fne(e){var t=0,n=e.children,i=n&&n.length;if(!i)t=1;else for(;--i>=0;)t+=n[i].value;e.value=t}function dne(){return this.eachAfter(fne)}function hne(e,t){let n=-1;for(const i of this)e.call(t,i,++n,this);return this}function pne(e,t){for(var n=this,i=[n],r,s,o=-1;n=i.pop();)if(e.call(t,n,++o,this),r=n.children)for(s=r.length-1;s>=0;--s)i.push(r[s]);return this}function gne(e,t){for(var n=this,i=[n],r=[],s,o,a,u=-1;n=i.pop();)if(r.push(n),s=n.children)for(o=0,a=s.length;o<a;++o)i.push(s[o]);for(;n=r.pop();)e.call(t,n,++u,this);return this}function mne(e,t){let n=-1;for(const i of this)if(e.call(t,i,++n,this))return i}function yne(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,i=t.children,r=i&&i.length;--r>=0;)n+=i[r].value;t.value=n})}function bne(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function vne(e){for(var t=this,n=xne(t,e),i=[t];t!==n;)t=t.parent,i.push(t);for(var r=i.length;e!==n;)i.splice(r,0,e),e=e.parent;return i}function xne(e,t){if(e===t)return e;var n=e.ancestors(),i=t.ancestors(),r=null;for(e=n.pop(),t=i.pop();e===t;)r=e,e=n.pop(),t=i.pop();return r}function _ne(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function wne(){return Array.from(this)}function Ene(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function Cne(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*kne(){var e=this,t,n=[e],i,r,s;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,i=e.children)for(r=0,s=i.length;r<s;++r)n.push(i[r]);while(n.length)}function ux(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=Sne)):t===void 0&&(t=$ne);for(var n=new Yl(e),i,r=[n],s,o,a,u;i=r.pop();)if((o=t(i.data))&&(u=(o=Array.from(o)).length))for(i.children=o,a=u-1;a>=0;--a)r.push(s=o[a]=new Yl(o[a])),s.parent=i,s.depth=i.depth+1;return n.eachBefore(OF)}function Ane(){return ux(this).eachBefore(Fne)}function $ne(e){return e.children}function Sne(e){return Array.isArray(e)?e[1]:null}function Fne(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function OF(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function Yl(e){this.data=e,this.depth=this.height=0,this.parent=null}Yl.prototype=ux.prototype={constructor:Yl,count:dne,each:hne,eachAfter:gne,eachBefore:pne,find:mne,sum:yne,sort:bne,path:vne,ancestors:_ne,descendants:wne,leaves:Ene,links:Cne,copy:Ane,[Symbol.iterator]:kne};function Fg(e){return e==null?null:LF(e)}function LF(e){if(typeof e!="function")throw new Error;return e}function Qa(){return 0}function Xl(e){return function(){return e}}const Dne=1664525,Tne=1013904223,IF=4294967296;function Mne(){let e=1;return()=>(e=(Dne*e+Tne)%IF)/IF}function Nne(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Rne(e,t){let n=e.length,i,r;for(;n;)r=t()*n--|0,i=e[n],e[n]=e[r],e[r]=i;return e}function One(e,t){for(var n=0,i=(e=Rne(Array.from(e),t)).length,r=[],s,o;n<i;)s=e[n],o&&PF(o,s)?++n:(o=Ine(r=Lne(r,s)),n=0);return o}function Lne(e,t){var n,i;if(lx(t,e))return[t];for(n=0;n<e.length;++n)if(Dg(t,e[n])&&lx(md(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(i=n+1;i<e.length;++i)if(Dg(md(e[n],e[i]),t)&&Dg(md(e[n],t),e[i])&&Dg(md(e[i],t),e[n])&&lx(zF(e[n],e[i],t),e))return[e[n],e[i],t];throw new Error}function Dg(e,t){var n=e.r-t.r,i=t.x-e.x,r=t.y-e.y;return n<0||n*n<i*i+r*r}function PF(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,i=t.x-e.x,r=t.y-e.y;return n>0&&n*n>i*i+r*r}function lx(e,t){for(var n=0;n<t.length;++n)if(!PF(e,t[n]))return!1;return!0}function Ine(e){switch(e.length){case 1:return Pne(e[0]);case 2:return md(e[0],e[1]);case 3:return zF(e[0],e[1],e[2])}}function Pne(e){return{x:e.x,y:e.y,r:e.r}}function md(e,t){var n=e.x,i=e.y,r=e.r,s=t.x,o=t.y,a=t.r,u=s-n,l=o-i,c=a-r,f=Math.sqrt(u*u+l*l);return{x:(n+s+u/f*c)/2,y:(i+o+l/f*c)/2,r:(f+r+a)/2}}function zF(e,t,n){var i=e.x,r=e.y,s=e.r,o=t.x,a=t.y,u=t.r,l=n.x,c=n.y,f=n.r,d=i-o,h=i-l,p=r-a,g=r-c,m=u-s,y=f-s,b=i*i+r*r-s*s,v=b-o*o-a*a+u*u,x=b-l*l-c*c+f*f,_=h*p-d*g,E=(p*x-g*v)/(_*2)-i,w=(g*m-p*y)/_,C=(h*v-d*x)/(_*2)-r,k=(d*y-h*m)/_,S=w*w+k*k-1,$=2*(s+E*w+C*k),O=E*E+C*C-s*s,R=-(Math.abs(S)>1e-6?($+Math.sqrt($*$-4*S*O))/(2*S):O/$);return{x:i+E+w*R,y:r+C+k*R,r:R}}function BF(e,t,n){var i=e.x-t.x,r,s,o=e.y-t.y,a,u,l=i*i+o*o;l?(s=t.r+n.r,s*=s,u=e.r+n.r,u*=u,s>u?(r=(l+u-s)/(2*l),a=Math.sqrt(Math.max(0,u/l-r*r)),n.x=e.x-r*i-a*o,n.y=e.y-r*o+a*i):(r=(l+s-u)/(2*l),a=Math.sqrt(Math.max(0,s/l-r*r)),n.x=t.x+r*i-a*o,n.y=t.y+r*o+a*i)):(n.x=t.x+n.r,n.y=t.y)}function UF(e,t){var n=e.r+t.r-1e-6,i=t.x-e.x,r=t.y-e.y;return n>0&&n*n>i*i+r*r}function jF(e){var t=e._,n=e.next._,i=t.r+n.r,r=(t.x*n.r+n.x*t.r)/i,s=(t.y*n.r+n.y*t.r)/i;return r*r+s*s}function Tg(e){this._=e,this.next=null,this.previous=null}function zne(e,t){if(!(s=(e=Nne(e)).length))return 0;var n,i,r,s,o,a,u,l,c,f,d;if(n=e[0],n.x=0,n.y=0,!(s>1))return n.r;if(i=e[1],n.x=-i.r,i.x=n.r,i.y=0,!(s>2))return n.r+i.r;BF(i,n,r=e[2]),n=new Tg(n),i=new Tg(i),r=new Tg(r),n.next=r.previous=i,i.next=n.previous=r,r.next=i.previous=n;e:for(u=3;u<s;++u){BF(n._,i._,r=e[u]),r=new Tg(r),l=i.next,c=n.previous,f=i._.r,d=n._.r;do if(f<=d){if(UF(l._,r._)){i=l,n.next=i,i.previous=n,--u;continue e}f+=l._.r,l=l.next}else{if(UF(c._,r._)){n=c,n.next=i,i.previous=n,--u;continue e}d+=c._.r,c=c.previous}while(l!==c.next);for(r.previous=n,r.next=i,n.next=i.previous=i=r,o=jF(n);(r=r.next)!==i;)(a=jF(r))<o&&(n=r,o=a);i=n.next}for(n=[i._],r=i;(r=r.next)!==i;)n.push(r._);for(r=One(n,t),u=0;u<s;++u)n=e[u],n.x-=r.x,n.y-=r.y;return r.r}function Bne(e){return Math.sqrt(e.value)}function Une(){var e=null,t=1,n=1,i=Qa;function r(s){const o=Mne();return s.x=t/2,s.y=n/2,e?s.eachBefore(qF(e)).eachAfter(cx(i,.5,o)).eachBefore(WF(1)):s.eachBefore(qF(Bne)).eachAfter(cx(Qa,1,o)).eachAfter(cx(i,s.r/Math.min(t,n),o)).eachBefore(WF(Math.min(t,n)/(2*s.r))),s}return r.radius=function(s){return arguments.length?(e=Fg(s),r):e},r.size=function(s){return arguments.length?(t=+s[0],n=+s[1],r):[t,n]},r.padding=function(s){return arguments.length?(i=typeof s=="function"?s:Xl(+s),r):i},r}function qF(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function cx(e,t,n){return function(i){if(r=i.children){var r,s,o=r.length,a=e(i)*t||0,u;if(a)for(s=0;s<o;++s)r[s].r+=a;if(u=zne(r,n),a)for(s=0;s<o;++s)r[s].r-=a;i.r=u+a}}}function WF(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function HF(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function yd(e,t,n,i,r){for(var s=e.children,o,a=-1,u=s.length,l=e.value&&(i-t)/e.value;++a<u;)o=s[a],o.y0=n,o.y1=r,o.x0=t,o.x1=t+=o.value*l}function jne(){var e=1,t=1,n=0,i=!1;function r(o){var a=o.height+1;return o.x0=o.y0=n,o.x1=e,o.y1=t/a,o.eachBefore(s(t,a)),i&&o.eachBefore(HF),o}function s(o,a){return function(u){u.children&&yd(u,u.x0,o*(u.depth+1)/a,u.x1,o*(u.depth+2)/a);var l=u.x0,c=u.y0,f=u.x1-n,d=u.y1-n;f<l&&(l=f=(l+f)/2),d<c&&(c=d=(c+d)/2),u.x0=l,u.y0=c,u.x1=f,u.y1=d}}return r.round=function(o){return arguments.length?(i=!!o,r):i},r.size=function(o){return arguments.length?(e=+o[0],t=+o[1],r):[e,t]},r.padding=function(o){return arguments.length?(n=+o,r):n},r}var qne={depth:-1},GF={},fx={};function Wne(e){return e.id}function Hne(e){return e.parentId}function VF(){var e=Wne,t=Hne,n;function i(r){var s=Array.from(r),o=e,a=t,u,l,c,f,d,h,p,g,m=new Map;if(n!=null){const y=s.map((x,_)=>Gne(n(x,_,r))),b=y.map(YF),v=new Set(y).add("");for(const x of b)v.has(x)||(v.add(x),y.push(x),b.push(YF(x)),s.push(fx));o=(x,_)=>y[_],a=(x,_)=>b[_]}for(c=0,u=s.length;c<u;++c)l=s[c],h=s[c]=new Yl(l),(p=o(l,c,r))!=null&&(p+="")&&(g=h.id=p,m.set(g,m.has(g)?GF:h)),(p=a(l,c,r))!=null&&(p+="")&&(h.parent=p);for(c=0;c<u;++c)if(h=s[c],p=h.parent){if(d=m.get(p),!d)throw new Error("missing: "+p);if(d===GF)throw new Error("ambiguous: "+p);d.children?d.children.push(h):d.children=[h],h.parent=d}else{if(f)throw new Error("multiple roots");f=h}if(!f)throw new Error("no root");if(n!=null){for(;f.data===fx&&f.children.length===1;)f=f.children[0],--u;for(let y=s.length-1;y>=0&&(h=s[y],h.data===fx);--y)h.data=null}if(f.parent=qne,f.eachBefore(function(y){y.depth=y.parent.depth+1,--u}).eachBefore(OF),f.parent=null,u>0)throw new Error("cycle");return f}return i.id=function(r){return arguments.length?(e=Fg(r),i):e},i.parentId=function(r){return arguments.length?(t=Fg(r),i):t},i.path=function(r){return arguments.length?(n=Fg(r),i):n},i}function Gne(e){e=`${e}`;let t=e.length;return dx(e,t-1)&&!dx(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function YF(e){let t=e.length;if(t<2)return"";for(;--t>1&&!dx(e,t););return e.slice(0,t)}function dx(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}function Vne(e,t){return e.parent===t.parent?1:2}function hx(e){var t=e.children;return t?t[0]:e.t}function px(e){var t=e.children;return t?t[t.length-1]:e.t}function Yne(e,t,n){var i=n/(t.i-e.i);t.c-=i,t.s+=n,e.c+=i,t.z+=n,t.m+=n}function Xne(e){for(var t=0,n=0,i=e.children,r=i.length,s;--r>=0;)s=i[r],s.z+=t,s.m+=t,t+=s.s+(n+=s.c)}function Kne(e,t,n){return e.a.parent===t.parent?e.a:n}function Mg(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}Mg.prototype=Object.create(Yl.prototype);function Zne(e){for(var t=new Mg(e,0),n,i=[t],r,s,o,a;n=i.pop();)if(s=n._.children)for(n.children=new Array(a=s.length),o=a-1;o>=0;--o)i.push(r=n.children[o]=new Mg(s[o],o)),r.parent=n;return(t.parent=new Mg(null,0)).children=[t],t}function Jne(){var e=Vne,t=1,n=1,i=null;function r(l){var c=Zne(l);if(c.eachAfter(s),c.parent.m=-c.z,c.eachBefore(o),i)l.eachBefore(u);else{var f=l,d=l,h=l;l.eachBefore(function(b){b.x<f.x&&(f=b),b.x>d.x&&(d=b),b.depth>h.depth&&(h=b)});var p=f===d?1:e(f,d)/2,g=p-f.x,m=t/(d.x+p+g),y=n/(h.depth||1);l.eachBefore(function(b){b.x=(b.x+g)*m,b.y=b.depth*y})}return l}function s(l){var c=l.children,f=l.parent.children,d=l.i?f[l.i-1]:null;if(c){Xne(l);var h=(c[0].z+c[c.length-1].z)/2;d?(l.z=d.z+e(l._,d._),l.m=l.z-h):l.z=h}else d&&(l.z=d.z+e(l._,d._));l.parent.A=a(l,d,l.parent.A||f[0])}function o(l){l._.x=l.z+l.parent.m,l.m+=l.parent.m}function a(l,c,f){if(c){for(var d=l,h=l,p=c,g=d.parent.children[0],m=d.m,y=h.m,b=p.m,v=g.m,x;p=px(p),d=hx(d),p&&d;)g=hx(g),h=px(h),h.a=l,x=p.z+b-d.z-m+e(p._,d._),x>0&&(Yne(Kne(p,l,f),l,x),m+=x,y+=x),b+=p.m,m+=d.m,v+=g.m,y+=h.m;p&&!px(h)&&(h.t=p,h.m+=b-y),d&&!hx(g)&&(g.t=d,g.m+=m-v,f=l)}return f}function u(l){l.x*=t,l.y=l.depth*n}return r.separation=function(l){return arguments.length?(e=l,r):e},r.size=function(l){return arguments.length?(i=!1,t=+l[0],n=+l[1],r):i?null:[t,n]},r.nodeSize=function(l){return arguments.length?(i=!0,t=+l[0],n=+l[1],r):i?[t,n]:null},r}function Ng(e,t,n,i,r){for(var s=e.children,o,a=-1,u=s.length,l=e.value&&(r-n)/e.value;++a<u;)o=s[a],o.x0=t,o.x1=i,o.y0=n,o.y1=n+=o.value*l}var XF=(1+Math.sqrt(5))/2;function KF(e,t,n,i,r,s){for(var o=[],a=t.children,u,l,c=0,f=0,d=a.length,h,p,g=t.value,m,y,b,v,x,_,E;c<d;){h=r-n,p=s-i;do m=a[f++].value;while(!m&&f<d);for(y=b=m,_=Math.max(p/h,h/p)/(g*e),E=m*m*_,x=Math.max(b/E,E/y);f<d;++f){if(m+=l=a[f].value,l<y&&(y=l),l>b&&(b=l),E=m*m*_,v=Math.max(b/E,E/y),v>x){m-=l;break}x=v}o.push(u={value:m,dice:h<p,children:a.slice(c,f)}),u.dice?yd(u,n,i,r,g?i+=p*m/g:s):Ng(u,n,i,g?n+=h*m/g:r,s),g-=m,c=f}return o}const ZF=function e(t){function n(i,r,s,o,a){KF(t,i,r,s,o,a)}return n.ratio=function(i){return e((i=+i)>1?i:1)},n}(XF);function Qne(){var e=ZF,t=!1,n=1,i=1,r=[0],s=Qa,o=Qa,a=Qa,u=Qa,l=Qa;function c(d){return d.x0=d.y0=0,d.x1=n,d.y1=i,d.eachBefore(f),r=[0],t&&d.eachBefore(HF),d}function f(d){var h=r[d.depth],p=d.x0+h,g=d.y0+h,m=d.x1-h,y=d.y1-h;m<p&&(p=m=(p+m)/2),y<g&&(g=y=(g+y)/2),d.x0=p,d.y0=g,d.x1=m,d.y1=y,d.children&&(h=r[d.depth+1]=s(d)/2,p+=l(d)-h,g+=o(d)-h,m-=a(d)-h,y-=u(d)-h,m<p&&(p=m=(p+m)/2),y<g&&(g=y=(g+y)/2),e(d,p,g,m,y))}return c.round=function(d){return arguments.length?(t=!!d,c):t},c.size=function(d){return arguments.length?(n=+d[0],i=+d[1],c):[n,i]},c.tile=function(d){return arguments.length?(e=LF(d),c):e},c.padding=function(d){return arguments.length?c.paddingInner(d).paddingOuter(d):c.paddingInner()},c.paddingInner=function(d){return arguments.length?(s=typeof d=="function"?d:Xl(+d),c):s},c.paddingOuter=function(d){return arguments.length?c.paddingTop(d).paddingRight(d).paddingBottom(d).paddingLeft(d):c.paddingTop()},c.paddingTop=function(d){return arguments.length?(o=typeof d=="function"?d:Xl(+d),c):o},c.paddingRight=function(d){return arguments.length?(a=typeof d=="function"?d:Xl(+d),c):a},c.paddingBottom=function(d){return arguments.length?(u=typeof d=="function"?d:Xl(+d),c):u},c.paddingLeft=function(d){return arguments.length?(l=typeof d=="function"?d:Xl(+d),c):l},c}function eie(e,t,n,i,r){var s=e.children,o,a=s.length,u,l=new Array(a+1);for(l[0]=u=o=0;o<a;++o)l[o+1]=u+=s[o].value;c(0,a,e.value,t,n,i,r);function c(f,d,h,p,g,m,y){if(f>=d-1){var b=s[f];b.x0=p,b.y0=g,b.x1=m,b.y1=y;return}for(var v=l[f],x=h/2+v,_=f+1,E=d-1;_<E;){var w=_+E>>>1;l[w]<x?_=w+1:E=w}x-l[_-1]<l[_]-x&&f+1<_&&--_;var C=l[_]-v,k=h-C;if(m-p>y-g){var S=h?(p*k+m*C)/h:m;c(f,_,C,p,g,S,y),c(_,d,k,S,g,m,y)}else{var $=h?(g*k+y*C)/h:y;c(f,_,C,p,g,m,$),c(_,d,k,p,$,m,y)}}}function tie(e,t,n,i,r){(e.depth&1?Ng:yd)(e,t,n,i,r)}const nie=function e(t){function n(i,r,s,o,a){if((u=i._squarify)&&u.ratio===t)for(var u,l,c,f,d=-1,h,p=u.length,g=i.value;++d<p;){for(l=u[d],c=l.children,f=l.value=0,h=c.length;f<h;++f)l.value+=c[f].value;l.dice?yd(l,r,s,o,g?s+=(a-s)*l.value/g:a):Ng(l,r,s,g?r+=(o-r)*l.value/g:o,a),g-=l.value}else i._squarify=u=KF(t,i,r,s,o,a),u.ratio=t}return n.ratio=function(i){return e((i=+i)>1?i:1)},n}(XF);function gx(e,t,n){const i={};return e.each(r=>{const s=r.data;n(s)&&(i[t(s)]=r)}),e.lookup=i,e}function mx(e){P.call(this,null,e)}mx.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const iie=e=>e.values;ee(mx,P,{transform(e,t){t.source||q("Nest transform requires an upstream data source.");var n=e.generate,i=e.modified(),r=t.clone(),s=this.value;return(!s||i||t.changed())&&(s&&s.each(o=>{o.children&&g0(o.data)&&r.rem.push(o.data)}),this.value=s=ux({values:oe(e.keys).reduce((o,a)=>(o.key(a),o),rie()).entries(r.source)},iie),n&&s.each(o=>{o.children&&(o=nt(o.data),r.add.push(o),r.source.push(o))}),gx(s,_e,_e)),r.source.root=s,r}});function rie(){const e=[],t={entries:r=>i(n(r,0),0),key:r=>(e.push(r),t)};function n(r,s){if(s>=e.length)return r;const o=r.length,a=e[s++],u={},l={};let c=-1,f,d,h;for(;++c<o;)f=a(d=r[c])+"",(h=u[f])?h.push(d):u[f]=[d];for(f in u)l[f]=n(u[f],s);return l}function i(r,s){if(++s>e.length)return r;const o=[];for(const a in r)o.push({key:a,values:i(r[a],s)});return o}return t}function Vs(e){P.call(this,null,e)}const sie=(e,t)=>e.parent===t.parent?1:2;ee(Vs,P,{transform(e,t){(!t.source||!t.source.root)&&q(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),i=this.fields,r=t.source.root,s=e.as||i;e.field?r.sum(e.field):r.count(),e.sort&&r.sort(Ta(e.sort,o=>o.data)),oie(n,this.params,e),n.separation&&n.separation(e.separation!==!1?sie:tl);try{this.value=n(r)}catch(o){q(o)}return r.each(o=>aie(o,i,s)),t.reflow(e.modified()).modifies(s).modifies("leaf")}});function oie(e,t,n){for(let i,r=0,s=t.length;r<s;++r)i=t[r],i in n&&e[i](n[i])}function aie(e,t,n){const i=e.data,r=t.length-1;for(let s=0;s<r;++s)i[n[s]]=e[t[s]];i[n[r]]=e.children?e.children.length:0}const yx=["x","y","r","depth","children"];function bx(e){Vs.call(this,e)}bx.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:yx.length,default:yx}]},ee(bx,Vs,{layout:Une,params:["radius","size","padding"],fields:yx});const vx=["x0","y0","x1","y1","depth","children"];function xx(e){Vs.call(this,e)}xx.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:vx.length,default:vx}]},ee(xx,Vs,{layout:jne,params:["size","round","padding"],fields:vx});function _x(e){P.call(this,null,e)}_x.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]},ee(_x,P,{transform(e,t){t.source||q("Stratify transform requires an upstream data source.");let n=this.value;const i=e.modified(),r=t.fork(t.ALL).materialize(t.SOURCE),s=!n||i||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return r.source=r.source.slice(),s&&(n=r.source.length?gx(VF().id(e.key).parentId(e.parentKey)(r.source),e.key,Ui):gx(VF()([{}]),e.key,e.key)),r.source.root=this.value=n,r}});const JF={tidy:Jne,cluster:cne},wx=["x","y","depth","children"];function Ex(e){Vs.call(this,e)}Ex.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:wx.length,default:wx}]},ee(Ex,Vs,{layout(e){const t=e||"tidy";if(ue(JF,t))return JF[t]();q("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:wx});function Cx(e){P.call(this,[],e)}Cx.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]},ee(Cx,P,{transform(e,t){const n=this.value,i=t.source&&t.source.root,r=t.fork(t.NO_SOURCE),s={};return i||q("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(r.rem=n,t.visit(t.SOURCE,o=>s[_e(o)]=1),i.each(o=>{const a=o.data,u=o.parent&&o.parent.data;u&&s[_e(a)]&&s[_e(u)]&&r.add.push(nt({source:u,target:a}))}),this.value=r.add):t.changed(t.MOD)&&(t.visit(t.MOD,o=>s[_e(o)]=1),n.forEach(o=>{(s[_e(o.source)]||s[_e(o.target)])&&r.mod.push(o)})),r}});const QF={binary:eie,dice:yd,slice:Ng,slicedice:tie,squarify:ZF,resquarify:nie},kx=["x0","y0","x1","y1","depth","children"];function Ax(e){Vs.call(this,e)}Ax.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:kx.length,default:kx}]},ee(Ax,Vs,{layout(){const e=Qne();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{ue(QF,t)?e.tile(QF[t]):q("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:kx});const uie=Object.freeze(Object.defineProperty({__proto__:null,nest:mx,pack:bx,partition:xx,stratify:_x,tree:Ex,treelinks:Cx,treemap:Ax},Symbol.toStringTag,{value:"Module"})),$x=4278190080;function lie(e,t){const n=e.bitmap();return(t||[]).forEach(i=>n.set(e(i.boundary[0]),e(i.boundary[3]))),[n,void 0]}function cie(e,t,n,i,r){const s=e.width,o=e.height,a=i||r,u=Mo(s,o).getContext("2d"),l=Mo(s,o).getContext("2d"),c=a&&Mo(s,o).getContext("2d");n.forEach(C=>Rg(u,C,!1)),Rg(l,t,!1),a&&Rg(c,t,!0);const f=Sx(u,s,o),d=Sx(l,s,o),h=a&&Sx(c,s,o),p=e.bitmap(),g=a&&e.bitmap();let m,y,b,v,x,_,E,w;for(y=0;y<o;++y)for(m=0;m<s;++m)x=y*s+m,_=f[x]&$x,w=d[x]&$x,E=a&&h[x]&$x,(_||E||w)&&(b=e(m),v=e(y),!r&&(_||w)&&p.set(b,v),a&&(_||E)&&g.set(b,v));return[p,g]}function Sx(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function Rg(e,t,n){if(!t.length)return;const i=t[0].mark.marktype;i==="group"?t.forEach(r=>{r.items.forEach(s=>Rg(e,s.items,n))}):$i[i].draw(e,{items:n?t.map(fie):t})}function fie(e){const t=m0(e,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}const Ys=5,Kn=31,bd=32,Jo=new Uint32Array(bd+1),vr=new Uint32Array(bd+1);vr[0]=0,Jo[0]=~vr[0];for(let e=1;e<=bd;++e)vr[e]=vr[e-1]<<1|1,Jo[e]=~vr[e];function die(e,t){const n=new Uint32Array(~~((e*t+bd)/bd));function i(s,o){n[s]|=o}function r(s,o){n[s]&=o}return{array:n,get:(s,o)=>{const a=o*e+s;return n[a>>>Ys]&1<<(a&Kn)},set:(s,o)=>{const a=o*e+s;i(a>>>Ys,1<<(a&Kn))},clear:(s,o)=>{const a=o*e+s;r(a>>>Ys,~(1<<(a&Kn)))},getRange:(s,o,a,u)=>{let l=u,c,f,d,h;for(;l>=o;--l)if(c=l*e+s,f=l*e+a,d=c>>>Ys,h=f>>>Ys,d===h){if(n[d]&Jo[c&Kn]&vr[(f&Kn)+1])return!0}else{if(n[d]&Jo[c&Kn]||n[h]&vr[(f&Kn)+1])return!0;for(let p=d+1;p<h;++p)if(n[p])return!0}return!1},setRange:(s,o,a,u)=>{let l,c,f,d,h;for(;o<=u;++o)if(l=o*e+s,c=o*e+a,f=l>>>Ys,d=c>>>Ys,f===d)i(f,Jo[l&Kn]&vr[(c&Kn)+1]);else for(i(f,Jo[l&Kn]),i(d,vr[(c&Kn)+1]),h=f+1;h<d;++h)i(h,4294967295)},clearRange:(s,o,a,u)=>{let l,c,f,d,h;for(;o<=u;++o)if(l=o*e+s,c=o*e+a,f=l>>>Ys,d=c>>>Ys,f===d)r(f,vr[l&Kn]|Jo[(c&Kn)+1]);else for(r(f,vr[l&Kn]),r(d,Jo[(c&Kn)+1]),h=f+1;h<d;++h)r(h,0)},outOfBounds:(s,o,a,u)=>s<0||o<0||u>=t||a>=e}}function hie(e,t,n){const i=Math.max(1,Math.sqrt(e*t/1e6)),r=~~((e+2*n+i)/i),s=~~((t+2*n+i)/i),o=a=>~~((a+n)/i);return o.invert=a=>a*i-n,o.bitmap=()=>die(r,s),o.ratio=i,o.padding=n,o.width=e,o.height=t,o}function pie(e,t,n,i){const r=e.width,s=e.height;return function(o){const a=o.datum.datum.items[i].items,u=a.length,l=o.datum.fontSize,c=Ai.width(o.datum,o.datum.text);let f=0,d,h,p,g,m,y,b;for(let v=0;v<u;++v)d=a[v].x,p=a[v].y,h=a[v].x2===void 0?d:a[v].x2,g=a[v].y2===void 0?p:a[v].y2,m=(d+h)/2,y=(p+g)/2,b=Math.abs(h-d+g-p),b>=f&&(f=b,o.x=m,o.y=y);return m=c/2,y=l/2,d=o.x-m,h=o.x+m,p=o.y-y,g=o.y+y,o.align="center",d<0&&h<=r?o.align="left":0<=d&&r<h&&(o.align="right"),o.baseline="middle",p<0&&g<=s?o.baseline="top":0<=p&&s<g&&(o.baseline="bottom"),!0}}function Og(e,t,n,i,r,s){let o=n/2;return e-o<0||e+o>r||t-(o=i/2)<0||t+o>s}function Qo(e,t,n,i,r,s,o,a){const u=r*s/(i*2),l=e(t-u),c=e(t+u),f=e(n-(s=s/2)),d=e(n+s);return o.outOfBounds(l,f,c,d)||o.getRange(l,f,c,d)||a&&a.getRange(l,f,c,d)}function gie(e,t,n,i){const r=e.width,s=e.height,o=t[0],a=t[1];function u(l,c,f,d,h){const p=e.invert(l),g=e.invert(c);let m=f,y=s,b;if(!Og(p,g,d,h,r,s)&&!Qo(e,p,g,h,d,m,o,a)&&!Qo(e,p,g,h,d,h,o,null)){for(;y-m>=1;)b=(m+y)/2,Qo(e,p,g,h,d,b,o,a)?y=b:m=b;if(m>f)return[p,g,m,!0]}}return function(l){const c=l.datum.datum.items[i].items,f=c.length,d=l.datum.fontSize,h=Ai.width(l.datum,l.datum.text);let p=n?d:0,g=!1,m=!1,y=0,b,v,x,_,E,w,C,k,S,$,O,R,F,A,T,B,H;for(let z=0;z<f;++z){for(b=c[z].x,x=c[z].y,v=c[z].x2===void 0?b:c[z].x2,_=c[z].y2===void 0?x:c[z].y2,b>v&&(H=b,b=v,v=H),x>_&&(H=x,x=_,_=H),S=e(b),O=e(v),$=~~((S+O)/2),R=e(x),A=e(_),F=~~((R+A)/2),C=$;C>=S;--C)for(k=F;k>=R;--k)B=u(C,k,p,h,d),B&&([l.x,l.y,p,g]=B);for(C=$;C<=O;++C)for(k=F;k<=A;++k)B=u(C,k,p,h,d),B&&([l.x,l.y,p,g]=B);!g&&!n&&(T=Math.abs(v-b+_-x),E=(b+v)/2,w=(x+_)/2,T>=y&&!Og(E,w,h,d,r,s)&&!Qo(e,E,w,d,h,d,o,null)&&(y=T,l.x=E,l.y=w,m=!0))}return g||m?(E=h/2,w=d/2,o.setRange(e(l.x-E),e(l.y-w),e(l.x+E),e(l.y+w)),l.align="center",l.baseline="middle",!0):!1}}const mie=[-1,-1,1,1],yie=[-1,1,-1,1];function bie(e,t,n,i){const r=e.width,s=e.height,o=t[0],a=t[1],u=e.bitmap();return function(l){const c=l.datum.datum.items[i].items,f=c.length,d=l.datum.fontSize,h=Ai.width(l.datum,l.datum.text),p=[];let g=n?d:0,m=!1,y=!1,b=0,v,x,_,E,w,C,k,S,$,O,R,F;for(let A=0;A<f;++A){for(v=c[A].x,_=c[A].y,x=c[A].x2===void 0?v:c[A].x2,E=c[A].y2===void 0?_:c[A].y2,p.push([e((v+x)/2),e((_+E)/2)]);p.length;)if([k,S]=p.pop(),!(o.get(k,S)||a.get(k,S)||u.get(k,S))){u.set(k,S);for(let T=0;T<4;++T)w=k+mie[T],C=S+yie[T],u.outOfBounds(w,C,w,C)||p.push([w,C]);if(w=e.invert(k),C=e.invert(S),$=g,O=s,!Og(w,C,h,d,r,s)&&!Qo(e,w,C,d,h,$,o,a)&&!Qo(e,w,C,d,h,d,o,null)){for(;O-$>=1;)R=($+O)/2,Qo(e,w,C,d,h,R,o,a)?O=R:$=R;$>g&&(l.x=w,l.y=C,g=$,m=!0)}}!m&&!n&&(F=Math.abs(x-v+E-_),w=(v+x)/2,C=(_+E)/2,F>=b&&!Og(w,C,h,d,r,s)&&!Qo(e,w,C,d,h,d,o,null)&&(b=F,l.x=w,l.y=C,y=!0))}return m||y?(w=h/2,C=d/2,o.setRange(e(l.x-w),e(l.y-C),e(l.x+w),e(l.y+C)),l.align="center",l.baseline="middle",!0):!1}}const vie=["right","center","left"],xie=["bottom","middle","top"];function _ie(e,t,n,i){const r=e.width,s=e.height,o=t[0],a=t[1],u=i.length;return function(l){const c=l.boundary,f=l.datum.fontSize;if(c[2]<0||c[5]<0||c[0]>r||c[3]>s)return!1;let d=l.textWidth??0,h,p,g,m,y,b,v,x,_,E,w,C,k,S,$;for(let O=0;O<u;++O){if(h=(n[O]&3)-1,p=(n[O]>>>2&3)-1,g=h===0&&p===0||i[O]<0,m=h&&p?Math.SQRT1_2:1,y=i[O]<0?-1:1,b=c[1+h]+i[O]*h*m,w=c[4+p]+y*f*p/2+i[O]*p*m,x=w-f/2,_=w+f/2,C=e(b),S=e(x),$=e(_),!d)if(eD(C,C,S,$,o,a,b,b,x,_,c,g))d=Ai.width(l.datum,l.datum.text);else continue;if(E=b+y*d*h/2,b=E-d/2,v=E+d/2,C=e(b),k=e(v),eD(C,k,S,$,o,a,b,v,x,_,c,g))return l.x=h?h*y<0?v:b:E,l.y=p?p*y<0?_:x:w,l.align=vie[h*y+1],l.baseline=xie[p*y+1],o.setRange(C,S,k,$),!0}return!1}}function eD(e,t,n,i,r,s,o,a,u,l,c,f){return!(r.outOfBounds(e,n,t,i)||(f&&s||r).getRange(e,n,t,i))}const Fx=0,Dx=4,Tx=8,Mx=0,Nx=1,Rx=2,wie={"top-left":Fx+Mx,top:Fx+Nx,"top-right":Fx+Rx,left:Dx+Mx,middle:Dx+Nx,right:Dx+Rx,"bottom-left":Tx+Mx,bottom:Tx+Nx,"bottom-right":Tx+Rx},Eie={naive:pie,"reduced-search":gie,floodfill:bie};function Cie(e,t,n,i,r,s,o,a,u,l,c){if(!e.length)return e;const f=Math.max(i.length,r.length),d=kie(i,f),h=Aie(r,f),p=$ie(e[0].datum),g=p==="group"&&e[0].datum.items[u].marktype,m=g==="area",y=Sie(p,g,a,u),b=l===null||l===1/0,v=m&&c==="naive";let x=-1,_=-1;const E=e.map(S=>{const $=b?Ai.width(S,S.text):void 0;return x=Math.max(x,$),_=Math.max(_,S.fontSize),{datum:S,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:y(S),textWidth:$}});l=l===null||l===1/0?Math.max(x,_)+Math.max(...i):l;const w=hie(t[0],t[1],l);let C;if(!v){n&&E.sort((O,R)=>n(O.datum,R.datum));let S=!1;for(let O=0;O<h.length&&!S;++O)S=h[O]===5||d[O]<0;const $=(p&&o||m)&&e.map(O=>O.datum);C=s.length||$?cie(w,$||[],s,S,m):lie(w,o&&E)}const k=m?Eie[c](w,C,o,u):_ie(w,C,h,d);return E.forEach(S=>S.opacity=+k(S)),E}function kie(e,t){const n=new Float64Array(t),i=e.length;for(let r=0;r<i;++r)n[r]=e[r]||0;for(let r=i;r<t;++r)n[r]=n[i-1];return n}function Aie(e,t){const n=new Int8Array(t),i=e.length;for(let r=0;r<i;++r)n[r]|=wie[e[r]];for(let r=i;r<t;++r)n[r]=n[i-1];return n}function $ie(e){return e&&e.mark&&e.mark.marktype}function Sie(e,t,n,i){const r=s=>[s.x,s.x,s.x,s.y,s.y,s.y];return e?e==="line"||e==="area"?s=>r(s.datum):t==="line"?s=>{const o=s.datum.items[i].items;return r(o.length?o[n==="start"?0:o.length-1]:{x:NaN,y:NaN})}:s=>{const o=s.datum.bounds;return[o.x1,(o.x1+o.x2)/2,o.x2,o.y1,(o.y1+o.y2)/2,o.y2]}:r}const Ox=["x","y","opacity","align","baseline"],tD=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function Lx(e){P.call(this,null,e)}Lx.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:tD},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:Ox.length,default:Ox}]},ee(Lx,P,{transform(e,t){function n(s){const o=e[s];return Ie(o)&&t.modified(o.fields)}const i=e.modified();if(!(i||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&q("Size parameter should be specified as a [width, height] array.");const r=e.as||Ox;return Cie(t.materialize(t.SOURCE).source||[],e.size,e.sort,oe(e.offset==null?1:e.offset),oe(e.anchor||tD),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(s=>{const o=s.datum;o[r[0]]=s.x,o[r[1]]=s.y,o[r[2]]=s.opacity,o[r[3]]=s.align,o[r[4]]=s.baseline}),t.reflow(i).modifies(r)}});const Fie=Object.freeze(Object.defineProperty({__proto__:null,label:Lx},Symbol.toStringTag,{value:"Module"}));function nD(e,t){var n=[],i=function(c){return c(a)},r,s,o,a,u,l;if(t==null)n.push(e);else for(r={},s=0,o=e.length;s<o;++s)a=e[s],u=t.map(i),l=r[u],l||(r[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function Ix(e){P.call(this,null,e)}Ix.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]},ee(Ix,P,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const i=t.materialize(t.SOURCE).source,r=nD(i,e.groupby),s=(e.groupby||[]).map(Tt),o=s.length,a=e.as||[Tt(e.x),Tt(e.y)],u=[];r.forEach(l=>{i9(l,e.x,e.y,e.bandwidth||.3).forEach(c=>{const f={};for(let d=0;d<o;++d)f[s[d]]=l.dims[d];f[a[0]]=c[0],f[a[1]]=c[1],u.push(nt(f))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});const Px={constant:Dy,linear:Ty,log:ZE,exp:JE,pow:QE,quad:My,poly:e9},Die=(e,t)=>e==="poly"?t:e==="quad"?2:1;function zx(e){P.call(this,null,e)}zx.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(Px)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]},ee(zx,P,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const i=t.materialize(t.SOURCE).source,r=nD(i,e.groupby),s=(e.groupby||[]).map(Tt),o=e.method||"linear",a=e.order==null?3:e.order,u=Die(o,a),l=e.as||[Tt(e.x),Tt(e.y)],c=Px[o],f=[];let d=e.extent;ue(Px,o)||q("Invalid regression method: "+o),d!=null&&o==="log"&&d[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),d=null),r.forEach(h=>{if(h.length<=u){t.dataflow.warn("Skipping regression with more parameters than data points.");return}const g=c(h,e.x,e.y,a);if(e.params){f.push(nt({keys:h.dims,coef:g.coef,rSquared:g.rSquared}));return}const m=d||qr(h,e.x),y=b=>{const v={};for(let x=0;x<s.length;++x)v[s[x]]=h.dims[x];v[l[0]]=b[0],v[l[1]]=b[1],f.push(nt(v))};o==="linear"||o==="constant"?m.forEach(b=>y([b,g.predict(b)])):A0(g.predict,m,25,200).forEach(y)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});const Tie=Object.freeze(Object.defineProperty({__proto__:null,loess:Ix,regression:zx},Symbol.toStringTag,{value:"Module"})),Xs=11102230246251565e-32,Mn=134217729,Mie=(3+8*Xs)*Xs;function Bx(e,t,n,i,r){let s,o,a,u,l=t[0],c=i[0],f=0,d=0;c>l==c>-l?(s=l,l=t[++f]):(s=c,c=i[++d]);let h=0;if(f<e&&d<n)for(c>l==c>-l?(o=l+s,a=s-(o-l),l=t[++f]):(o=c+s,a=s-(o-c),c=i[++d]),s=o,a!==0&&(r[h++]=a);f<e&&d<n;)c>l==c>-l?(o=s+l,u=o-s,a=s-(o-u)+(l-u),l=t[++f]):(o=s+c,u=o-s,a=s-(o-u)+(c-u),c=i[++d]),s=o,a!==0&&(r[h++]=a);for(;f<e;)o=s+l,u=o-s,a=s-(o-u)+(l-u),l=t[++f],s=o,a!==0&&(r[h++]=a);for(;d<n;)o=s+c,u=o-s,a=s-(o-u)+(c-u),c=i[++d],s=o,a!==0&&(r[h++]=a);return(s!==0||h===0)&&(r[h++]=s),h}function Nie(e,t){let n=t[0];for(let i=1;i<e;i++)n+=t[i];return n}function vd(e){return new Float64Array(e)}const Rie=(3+16*Xs)*Xs,Oie=(2+12*Xs)*Xs,Lie=(9+64*Xs)*Xs*Xs,Kl=vd(4),iD=vd(8),rD=vd(12),sD=vd(16),Zn=vd(4);function Iie(e,t,n,i,r,s,o){let a,u,l,c,f,d,h,p,g,m,y,b,v,x,_,E,w,C;const k=e-r,S=n-r,$=t-s,O=i-s;x=k*O,d=Mn*k,h=d-(d-k),p=k-h,d=Mn*O,g=d-(d-O),m=O-g,_=p*m-(x-h*g-p*g-h*m),E=$*S,d=Mn*$,h=d-(d-$),p=$-h,d=Mn*S,g=d-(d-S),m=S-g,w=p*m-(E-h*g-p*g-h*m),y=_-w,f=_-y,Kl[0]=_-(y+f)+(f-w),b=x+y,f=b-x,v=x-(b-f)+(y-f),y=v-E,f=v-y,Kl[1]=v-(y+f)+(f-E),C=b+y,f=C-b,Kl[2]=b-(C-f)+(y-f),Kl[3]=C;let R=Nie(4,Kl),F=Oie*o;if(R>=F||-R>=F||(f=e-k,a=e-(k+f)+(f-r),f=n-S,l=n-(S+f)+(f-r),f=t-$,u=t-($+f)+(f-s),f=i-O,c=i-(O+f)+(f-s),a===0&&u===0&&l===0&&c===0)||(F=Lie*o+Mie*Math.abs(R),R+=k*c+O*a-($*l+S*u),R>=F||-R>=F))return R;x=a*O,d=Mn*a,h=d-(d-a),p=a-h,d=Mn*O,g=d-(d-O),m=O-g,_=p*m-(x-h*g-p*g-h*m),E=u*S,d=Mn*u,h=d-(d-u),p=u-h,d=Mn*S,g=d-(d-S),m=S-g,w=p*m-(E-h*g-p*g-h*m),y=_-w,f=_-y,Zn[0]=_-(y+f)+(f-w),b=x+y,f=b-x,v=x-(b-f)+(y-f),y=v-E,f=v-y,Zn[1]=v-(y+f)+(f-E),C=b+y,f=C-b,Zn[2]=b-(C-f)+(y-f),Zn[3]=C;const A=Bx(4,Kl,4,Zn,iD);x=k*c,d=Mn*k,h=d-(d-k),p=k-h,d=Mn*c,g=d-(d-c),m=c-g,_=p*m-(x-h*g-p*g-h*m),E=$*l,d=Mn*$,h=d-(d-$),p=$-h,d=Mn*l,g=d-(d-l),m=l-g,w=p*m-(E-h*g-p*g-h*m),y=_-w,f=_-y,Zn[0]=_-(y+f)+(f-w),b=x+y,f=b-x,v=x-(b-f)+(y-f),y=v-E,f=v-y,Zn[1]=v-(y+f)+(f-E),C=b+y,f=C-b,Zn[2]=b-(C-f)+(y-f),Zn[3]=C;const T=Bx(A,iD,4,Zn,rD);x=a*c,d=Mn*a,h=d-(d-a),p=a-h,d=Mn*c,g=d-(d-c),m=c-g,_=p*m-(x-h*g-p*g-h*m),E=u*l,d=Mn*u,h=d-(d-u),p=u-h,d=Mn*l,g=d-(d-l),m=l-g,w=p*m-(E-h*g-p*g-h*m),y=_-w,f=_-y,Zn[0]=_-(y+f)+(f-w),b=x+y,f=b-x,v=x-(b-f)+(y-f),y=v-E,f=v-y,Zn[1]=v-(y+f)+(f-E),C=b+y,f=C-b,Zn[2]=b-(C-f)+(y-f),Zn[3]=C;const B=Bx(T,rD,4,Zn,sD);return sD[B-1]}function Lg(e,t,n,i,r,s){const o=(t-s)*(n-r),a=(e-r)*(i-s),u=o-a,l=Math.abs(o+a);return Math.abs(u)>=Rie*l?u:-Iie(e,t,n,i,r,s,l)}const oD=Math.pow(2,-52),Ig=new Uint32Array(512);class Pg{static from(t,n=jie,i=qie){const r=t.length,s=new Float64Array(r*2);for(let o=0;o<r;o++){const a=t[o];s[2*o]=n(a),s[2*o+1]=i(a)}return new Pg(s)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const i=Math.max(2*n-5,0);this._triangles=new Uint32Array(i*3),this._halfedges=new Int32Array(i*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:i,_hullTri:r,_hullHash:s}=this,o=t.length>>1;let a=1/0,u=1/0,l=-1/0,c=-1/0;for(let k=0;k<o;k++){const S=t[2*k],$=t[2*k+1];S<a&&(a=S),$<u&&(u=$),S>l&&(l=S),$>c&&(c=$),this._ids[k]=k}const f=(a+l)/2,d=(u+c)/2;let h,p,g;for(let k=0,S=1/0;k<o;k++){const $=Ux(f,d,t[2*k],t[2*k+1]);$<S&&(h=k,S=$)}const m=t[2*h],y=t[2*h+1];for(let k=0,S=1/0;k<o;k++){if(k===h)continue;const $=Ux(m,y,t[2*k],t[2*k+1]);$<S&&$>0&&(p=k,S=$)}let b=t[2*p],v=t[2*p+1],x=1/0;for(let k=0;k<o;k++){if(k===h||k===p)continue;const S=Bie(m,y,b,v,t[2*k],t[2*k+1]);S<x&&(g=k,x=S)}let _=t[2*g],E=t[2*g+1];if(x===1/0){for(let $=0;$<o;$++)this._dists[$]=t[2*$]-t[0]||t[2*$+1]-t[1];Zl(this._ids,this._dists,0,o-1);const k=new Uint32Array(o);let S=0;for(let $=0,O=-1/0;$<o;$++){const R=this._ids[$],F=this._dists[R];F>O&&(k[S++]=R,O=F)}this.hull=k.subarray(0,S),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(Lg(m,y,b,v,_,E)<0){const k=p,S=b,$=v;p=g,b=_,v=E,g=k,_=S,E=$}const w=Uie(m,y,b,v,_,E);this._cx=w.x,this._cy=w.y;for(let k=0;k<o;k++)this._dists[k]=Ux(t[2*k],t[2*k+1],w.x,w.y);Zl(this._ids,this._dists,0,o-1),this._hullStart=h;let C=3;i[h]=n[g]=p,i[p]=n[h]=g,i[g]=n[p]=h,r[h]=0,r[p]=1,r[g]=2,s.fill(-1),s[this._hashKey(m,y)]=h,s[this._hashKey(b,v)]=p,s[this._hashKey(_,E)]=g,this.trianglesLen=0,this._addTriangle(h,p,g,-1,-1,-1);for(let k=0,S,$;k<this._ids.length;k++){const O=this._ids[k],R=t[2*O],F=t[2*O+1];if(k>0&&Math.abs(R-S)<=oD&&Math.abs(F-$)<=oD||(S=R,$=F,O===h||O===p||O===g))continue;let A=0;for(let ne=0,be=this._hashKey(R,F);ne<this._hashSize&&(A=s[(be+ne)%this._hashSize],!(A!==-1&&A!==i[A]));ne++);A=n[A];let T=A,B;for(;B=i[T],Lg(R,F,t[2*T],t[2*T+1],t[2*B],t[2*B+1])>=0;)if(T=B,T===A){T=-1;break}if(T===-1)continue;let H=this._addTriangle(T,O,i[T],-1,-1,r[T]);r[O]=this._legalize(H+2),r[T]=H,C++;let z=i[T];for(;B=i[z],Lg(R,F,t[2*z],t[2*z+1],t[2*B],t[2*B+1])<0;)H=this._addTriangle(z,O,B,r[O],-1,r[z]),r[O]=this._legalize(H+2),i[z]=z,C--,z=B;if(T===A)for(;B=n[T],Lg(R,F,t[2*B],t[2*B+1],t[2*T],t[2*T+1])<0;)H=this._addTriangle(B,O,T,-1,r[T],r[B]),this._legalize(H+2),r[B]=H,i[T]=T,C--,T=B;this._hullStart=n[O]=T,i[T]=n[z]=O,i[O]=z,s[this._hashKey(R,F)]=O,s[this._hashKey(t[2*T],t[2*T+1])]=T}this.hull=new Uint32Array(C);for(let k=0,S=this._hullStart;k<C;k++)this.hull[k]=S,S=i[S];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(Pie(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:i,coords:r}=this;let s=0,o=0;for(;;){const a=i[t],u=t-t%3;if(o=u+(t+2)%3,a===-1){if(s===0)break;t=Ig[--s];continue}const l=a-a%3,c=u+(t+1)%3,f=l+(a+2)%3,d=n[o],h=n[t],p=n[c],g=n[f];if(zie(r[2*d],r[2*d+1],r[2*h],r[2*h+1],r[2*p],r[2*p+1],r[2*g],r[2*g+1])){n[t]=g,n[a]=d;const y=i[f];if(y===-1){let v=this._hullStart;do{if(this._hullTri[v]===f){this._hullTri[v]=t;break}v=this._hullPrev[v]}while(v!==this._hullStart)}this._link(t,y),this._link(a,i[o]),this._link(o,f);const b=l+(a+1)%3;s<Ig.length&&(Ig[s++]=b)}else{if(s===0)break;t=Ig[--s]}}return o}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,i,r,s,o){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=n,this._triangles[a+2]=i,this._link(a,r),this._link(a+1,s),this._link(a+2,o),this.trianglesLen+=3,a}}function Pie(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function Ux(e,t,n,i){const r=e-n,s=t-i;return r*r+s*s}function zie(e,t,n,i,r,s,o,a){const u=e-o,l=t-a,c=n-o,f=i-a,d=r-o,h=s-a,p=u*u+l*l,g=c*c+f*f,m=d*d+h*h;return u*(f*m-g*h)-l*(c*m-g*d)+p*(c*h-f*d)<0}function Bie(e,t,n,i,r,s){const o=n-e,a=i-t,u=r-e,l=s-t,c=o*o+a*a,f=u*u+l*l,d=.5/(o*l-a*u),h=(l*c-a*f)*d,p=(o*f-u*c)*d;return h*h+p*p}function Uie(e,t,n,i,r,s){const o=n-e,a=i-t,u=r-e,l=s-t,c=o*o+a*a,f=u*u+l*l,d=.5/(o*l-a*u),h=e+(l*c-a*f)*d,p=t+(o*f-u*c)*d;return{x:h,y:p}}function Zl(e,t,n,i){if(i-n<=20)for(let r=n+1;r<=i;r++){const s=e[r],o=t[s];let a=r-1;for(;a>=n&&t[e[a]]>o;)e[a+1]=e[a--];e[a+1]=s}else{const r=n+i>>1;let s=n+1,o=i;xd(e,r,s),t[e[n]]>t[e[i]]&&xd(e,n,i),t[e[s]]>t[e[i]]&&xd(e,s,i),t[e[n]]>t[e[s]]&&xd(e,n,s);const a=e[s],u=t[a];for(;;){do s++;while(t[e[s]]<u);do o--;while(t[e[o]]>u);if(o<s)break;xd(e,s,o)}e[n+1]=e[o],e[o]=a,i-s+1>=o-n?(Zl(e,t,s,i),Zl(e,t,n,o-1)):(Zl(e,t,n,o-1),Zl(e,t,s,i))}}function xd(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}function jie(e){return e[0]}function qie(e){return e[1]}const aD=1e-6;class eu{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,i){t=+t,n=+n,i=+i;const r=t+i,s=n;if(i<0)throw new Error("negative radius");this._x1===null?this._+=`M${r},${s}`:(Math.abs(this._x1-r)>aD||Math.abs(this._y1-s)>aD)&&(this._+="L"+r+","+s),i&&(this._+=`A${i},${i},0,1,1,${t-i},${n}A${i},${i},0,1,1,${this._x1=r},${this._y1=s}`)}rect(t,n,i,r){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+i}v${+r}h${-i}Z`}value(){return this._||null}}class jx{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let Wie=class{constructor(t,[n,i,r,s]=[0,0,960,500]){if(!((r=+r)>=(n=+n))||!((s=+s)>=(i=+i)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=r,this.xmin=n,this.ymax=s,this.ymin=i,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:i},vectors:r}=this;let s,o;const a=this.circumcenters=this._circumcenters.subarray(0,i.length/3*2);for(let g=0,m=0,y=i.length,b,v;g<y;g+=3,m+=2){const x=i[g]*2,_=i[g+1]*2,E=i[g+2]*2,w=t[x],C=t[x+1],k=t[_],S=t[_+1],$=t[E],O=t[E+1],R=k-w,F=S-C,A=$-w,T=O-C,B=(R*T-F*A)*2;if(Math.abs(B)<1e-9){if(s===void 0){s=o=0;for(const z of n)s+=t[z*2],o+=t[z*2+1];s/=n.length,o/=n.length}const H=1e9*Math.sign((s-w)*T-(o-C)*A);b=(w+$)/2-H*T,v=(C+O)/2+H*A}else{const H=1/B,z=R*R+F*F,ne=A*A+T*T;b=w+(T*z-F*ne)*H,v=C+(R*ne-A*z)*H}a[m]=b,a[m+1]=v}let u=n[n.length-1],l,c=u*4,f,d=t[2*u],h,p=t[2*u+1];r.fill(0);for(let g=0;g<n.length;++g)u=n[g],l=c,f=d,h=p,c=u*4,d=t[2*u],p=t[2*u+1],r[l+2]=r[c]=h-p,r[l+3]=r[c+1]=d-f}render(t){const n=t==null?t=new eu:void 0,{delaunay:{halfedges:i,inedges:r,hull:s},circumcenters:o,vectors:a}=this;if(s.length<=1)return null;for(let c=0,f=i.length;c<f;++c){const d=i[c];if(d<c)continue;const h=Math.floor(c/3)*2,p=Math.floor(d/3)*2,g=o[h],m=o[h+1],y=o[p],b=o[p+1];this._renderSegment(g,m,y,b,t)}let u,l=s[s.length-1];for(let c=0;c<s.length;++c){u=l,l=s[c];const f=Math.floor(r[l]/3)*2,d=o[f],h=o[f+1],p=u*4,g=this._project(d,h,a[p+2],a[p+3]);g&&this._renderSegment(d,h,g[0],g[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new eu:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const i=n==null?n=new eu:void 0,r=this._clip(t);if(r===null||!r.length)return;n.moveTo(r[0],r[1]);let s=r.length;for(;r[0]===r[s-2]&&r[1]===r[s-1]&&s>1;)s-=2;for(let o=2;o<s;o+=2)(r[o]!==r[o-2]||r[o+1]!==r[o-1])&&n.lineTo(r[o],r[o+1]);return n.closePath(),i&&i.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,i=t.length/2;n<i;++n){const r=this.cellPolygon(n);r&&(r.index=n,yield r)}}cellPolygon(t){const n=new jx;return this.renderCell(t,n),n.value()}_renderSegment(t,n,i,r,s){let o;const a=this._regioncode(t,n),u=this._regioncode(i,r);a===0&&u===0?(s.moveTo(t,n),s.lineTo(i,r)):(o=this._clipSegment(t,n,i,r,a,u))&&(s.moveTo(o[0],o[1]),s.lineTo(o[2],o[3]))}contains(t,n,i){return n=+n,n!==n||(i=+i,i!==i)?!1:this.delaunay._step(t,n,i)===t}*neighbors(t){const n=this._clip(t);if(n)for(const i of this.delaunay.neighbors(t)){const r=this._clip(i);if(r){e:for(let s=0,o=n.length;s<o;s+=2)for(let a=0,u=r.length;a<u;a+=2)if(n[s]===r[a]&&n[s+1]===r[a+1]&&n[(s+2)%o]===r[(a+u-2)%u]&&n[(s+3)%o]===r[(a+u-1)%u]){yield i;break e}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:i,halfedges:r,triangles:s}}=this,o=i[t];if(o===-1)return null;const a=[];let u=o;do{const l=Math.floor(u/3);if(a.push(n[l*2],n[l*2+1]),u=u%3===2?u-2:u+1,s[u]!==t)break;u=r[u]}while(u!==o&&u!==-1);return a}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:i}=this,r=t*4;return this._simplify(i[r]||i[r+1]?this._clipInfinite(t,n,i[r],i[r+1],i[r+2],i[r+3]):this._clipFinite(t,n))}_clipFinite(t,n){const i=n.length;let r=null,s,o,a=n[i-2],u=n[i-1],l,c=this._regioncode(a,u),f,d=0;for(let h=0;h<i;h+=2)if(s=a,o=u,a=n[h],u=n[h+1],l=c,c=this._regioncode(a,u),l===0&&c===0)f=d,d=0,r?r.push(a,u):r=[a,u];else{let p,g,m,y,b;if(l===0){if((p=this._clipSegment(s,o,a,u,l,c))===null)continue;[g,m,y,b]=p}else{if((p=this._clipSegment(a,u,s,o,c,l))===null)continue;[y,b,g,m]=p,f=d,d=this._edgecode(g,m),f&&d&&this._edge(t,f,d,r,r.length),r?r.push(g,m):r=[g,m]}f=d,d=this._edgecode(y,b),f&&d&&this._edge(t,f,d,r,r.length),r?r.push(y,b):r=[y,b]}if(r)f=d,d=this._edgecode(r[0],r[1]),f&&d&&this._edge(t,f,d,r,r.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return r}_clipSegment(t,n,i,r,s,o){const a=s<o;for(a&&([t,n,i,r,s,o]=[i,r,t,n,o,s]);;){if(s===0&&o===0)return a?[i,r,t,n]:[t,n,i,r];if(s&o)return null;let u,l,c=s||o;c&8?(u=t+(i-t)*(this.ymax-n)/(r-n),l=this.ymax):c&4?(u=t+(i-t)*(this.ymin-n)/(r-n),l=this.ymin):c&2?(l=n+(r-n)*(this.xmax-t)/(i-t),u=this.xmax):(l=n+(r-n)*(this.xmin-t)/(i-t),u=this.xmin),s?(t=u,n=l,s=this._regioncode(t,n)):(i=u,r=l,o=this._regioncode(i,r))}}_clipInfinite(t,n,i,r,s,o){let a=Array.from(n),u;if((u=this._project(a[0],a[1],i,r))&&a.unshift(u[0],u[1]),(u=this._project(a[a.length-2],a[a.length-1],s,o))&&a.push(u[0],u[1]),a=this._clipFinite(t,a))for(let l=0,c=a.length,f,d=this._edgecode(a[c-2],a[c-1]);l<c;l+=2)f=d,d=this._edgecode(a[l],a[l+1]),f&&d&&(l=this._edge(t,f,d,a,l),c=a.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(t,n,i,r,s){for(;n!==i;){let o,a;switch(n){case 5:n=4;continue;case 4:n=6,o=this.xmax,a=this.ymin;break;case 6:n=2;continue;case 2:n=10,o=this.xmax,a=this.ymax;break;case 10:n=8;continue;case 8:n=9,o=this.xmin,a=this.ymax;break;case 9:n=1;continue;case 1:n=5,o=this.xmin,a=this.ymin;break}(r[s]!==o||r[s+1]!==a)&&this.contains(t,o,a)&&(r.splice(s,0,o,a),s+=2)}return s}_project(t,n,i,r){let s=1/0,o,a,u;if(r<0){if(n<=this.ymin)return null;(o=(this.ymin-n)/r)<s&&(u=this.ymin,a=t+(s=o)*i)}else if(r>0){if(n>=this.ymax)return null;(o=(this.ymax-n)/r)<s&&(u=this.ymax,a=t+(s=o)*i)}if(i>0){if(t>=this.xmax)return null;(o=(this.xmax-t)/i)<s&&(a=this.xmax,u=n+(s=o)*r)}else if(i<0){if(t<=this.xmin)return null;(o=(this.xmin-t)/i)<s&&(a=this.xmin,u=n+(s=o)*r)}return[a,u]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const i=(n+2)%t.length,r=(n+4)%t.length;(t[n]===t[i]&&t[i]===t[r]||t[n+1]===t[i+1]&&t[i+1]===t[r+1])&&(t.splice(i,2),n-=2)}t.length||(t=null)}return t}};const Hie=2*Math.PI,Jl=Math.pow;function Gie(e){return e[0]}function Vie(e){return e[1]}function Yie(e){const{triangles:t,coords:n}=e;for(let i=0;i<t.length;i+=3){const r=2*t[i],s=2*t[i+1],o=2*t[i+2];if((n[o]-n[r])*(n[s+1]-n[r+1])-(n[s]-n[r])*(n[o+1]-n[r+1])>1e-10)return!1}return!0}function Xie(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class qx{static from(t,n=Gie,i=Vie,r){return new qx("length"in t?Kie(t,n,i,r):Float64Array.from(Zie(t,n,i,r)))}constructor(t){this._delaunator=new Pg(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&Yie(t)){this.collinear=Int32Array.from({length:n.length/2},(d,h)=>h).sort((d,h)=>n[2*d]-n[2*h]||n[2*d+1]-n[2*h+1]);const u=this.collinear[0],l=this.collinear[this.collinear.length-1],c=[n[2*u],n[2*u+1],n[2*l],n[2*l+1]],f=1e-8*Math.hypot(c[3]-c[1],c[2]-c[0]);for(let d=0,h=n.length/2;d<h;++d){const p=Xie(n[2*d],n[2*d+1],f);n[2*d]=p[0],n[2*d+1]=p[1]}this._delaunator=new Pg(n)}else delete this.collinear;const i=this.halfedges=this._delaunator.halfedges,r=this.hull=this._delaunator.hull,s=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let u=0,l=i.length;u<l;++u){const c=s[u%3===2?u-2:u+1];(i[u]===-1||o[c]===-1)&&(o[c]=u)}for(let u=0,l=r.length;u<l;++u)a[r[u]]=u;r.length<=2&&r.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=r[0],o[r[0]]=1,r.length===2&&(o[r[1]]=0,this.triangles[1]=r[1],this.triangles[2]=r[1]))}voronoi(t){return new Wie(this,t)}*neighbors(t){const{inedges:n,hull:i,_hullIndex:r,halfedges:s,triangles:o,collinear:a}=this;if(a){const f=a.indexOf(t);f>0&&(yield a[f-1]),f<a.length-1&&(yield a[f+1]);return}const u=n[t];if(u===-1)return;let l=u,c=-1;do{if(yield c=o[l],l=l%3===2?l-2:l+1,o[l]!==t)return;if(l=s[l],l===-1){const f=i[(r[t]+1)%i.length];f!==c&&(yield f);return}}while(l!==u)}find(t,n,i=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const r=i;let s;for(;(s=this._step(i,t,n))>=0&&s!==i&&s!==r;)i=s;return s}_step(t,n,i){const{inedges:r,hull:s,_hullIndex:o,halfedges:a,triangles:u,points:l}=this;if(r[t]===-1||!l.length)return(t+1)%(l.length>>1);let c=t,f=Jl(n-l[t*2],2)+Jl(i-l[t*2+1],2);const d=r[t];let h=d;do{let p=u[h];const g=Jl(n-l[p*2],2)+Jl(i-l[p*2+1],2);if(g<f&&(f=g,c=p),h=h%3===2?h-2:h+1,u[h]!==t)break;if(h=a[h],h===-1){if(h=s[(o[t]+1)%s.length],h!==p&&Jl(n-l[h*2],2)+Jl(i-l[h*2+1],2)<f)return h;break}}while(h!==d);return c}render(t){const n=t==null?t=new eu:void 0,{points:i,halfedges:r,triangles:s}=this;for(let o=0,a=r.length;o<a;++o){const u=r[o];if(u<o)continue;const l=s[o]*2,c=s[u]*2;t.moveTo(i[l],i[l+1]),t.lineTo(i[c],i[c+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const i=t==null?t=new eu:void 0,{points:r}=this;for(let s=0,o=r.length;s<o;s+=2){const a=r[s],u=r[s+1];t.moveTo(a+n,u),t.arc(a,u,n,0,Hie)}return i&&i.value()}renderHull(t){const n=t==null?t=new eu:void 0,{hull:i,points:r}=this,s=i[0]*2,o=i.length;t.moveTo(r[s],r[s+1]);for(let a=1;a<o;++a){const u=2*i[a];t.lineTo(r[u],r[u+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new jx;return this.renderHull(t),t.value()}renderTriangle(t,n){const i=n==null?n=new eu:void 0,{points:r,triangles:s}=this,o=s[t*=3]*2,a=s[t+1]*2,u=s[t+2]*2;return n.moveTo(r[o],r[o+1]),n.lineTo(r[a],r[a+1]),n.lineTo(r[u],r[u+1]),n.closePath(),i&&i.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,i=t.length/3;n<i;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new jx;return this.renderTriangle(t,n),n.value()}}function Kie(e,t,n,i){const r=e.length,s=new Float64Array(r*2);for(let o=0;o<r;++o){const a=e[o];s[o*2]=t.call(i,a,o,e),s[o*2+1]=n.call(i,a,o,e)}return s}function*Zie(e,t,n,i){let r=0;for(const s of e)yield t.call(i,s,r,e),yield n.call(i,s,r,e),++r}function Wx(e){P.call(this,null,e)}Wx.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const Jie=[-1e5,-1e5,1e5,1e5];ee(Wx,P,{transform(e,t){const n=e.as||"path",i=t.source;if(!i||!i.length)return t;let r=e.size;r=r?[0,0,r[0],r[1]]:(r=e.extent)?[r[0][0],r[0][1],r[1][0],r[1][1]]:Jie;const s=this.value=qx.from(i,e.x,e.y).voronoi(r);for(let o=0,a=i.length;o<a;++o){const u=s.cellPolygon(o);i[o][n]=u&&!ere(u)?Qie(u):null}return t.reflow(e.modified()).modifies(n)}});function Qie(e){const t=e[0][0],n=e[0][1];let i=e.length-1;for(;e[i][0]===t&&e[i][1]===n;--i);return"M"+e.slice(0,i+1).join("L")+"Z"}function ere(e){return e.length===2&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]}const tre=Object.freeze(Object.defineProperty({__proto__:null,voronoi:Wx},Symbol.toStringTag,{value:"Module"}));var Hx=Math.PI/180,_d=64,zg=2048;function nre(){var e=[256,256],t,n,i,r,s,o,a,u=uD,l=[],c=Math.random,f={};f.layout=function(){for(var p=d(Mo()),g=ure((e[0]>>5)*e[1]),m=null,y=l.length,b=-1,v=[],x=l.map(E=>({text:t(E),font:n(E),style:r(E),weight:s(E),rotate:o(E),size:~~(i(E)+1e-14),padding:a(E),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:E})).sort((E,w)=>w.size-E.size);++b<y;){var _=x[b];_.x=e[0]*(c()+.5)>>1,_.y=e[1]*(c()+.5)>>1,ire(p,_,x,b),_.hasText&&h(g,_,m)&&(v.push(_),m?sre(m,_):m=[{x:_.x+_.x0,y:_.y+_.y0},{x:_.x+_.x1,y:_.y+_.y1}],_.x-=e[0]>>1,_.y-=e[1]>>1)}return v};function d(p){p.width=p.height=1;var g=Math.sqrt(p.getContext("2d").getImageData(0,0,1,1).data.length>>2);p.width=(_d<<5)/g,p.height=zg/g;var m=p.getContext("2d");return m.fillStyle=m.strokeStyle="red",m.textAlign="center",{context:m,ratio:g}}function h(p,g,m){for(var y=g.x,b=g.y,v=Math.hypot(e[0],e[1]),x=u(e),_=c()<.5?1:-1,E=-_,w,C,k;(w=x(E+=_))&&(C=~~w[0],k=~~w[1],!(Math.min(Math.abs(C),Math.abs(k))>=v));)if(g.x=y+C,g.y=b+k,!(g.x+g.x0<0||g.y+g.y0<0||g.x+g.x1>e[0]||g.y+g.y1>e[1])&&(!m||!rre(g,p,e[0]))&&(!m||ore(g,m))){for(var S=g.sprite,$=g.width>>5,O=e[0]>>5,R=g.x-($<<4),F=R&127,A=32-F,T=g.y1-g.y0,B=(g.y+g.y0)*O+(R>>5),H,z=0;z<T;z++){H=0;for(var ne=0;ne<=$;ne++)p[B+ne]|=H<<A|(ne<$?(H=S[z*$+ne])>>>F:0);B+=O}return g.sprite=null,!0}return!1}return f.words=function(p){return arguments.length?(l=p,f):l},f.size=function(p){return arguments.length?(e=[+p[0],+p[1]],f):e},f.font=function(p){return arguments.length?(n=tu(p),f):n},f.fontStyle=function(p){return arguments.length?(r=tu(p),f):r},f.fontWeight=function(p){return arguments.length?(s=tu(p),f):s},f.rotate=function(p){return arguments.length?(o=tu(p),f):o},f.text=function(p){return arguments.length?(t=tu(p),f):t},f.spiral=function(p){return arguments.length?(u=lre[p]||p,f):u},f.fontSize=function(p){return arguments.length?(i=tu(p),f):i},f.padding=function(p){return arguments.length?(a=tu(p),f):a},f.random=function(p){return arguments.length?(c=p,f):c},f}function ire(e,t,n,i){if(!t.sprite){var r=e.context,s=e.ratio;r.clearRect(0,0,(_d<<5)/s,zg/s);var o=0,a=0,u=0,l=n.length,c,f,d,h,p;for(--i;++i<l;){if(t=n[i],r.save(),r.font=t.style+" "+t.weight+" "+~~((t.size+1)/s)+"px "+t.font,c=r.measureText(t.text+"m").width*s,d=t.size<<1,t.rotate){var g=Math.sin(t.rotate*Hx),m=Math.cos(t.rotate*Hx),y=c*m,b=c*g,v=d*m,x=d*g;c=Math.max(Math.abs(y+x),Math.abs(y-x))+31>>5<<5,d=~~Math.max(Math.abs(b+v),Math.abs(b-v))}else c=c+31>>5<<5;if(d>u&&(u=d),o+c>=_d<<5&&(o=0,a+=u,u=0),a+d>=zg)break;r.translate((o+(c>>1))/s,(a+(d>>1))/s),t.rotate&&r.rotate(t.rotate*Hx),r.fillText(t.text,0,0),t.padding&&(r.lineWidth=2*t.padding,r.strokeText(t.text,0,0)),r.restore(),t.width=c,t.height=d,t.xoff=o,t.yoff=a,t.x1=c>>1,t.y1=d>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,o+=c}for(var _=r.getImageData(0,0,(_d<<5)/s,zg/s).data,E=[];--i>=0;)if(t=n[i],!!t.hasText){for(c=t.width,f=c>>5,d=t.y1-t.y0,h=0;h<d*f;h++)E[h]=0;if(o=t.xoff,o==null)return;a=t.yoff;var w=0,C=-1;for(p=0;p<d;p++){for(h=0;h<c;h++){var k=f*p+(h>>5),S=_[(a+p)*(_d<<5)+(o+h)<<2]?1<<31-h%32:0;E[k]|=S,w|=S}w?C=p:(t.y0++,d--,p--,a++)}t.y1=t.y0+C,t.sprite=E.slice(0,(t.y1-t.y0)*f)}}}function rre(e,t,n){n>>=5;for(var i=e.sprite,r=e.width>>5,s=e.x-(r<<4),o=s&127,a=32-o,u=e.y1-e.y0,l=(e.y+e.y0)*n+(s>>5),c,f=0;f<u;f++){c=0;for(var d=0;d<=r;d++)if((c<<a|(d<r?(c=i[f*r+d])>>>o:0))&t[l+d])return!0;l+=n}return!1}function sre(e,t){var n=e[0],i=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>i.x&&(i.x=t.x+t.x1),t.y+t.y1>i.y&&(i.y=t.y+t.y1)}function ore(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function uD(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function are(e){var t=4,n=t*e[0]/e[1],i=0,r=0;return function(s){var o=s<0?-1:1;switch(Math.sqrt(1+4*o*s)-o&3){case 0:i+=n;break;case 1:r+=t;break;case 2:i-=n;break;default:r-=t;break}return[i,r]}}function ure(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function tu(e){return typeof e=="function"?e:function(){return e}}var lre={archimedean:uD,rectangular:are};const lD=["x","y","font","fontSize","fontStyle","fontWeight","angle"],cre=["text","font","rotate","fontSize","fontStyle","fontWeight"];function Gx(e){P.call(this,nre(),e)}Gx.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:lD}]},ee(Gx,P,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&q("Wordcloud size dimensions must be non-zero.");function n(p){const g=e[p];return Ie(g)&&t.modified(g.fields)}const i=e.modified();if(!(i||t.changed(t.ADD_REM)||cre.some(n)))return;const r=t.materialize(t.SOURCE).source,s=this.value,o=e.as||lD;let a=e.fontSize||14,u;if(Ie(a)?u=e.fontSizeRange:a=kn(a),u){const p=a,g=Qe("sqrt")().domain(qr(r,p)).range(u);a=m=>g(p(m))}r.forEach(p=>{p[o[0]]=NaN,p[o[1]]=NaN,p[o[3]]=0});const l=s.words(r).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(a).random(Wi).layout(),c=s.size(),f=c[0]>>1,d=c[1]>>1,h=l.length;for(let p=0,g,m;p<h;++p)g=l[p],m=g.datum,m[o[0]]=g.x+f,m[o[1]]=g.y+d,m[o[2]]=g.font,m[o[3]]=g.size,m[o[4]]=g.style,m[o[5]]=g.weight,m[o[6]]=g.rotate;return t.reflow(i).modifies(o)}});const fre=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:Gx},Symbol.toStringTag,{value:"Module"})),dre=e=>new Uint8Array(e),hre=e=>new Uint16Array(e),wd=e=>new Uint32Array(e);function pre(){let e=8,t=[],n=wd(0),i=Bg(0,e),r=Bg(0,e);return{data:()=>t,seen:()=>n=gre(n,t.length),add(s){for(let o=0,a=t.length,u=s.length,l;o<u;++o)l=s[o],l._index=a++,t.push(l)},remove(s,o){const a=t.length,u=Array(a-s),l=t;let c,f,d;for(f=0;!o[f]&&f<a;++f)u[f]=t[f],l[f]=f;for(d=f;f<a;++f)c=t[f],o[f]?l[f]=-1:(l[f]=d,i[d]=i[f],r[d]=r[f],u[d]=c,c._index=d++),i[f]=0;return t=u,l},size:()=>t.length,curr:()=>i,prev:()=>r,reset:s=>r[s]=i[s],all:()=>e<257?255:e<65537?65535:4294967295,set(s,o){i[s]|=o},clear(s,o){i[s]&=~o},resize(s,o){const a=i.length;(s>a||o>e)&&(e=Math.max(o,e),i=Bg(s,e,i),r=Bg(s,e))}}}function gre(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function Bg(e,t,n){const i=(t<257?dre:t<65537?hre:wd)(e);return n&&i.set(n),i}function cD(e,t,n){const i=1<<t;return{one:i,zero:~i,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(r,s){const o=this,a=o.bisect(o.range,r.value),u=r.index,l=a[0],c=a[1],f=u.length;let d;for(d=0;d<l;++d)s[u[d]]|=i;for(d=c;d<f;++d)s[u[d]]|=i;return o}}}function fD(){let e=wd(0),t=[],n=0;function i(a,u,l){if(!u.length)return[];const c=n,f=u.length,d=wd(f);let h=Array(f),p,g,m;for(m=0;m<f;++m)h[m]=a(u[m]),d[m]=m;if(h=mre(h,d),c)p=t,g=e,t=Array(c+f),e=wd(c+f),yre(l,p,g,c,h,d,f,t,e);else{if(l>0)for(m=0;m<f;++m)d[m]+=l;t=h,e=d}return n=c+f,{index:d,value:h}}function r(a,u){const l=n;let c,f,d;for(f=0;!u[e[f]]&&f<l;++f);for(d=f;f<l;++f)u[c=e[f]]||(e[d]=c,t[d]=t[f],++d);n=l-a}function s(a){for(let u=0,l=n;u<l;++u)e[u]=a[e[u]]}function o(a,u){let l;return u?l=u.length:(u=t,l=n),[Sq(u,a[0],0,l),Eo(u,a[1],0,l)]}return{insert:i,remove:r,bisect:o,reindex:s,index:()=>e,size:()=>n}}function mre(e,t){return e.sort.call(t,(n,i)=>{const r=e[n],s=e[i];return r<s?-1:r>s?1:0}),Tq(e,t)}function yre(e,t,n,i,r,s,o,a,u){let l=0,c=0,f;for(f=0;l<i&&c<o;++f)t[l]<r[c]?(a[f]=t[l],u[f]=n[l++]):(a[f]=r[c],u[f]=s[c++]+e);for(;l<i;++l,++f)a[f]=t[l],u[f]=n[l];for(;c<o;++c,++f)a[f]=r[c],u[f]=s[c]+e}function Vx(e){P.call(this,pre(),e),this._indices=null,this._dims=null}Vx.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]},ee(Vx,P,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(i=>t.modified(i.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){const n=e.fields,i=e.query,r=this._indices={},s=this._dims=[],o=i.length;let a=0,u,l;for(;a<o;++a)u=n[a].fname,l=r[u]||(r[u]=fD()),s.push(cD(l,a,i[a]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),i=e.fields,r=e.query,s=this._indices,o=this._dims,a=this.value,u=a.curr(),l=a.prev(),c=a.all(),f=n.rem=n.add,d=n.mod,h=r.length,p={};let g,m,y,b,v,x,_,E,w;if(l.set(u),t.rem.length&&(v=this.remove(e,t,n)),t.add.length&&a.add(t.add),t.mod.length)for(x={},b=t.mod,_=0,E=b.length;_<E;++_)x[b[_]._index]=1;for(_=0;_<h;++_)w=i[_],(!o[_]||e.modified("fields",_)||t.modified(w.fields))&&(y=w.fname,(g=p[y])||(s[y]=m=fD(),p[y]=g=m.insert(w,t.source,0)),o[_]=cD(m,_,r[_]).onAdd(g,u));for(_=0,E=a.data().length;_<E;++_)v[_]||(l[_]!==u[_]?f.push(_):x[_]&&u[_]!==c&&d.push(_));return a.mask=(1<<h)-1,n},eval(e,t){const n=t.materialize().fork(),i=this._dims.length;let r=0;return t.rem.length&&(this.remove(e,t,n),r|=(1<<i)-1),e.modified("query")&&!e.modified("fields")&&(r|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),r|=(1<<i)-1),t.mod.length&&(this.modify(t,n),r|=(1<<i)-1),this.value.mask=r,n},insert(e,t,n){const i=t.add,r=this.value,s=this._dims,o=this._indices,a=e.fields,u={},l=n.add,c=r.size()+i.length,f=s.length;let d=r.size(),h,p,g;r.resize(c,f),r.add(i);const m=r.curr(),y=r.prev(),b=r.all();for(h=0;h<f;++h)p=a[h].fname,g=u[p]||(u[p]=o[p].insert(a[h],i,d)),s[h].onAdd(g,m);for(;d<c;++d)y[d]=b,m[d]!==b&&l.push(d)},modify(e,t){const n=t.mod,i=this.value,r=i.curr(),s=i.all(),o=e.mod;let a,u,l;for(a=0,u=o.length;a<u;++a)l=o[a]._index,r[l]!==s&&n.push(l)},remove(e,t,n){const i=this._indices,r=this.value,s=r.curr(),o=r.prev(),a=r.all(),u={},l=n.rem,c=t.rem;let f,d,h,p;for(f=0,d=c.length;f<d;++f)h=c[f]._index,u[h]=1,o[h]=p=s[h],s[h]=a,p!==a&&l.push(h);for(h in i)i[h].remove(d,u);return this.reindex(t,d,u),u},reindex(e,t,n){const i=this._indices,r=this.value;e.runAfter(()=>{const s=r.remove(t,n);for(const o in i)i[o].reindex(s)})},update(e,t,n){const i=this._dims,r=e.query,s=t.stamp,o=i.length;let a=0,u,l;for(n.filters=0,l=0;l<o;++l)e.modified("query",l)&&(u=l,++a);if(a===1)a=i[u].one,this.incrementOne(i[u],r[u],n.add,n.rem);else for(l=0,a=0;l<o;++l)e.modified("query",l)&&(a|=i[l].one,this.incrementAll(i[l],r[l],s,n.add),n.rem=n.add);return a},incrementAll(e,t,n,i){const r=this.value,s=r.seen(),o=r.curr(),a=r.prev(),u=e.index(),l=e.bisect(e.range),c=e.bisect(t),f=c[0],d=c[1],h=l[0],p=l[1],g=e.one;let m,y,b;if(f<h)for(m=f,y=Math.min(h,d);m<y;++m)b=u[m],s[b]!==n&&(a[b]=o[b],s[b]=n,i.push(b)),o[b]^=g;else if(f>h)for(m=h,y=Math.min(f,p);m<y;++m)b=u[m],s[b]!==n&&(a[b]=o[b],s[b]=n,i.push(b)),o[b]^=g;if(d>p)for(m=Math.max(f,p),y=d;m<y;++m)b=u[m],s[b]!==n&&(a[b]=o[b],s[b]=n,i.push(b)),o[b]^=g;else if(d<p)for(m=Math.max(h,d),y=p;m<y;++m)b=u[m],s[b]!==n&&(a[b]=o[b],s[b]=n,i.push(b)),o[b]^=g;e.range=t.slice()},incrementOne(e,t,n,i){const r=this.value,s=r.curr(),o=e.index(),a=e.bisect(e.range),u=e.bisect(t),l=u[0],c=u[1],f=a[0],d=a[1],h=e.one;let p,g,m;if(l<f)for(p=l,g=Math.min(f,c);p<g;++p)m=o[p],s[m]^=h,n.push(m);else if(l>f)for(p=f,g=Math.min(l,d);p<g;++p)m=o[p],s[m]^=h,i.push(m);if(c>d)for(p=Math.max(l,d),g=c;p<g;++p)m=o[p],s[m]^=h,n.push(m);else if(c<d)for(p=Math.max(f,c),g=d;p<g;++p)m=o[p],s[m]^=h,i.push(m);e.range=t.slice()}});function Yx(e){P.call(this,null,e)}Yx.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]},ee(Yx,P,{transform(e,t){const n=~(e.ignore||0),i=e.filter,r=i.mask;if(!(r&n))return t.StopPropagation;const s=t.fork(t.ALL),o=i.data(),a=i.curr(),u=i.prev(),l=c=>a[c]&n?null:o[c];return s.filter(s.MOD,l),r&r-1?(s.filter(s.ADD,c=>{const f=a[c]&n;return!f&&f^u[c]&n?o[c]:null}),s.filter(s.REM,c=>{const f=a[c]&n;return f&&!(f^(f^u[c]&n))?o[c]:null})):(s.filter(s.ADD,l),s.filter(s.REM,c=>(a[c]&n)===r?o[c]:null)),s.filter(s.SOURCE,c=>l(c._index))}});const bre=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:Vx,resolvefilter:Yx},Symbol.toStringTag,{value:"Module"})),vre="RawCode",nu="Literal",xre="Property",_re="Identifier",wre="ArrayExpression",Ere="BinaryExpression",dD="CallExpression",Cre="ConditionalExpression",kre="LogicalExpression",Are="MemberExpression",$re="ObjectExpression",Sre="UnaryExpression";function xr(e){this.type=e}xr.prototype.visit=function(e){let t,n,i;if(e(this))return 1;for(t=Fre(this),n=0,i=t.length;n<i;++n)if(t[n].visit(e))return 1};function Fre(e){switch(e.type){case wre:return e.elements;case Ere:case kre:return[e.left,e.right];case dD:return[e.callee].concat(e.arguments);case Cre:return[e.test,e.consequent,e.alternate];case Are:return[e.object,e.property];case $re:return e.properties;case xre:return[e.key,e.value];case Sre:return[e.argument];case _re:case nu:case vre:default:return[]}}var as,pe,U,Nn,ot,Ug=1,Ed=2,iu=3,ea=4,jg=5,ru=6,ci=7,Cd=8,Dre=9;as={},as[Ug]="Boolean",as[Ed]="<end>",as[iu]="Identifier",as[ea]="Keyword",as[jg]="Null",as[ru]="Numeric",as[ci]="Punctuator",as[Cd]="String",as[Dre]="RegularExpression";var Tre="ArrayExpression",Mre="BinaryExpression",Nre="CallExpression",Rre="ConditionalExpression",hD="Identifier",Ore="Literal",Lre="LogicalExpression",Ire="MemberExpression",Pre="ObjectExpression",zre="Property",Bre="UnaryExpression",en="Unexpected token %0",Ure="Unexpected number",jre="Unexpected string",qre="Unexpected identifier",Wre="Unexpected reserved word",Hre="Unexpected end of input",Xx="Invalid regular expression",Kx="Invalid regular expression: missing /",pD="Octal literals are not allowed in strict mode.",Gre="Duplicate data property in object literal not allowed in strict mode",hn="ILLEGAL",kd="Disabled.",Vre=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),Yre=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function qg(e,t){if(!e)throw new Error("ASSERT: "+t)}function Ks(e){return e>=48&&e<=57}function Zx(e){return"0123456789abcdefABCDEF".includes(e)}function Ad(e){return"01234567".includes(e)}function Xre(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(e)}function $d(e){return e===10||e===13||e===8232||e===8233}function Sd(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&Vre.test(String.fromCharCode(e))}function Wg(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&Yre.test(String.fromCharCode(e))}const Kre={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function gD(){for(;U<Nn;){const e=pe.charCodeAt(U);if(Xre(e)||$d(e))++U;else break}}function Jx(e){var t,n,i,r=0;for(n=e==="u"?4:2,t=0;t<n;++t)U<Nn&&Zx(pe[U])?(i=pe[U++],r=r*16+"0123456789abcdef".indexOf(i.toLowerCase())):et({},en,hn);return String.fromCharCode(r)}function Zre(){var e,t,n,i;for(e=pe[U],t=0,e==="}"&&et({},en,hn);U<Nn&&(e=pe[U++],!!Zx(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&et({},en,hn),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,i=(t-65536&1023)+56320,String.fromCharCode(n,i))}function mD(){var e,t;for(e=pe.charCodeAt(U++),t=String.fromCharCode(e),e===92&&(pe.charCodeAt(U)!==117&&et({},en,hn),++U,e=Jx("u"),(!e||e==="\\"||!Sd(e.charCodeAt(0)))&&et({},en,hn),t=e);U<Nn&&(e=pe.charCodeAt(U),!!Wg(e));)++U,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),pe.charCodeAt(U)!==117&&et({},en,hn),++U,e=Jx("u"),(!e||e==="\\"||!Wg(e.charCodeAt(0)))&&et({},en,hn),t+=e);return t}function Jre(){var e,t;for(e=U++;U<Nn;){if(t=pe.charCodeAt(U),t===92)return U=e,mD();if(Wg(t))++U;else break}return pe.slice(e,U)}function Qre(){var e,t,n;return e=U,t=pe.charCodeAt(U)===92?mD():Jre(),t.length===1?n=iu:Kre.hasOwnProperty(t)?n=ea:t==="null"?n=jg:t==="true"||t==="false"?n=Ug:n=iu,{type:n,value:t,start:e,end:U}}function Qx(){var e=U,t=pe.charCodeAt(U),n,i=pe[U],r,s,o;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++U,{type:ci,value:String.fromCharCode(t),start:e,end:U};default:if(n=pe.charCodeAt(U+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return U+=2,{type:ci,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:U};case 33:case 61:return U+=2,pe.charCodeAt(U)===61&&++U,{type:ci,value:pe.slice(e,U),start:e,end:U}}}if(o=pe.substr(U,4),o===">>>=")return U+=4,{type:ci,value:o,start:e,end:U};if(s=o.substr(0,3),s===">>>"||s==="<<="||s===">>=")return U+=3,{type:ci,value:s,start:e,end:U};if(r=s.substr(0,2),i===r[1]&&"+-<>&|".includes(i)||r==="=>")return U+=2,{type:ci,value:r,start:e,end:U};if(r==="//"&&et({},en,hn),"<>=!+-*%&|^/".includes(i))return++U,{type:ci,value:i,start:e,end:U};et({},en,hn)}function ese(e){let t="";for(;U<Nn&&Zx(pe[U]);)t+=pe[U++];return t.length===0&&et({},en,hn),Sd(pe.charCodeAt(U))&&et({},en,hn),{type:ru,value:parseInt("0x"+t,16),start:e,end:U}}function tse(e){let t="0"+pe[U++];for(;U<Nn&&Ad(pe[U]);)t+=pe[U++];return(Sd(pe.charCodeAt(U))||Ks(pe.charCodeAt(U)))&&et({},en,hn),{type:ru,value:parseInt(t,8),octal:!0,start:e,end:U}}function yD(){var e,t,n;if(n=pe[U],qg(Ks(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=U,e="",n!=="."){if(e=pe[U++],n=pe[U],e==="0"){if(n==="x"||n==="X")return++U,ese(t);if(Ad(n))return tse(t);n&&Ks(n.charCodeAt(0))&&et({},en,hn)}for(;Ks(pe.charCodeAt(U));)e+=pe[U++];n=pe[U]}if(n==="."){for(e+=pe[U++];Ks(pe.charCodeAt(U));)e+=pe[U++];n=pe[U]}if(n==="e"||n==="E")if(e+=pe[U++],n=pe[U],(n==="+"||n==="-")&&(e+=pe[U++]),Ks(pe.charCodeAt(U)))for(;Ks(pe.charCodeAt(U));)e+=pe[U++];else et({},en,hn);return Sd(pe.charCodeAt(U))&&et({},en,hn),{type:ru,value:parseFloat(e),start:t,end:U}}function nse(){var e="",t,n,i,r,s=!1;for(t=pe[U],qg(t==="'"||t==='"',"String literal must starts with a quote"),n=U,++U;U<Nn;)if(i=pe[U++],i===t){t="";break}else if(i==="\\")if(i=pe[U++],!i||!$d(i.charCodeAt(0)))switch(i){case"u":case"x":pe[U]==="{"?(++U,e+=Zre()):e+=Jx(i);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:Ad(i)?(r="01234567".indexOf(i),r!==0&&(s=!0),U<Nn&&Ad(pe[U])&&(s=!0,r=r*8+"01234567".indexOf(pe[U++]),"0123".includes(i)&&U<Nn&&Ad(pe[U])&&(r=r*8+"01234567".indexOf(pe[U++]))),e+=String.fromCharCode(r)):e+=i;break}else i==="\r"&&pe[U]===`
`&&++U;else{if($d(i.charCodeAt(0)))break;e+=i}return t!==""&&et({},en,hn),{type:Cd,value:e,octal:s,start:n,end:U}}function ise(e,t){let n=e;t.includes("u")&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(i,r)=>{if(parseInt(r,16)<=1114111)return"x";et({},Xx)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{et({},Xx)}try{return new RegExp(e,t)}catch{return null}}function rse(){var e,t,n,i,r;for(e=pe[U],qg(e==="/","Regular expression literal must start with a slash"),t=pe[U++],n=!1,i=!1;U<Nn;)if(e=pe[U++],t+=e,e==="\\")e=pe[U++],$d(e.charCodeAt(0))&&et({},Kx),t+=e;else if($d(e.charCodeAt(0)))et({},Kx);else if(n)e==="]"&&(n=!1);else if(e==="/"){i=!0;break}else e==="["&&(n=!0);return i||et({},Kx),r=t.substr(1,t.length-2),{value:r,literal:t}}function sse(){var e,t,n;for(t="",n="";U<Nn&&(e=pe[U],!!Wg(e.charCodeAt(0)));)++U,e==="\\"&&U<Nn?et({},en,hn):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&et({},Xx,n),{value:n,literal:t}}function ose(){var e,t,n,i;return ot=null,gD(),e=U,t=rse(),n=sse(),i=ise(t.value,n.value),{literal:t.literal+n.literal,value:i,regex:{pattern:t.value,flags:n.value},start:e,end:U}}function ase(e){return e.type===iu||e.type===ea||e.type===Ug||e.type===jg}function bD(){if(gD(),U>=Nn)return{type:Ed,start:U,end:U};const e=pe.charCodeAt(U);return Sd(e)?Qre():e===40||e===41||e===59?Qx():e===39||e===34?nse():e===46?Ks(pe.charCodeAt(U+1))?yD():Qx():Ks(e)?yD():Qx()}function fi(){const e=ot;return U=e.end,ot=bD(),U=e.end,e}function vD(){const e=U;ot=bD(),U=e}function use(e){const t=new xr(Tre);return t.elements=e,t}function xD(e,t,n){const i=new xr(e==="||"||e==="&&"?Lre:Mre);return i.operator=e,i.left=t,i.right=n,i}function lse(e,t){const n=new xr(Nre);return n.callee=e,n.arguments=t,n}function cse(e,t,n){const i=new xr(Rre);return i.test=e,i.consequent=t,i.alternate=n,i}function e7(e){const t=new xr(hD);return t.name=e,t}function Fd(e){const t=new xr(Ore);return t.value=e.value,t.raw=pe.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function _D(e,t,n){const i=new xr(Ire);return i.computed=e==="[",i.object=t,i.property=n,i.computed||(n.member=!0),i}function fse(e){const t=new xr(Pre);return t.properties=e,t}function wD(e,t,n){const i=new xr(zre);return i.key=t,i.value=n,i.kind=e,i}function dse(e,t){const n=new xr(Bre);return n.operator=e,n.argument=t,n.prefix=!0,n}function et(e,t){var n,i=Array.prototype.slice.call(arguments,2),r=t.replace(/%(\d)/g,(s,o)=>(qg(o<i.length,"Message reference must be in range"),i[o]));throw n=new Error(r),n.index=U,n.description=r,n}function Hg(e){e.type===Ed&&et(e,Hre),e.type===ru&&et(e,Ure),e.type===Cd&&et(e,jre),e.type===iu&&et(e,qre),e.type===ea&&et(e,Wre),et(e,en,e.value)}function Rn(e){const t=fi();(t.type!==ci||t.value!==e)&&Hg(t)}function wt(e){return ot.type===ci&&ot.value===e}function t7(e){return ot.type===ea&&ot.value===e}function hse(){const e=[];for(U=ot.start,Rn("[");!wt("]");)wt(",")?(fi(),e.push(null)):(e.push(su()),wt("]")||Rn(","));return fi(),use(e)}function ED(){U=ot.start;const e=fi();return e.type===Cd||e.type===ru?(e.octal&&et(e,pD),Fd(e)):e7(e.value)}function pse(){var e,t,n,i;if(U=ot.start,e=ot,e.type===iu)return n=ED(),Rn(":"),i=su(),wD("init",n,i);if(e.type===Ed||e.type===ci)Hg(e);else return t=ED(),Rn(":"),i=su(),wD("init",t,i)}function gse(){var e=[],t,n,i,r={},s=String;for(U=ot.start,Rn("{");!wt("}");)t=pse(),t.key.type===hD?n=t.key.name:n=s(t.key.value),i="$"+n,Object.prototype.hasOwnProperty.call(r,i)?et({},Gre):r[i]=!0,e.push(t),wt("}")||Rn(",");return Rn("}"),fse(e)}function mse(){Rn("(");const e=n7();return Rn(")"),e}const yse={if:1};function bse(){var e,t,n;if(wt("("))return mse();if(wt("["))return hse();if(wt("{"))return gse();if(e=ot.type,U=ot.start,e===iu||yse[ot.value])n=e7(fi().value);else if(e===Cd||e===ru)ot.octal&&et(ot,pD),n=Fd(fi());else{if(e===ea)throw new Error(kd);e===Ug?(t=fi(),t.value=t.value==="true",n=Fd(t)):e===jg?(t=fi(),t.value=null,n=Fd(t)):wt("/")||wt("/=")?(n=Fd(ose()),vD()):Hg(fi())}return n}function vse(){const e=[];if(Rn("("),!wt(")"))for(;U<Nn&&(e.push(su()),!wt(")"));)Rn(",");return Rn(")"),e}function xse(){U=ot.start;const e=fi();return ase(e)||Hg(e),e7(e.value)}function _se(){return Rn("."),xse()}function wse(){Rn("[");const e=n7();return Rn("]"),e}function Ese(){var e,t,n;for(e=bse();;)if(wt("."))n=_se(),e=_D(".",e,n);else if(wt("("))t=vse(),e=lse(e,t);else if(wt("["))n=wse(),e=_D("[",e,n);else break;return e}function CD(){const e=Ese();if(ot.type===ci&&(wt("++")||wt("--")))throw new Error(kd);return e}function Gg(){var e,t;if(ot.type!==ci&&ot.type!==ea)t=CD();else{if(wt("++")||wt("--"))throw new Error(kd);if(wt("+")||wt("-")||wt("~")||wt("!"))e=fi(),t=Gg(),t=dse(e.value,t);else{if(t7("delete")||t7("void")||t7("typeof"))throw new Error(kd);t=CD()}}return t}function kD(e){let t=0;if(e.type!==ci&&e.type!==ea)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function Cse(){var e,t,n,i,r,s,o,a,u,l;if(e=ot,u=Gg(),i=ot,r=kD(i),r===0)return u;for(i.prec=r,fi(),t=[e,ot],o=Gg(),s=[u,i,o];(r=kD(ot))>0;){for(;s.length>2&&r<=s[s.length-2].prec;)o=s.pop(),a=s.pop().value,u=s.pop(),t.pop(),n=xD(a,u,o),s.push(n);i=fi(),i.prec=r,s.push(i),t.push(ot),n=Gg(),s.push(n)}for(l=s.length-1,n=s[l],t.pop();l>1;)t.pop(),n=xD(s[l-1].value,s[l-2],n),l-=2;return n}function su(){var e,t,n;return e=Cse(),wt("?")&&(fi(),t=su(),Rn(":"),n=su(),e=cse(e,t,n)),e}function n7(){const e=su();if(wt(","))throw new Error(kd);return e}function AD(e){pe=e,U=0,Nn=pe.length,ot=null,vD();const t=n7();if(ot.type!==Ed)throw new Error("Unexpect token after expression.");return t}var $D={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function SD(e){function t(o,a,u,l){let c=e(a[0]);return u&&(c=u+"("+c+")",u.lastIndexOf("new ",0)===0&&(c="("+c+")")),c+"."+o+(l<0?"":l===0?"()":"("+a.slice(1).map(e).join(",")+")")}function n(o,a,u){return l=>t(o,l,a,u)}const i="new Date",r="String",s="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(o){o.length<3&&q("Missing arguments to clamp function."),o.length>3&&q("Too many arguments to clamp function.");const a=o.map(e);return"Math.max("+a[1]+", Math.min("+a[2]+","+a[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:i,date:n("getDate",i,0),day:n("getDay",i,0),year:n("getFullYear",i,0),month:n("getMonth",i,0),hours:n("getHours",i,0),minutes:n("getMinutes",i,0),seconds:n("getSeconds",i,0),milliseconds:n("getMilliseconds",i,0),time:n("getTime",i,0),timezoneoffset:n("getTimezoneOffset",i,0),utcdate:n("getUTCDate",i,0),utcday:n("getUTCDay",i,0),utcyear:n("getUTCFullYear",i,0),utcmonth:n("getUTCMonth",i,0),utchours:n("getUTCHours",i,0),utcminutes:n("getUTCMinutes",i,0),utcseconds:n("getUTCSeconds",i,0),utcmilliseconds:n("getUTCMilliseconds",i,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",r,0),lower:n("toLowerCase",r,0),substring:n("substring",r),split:n("split",r),trim:n("trim",r,0),btoa:"btoa",atob:"atob",regexp:s,test:n("test",s),if:function(o){o.length<3&&q("Missing arguments to if function."),o.length>3&&q("Too many arguments to if function.");const a=o.map(e);return"("+a[0]+"?"+a[1]+":"+a[2]+")"}}}function kse(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function FD(e){e=e||{};const t=e.allowed?lr(e.allowed):{},n=e.forbidden?lr(e.forbidden):{},i=e.constants||$D,r=(e.functions||SD)(f),s=e.globalvar,o=e.fieldvar,a=Ie(s)?s:p=>`${s}["${p}"]`;let u={},l={},c=0;function f(p){if(se(p))return p;const g=d[p.type];return g==null&&q("Unsupported type: "+p.type),g(p)}const d={Literal:p=>p.raw,Identifier:p=>{const g=p.name;return c>0?g:ue(n,g)?q("Illegal identifier: "+g):ue(i,g)?i[g]:ue(t,g)?g:(u[g]=1,a(g))},MemberExpression:p=>{const g=!p.computed,m=f(p.object);g&&(c+=1);const y=f(p.property);return m===o&&(l[kse(y)]=1),g&&(c-=1),m+(g?"."+y:"["+y+"]")},CallExpression:p=>{p.callee.type!=="Identifier"&&q("Illegal callee type: "+p.callee.type);const g=p.callee.name,m=p.arguments,y=ue(r,g)&&r[g];return y||q("Unrecognized function: "+g),Ie(y)?y(m):y+"("+m.map(f).join(",")+")"},ArrayExpression:p=>"["+p.elements.map(f).join(",")+"]",BinaryExpression:p=>"("+f(p.left)+" "+p.operator+" "+f(p.right)+")",UnaryExpression:p=>"("+p.operator+f(p.argument)+")",ConditionalExpression:p=>"("+f(p.test)+"?"+f(p.consequent)+":"+f(p.alternate)+")",LogicalExpression:p=>"("+f(p.left)+p.operator+f(p.right)+")",ObjectExpression:p=>"{"+p.properties.map(f).join(",")+"}",Property:p=>{c+=1;const g=f(p.key);return c-=1,g+":"+f(p.value)}};function h(p){const g={code:f(p),globals:Object.keys(u),fields:Object.keys(l)};return u={},l={},g}return h.functions=r,h.constants=i,h}const DD=Symbol("vega_selection_getter");function TD(e){return(!e.getter||!e.getter[DD])&&(e.getter=Bi(e.field),e.getter[DD]=!0),e.getter}const i7="intersect",MD="union",Ase="vlMulti",$se="vlPoint",ND="or",Sse="and",us="_vgsid_",Dd=Bi(us),Fse="E",Dse="R",Tse="R-E",Mse="R-LE",Nse="R-RE",Rse="E-LT",Ose="E-LTE",Lse="E-GT",Ise="E-GTE",Pse="E-VALID",zse="E-ONE",Vg="index:unit";function RD(e,t){for(var n=t.fields,i=t.values,r=n.length,s=0,o,a;s<r;++s)if(a=n[s],o=TD(a)(e),_o(o)&&(o=Cn(o)),_o(i[s])&&(i[s]=Cn(i[s])),W(i[s])&&_o(i[s][0])&&(i[s]=i[s].map(Cn)),a.type===Fse){if(W(i[s])?!i[s].includes(o):o!==i[s])return!1}else if(a.type===Dse){if(!ol(o,i[s]))return!1}else if(a.type===Nse){if(!ol(o,i[s],!0,!1))return!1}else if(a.type===Tse){if(!ol(o,i[s],!1,!1))return!1}else if(a.type===Mse){if(!ol(o,i[s],!1,!0))return!1}else if(a.type===Rse){if(o>=i[s])return!1}else if(a.type===Ose){if(o>i[s])return!1}else if(a.type===Lse){if(o<=i[s])return!1}else if(a.type===Ise){if(o<i[s])return!1}else if(a.type===Pse){if(o===null||isNaN(o))return!1}else if(a.type===zse&&i[s].indexOf(o)===-1)return!1;return!0}function Bse(e,t,n){for(var i=this.context.data[e],r=i?i.values.value:[],s=i?i[Vg]&&i[Vg].value:void 0,o=n===i7,a=r.length,u=0,l,c,f,d,h;u<a;++u)if(l=r[u],s&&o){if(c=c||{},f=c[d=l.unit]||0,f===-1)continue;if(h=RD(t,l),c[d]=h?-1:++f,h&&s.size===1)return!0;if(!h&&f===s.get(d).count)return!1}else if(h=RD(t,l),o^h)return h;return a&&o}const OD=al(Dd),Use=OD.left,jse=OD.right;function qse(e,t,n){const i=this.context.data[e],r=i?i.values.value:[],s=i?i[Vg]&&i[Vg].value:void 0,o=n===i7,a=Dd(t),u=Use(r,a);if(u===r.length||Dd(r[u])!==a)return!1;if(s&&o){if(s.size===1)return!0;if(jse(r,a)-u<s.size)return!1}return!0}function Wse(e,t){return e.map(n=>Oe(t.fields?{values:t.fields.map(i=>TD(i)(n.datum))}:{[us]:Dd(n.datum)},t))}function Hse(e,t,n,i){for(var r=this.context.data[e],s=r?r.values.value:[],o={},a={},u={},l,c,f,d,h,p,g,m,y,b,v=s.length,x=0,_,E;x<v;++x)if(l=s[x],d=l.unit,c=l.fields,f=l.values,c&&f){for(_=0,E=c.length;_<E;++_)h=c[_],g=o[h.field]||(o[h.field]={}),m=g[d]||(g[d]=[]),u[h.field]=y=h.type.charAt(0),b=r7[`${y}_union`],g[d]=b(m,oe(f[_]));n&&(m=a[d]||(a[d]=[]),m.push(oe(f).reduce((w,C,k)=>(w[c[k].field]=C,w),{})))}else h=us,p=Dd(l),g=o[h]||(o[h]={}),m=g[d]||(g[d]=[]),m.push(p),n&&(m=a[d]||(a[d]=[]),m.push({[us]:p}));if(t=t||MD,o[us]?o[us]=r7[`${us}_${t}`](...Object.values(o[us])):Object.keys(o).forEach(w=>{o[w]=Object.keys(o[w]).map(C=>o[w][C]).reduce((C,k)=>C===void 0?k:r7[`${u[w]}_${t}`](C,k))}),s=Object.keys(a),n&&s.length){const w=i?$se:Ase;o[w]=t===MD?{[ND]:s.reduce((C,k)=>(C.push(...a[k]),C),[])}:{[Sse]:s.map(C=>({[ND]:a[C]}))}}return o}var r7={[`${us}_union`]:Bq,[`${us}_intersect`]:Pq,E_union:function(e,t){if(!e.length)return t;for(var n=0,i=t.length;n<i;++n)e.includes(t[n])||e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.includes(n)):t},R_union:function(e,t){var n=Cn(t[0]),i=Cn(t[1]);return n>i&&(n=t[1],i=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<i&&(e[1]=i),e):[n,i]},R_intersect:function(e,t){var n=Cn(t[0]),i=Cn(t[1]);return n>i&&(n=t[1],i=t[0]),e.length?i<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>i&&(e[1]=i),e):[n,i]}};const Gse=":",Vse="@";function s7(e,t,n,i){t[0].type!==nu&&q("First argument to selection functions must be a string literal.");const r=t[0].value,s=t.length>=2&&Ge(t).value,o="unit",a=Vse+o,u=Gse+r;s===i7&&!ue(i,a)&&(i[a]=n.getData(r).indataRef(n,o)),ue(i,u)||(i[u]=n.getData(r).tuplesRef())}function LD(e){const t=this.context.data[e];return t?t.values.value:[]}function Yse(e,t,n){const i=this.context.data[e]["index:"+t],r=i?i.value.get(n):void 0;return r&&r.count}function Xse(e,t){const n=this.context.dataflow,i=this.context.data[e],r=i.input;return n.pulse(r,n.changeset().remove(Ui).insert(t)),1}function Kse(e,t,n){if(e){const i=this.context.dataflow,r=e.mark.source;i.pulse(r,i.changeset().encode(e,t))}return n!==void 0?n:e}const Td=e=>function(t,n){const i=this.context.dataflow.locale();return t===null?"null":i[e](n)(t)},Zse=Td("format"),ID=Td("timeFormat"),Jse=Td("utcFormat"),Qse=Td("timeParse"),eoe=Td("utcParse"),Yg=new Date(2e3,0,1);function Xg(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":(Yg.setYear(2e3),Yg.setMonth(e),Yg.setDate(t),ID.call(this,Yg,n))}function toe(e){return Xg.call(this,e,1,"%B")}function noe(e){return Xg.call(this,e,1,"%b")}function ioe(e){return Xg.call(this,0,2+e,"%A")}function roe(e){return Xg.call(this,0,2+e,"%a")}const soe=":",ooe="@",o7="%",PD="$";function a7(e,t,n,i){t[0].type!==nu&&q("First argument to data functions must be a string literal.");const r=t[0].value,s=soe+r;if(!ue(s,i))try{i[s]=n.getData(r).tuplesRef()}catch{}}function aoe(e,t,n,i){t[0].type!==nu&&q("First argument to indata must be a string literal."),t[1].type!==nu&&q("Second argument to indata must be a string literal.");const r=t[0].value,s=t[1].value,o=ooe+s;ue(o,i)||(i[o]=n.getData(r).indataRef(n,s))}function Jn(e,t,n,i){if(t[0].type===nu)zD(n,i,t[0].value);else for(e in n.scales)zD(n,i,e)}function zD(e,t,n){const i=o7+n;if(!ue(t,i))try{t[i]=e.scaleRef(n)}catch{}}function ls(e,t){if(se(e)){const n=t.scales[e];return n&&vX(n.value)?n.value:void 0}}function uoe(e,t,n){t.__bandwidth=r=>r&&r.bandwidth?r.bandwidth():0,n._bandwidth=Jn,n._range=Jn,n._scale=Jn;const i=r=>"_["+(r.type===nu?Q(o7+r.value):Q(o7)+"+"+e(r))+"]";return{_bandwidth:r=>`this.__bandwidth(${i(r[0])})`,_range:r=>`${i(r[0])}.range()`,_scale:r=>`${i(r[0])}(${e(r[1])})`}}function u7(e,t){return function(n,i,r){if(n){const s=ls(n,(r||this).context);return s&&s.path[e](i)}else return t(i)}}const loe=u7("area",$Q),coe=u7("bounds",TQ),foe=u7("centroid",IQ);function doe(e,t){const n=ls(e,(t||this).context);return n&&n.scale()}function hoe(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function l7(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(i){e.warn(i)}return n[n.length-1]}function poe(){return l7(this.context.dataflow,"warn",arguments)}function goe(){return l7(this.context.dataflow,"info",arguments)}function moe(){return l7(this.context.dataflow,"debug",arguments)}function c7(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function f7(e){const t=Oo(e),n=c7(t.r),i=c7(t.g),r=c7(t.b);return .2126*n+.7152*i+.0722*r}function yoe(e,t){const n=f7(e),i=f7(t),r=Math.max(n,i),s=Math.min(n,i);return(r+.05)/(s+.05)}function boe(){const e=[].slice.call(arguments);return e.unshift({}),Oe(...e)}function BD(e,t){return e===t||e!==e&&t!==t?!0:W(e)?W(t)&&e.length===t.length?voe(e,t):!1:re(e)&&re(t)?UD(e,t):!1}function voe(e,t){for(let n=0,i=e.length;n<i;++n)if(!BD(e[n],t[n]))return!1;return!0}function UD(e,t){for(const n in e)if(!BD(e[n],t[n]))return!1;return!0}function jD(e){return t=>UD(e,t)}function xoe(e,t,n,i,r,s){const o=this.context.dataflow,a=this.context.data[e],u=a.input,l=o.stamp();let c=a.changes,f,d;if(o._trigger===!1||!(u.value.length||t||i))return 0;if((!c||c.stamp<l)&&(a.changes=c=o.changeset(),c.stamp=l,o.runAfter(()=>{a.modified=!0,o.pulse(u,c).run()},!0,1)),n&&(f=n===!0?Ui:W(n)||g0(n)?n:jD(n),c.remove(f)),t&&c.insert(t),i&&(f=jD(i),u.value.some(f)?c.remove(f):c.insert(i)),r)for(d in s)c.modify(r,d,s[d]);return 1}function _oe(e){const t=e.touches,n=t[0].clientX-t[1].clientX,i=t[0].clientY-t[1].clientY;return Math.hypot(n,i)}function woe(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}const qD={};function Eoe(e,t){const n=qD[t]||(qD[t]=Bi(t));return W(e)?e.map(n):n(e)}function Kg(e){return W(e)||ArrayBuffer.isView(e)?e:null}function d7(e){return Kg(e)||(se(e)?e:null)}function Coe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return Kg(e).join(...n)}function koe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return d7(e).indexOf(...n)}function Aoe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return d7(e).lastIndexOf(...n)}function $oe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return d7(e).slice(...n)}function Soe(e,t,n){return Ie(n)&&q("Function argument passed to replace."),!se(t)&&!A2(t)&&q("Please pass a string or RegExp argument to replace."),String(e).replace(t,n)}function Foe(e){return Kg(e).slice().reverse()}function Doe(e){return Kg(e).slice().sort(rl)}function Toe(e,t,n){return Wb(e||0,t||0,n||0)}function Moe(e,t){const n=ls(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function Noe(e,t){const n=ls(e,(t||this).context);return n?n.copy():void 0}function Roe(e,t){const n=ls(e,(t||this).context);return n?n.domain():[]}function Ooe(e,t,n){const i=ls(e,(n||this).context);return i?W(t)?(i.invertRange||i.invert)(t):(i.invert||i.invertExtent)(t):void 0}function Loe(e,t){const n=ls(e,(t||this).context);return n&&n.range?n.range():[]}function Ioe(e,t,n){const i=ls(e,(n||this).context);return i?i(t):void 0}function Poe(e,t,n,i,r){let s=typeof e=="string"?ls(e,(r||this).context):e;const o=Lk(t,n);let a=s.domain(),u=a[0],l=Ge(a),c=En;return l-u?c=_k(s,u,l):s=(s.interpolator?Qe("sequential")().interpolator(s.interpolator()):Qe("linear")().interpolate(s.interpolate()).range(s.range())).domain([u=0,l=1]),s.ticks&&(a=s.ticks(+i||15),u!==a[0]&&a.unshift(u),l!==Ge(a)&&a.push(l)),a.forEach(f=>o.stop(c(f),s(f))),o}function zoe(e,t,n){const i=ls(e,(n||this).context);return function(r){return i?i.path.context(r)(t):""}}function Boe(e){let t=null;return function(n){return n?Tf(n,t=t||Tl(e)):e}}const WD=e=>e.data;function HD(e,t){const n=LD.call(t,e);return n.root&&n.root.lookup||{}}function Uoe(e,t,n){const i=HD(e,this),r=i[t],s=i[n];return r&&s?r.path(s).map(WD):void 0}function joe(e,t){const n=HD(e,this)[t];return n?n.ancestors().map(WD):void 0}const GD=()=>typeof window<"u"&&window||null;function qoe(){const e=GD();return e?e.screen:{}}function Woe(){const e=GD();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function Hoe(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function VD(e,t,n){if(!e)return[];const[i,r]=e,s=new Ut().set(i[0],i[1],r[0],r[1]),o=n||this.context.dataflow.scenegraph().root;return i$(o,s,Goe(t))}function Goe(e){let t=null;if(e){const n=oe(e.marktype),i=oe(e.markname);t=r=>(!n.length||n.some(s=>r.marktype===s))&&(!i.length||i.some(s=>r.name===s))}return t}function Voe(e,t,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;e=oe(e);const r=e[e.length-1];return r===void 0||Math.hypot(r[0]-t,r[1]-n)>i?[...e,[t,n]]:e}function Yoe(e){return oe(e).reduce((t,n,i)=>{let[r,s]=n;return t+=i==0?`M ${r},${s} `:i===e.length-1?" Z":`L ${r},${s} `},"")}function Xoe(e,t,n){const{x:i,y:r,mark:s}=n,o=new Ut().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[u,l]of t)u<o.x1&&(o.x1=u),u>o.x2&&(o.x2=u),l<o.y1&&(o.y1=l),l>o.y2&&(o.y2=l);return o.translate(i,r),VD([[o.x1,o.y1],[o.x2,o.y2]],e,s).filter(u=>Koe(u.x,u.y,t))}function Koe(e,t,n){let i=0;for(let r=0,s=n.length-1;r<n.length;s=r++){const[o,a]=n[s],[u,l]=n[r];l>t!=a>t&&e<(o-u)*(t-l)/(a-l)+u&&i++}return i&1}const Md={random(){return Wi()},cumulativeNormal:E0,cumulativeLogNormal:Cy,cumulativeUniform:Sy,densityNormal:vy,densityLogNormal:Ey,densityUniform:$y,quantileNormal:C0,quantileLogNormal:ky,quantileUniform:Fy,sampleNormal:w0,sampleLogNormal:wy,sampleUniform:Ay,isArray:W,isBoolean:xo,isDate:_o,isDefined(e){return e!==void 0},isNumber:Ze,isObject:re,isRegExp:A2,isString:se,isTuple:g0,isValid(e){return e!=null&&e===e},toBoolean:S2,toDate(e){return F2(e)},toNumber:Cn,toString:D2,indexof:koe,join:Coe,lastindexof:Aoe,replace:Soe,reverse:Foe,sort:Doe,slice:$oe,flush:G4,lerp:Y4,merge:boe,pad:Z4,peek:Ge,pluck:Eoe,span:Xc,inrange:ol,truncate:J4,rgb:Oo,lab:q0,hcl:W0,hsl:B0,luminance:f7,contrast:yoe,sequence:Ei,format:Zse,utcFormat:Jse,utcParse:eoe,utcOffset:U8,utcSequence:W8,timeFormat:ID,timeParse:Qse,timeOffset:B8,timeSequence:q8,timeUnitSpecifier:F8,monthFormat:toe,monthAbbrevFormat:noe,dayFormat:ioe,dayAbbrevFormat:roe,quarter:j4,utcquarter:q4,week:T8,utcweek:R8,dayofyear:D8,utcdayofyear:N8,warn:poe,info:goe,debug:moe,extent(e){return qr(e)},inScope:hoe,intersect:VD,clampRange:W4,pinchDistance:_oe,pinchAngle:woe,screen:qoe,containerSize:Hoe,windowSize:Woe,bandspace:Toe,setdata:Xse,pathShape:Boe,panLinear:P4,panLog:z4,panPow:B4,panSymlog:U4,zoomLinear:_2,zoomLog:w2,zoomPow:Xh,zoomSymlog:E2,encode:Kse,modify:xoe,lassoAppend:Voe,lassoPath:Yoe,intersectLasso:Xoe},Zoe=["view","item","group","xy","x","y"],Joe="event.vega.",YD="this.",h7={},XD={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${Q(PD+e)}]`,functions:Qoe,constants:$D,visitors:h7},p7=FD(XD);function Qoe(e){const t=SD(e);Zoe.forEach(n=>t[n]=Joe+n);for(const n in Md)t[n]=YD+n;return Oe(t,uoe(e,Md,h7)),t}function Pt(e,t,n){return arguments.length===1?Md[e]:(Md[e]=t,n&&(h7[e]=n),p7&&(p7.functions[e]=YD+e),this)}Pt("bandwidth",Moe,Jn),Pt("copy",Noe,Jn),Pt("domain",Roe,Jn),Pt("range",Loe,Jn),Pt("invert",Ooe,Jn),Pt("scale",Ioe,Jn),Pt("gradient",Poe,Jn),Pt("geoArea",loe,Jn),Pt("geoBounds",coe,Jn),Pt("geoCentroid",foe,Jn),Pt("geoShape",zoe,Jn),Pt("geoScale",doe,Jn),Pt("indata",Yse,aoe),Pt("data",LD,a7),Pt("treePath",Uoe,a7),Pt("treeAncestors",joe,a7),Pt("vlSelectionTest",Bse,s7),Pt("vlSelectionIdTest",qse,s7),Pt("vlSelectionResolve",Hse,s7),Pt("vlSelectionTuples",Wse);function cs(e,t){const n={};let i;try{e=se(e)?e:Q(e)+"",i=AD(e)}catch{q("Expression parse error: "+e)}i.visit(s=>{if(s.type!==dD)return;const o=s.callee.name,a=XD.visitors[o];a&&a(o,s.arguments,t,n)});const r=p7(i);return r.globals.forEach(s=>{const o=PD+s;!ue(n,o)&&t.getSignal(s)&&(n[o]=t.signalRef(s))}),{$expr:Oe({code:r.code},t.options.ast?{ast:i}:null),$fields:r.fields,$params:n}}function eae(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(i=>t.parseOperator(i)),n.forEach(i=>t.parseOperatorParameters(i)),(e.streams||[]).forEach(i=>t.parseStream(i)),(e.updates||[]).forEach(i=>t.parseUpdate(i)),t.resolve()}const tae=lr(["rule"]),KD=lr(["group","image","rect"]);function nae(e,t){let n="";return tae[t]||(e.x2&&(e.x?(KD[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(KD[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function g7(e){return(e+"").toLowerCase()}function iae(e){return g7(e)==="operator"}function rae(e){return g7(e)==="collect"}function Nd(e,t,n){n.endsWith(";")||(n="return("+n+");");const i=Function(...t.concat(n));return e&&e.functions?i.bind(e.functions):i}function sae(e,t,n,i){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${i}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${i} : `}var oae={operator:(e,t)=>Nd(e,["_"],t.code),parameter:(e,t)=>Nd(e,["datum","_"],t.code),event:(e,t)=>Nd(e,["event"],t.code),handler:(e,t)=>{const n=`var datum=event.item&&event.item.datum;return ${t.code};`;return Nd(e,["_","event"],n)},encode:(e,t)=>{const{marktype:n,channels:i}=t;let r="var o=item,datum=o.datum,m=0,$;";for(const s in i){const o="o["+Q(s)+"]";r+=`$=${i[s].code};if(${o}!==$)${o}=$,m=1;`}return r+=nae(i,n),r+="return m;",Nd(e,["item","_"],r)},codegen:{get(e){const t=`[${e.map(Q).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n;const i=(s,o)=>{const a=t[o];let u,l;return s.path?(u=`a${s.path}`,l=`b${s.path}`):((n=n||{})["f"+o]=s,u=`this.f${o}(a)`,l=`this.f${o}(b)`),sae(u,l,-a,a)},r=Function("a","b","var u, v; return "+e.map(i).join("")+"0;");return n?r.bind(n):r}}};function aae(e){const t=this;iae(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function uae(e){const t=this;if(e.params){const n=t.get(e.id);n||q("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function lae(e,t){t=t||{};const n=this;for(const i in e){const r=e[i];t[i]=W(r)?r.map(s=>ZD(s,n,t)):ZD(r,n,t)}return t}function ZD(e,t,n){if(!e||!re(e))return e;for(let i=0,r=JD.length,s;i<r;++i)if(s=JD[i],ue(e,s.key))return s.parse(e,t,n);return e}var JD=[{key:"$ref",parse:cae},{key:"$key",parse:dae},{key:"$expr",parse:fae},{key:"$field",parse:hae},{key:"$encode",parse:gae},{key:"$compare",parse:pae},{key:"$context",parse:mae},{key:"$subflow",parse:yae},{key:"$tupleid",parse:bae}];function cae(e,t){return t.get(e.$ref)||q("Operator not defined: "+e.$ref)}function fae(e,t,n){e.$params&&t.parseParameters(e.$params,n);const i="e:"+e.$expr.code;return t.fn[i]||(t.fn[i]=ii(t.parameterExpression(e.$expr),e.$fields))}function dae(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=$2(e.$key,e.$flat,t.expr.codegen))}function hae(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=Bi(e.$field,e.$name,t.expr.codegen))}function pae(e,t){const n="c:"+e.$compare+"_"+e.$order,i=oe(e.$compare).map(r=>r&&r.$tupleid?_e:r);return t.fn[n]||(t.fn[n]=C2(i,e.$order,t.expr.codegen))}function gae(e,t){const n=e.$encode,i={};for(const r in n){const s=n[r];i[r]=ii(t.encodeExpression(s.$expr),s.$fields),i[r].output=s.$output}return i}function mae(e,t){return t}function yae(e,t){const n=e.$subflow;return function(i,r,s){const o=t.fork().parse(n),a=o.get(n.operators[0].id),u=o.signals.parent;return u&&u.set(s),a.detachSubflow=()=>t.detach(o),a}}function bae(){return _e}function vae(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,i=e.stream!=null?t.get(e.stream):void 0,r;e.source?i=t.events(e.source,e.type,n):e.merge&&(r=e.merge.map(s=>t.get(s)),i=r[0].merge.apply(r[0],r.slice(1))),e.between&&(r=e.between.map(s=>t.get(s)),i=i.between(r[0],r[1])),e.filter&&(i=i.filter(n)),e.throttle!=null&&(i=i.throttle(+e.throttle)),e.debounce!=null&&(i=i.debounce(+e.debounce)),i==null&&q("Invalid stream definition: "+JSON.stringify(e)),e.consume&&i.consume(!0),t.stream(e,i)}function xae(e){var t=this,n=re(n=e.source)?n.$ref:n,i=t.get(n),r=null,s=e.update,o=void 0;i||q("Source not defined: "+e.source),r=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),s&&s.$expr&&(s.$params&&(o=t.parseParameters(s.$params)),s=t.handlerExpression(s.$expr)),t.update(e,i,r,s,o)}const _ae={skip:!0};function wae(e){var t=this,n={};if(e.signals){var i=n.signals={};Object.keys(t.signals).forEach(s=>{const o=t.signals[s];e.signals(s,o)&&(i[s]=o.value)})}if(e.data){var r=n.data={};Object.keys(t.data).forEach(s=>{const o=t.data[s];e.data(s,o)&&(r[s]=o.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(s=>s.getState(e))),n}function Eae(e){var t=this,n=t.dataflow,i=e.data,r=e.signals;Object.keys(r||{}).forEach(s=>{n.update(t.signals[s],r[s],_ae)}),Object.keys(i||{}).forEach(s=>{n.pulse(t.data[s].input,n.changeset().remove(Ui).insert(i[s]))}),(e.subcontext||[]).forEach((s,o)=>{const a=t.subcontext[o];a&&a.setState(s)})}function QD(e,t,n,i){return new eT(e,t,n,i)}function eT(e,t,n,i){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=i||oae,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function tT(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}eT.prototype=tT.prototype={fork(){const e=new tT(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,i=n.dataflow,r=e.value;if(n.set(e.id,t),rae(e.type)&&r&&(r.$ingest?i.ingest(t,r.$ingest,r.$format):r.$request?i.preload(t,r.$request,r.$format):i.pulse(t,i.changeset().insert(r))),e.root&&(n.root=t),e.parent){let s=n.get(e.parent.$ref);s?(i.connect(s,[t]),t.targets().add(s)):(n.unresolved=n.unresolved||[]).push(()=>{s=n.get(e.parent.$ref),i.connect(s,[t]),t.targets().add(s)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const s in e.data){const o=n.data[s]||(n.data[s]={});e.data[s].forEach(a=>o[a]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[g7(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,i,r){this.dataflow.on(t,n,i,r,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:eae,parseOperator:aae,parseOperatorParameters:uae,parseParameters:lae,parseStream:vae,parseUpdate:xae,getState:wae,setState:Eae};function Cae(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),nT(t,e.description()))}function nT(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function kae(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}const m7="default";function Aae(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:m7,item:null}));e.on(e.events("view","pointermove"),t,(n,i)=>{const r=t.value,s=r?se(r)?r:r.user:m7,o=i.item&&i.item.cursor||null;return r&&s===r.user&&o==r.item?r:{user:s,item:o}}),e.add(null,function(n){let i=n.cursor,r=this.value;return se(i)||(r=i.item,i=i.user),y7(e,i&&i!==m7?i:r||i),r},{cursor:t})}function y7(e,t){const n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function Zg(e,t){var n=e._runtime.data;return ue(n,t)||q("Unrecognized data set: "+t),n[t]}function $ae(e,t){return arguments.length<2?Zg(this,e).values.value:Jg.call(this,e,Ao().remove(Ui).insert(t))}function Jg(e,t){ME(t)||q("Second argument to changes must be a changeset.");const n=Zg(this,e);return n.modified=!0,this.pulse(n.input,t)}function Sae(e,t){return Jg.call(this,e,Ao().insert(t))}function Fae(e,t){return Jg.call(this,e,Ao().remove(t))}function iT(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function rT(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function Qg(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function Dae(e){var t=Qg(e),n=iT(e),i=rT(e);e._renderer.background(e.background()),e._renderer.resize(n,i,t),e._handler.origin(t),e._resizeListeners.forEach(r=>{try{r(n,i)}catch(s){e.error(s)}})}function Tae(e,t,n){var i=e._renderer,r=i&&i.canvas(),s,o,a;return r&&(a=Qg(e),o=t.changedTouches?t.changedTouches[0]:t,s=Ep(o,r),s[0]-=a[0],s[1]-=a[1]),t.dataflow=e,t.item=n,t.vega=Mae(e,n,s),t}function Mae(e,t,n){const i=t?t.mark.marktype==="group"?t:t.mark.group:null;function r(o){var a=i,u;if(o){for(u=t;u;u=u.mark.group)if(u.mark.name===o){a=u;break}}return a&&a.mark&&a.mark.interactive?a:{}}function s(o){if(!o)return n;se(o)&&(o=r(o));const a=n.slice();for(;o;)a[0]-=o.x||0,a[1]-=o.y||0,o=o.mark&&o.mark.group;return a}return{view:kn(e),item:kn(t||{}),group:r,xy:s,x:o=>s(o)[0],y:o=>s(o)[1]}}const sT="view",Nae="timer",Rae="window",Oae={trap:!1};function Lae(e){const t=Oe({defaults:{}},e),n=(i,r)=>{r.forEach(s=>{W(i[s])&&(i[s]=lr(i[s]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function oT(e,t,n,i){e._eventListeners.push({type:n,sources:oe(t),handler:i})}function Iae(e,t){var n=e._eventConfig.defaults,i=n.prevent,r=n.allow;return i===!1||r===!0?!1:i===!0||r===!1?!0:i?i[t]:r?!r[t]:e.preventDefault()}function e1(e,t,n){const i=e._eventConfig&&e._eventConfig[t];return i===!1||re(i)&&!i[n]?(e.warn(`Blocked ${t} ${n} event listener.`),!1):!0}function Pae(e,t,n){var i=this,r=new v0(n),s=function(l,c){i.runAsync(null,()=>{e===sT&&Iae(i,t)&&l.preventDefault(),r.receive(Tae(i,l,c))})},o;if(e===Nae)e1(i,"timer",t)&&i.timer(s,t);else if(e===sT)e1(i,"view",t)&&i.addEventListener(t,s,Oae);else if(e===Rae?e1(i,"window",t)&&typeof window<"u"&&(o=[window]):typeof document<"u"&&e1(i,"selector",t)&&(o=Array.from(document.querySelectorAll(e))),!o)i.warn("Can not resolve event source: "+e);else{for(var a=0,u=o.length;a<u;++a)o[a].addEventListener(t,s);oT(i,o,t,s)}return r}function aT(e){return e.item}function uT(e){return e.item.mark.source}function lT(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function zae(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","pointerover",aT),uT,lT(e)),this.on(this.events("view","pointerout",aT),uT,lT(t)),this}function Bae(){var e=this._tooltip,t=this._timers,n=this._handler.handlers(),i=this._eventListeners,r,s,o,a,u;for(r=t.length;--r>=0;)t[r].stop();for(r=i.length;--r>=0;)for(o=i[r],s=o.sources.length;--s>=0;)o.sources[s].removeEventListener(o.type,o.handler);for(e&&e.call(this,this._handler,null,null,null),r=n.length;--r>=0;)u=n[r].type,a=n[r].handler,this._handler.off(u,a);return this}function Di(e,t,n){const i=document.createElement(e);for(const r in t)i.setAttribute(r,t[r]);return n!=null&&(i.textContent=n),i}const Uae="vega-bind",jae="vega-bind-name",qae="vega-bind-radio";function Wae(e,t,n){if(!t)return;const i=n.param;let r=n.state;return r||(r=n.state={elements:null,active:!1,set:null,update:o=>{o!=e.signal(i.signal)&&e.runAsync(null,()=>{r.source=!0,e.signal(i.signal,o)})}},i.debounce&&(r.update=k2(i.debounce,r.update))),(i.input==null&&i.element?Hae:Vae)(r,t,i,e),r.active||(e.on(e._signals[i.signal],null,()=>{r.source?r.source=!1:r.set(e.signal(i.signal))}),r.active=!0),r}function Hae(e,t,n,i){const r=n.event||"input",s=()=>e.update(t.value);i.signal(n.signal,t.value),t.addEventListener(r,s),oT(i,t,r,s),e.set=o=>{t.value=o,t.dispatchEvent(Gae(r))}}function Gae(e){return typeof Event<"u"?new Event(e):{type:e}}function Vae(e,t,n,i){const r=i.signal(n.signal),s=Di("div",{class:Uae}),o=n.input==="radio"?s:s.appendChild(Di("label"));o.appendChild(Di("span",{class:jae},n.name||n.signal)),t.appendChild(s);let a=Yae;switch(n.input){case"checkbox":a=Xae;break;case"select":a=Kae;break;case"radio":a=Zae;break;case"range":a=Jae;break}a(e,o,n,r)}function Yae(e,t,n,i){const r=Di("input");for(const s in n)s!=="signal"&&s!=="element"&&r.setAttribute(s==="input"?"type":s,n[s]);r.setAttribute("name",n.signal),r.value=i,t.appendChild(r),r.addEventListener("input",()=>e.update(r.value)),e.elements=[r],e.set=s=>r.value=s}function Xae(e,t,n,i){const r={type:"checkbox",name:n.signal};i&&(r.checked=!0);const s=Di("input",r);t.appendChild(s),s.addEventListener("change",()=>e.update(s.checked)),e.elements=[s],e.set=o=>s.checked=!!o||null}function Kae(e,t,n,i){const r=Di("select",{name:n.signal}),s=n.labels||[];n.options.forEach((o,a)=>{const u={value:o};t1(o,i)&&(u.selected=!0),r.appendChild(Di("option",u,(s[a]||o)+""))}),t.appendChild(r),r.addEventListener("change",()=>{e.update(n.options[r.selectedIndex])}),e.elements=[r],e.set=o=>{for(let a=0,u=n.options.length;a<u;++a)if(t1(n.options[a],o)){r.selectedIndex=a;return}}}function Zae(e,t,n,i){const r=Di("span",{class:qae}),s=n.labels||[];t.appendChild(r),e.elements=n.options.map((o,a)=>{const u={type:"radio",name:n.signal,value:o};t1(o,i)&&(u.checked=!0);const l=Di("input",u);l.addEventListener("change",()=>e.update(o));const c=Di("label",{},(s[a]||o)+"");return c.prepend(l),r.appendChild(c),l}),e.set=o=>{const a=e.elements,u=a.length;for(let l=0;l<u;++l)t1(a[l].value,o)&&(a[l].checked=!0)}}function Jae(e,t,n,i){i=i!==void 0?i:(+n.max+ +n.min)/2;const r=n.max!=null?n.max:Math.max(100,+i)||100,s=n.min||Math.min(0,r,+i)||0,o=n.step||Co(s,r,100),a=Di("input",{type:"range",name:n.signal,min:s,max:r,step:o});a.value=i;const u=Di("span",{},+i);t.appendChild(a),t.appendChild(u);const l=()=>{u.textContent=a.value,e.update(+a.value)};a.addEventListener("input",l),a.addEventListener("change",l),e.elements=[a],e.set=c=>{a.value=c,u.textContent=c}}function t1(e,t){return e===t||e+""==t+""}function cT(e,t,n,i,r,s){return t=t||new i(e.loader()),t.initialize(n,iT(e),rT(e),Qg(e),r,s).background(e.background())}function b7(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function Qae(e,t,n,i){const r=new i(e.loader(),b7(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,Qg(e),e);return t&&t.handlers().forEach(s=>{r.on(s.type,s.handler)}),r}function eue(e,t){const n=this,i=n._renderType,r=n._eventConfig.bind,s=Lp(i);e=n._el=e?v7(n,e,!0):null,Cae(n),s||n.error("Unrecognized renderer type: "+i);const o=s.handler||Hf,a=e?s.renderer:s.headless;return n._renderer=a?cT(n,n._renderer,e,a):null,n._handler=Qae(n,n._handler,e,o),n._redraw=!0,e&&r!=="none"&&(t=t?n._elBind=v7(n,t,!0):e.appendChild(Di("form",{class:"vega-bindings"})),n._bind.forEach(u=>{u.param.element&&r!=="container"&&(u.element=v7(n,u.param.element,!!u.param.input))}),n._bind.forEach(u=>{Wae(n,u.element||t,u)})),n}function v7(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent=""}catch(i){t=null,e.error(i)}return t}const Rd=e=>+e||0,tue=e=>({top:e,bottom:e,left:e,right:e});function fT(e){return re(e)?{top:Rd(e.top),bottom:Rd(e.bottom),left:Rd(e.left),right:Rd(e.right)}:tue(Rd(e))}async function x7(e,t,n,i){const r=Lp(t),s=r&&r.headless;return s||q("Unrecognized renderer type: "+t),await e.runAsync(),cT(e,null,null,s,n,i).renderAsync(e._scenegraph.root)}async function nue(e,t){e!==Go.Canvas&&e!==Go.SVG&&e!==Go.PNG&&q("Unrecognized image type: "+e);const n=await x7(this,e,t);return e===Go.SVG?iue(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function iue(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}async function rue(e,t){return(await x7(this,Go.Canvas,e,t)).canvas()}async function sue(e){return(await x7(this,Go.SVG,e)).svg()}function oue(e,t,n){return QD(e,xl,Md,n).parse(t)}function aue(e){var t=this._runtime.scales;return ue(t,e)||q("Unrecognized scale or projection: "+e),t[e].value}var dT="width",hT="height",_7="padding",pT={skip:!0};function gT(e,t){var n=e.autosize(),i=e.padding();return t-(n&&n.contains===_7?i.left+i.right:0)}function mT(e,t){var n=e.autosize(),i=e.padding();return t-(n&&n.contains===_7?i.top+i.bottom:0)}function uue(e){var t=e._signals,n=t[dT],i=t[hT],r=t[_7];function s(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,a=>{e._width=a.size,e._viewWidth=gT(e,a.size),s()},{size:n}),e._resizeHeight=e.add(null,a=>{e._height=a.size,e._viewHeight=mT(e,a.size),s()},{size:i});const o=e.add(null,s,{pad:r});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=i.rank+1,o.rank=r.rank+1}function lue(e,t,n,i,r,s){this.runAfter(o=>{let a=0;o._autosize=0,o.width()!==n&&(a=1,o.signal(dT,n,pT),o._resizeWidth.skip(!0)),o.height()!==i&&(a=1,o.signal(hT,i,pT),o._resizeHeight.skip(!0)),o._viewWidth!==e&&(o._resize=1,o._viewWidth=e),o._viewHeight!==t&&(o._resize=1,o._viewHeight=t),(o._origin[0]!==r[0]||o._origin[1]!==r[1])&&(o._resize=1,o._origin=r),a&&o.run("enter"),s&&o.runAfter(u=>u.resize())},!1,1)}function cue(e){return this._runtime.getState(e||{data:fue,signals:due,recurse:!0})}function fue(e,t){return t.modified&&W(t.input.value)&&!e.startsWith("_:vega:_")}function due(e,t){return!(e==="parent"||t instanceof xl.proxy)}function hue(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function pue(e,t){function n(i){e({timestamp:Date.now(),elapsed:i})}this._timers.push(Pte(n,t))}function gue(e,t,n,i){const r=e.element();r&&r.setAttribute("title",mue(i))}function mue(e){return e==null?"":W(e)?yT(e):re(e)&&!_o(e)?yue(e):e+""}function yue(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(W(n)?yT(n):bT(n))}).join(`
`)}function yT(e){return"["+e.map(bT).join(", ")+"]"}function bT(e){return W(e)?"[]":re(e)&&!_o(e)?"{}":e}function bue(){if(this.renderer()==="canvas"&&this._renderer._canvas){let e=null;const t=()=>{e!=null&&e();const n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",t),e=()=>{n.removeEventListener("change",t)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};t()}}function vT(e,t){const n=this;if(t=t||{},vl.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){const s=Oe({},e.locale,t.locale);n.locale(xE(s.number,s.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||Go.Canvas,n._scenegraph=new xA;const i=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||gue,n._redraw=!0,n._handler=new Hf().scene(i),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=Lae(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const r=oue(n,e,t.expr);n._runtime=r,n._signals=r.signals,n._bind=(e.bindings||[]).map(s=>({state:null,param:Oe({},s)})),r.root&&r.root.set(i),i.source=r.data.root.input,n.pulse(r.data.root.input,n.changeset().insert(i.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=gT(n,n._width),n._viewHeight=mT(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,uue(n),kae(n),Aae(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind),t.watchPixelRatio&&n._watchPixelRatio()}function n1(e,t){return ue(e._signals,t)?e._signals[t]:q("Unrecognized signal name: "+Q(t))}function xT(e,t){const n=(e._targets||[]).filter(i=>i._update&&i._update.handler===t);return n.length?n[0]:null}function _T(e,t,n,i){let r=xT(n,i);return r||(r=b7(e,()=>i(t,n.value)),r.handler=i,e.on(n,null,r)),e}function wT(e,t,n){const i=xT(t,n);return i&&t._targets.remove(i),e}ee(vT,vl,{async evaluate(e,t,n){if(await vl.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,Dae(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(i){this.error(i)}return n&&p0(this,n),this},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=e!=null?e+"":null;return t!==this._desc&&nT(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const i=n1(this,e);return arguments.length===1?i.value:this.update(i,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",fT(e)):fT(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(Lp(e)||q("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(vl.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(n1(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:lue,addEventListener(e,t,n){let i=t;return n&&n.trap===!1||(i=b7(this,t),i.raw=t),this._handler.on(e,i),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),i=n.length,r,s;--i>=0;)if(s=n[i].type,r=n[i].handler,e===s&&(t===r||t===r.raw)){this._handler.off(s,r);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.includes(e)||t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return _T(this,e,n1(this,e),t)},removeSignalListener(e,t){return wT(this,n1(this,e),t)},addDataListener(e,t){return _T(this,e,Zg(this,e).values,t)},removeDataListener(e,t){return wT(this,Zg(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=y7(this,null);this._globalCursor=!!e,t&&y7(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:pue,events:Pae,finalize:Bae,hover:zae,data:$ae,change:Jg,insert:Sae,remove:Fae,scale:aue,initialize:eue,toImageURL:nue,toCanvas:rue,toSVG:sue,getState:cue,setState:hue,_watchPixelRatio:bue});const vue="view",i1="[",r1="]",ET="{",CT="}",xue=":",kT=",",_ue="@",wue=">",Eue=/[[\]{}]/,Cue={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let AT,$T;function ta(e,t,n){return AT=t||vue,$T=n||Cue,ST(e.trim()).map(w7)}function kue(e){return $T[e]}function Od(e,t,n,i,r){const s=e.length;let o=0,a;for(;t<s;++t){if(a=e[t],!o&&a===n)return t;r&&r.indexOf(a)>=0?--o:i&&i.indexOf(a)>=0&&++o}return t}function ST(e){const t=[],n=e.length;let i=0,r=0;for(;r<n;)r=Od(e,r,kT,i1+ET,r1+CT),t.push(e.substring(i,r).trim()),i=++r;if(t.length===0)throw"Empty event selector: "+e;return t}function w7(e){return e[0]==="["?Aue(e):$ue(e)}function Aue(e){const t=e.length;let n=1,i;if(n=Od(e,n,r1,i1,r1),n===t)throw"Empty between selector: "+e;if(i=ST(e.substring(1,n)),i.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==wue)throw"Expected '>' after between selector: "+e;i=i.map(w7);const r=w7(e.slice(1).trim());return r.between?{between:i,stream:r}:(r.between=i,r)}function $ue(e){const t={source:AT},n=[];let i=[0,0],r=0,s=0,o=e.length,a=0,u,l;if(e[o-1]===CT){if(a=e.lastIndexOf(ET),a>=0){try{i=Sue(e.substring(a+1,o-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,a).trim(),o=e.length}else throw"Unmatched right brace: "+e;a=0}if(!o)throw e;if(e[0]===_ue&&(r=++a),u=Od(e,a,xue),u<o&&(n.push(e.substring(s,u).trim()),s=a=++u),a=Od(e,a,i1),a===o)n.push(e.substring(s,o).trim());else if(n.push(e.substring(s,a).trim()),l=[],s=++a,s===o)throw"Unmatched left bracket: "+e;for(;a<o;){if(a=Od(e,a,r1),a===o)throw"Unmatched left bracket: "+e;if(l.push(e.substring(s,a).trim()),a<o-1&&e[++a]!==i1)throw"Expected left bracket: "+e;s=++a}if(!(o=n.length)||Eue.test(n[o-1]))throw"Invalid event selector: "+e;return o>1?(t.type=n[1],r?t.markname=n[0].slice(1):kue(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),l!=null&&(t.filter=l),i[0]&&(t.throttle=i[0]),i[1]&&(t.debounce=i[1]),t}function Sue(e){const t=e.split(kT);if(!e.length||t.length>2)throw e;return t.map(n=>{const i=+n;if(i!==i)throw e;return i})}function Fue(e){return re(e)?e:{type:e||"pad"}}const Ld=e=>+e||0,Due=e=>({top:e,bottom:e,left:e,right:e});function Tue(e){return re(e)?e.signal?e:{top:Ld(e.top),bottom:Ld(e.bottom),left:Ld(e.left),right:Ld(e.right)}:Due(Ld(e))}const tn=e=>re(e)&&!W(e)?Oe({},e):{value:e};function FT(e,t,n,i){return n!=null?(re(n)&&!W(n)||W(n)&&n.length&&re(n[0])?e.update[t]=n:e[i||"enter"][t]={value:n},1):0}function pn(e,t,n){for(const i in t)FT(e,i,t[i]);for(const i in n)FT(e,i,n[i],"update")}function Ql(e,t,n){for(const i in t)n&&ue(n,i)||(e[i]=Oe(e[i]||{},t[i]));return e}function ec(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const E7="mark",C7="frame",k7="scope",Mue="axis",Nue="axis-domain",Rue="axis-grid",Oue="axis-label",Lue="axis-tick",Iue="axis-title",Pue="legend",zue="legend-band",Bue="legend-entry",Uue="legend-gradient",DT="legend-label",jue="legend-symbol",que="legend-title",Wue="title",Hue="title-text",Gue="title-subtitle";function Vue(e,t,n,i,r){const s={},o={};let a,u,l,c;u="lineBreak",t==="text"&&r[u]!=null&&!ec(u,e)&&A7(s,u,r[u]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),c=n===C7?r.group:n===E7?Oe({},r.mark,r[t]):null;for(u in c)l=ec(u,e)||(u==="fill"||u==="stroke")&&(ec("fill",e)||ec("stroke",e)),l||A7(s,u,c[u]);oe(i).forEach(f=>{const d=r.style&&r.style[f];for(const h in d)ec(h,e)||A7(s,h,d[h])}),e=Oe({},e);for(u in s)c=s[u],c.signal?(a=a||{})[u]=c:o[u]=c;return e.enter=Oe(o,e.enter),a&&(e.update=Oe(a,e.update)),e}function A7(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const TT=e=>se(e)?Q(e):e.signal?`(${e.signal})`:MT(e);function s1(e){if(e.gradient!=null)return Xue(e);let t=e.signal?`(${e.signal})`:e.color?Yue(e.color):e.field!=null?MT(e.field):e.value!==void 0?Q(e.value):void 0;return e.scale!=null&&(t=Kue(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${a1(e.exponent)})`),e.mult!=null&&(t+=`*${a1(e.mult)}`),e.offset!=null&&(t+=`+${a1(e.offset)}`),e.round&&(t=`round(${t})`),t}const o1=(e,t,n,i)=>`(${e}(${[t,n,i].map(s1).join(",")})+'')`;function Yue(e){return e.c?o1("hcl",e.h,e.c,e.l):e.h||e.s?o1("hsl",e.h,e.s,e.l):e.l||e.a?o1("lab",e.l,e.a,e.b):e.r||e.g||e.b?o1("rgb",e.r,e.g,e.b):null}function Xue(e){const t=[e.start,e.stop,e.count].map(n=>n==null?null:Q(n));for(;t.length&&Ge(t)==null;)t.pop();return t.unshift(TT(e.gradient)),`gradient(${t.join(",")})`}function a1(e){return re(e)?"("+s1(e)+")":e}function MT(e){return NT(re(e)?e:{datum:e})}function NT(e){let t,n,i;if(e.signal)t="datum",i=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(i=e.parent,t+=".datum"):i=e.group}else e.datum?(t="datum",i=e.datum):q("Invalid field reference: "+Q(e));return e.signal||(i=se(i)?jr(i).map(Q).join("]["):NT(i)),t+"["+i+"]"}function Kue(e,t){const n=TT(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+a1(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function Zue(e){let t="";return e.forEach(n=>{const i=s1(n);t+=n.test?`(${n.test})?${i}:`:i}),Ge(t)===":"&&(t+="null"),t}function RT(e,t,n,i,r,s){const o={};s=s||{},s.encoders={$encode:o},e=Vue(e,t,n,i,r.config);for(const a in e)o[a]=Jue(e[a],t,s,r);return s}function Jue(e,t,n,i){const r={},s={};for(const o in e)e[o]!=null&&(r[o]=ele(Que(e[o]),i,n,s));return{$expr:{marktype:t,channels:r},$fields:Object.keys(s),$output:Object.keys(e)}}function Que(e){return W(e)?Zue(e):s1(e)}function ele(e,t,n,i){const r=cs(e,t);return r.$fields.forEach(s=>i[s]=1),Oe(n,r.$params),r.$expr}const tle="outer",nle=["value","update","init","react","bind"];function OT(e,t){q(e+' for "outer" push: '+Q(t))}function LT(e,t){const n=e.name;if(e.push===tle)t.signals[n]||OT("No prior signal definition",n),nle.forEach(i=>{e[i]!==void 0&&OT("Invalid property ",i)});else{const i=t.addSignal(n,e.value);e.react===!1&&(i.react=!1),e.bind&&t.addBinding(n,e.bind)}}function $7(e,t,n,i){this.id=-1,this.type=e,this.value=t,this.params=n,i&&(this.parent=i)}function u1(e,t,n,i){return new $7(e,t,n,i)}function l1(e,t){return u1("operator",e,t)}function Ee(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function Id(e,t){return t?{$field:e,$name:t}:{$field:e}}const S7=Id("key");function IT(e,t){return{$compare:e,$order:t}}function ile(e,t){const n={$key:e};return t&&(n.$flat=!0),n}const rle="ascending",sle="descending";function ole(e){return re(e)?(e.order===sle?"-":"+")+c1(e.op,e.field):""}function c1(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const F7="scope",D7="view";function Yt(e){return e&&e.signal}function ale(e){return e&&e.expr}function f1(e){if(Yt(e))return!0;if(re(e)){for(const t in e)if(f1(e[t]))return!0}return!1}function _r(e,t){return e??t}function ou(e){return e&&e.signal||e}const PT="timer";function Pd(e,t){return(e.merge?lle:e.stream?cle:e.type?fle:q("Invalid stream specification: "+Q(e)))(e,t)}function ule(e){return e===F7?D7:e||D7}function lle(e,t){const n=e.merge.map(r=>Pd(r,t)),i=T7({merge:n},e,t);return t.addStream(i).id}function cle(e,t){const n=Pd(e.stream,t),i=T7({stream:n},e,t);return t.addStream(i).id}function fle(e,t){let n;e.type===PT?(n=t.event(PT,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(ule(e.source),e.type);const i=T7({stream:n},e,t);return Object.keys(i).length===1?n:t.addStream(i).id}function T7(e,t,n){let i=t.between;return i&&(i.length!==2&&q('Stream "between" parameter must have 2 entries: '+Q(t)),e.between=[Pd(i[0],n),Pd(i[1],n)]),i=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&i.push(dle(t.marktype,t.markname,t.markrole)),t.source===F7&&i.push("inScope(event.item)"),i.length&&(e.filter=cs("("+i.join(")&&(")+")",n).$expr),(i=t.throttle)!=null&&(e.throttle=+i),(i=t.debounce)!=null&&(e.debounce=+i),t.consume&&(e.consume=!0),e}function dle(e,t,n){const i="event.item";return i+(e&&e!=="*"?"&&"+i+".mark.marktype==='"+e+"'":"")+(n?"&&"+i+".mark.role==='"+n+"'":"")+(t?"&&"+i+".mark.name==='"+t+"'":"")}const hle={code:"_.$value",ast:{type:"Identifier",value:"value"}};function ple(e,t,n){const i=e.encode,r={target:n};let s=e.events,o=e.update,a=[];s||q("Signal update missing events specification."),se(s)&&(s=ta(s,t.isSubscope()?F7:D7)),s=oe(s).filter(u=>u.signal||u.scale?(a.push(u),0):1),a.length>1&&(a=[mle(a)]),s.length&&a.push(s.length>1?{merge:s}:s[0]),i!=null&&(o&&q("Signal encode and update are mutually exclusive."),o="encode(item(),"+Q(i)+")"),r.update=se(o)?cs(o,t):o.expr!=null?cs(o.expr,t):o.value!=null?o.value:o.signal!=null?{$expr:hle,$params:{$value:t.signalRef(o.signal)}}:q("Invalid signal update specification."),e.force&&(r.options={force:!0}),a.forEach(u=>t.addUpdate(Oe(gle(u,t),r)))}function gle(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):Pd(e,t)}}function mle(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function yle(e,t){const n=t.getSignal(e.name);let i=e.update;e.init&&(i?q("Signals can not include both init and update expressions."):(i=e.init,n.initonly=!0)),i&&(i=cs(i,t),n.update=i.$expr,n.params=i.$params),e.on&&e.on.forEach(r=>ple(r,t,n.id))}const dt=e=>(t,n,i)=>u1(e,n,t||void 0,i),zT=dt("aggregate"),ble=dt("axisticks"),BT=dt("bound"),wr=dt("collect"),UT=dt("compare"),vle=dt("datajoin"),jT=dt("encode"),xle=dt("expression"),_le=dt("facet"),wle=dt("field"),Ele=dt("key"),Cle=dt("legendentries"),kle=dt("load"),Ale=dt("mark"),$le=dt("multiextent"),Sle=dt("multivalues"),Fle=dt("overlap"),Dle=dt("params"),qT=dt("prefacet"),Tle=dt("projection"),Mle=dt("proxy"),Nle=dt("relay"),WT=dt("render"),Rle=dt("scale"),au=dt("sieve"),Ole=dt("sortitems"),HT=dt("viewlayout"),Lle=dt("values");let Ile=0;const GT={min:"min",max:"max",count:"sum"};function Ple(e,t){const n=e.type||"linear";gk(n)||q("Unrecognized scale type: "+Q(n)),t.addScale(e.name,{type:n,domain:void 0})}function zle(e,t){const n=t.getScale(e.name).params;let i;n.domain=VT(e.domain,e,t),e.range!=null&&(n.range=XT(e,t,n)),e.interpolate!=null&&Xle(e.interpolate,n),e.nice!=null&&(n.nice=Yle(e.nice,t)),e.bins!=null&&(n.bins=Vle(e.bins,t));for(i in e)ue(n,i)||i==="name"||(n[i]=Zi(e[i],t))}function Zi(e,t){return re(e)?e.signal?t.signalRef(e.signal):q("Unsupported object: "+Q(e)):e}function d1(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>Zi(n,t))}function h1(e){q("Can not find data set: "+Q(e))}function VT(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&q("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):(W(e)?Ble:e.fields?jle:Ule)(e,t,n)}function Ble(e,t,n){return e.map(i=>Zi(i,n))}function Ule(e,t,n){const i=n.getData(e.data);return i||h1(e.data),Dl(t.type)?i.valuesRef(n,e.field,YT(e.sort,!1)):bk(t.type)?i.domainRef(n,e.field):i.extentRef(n,e.field)}function jle(e,t,n){const i=e.data,r=e.fields.reduce((s,o)=>(o=se(o)?{data:i,field:o}:W(o)||o.signal?qle(o,n):o,s.push(o),s),[]);return(Dl(t.type)?Wle:bk(t.type)?Hle:Gle)(e,n,r)}function qle(e,t){const n="_:vega:_"+Ile++,i=wr({});if(W(e))i.value={$ingest:e};else if(e.signal){const r="setdata("+Q(n)+","+e.signal+")";i.params.input=t.signalRef(r)}return t.addDataPipeline(n,[i,au({})]),{data:n,field:"data"}}function Wle(e,t,n){const i=YT(e.sort,!0);let r,s;const o=n.map(l=>{const c=t.getData(l.data);return c||h1(l.data),c.countsRef(t,l.field,i)}),a={groupby:S7,pulse:o};i&&(r=i.op||"count",s=i.field?c1(r,i.field):"count",a.ops=[GT[r]],a.fields=[t.fieldRef(s)],a.as=[s]),r=t.add(zT(a));const u=t.add(wr({pulse:Ee(r)}));return s=t.add(Lle({field:S7,sort:t.sortRef(i),pulse:Ee(u)})),Ee(s)}function YT(e,t){return e&&(!e.field&&!e.op?re(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?q("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!GT[e.op]&&q("Multiple domain scales can not be sorted using "+e.op)),e}function Hle(e,t,n){const i=n.map(r=>{const s=t.getData(r.data);return s||h1(r.data),s.domainRef(t,r.field)});return Ee(t.add(Sle({values:i})))}function Gle(e,t,n){const i=n.map(r=>{const s=t.getData(r.data);return s||h1(r.data),s.extentRef(t,r.field)});return Ee(t.add($le({extents:i})))}function Vle(e,t){return e.signal||W(e)?d1(e,t):t.objectProperty(e)}function Yle(e,t){return e.signal?t.signalRef(e.signal):re(e)?{interval:Zi(e.interval),step:Zi(e.step)}:Zi(e)}function Xle(e,t){t.interpolate=Zi(e.type||e),e.gamma!=null&&(t.interpolateGamma=Zi(e.gamma))}function XT(e,t,n){const i=t.config.range;let r=e.range;if(r.signal)return t.signalRef(r.signal);if(se(r)){if(i&&ue(i,r))return e=Oe({},e,{range:i[r]}),XT(e,t,n);r==="width"?r=[0,{signal:"width"}]:r==="height"?r=Dl(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:q("Unrecognized scale range value: "+Q(r))}else if(r.scheme){n.scheme=W(r.scheme)?d1(r.scheme,t):Zi(r.scheme,t),r.extent&&(n.schemeExtent=d1(r.extent,t)),r.count&&(n.schemeCount=Zi(r.count,t));return}else if(r.step){n.rangeStep=Zi(r.step,t);return}else{if(Dl(e.type)&&!W(r))return VT(r,e,t);W(r)||q("Unsupported range type: "+Q(r))}return r.map(s=>(W(s)?d1:Zi)(s,t))}function Kle(e,t){const n=t.config.projection||{},i={};for(const r in e)r!=="name"&&(i[r]=M7(e[r],r,t));for(const r in n)i[r]==null&&(i[r]=M7(n[r],r,t));t.addProjection(e.name,i)}function M7(e,t,n){return W(e)?e.map(i=>M7(i,t,n)):re(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:q("Unsupported parameter object: "+Q(e)):e}const Er="top",tc="left",nc="right",na="bottom",KT="center",Zle="vertical",Jle="start",Qle="middle",ece="end",N7="index",R7="label",tce="offset",ic="perc",nce="perc2",Ji="value",zd="guide-label",O7="guide-title",ice="group-title",rce="group-subtitle",ZT="symbol",p1="gradient",L7="discrete",I7="size",P7=[I7,"shape","fill","stroke","strokeWidth","strokeDash","opacity"],Bd={name:1,style:1,interactive:1},Ye={value:0},Qi={value:1},g1="group",JT="rect",z7="rule",sce="symbol",uu="text";function Ud(e){return e.type=g1,e.interactive=e.interactive||!1,e}function di(e,t){const n=(i,r)=>_r(e[i],_r(t[i],r));return n.isVertical=i=>Zle===_r(e.direction,t.direction||(i?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>_r(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>_r(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>_r(e.columns,_r(t.columns,+n.isVertical(!0))),n}function QT(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function oce(e,t,n){const i=t.config.style[n];return i&&i[e]}function m1(e,t,n){return`item.anchor === '${Jle}' ? ${e} : item.anchor === '${ece}' ? ${t} : ${n}`}const B7=m1(Q(tc),Q(nc),Q(KT));function ace(e){const t=e("tickBand");let n=e("tickOffset"),i,r;return t?t.signal?(i={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},r={signal:`(${t.signal}) === 'extent'`},re(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(i=1,r=!0,n=0):(i=.5,r=!1):(i=e("bandPosition"),r=e("tickExtra")),{extra:r,band:i,offset:n}}function eM(e,t){return t?e?re(e)?Object.assign({},e,{offset:eM(e.offset,t)}):{value:e,offset:t}:t:e}function Ti(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=Ql(e.encode,t,Bd)):e.interactive=!1,e}function uce(e,t,n,i){const r=di(e,n),s=r.isVertical(),o=r.gradientThickness(),a=r.gradientLength();let u,l,c,f,d;s?(l=[0,1],c=[0,0],f=o,d=a):(l=[0,0],c=[1,0],f=a,d=o);const h={enter:u={opacity:Ye,x:Ye,y:Ye,width:tn(f),height:tn(d)},update:Oe({},u,{opacity:Qi,fill:{gradient:t,start:l,stop:c}}),exit:{opacity:Ye}};return pn(h,{stroke:r("gradientStrokeColor"),strokeWidth:r("gradientStrokeWidth")},{opacity:r("gradientOpacity")}),Ti({type:JT,role:Uue,encode:h},i)}function lce(e,t,n,i,r){const s=di(e,n),o=s.isVertical(),a=s.gradientThickness(),u=s.gradientLength();let l,c,f,d,h="";o?(l="y",f="y2",c="x",d="width",h="1-"):(l="x",f="x2",c="y",d="height");const p={opacity:Ye,fill:{scale:t,field:Ji}};p[l]={signal:h+"datum."+ic,mult:u},p[c]=Ye,p[f]={signal:h+"datum."+nce,mult:u},p[d]=tn(a);const g={enter:p,update:Oe({},p,{opacity:Qi}),exit:{opacity:Ye}};return pn(g,{stroke:s("gradientStrokeColor"),strokeWidth:s("gradientStrokeWidth")},{opacity:s("gradientOpacity")}),Ti({type:JT,role:zue,key:Ji,from:r,encode:g},i)}const cce=`datum.${ic}<=0?"${tc}":datum.${ic}>=1?"${nc}":"${KT}"`,fce=`datum.${ic}<=0?"${na}":datum.${ic}>=1?"${Er}":"${Qle}"`;function tM(e,t,n,i){const r=di(e,t),s=r.isVertical(),o=tn(r.gradientThickness()),a=r.gradientLength();let u=r("labelOverlap"),l,c,f,d,h="";const p={enter:l={opacity:Ye},update:c={opacity:Qi,text:{field:R7}},exit:{opacity:Ye}};return pn(p,{fill:r("labelColor"),fillOpacity:r("labelOpacity"),font:r("labelFont"),fontSize:r("labelFontSize"),fontStyle:r("labelFontStyle"),fontWeight:r("labelFontWeight"),limit:_r(e.labelLimit,t.gradientLabelLimit)}),s?(l.align={value:"left"},l.baseline=c.baseline={signal:fce},f="y",d="x",h="1-"):(l.align=c.align={signal:cce},l.baseline={value:"top"},f="x",d="y"),l[f]=c[f]={signal:h+"datum."+ic,mult:a},l[d]=c[d]=o,o.offset=_r(e.labelOffset,t.gradientLabelOffset)||0,u=u?{separation:r("labelSeparation"),method:u,order:"datum."+N7}:void 0,Ti({type:uu,role:DT,style:zd,key:Ji,from:i,encode:p,overlap:u},n)}function dce(e,t,n,i,r){const s=di(e,t),o=n.entries,a=!!(o&&o.interactive),u=o?o.name:void 0,l=s("clipHeight"),c=s("symbolOffset"),f={data:"value"},d=`(${r}) ? datum.${tce} : datum.${I7}`,h=l?tn(l):{field:I7},p=`datum.${N7}`,g=`max(1, ${r})`;let m,y,b,v,x;h.mult=.5,m={enter:y={opacity:Ye,x:{signal:d,mult:.5,offset:c},y:h},update:b={opacity:Qi,x:y.x,y:y.y},exit:{opacity:Ye}};let _=null,E=null;e.fill||(_=t.symbolBaseFillColor,E=t.symbolBaseStrokeColor),pn(m,{fill:s("symbolFillColor",_),shape:s("symbolType"),size:s("symbolSize"),stroke:s("symbolStrokeColor",E),strokeDash:s("symbolDash"),strokeDashOffset:s("symbolDashOffset"),strokeWidth:s("symbolStrokeWidth")},{opacity:s("symbolOpacity")}),P7.forEach(S=>{e[S]&&(b[S]=y[S]={scale:e[S],field:Ji})});const w=Ti({type:sce,role:jue,key:Ji,from:f,clip:l?!0:void 0,encode:m},n.symbols),C=tn(c);C.offset=s("labelOffset"),m={enter:y={opacity:Ye,x:{signal:d,offset:C},y:h},update:b={opacity:Qi,text:{field:R7},x:y.x,y:y.y},exit:{opacity:Ye}},pn(m,{align:s("labelAlign"),baseline:s("labelBaseline"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontStyle:s("labelFontStyle"),fontWeight:s("labelFontWeight"),limit:s("labelLimit")});const k=Ti({type:uu,role:DT,style:zd,key:Ji,from:f,encode:m},n.labels);return m={enter:{noBound:{value:!l},width:Ye,height:l?tn(l):Ye,opacity:Ye},exit:{opacity:Ye},update:b={opacity:Qi,row:{signal:null},column:{signal:null}}},s.isVertical(!0)?(v=`ceil(item.mark.items.length / ${g})`,b.row.signal=`${p}%${v}`,b.column.signal=`floor(${p} / ${v})`,x={field:["row",p]}):(b.row.signal=`floor(${p} / ${g})`,b.column.signal=`${p} % ${g}`,x={field:p}),b.column.signal=`(${r})?${b.column.signal}:${p}`,i={facet:{data:i,name:"value",groupby:N7}},Ud({role:k7,from:i,encode:Ql(m,o,Bd),marks:[w,k],name:u,interactive:a,sort:x})}function hce(e,t){const n=di(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const U7='item.orient === "left"',j7='item.orient === "right"',y1=`(${U7} || ${j7})`,pce=`datum.vgrad && ${y1}`,gce=m1('"top"','"bottom"','"middle"'),mce=m1('"right"','"left"','"center"'),yce=`datum.vgrad && ${j7} ? (${mce}) : (${y1} && !(datum.vgrad && ${U7})) ? "left" : ${B7}`,bce=`item._anchor || (${y1} ? "middle" : "start")`,vce=`${pce} ? (${U7} ? -90 : 90) : 0`,xce=`${y1} ? (datum.vgrad ? (${j7} ? "bottom" : "top") : ${gce}) : "top"`;function _ce(e,t,n,i){const r=di(e,t),s={enter:{opacity:Ye},update:{opacity:Qi,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:Ye}};return pn(s,{orient:r("titleOrient"),_anchor:r("titleAnchor"),anchor:{signal:bce},angle:{signal:vce},align:{signal:yce},baseline:{signal:xce},text:e.title,fill:r("titleColor"),fillOpacity:r("titleOpacity"),font:r("titleFont"),fontSize:r("titleFontSize"),fontStyle:r("titleFontStyle"),fontWeight:r("titleFontWeight"),limit:r("titleLimit"),lineHeight:r("titleLineHeight")},{align:r("titleAlign"),baseline:r("titleBaseline")}),Ti({type:uu,role:que,style:O7,from:i,encode:s},n)}function wce(e,t){let n;return re(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+nM(e.path)+")":e.sphere&&(n="geoShape("+nM(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function nM(e){return re(e)&&e.signal?e.signal:Q(e)}function iM(e){const t=e.role||"";return t.startsWith("axis")||t.startsWith("legend")||t.startsWith("title")?t:e.type===g1?k7:t||E7}function Ece(e){return{marktype:e.type,name:e.name||void 0,role:e.role||iM(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function Cce(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function q7(e,t){const n=UE(e.type);n||q("Unrecognized transform type: "+Q(e.type));const i=u1(n.type.toLowerCase(),null,rM(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(i)),i.metadata=n.metadata||{},i}function rM(e,t,n){const i={},r=e.params.length;for(let s=0;s<r;++s){const o=e.params[s];i[o.name]=kce(o,t,n)}return i}function kce(e,t,n){const i=e.type,r=t[e.name];if(i==="index")return Ace(e,t,n);if(r===void 0){e.required&&q("Missing required "+Q(t.type)+" parameter: "+Q(e.name));return}else{if(i==="param")return $ce(e,t,n);if(i==="projection")return n.projectionRef(t[e.name])}return e.array&&!Yt(r)?r.map(s=>sM(e,s,n)):sM(e,r,n)}function sM(e,t,n){const i=e.type;if(Yt(t))return aM(i)?q("Expression references can not be signals."):W7(i)?n.fieldRef(t):uM(i)?n.compareRef(t):n.signalRef(t.signal);{const r=e.expr||W7(i);return r&&Sce(t)?n.exprRef(t.expr,t.as):r&&Fce(t)?Id(t.field,t.as):aM(i)?cs(t,n):Dce(i)?Ee(n.getData(t).values):W7(i)?Id(t):uM(i)?n.compareRef(t):t}}function Ace(e,t,n){return se(t.from)||q('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function $ce(e,t,n){const i=t[e.name];return e.array?(W(i)||q("Expected an array of sub-parameters. Instead: "+Q(i)),i.map(r=>oM(e,r,n))):oM(e,i,n)}function oM(e,t,n){const i=e.params.length;let r;for(let o=0;o<i;++o){r=e.params[o];for(const a in r.key)if(r.key[a]!==t[a]){r=null;break}if(r)break}r||q("Unsupported parameter: "+Q(t));const s=Oe(rM(r,t,n),r.key);return Ee(n.add(Dle(s)))}const Sce=e=>e&&e.expr,Fce=e=>e&&e.field,Dce=e=>e==="data",aM=e=>e==="expr",W7=e=>e==="field",uM=e=>e==="compare";function Tce(e,t,n){let i,r,s,o,a;return e?(i=e.facet)&&(t||q("Only group marks can be faceted."),i.field!=null?o=a=b1(i,n):(e.data?a=Ee(n.getData(e.data).aggregate):(s=q7(Oe({type:"aggregate",groupby:oe(i.groupby)},i.aggregate),n),s.params.key=n.keyRef(i.groupby),s.params.pulse=b1(i,n),o=a=Ee(n.add(s))),r=n.keyRef(i.groupby,!0))):o=Ee(n.add(wr(null,[{}]))),o||(o=b1(e,n)),{key:r,pulse:o,parent:a}}function b1(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:Ee(t.getData(e.data).output)}function lu(e,t,n,i,r){this.scope=e,this.input=t,this.output=n,this.values=i,this.aggregate=r,this.index={}}lu.fromEntries=function(e,t){const n=t.length,i=t[n-1],r=t[n-2];let s=t[0],o=null,a=1;for(s&&s.type==="load"&&(s=t[1]),e.add(t[0]);a<n;++a)t[a].params.pulse=Ee(t[a-1]),e.add(t[a]),t[a].type==="aggregate"&&(o=t[a]);return new lu(e,s,r,i,o)};function lM(e){return se(e)?e:null}function cM(e,t,n){const i=c1(n.op,n.field);let r;if(t.ops){for(let s=0,o=t.as.length;s<o;++s)if(t.as[s]===i)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((r=n.op.signal)?e.signalRef(r):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(i))}function jd(e,t,n,i,r,s,o){const a=t[n]||(t[n]={}),u=ole(s);let l=lM(r),c,f;if(l!=null&&(e=t.scope,l=l+(u?"|"+u:""),c=a[l]),!c){const d=s?{field:S7,pulse:t.countsRef(e,r,s)}:{field:e.fieldRef(r),pulse:Ee(t.output)};u&&(d.sort=e.sortRef(s)),f=e.add(u1(i,void 0,d)),o&&(t.index[r]=f),c=Ee(f),l!=null&&(a[l]=c)}return c}lu.prototype={countsRef(e,t,n){const i=this,r=i.counts||(i.counts={}),s=lM(t);let o,a,u;return s!=null&&(e=i.scope,o=r[s]),o?n&&n.field&&cM(e,o.agg.params,n):(u={groupby:e.fieldRef(t,"key"),pulse:Ee(i.output)},n&&n.field&&cM(e,u,n),a=e.add(zT(u)),o=e.add(wr({pulse:Ee(a)})),o={agg:a,ref:Ee(o)},s!=null&&(r[s]=o)),o.ref},tuplesRef(){return Ee(this.values)},extentRef(e,t){return jd(e,this,"extent","extent",t,!1)},domainRef(e,t){return jd(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return jd(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return jd(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return jd(e,this,"indata","tupleindex",t,!0,!0)}};function Mce(e,t,n){const i=e.from.facet,r=i.name,s=b1(i,t);let o;i.name||q("Facet must have a name: "+Q(i)),i.data||q("Facet must reference a data set: "+Q(i)),i.field?o=t.add(qT({field:t.fieldRef(i.field),pulse:s})):i.groupby?o=t.add(_le({key:t.keyRef(i.groupby),group:Ee(t.proxy(n.parent)),pulse:s})):q("Facet must specify groupby or field: "+Q(i));const a=t.fork(),u=a.add(wr()),l=a.add(au({pulse:Ee(u)}));a.addData(r,new lu(a,u,u,l)),a.addSignal("parent",null),o.params.subflow={$subflow:a.parse(e).toRuntime()}}function Nce(e,t,n){const i=t.add(qT({pulse:n.pulse})),r=t.fork();r.add(au()),r.addSignal("parent",null),i.params.subflow={$subflow:r.parse(e).toRuntime()}}function fM(e,t,n){const i=e.remove,r=e.insert,s=e.toggle,o=e.modify,a=e.values,u=t.add(l1()),l="if("+e.trigger+',modify("'+n+'",'+[r,i,s,o,a].map(f=>f??"null").join(",")+"),0)",c=cs(l,t);u.update=c.$expr,u.params=c.$params}function v1(e,t){const n=iM(e),i=e.type===g1,r=e.from&&e.from.facet,s=e.overlap;let o=e.layout||n===k7||n===C7,a,u,l,c,f,d,h;const p=n===E7||o||r,g=Tce(e.from,i,t);u=t.add(vle({key:g.key||(e.key?Id(e.key):void 0),pulse:g.pulse,clean:!i}));const m=Ee(u);u=l=t.add(wr({pulse:m})),u=t.add(Ale({markdef:Ece(e),interactive:Cce(e.interactive,t),clip:wce(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:Ee(u)}));const y=Ee(u);u=c=t.add(jT(RT(e.encode,e.type,n,e.style,t,{mod:!1,pulse:y}))),u.params.parent=t.encode(),e.transform&&e.transform.forEach(E=>{const w=q7(E,t),C=w.metadata;(C.generates||C.changes)&&q("Mark transforms should not generate new data."),C.nomod||(c.params.mod=!0),w.params.pulse=Ee(u),t.add(u=w)}),e.sort&&(u=t.add(Ole({sort:t.compareRef(e.sort),pulse:Ee(u)})));const b=Ee(u);(r||o)&&(o=t.add(HT({layout:t.objectProperty(e.layout),legends:t.legends,mark:y,pulse:b})),d=Ee(o));const v=t.add(BT({mark:y,pulse:d||b}));h=Ee(v),i&&(p&&(a=t.operators,a.pop(),o&&a.pop()),t.pushState(b,d||h,m),r?Mce(e,t,g):p?Nce(e,t,g):t.parse(e),t.popState(),p&&(o&&a.push(o),a.push(v))),s&&(h=Rce(s,h,t));const x=t.add(WT({pulse:h})),_=t.add(au({pulse:Ee(x)},void 0,t.parent()));e.name!=null&&(f=e.name,t.addData(f,new lu(t,l,x,_)),e.on&&e.on.forEach(E=>{(E.insert||E.remove||E.toggle)&&q("Marks only support modify triggers."),fM(E,t,f)}))}function Rce(e,t,n){const i=e.method,r=e.bound,s=e.separation,o={separation:Yt(s)?n.signalRef(s.signal):s,method:Yt(i)?n.signalRef(i.signal):i,pulse:t};if(e.order&&(o.sort=n.compareRef({field:e.order})),r){const a=r.tolerance;o.boundTolerance=Yt(a)?n.signalRef(a.signal):+a,o.boundScale=n.scaleRef(r.scale),o.boundOrient=r.orient}return Ee(n.add(Fle(o)))}function Oce(e,t){const n=t.config.legend,i=e.encode||{},r=di(e,n),s=i.legend||{},o=s.name||void 0,a=s.interactive,u=s.style,l={};let c=0,f,d,h;P7.forEach(v=>e[v]?(l[v]=e[v],c=c||e[v]):0),c||q("Missing valid scale for legend.");const p=Lce(e,t.scaleType(c)),g={title:e.title!=null,scales:l,type:p,vgrad:p!=="symbol"&&r.isVertical()},m=Ee(t.add(wr(null,[g]))),y={enter:{x:{value:0},y:{value:0}}},b=Ee(t.add(Cle(d={type:p,scale:t.scaleRef(c),count:t.objectProperty(r("tickCount")),limit:t.property(r("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return p===p1?(h=[uce(e,c,n,i.gradient),tM(e,n,i.labels,b)],d.count=d.count||t.signalRef(`max(2,2*floor((${ou(r.gradientLength())})/100))`)):p===L7?h=[lce(e,c,n,i.gradient,b),tM(e,n,i.labels,b)]:(f=hce(e,n),h=[dce(e,n,i,b,ou(f.columns))],d.size=zce(e,t,h[0].marks)),h=[Ud({role:Bue,from:m,encode:y,marks:h,layout:f,interactive:a})],g.title&&h.push(_ce(e,n,i.title,m)),v1(Ud({role:Pue,from:m,encode:Ql(Pce(r,e,n),s,Bd),marks:h,aria:r("aria"),description:r("description"),zindex:r("zindex"),name:o,interactive:a,style:u}),t)}function Lce(e,t){let n=e.type||ZT;return!e.type&&Ice(e)===1&&(e.fill||e.stroke)&&(n=Kb(t)?p1:Zb(t)?L7:ZT),n!==p1?n:Zb(t)?L7:p1}function Ice(e){return P7.reduce((t,n)=>t+(e[n]?1:0),0)}function Pce(e,t,n){const i={enter:{},update:{}};return pn(i,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),i}function zce(e,t,n){const i=ou(dM("size",e,n)),r=ou(dM("strokeWidth",e,n)),s=ou(Bce(n[1].encode,t,zd));return cs(`max(ceil(sqrt(${i})+${r}),${s})`,t)}function dM(e,t,n){return t[e]?`scale("${t[e]}",datum)`:QT(e,n[0].encode)}function Bce(e,t,n){return QT("fontSize",e)||oce("fontSize",t,n)}const Uce=`item.orient==="${tc}"?-90:item.orient==="${nc}"?90:0`;function jce(e,t){e=se(e)?{text:e}:e;const n=di(e,t.config.title),i=e.encode||{},r=i.group||{},s=r.name||void 0,o=r.interactive,a=r.style,u=[],l={},c=Ee(t.add(wr(null,[l])));return u.push(Hce(e,n,qce(e),c)),e.subtitle&&u.push(Gce(e,n,i.subtitle,c)),v1(Ud({role:Wue,from:c,encode:Wce(n,r),marks:u,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:s,interactive:o,style:a}),t)}function qce(e){const t=e.encode;return t&&t.title||Oe({name:e.name,interactive:e.interactive,style:e.style},t)}function Wce(e,t){const n={enter:{},update:{}};return pn(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:B7},angle:{signal:Uce},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),Ql(n,t,Bd)}function Hce(e,t,n,i){const r={value:0},s=e.text,o={enter:{opacity:r},update:{opacity:{value:1}},exit:{opacity:r}};return pn(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),Ti({type:uu,role:Hue,style:ice,from:i,encode:o},n)}function Gce(e,t,n,i){const r={value:0},s=e.subtitle,o={enter:{opacity:r},update:{opacity:{value:1}},exit:{opacity:r}};return pn(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),Ti({type:uu,role:Gue,style:rce,from:i,encode:o},n)}function Vce(e,t){const n=[];e.transform&&e.transform.forEach(i=>{n.push(q7(i,t))}),e.on&&e.on.forEach(i=>{fM(i,t,e.name)}),t.addDataPipeline(e.name,Yce(e,t,n))}function Yce(e,t,n){const i=[];let r=null,s=!1,o=!1,a,u,l,c,f;for(e.values?Yt(e.values)||f1(e.format)?(i.push(hM(t,e)),i.push(r=cu())):i.push(r=cu({$ingest:e.values,$format:e.format})):e.url?f1(e.url)||f1(e.format)?(i.push(hM(t,e)),i.push(r=cu())):i.push(r=cu({$request:e.url,$format:e.format})):e.source&&(r=a=oe(e.source).map(d=>Ee(t.getData(d).output)),i.push(null)),u=0,l=n.length;u<l;++u)c=n[u],f=c.metadata,!r&&!f.source&&i.push(r=cu()),i.push(c),f.generates&&(o=!0),f.modifies&&!o&&(s=!0),f.source?r=c:f.changes&&(r=null);return a&&(l=a.length-1,i[0]=Nle({derive:s,pulse:l?a:a[0]}),(s||l)&&i.splice(1,0,cu())),r||i.push(cu()),i.push(au({})),i}function cu(e){const t=wr({},e);return t.metadata={source:!0},t}function hM(e,t){return kle({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const pM=e=>e===na||e===Er,x1=(e,t,n)=>Yt(e)?Jce(e.signal,t,n):e===tc||e===Er?t:n,nn=(e,t,n)=>Yt(e)?Kce(e.signal,t,n):pM(e)?t:n,Cr=(e,t,n)=>Yt(e)?Zce(e.signal,t,n):pM(e)?n:t,gM=(e,t,n)=>Yt(e)?Qce(e.signal,t,n):e===Er?{value:t}:{value:n},Xce=(e,t,n)=>Yt(e)?efe(e.signal,t,n):e===nc?{value:t}:{value:n},Kce=(e,t,n)=>mM(`${e} === '${Er}' || ${e} === '${na}'`,t,n),Zce=(e,t,n)=>mM(`${e} !== '${Er}' && ${e} !== '${na}'`,t,n),Jce=(e,t,n)=>H7(`${e} === '${tc}' || ${e} === '${Er}'`,t,n),Qce=(e,t,n)=>H7(`${e} === '${Er}'`,t,n),efe=(e,t,n)=>H7(`${e} === '${nc}'`,t,n),mM=(e,t,n)=>(t=t!=null?tn(t):t,n=n!=null?tn(n):n,yM(t)&&yM(n)?(t=t?t.signal||Q(t.value):null,n=n?n.signal||Q(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[Oe({test:e},t)].concat(n||[])),yM=e=>e==null||Object.keys(e).length===1,H7=(e,t,n)=>({signal:`${e} ? (${rc(t)}) : (${rc(n)})`}),tfe=(e,t,n,i,r)=>({signal:(i!=null?`${e} === '${tc}' ? (${rc(i)}) : `:"")+(n!=null?`${e} === '${na}' ? (${rc(n)}) : `:"")+(r!=null?`${e} === '${nc}' ? (${rc(r)}) : `:"")+(t!=null?`${e} === '${Er}' ? (${rc(t)}) : `:"")+"(null)"}),rc=e=>Yt(e)?e.signal:e==null?null:Q(e),nfe=(e,t)=>t===0?0:Yt(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},sc=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function oc(e,t,n,i){let r;if(t&&ue(t,e))return t[e];if(ue(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":r="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":r=e[5].toLowerCase()+e.slice(6)}return i[O7][r]}else if(e.startsWith("label")){switch(e){case"labelColor":r="fill";break;case"labelFont":case"labelFontSize":r=e[5].toLowerCase()+e.slice(6)}return i[zd][r]}return null}function bM(e){const t={};for(const n of e)if(n)for(const i in n)t[i]=1;return Object.keys(t)}function ife(e,t){var n=t.config,i=n.style,r=n.axis,s=t.scaleType(e.scale)==="band"&&n.axisBand,o=e.orient,a,u,l;if(Yt(o)){const f=bM([n.axisX,n.axisY]),d=bM([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);a={};for(l of f)a[l]=nn(o,oc(l,n.axisX,r,i),oc(l,n.axisY,r,i));u={};for(l of d)u[l]=tfe(o.signal,oc(l,n.axisTop,r,i),oc(l,n.axisBottom,r,i),oc(l,n.axisLeft,r,i),oc(l,n.axisRight,r,i))}else a=o===Er||o===na?n.axisX:n.axisY,u=n["axis"+o[0].toUpperCase()+o.slice(1)];return a||u||s?Oe({},r,a,u,s):r}function rfe(e,t,n,i){const r=di(e,t),s=e.orient;let o,a;const u={enter:o={opacity:Ye},update:a={opacity:Qi},exit:{opacity:Ye}};pn(u,{stroke:r("domainColor"),strokeCap:r("domainCap"),strokeDash:r("domainDash"),strokeDashOffset:r("domainDashOffset"),strokeWidth:r("domainWidth"),strokeOpacity:r("domainOpacity")});const l=vM(e,0),c=vM(e,1);return o.x=a.x=nn(s,l,Ye),o.x2=a.x2=nn(s,c),o.y=a.y=Cr(s,l,Ye),o.y2=a.y2=Cr(s,c),Ti({type:z7,role:Nue,from:i,encode:u},n)}function vM(e,t){return{scale:e.scale,range:t}}function sfe(e,t,n,i,r){const s=di(e,t),o=e.orient,a=e.gridScale,u=x1(o,1,-1),l=ofe(e.offset,u);let c,f,d;const h={enter:c={opacity:Ye},update:d={opacity:Qi},exit:f={opacity:Ye}};pn(h,{stroke:s("gridColor"),strokeCap:s("gridCap"),strokeDash:s("gridDash"),strokeDashOffset:s("gridDashOffset"),strokeOpacity:s("gridOpacity"),strokeWidth:s("gridWidth")});const p={scale:e.scale,field:Ji,band:r.band,extra:r.extra,offset:r.offset,round:s("tickRound")},g=nn(o,{signal:"height"},{signal:"width"}),m=a?{scale:a,range:0,mult:u,offset:l}:{value:0,offset:l},y=a?{scale:a,range:1,mult:u,offset:l}:Oe(g,{mult:u,offset:l});return c.x=d.x=nn(o,p,m),c.y=d.y=Cr(o,p,m),c.x2=d.x2=Cr(o,y),c.y2=d.y2=nn(o,y),f.x=nn(o,p),f.y=Cr(o,p),Ti({type:z7,role:Rue,key:Ji,from:i,encode:h},n)}function ofe(e,t){if(t!==1)if(!re(e))e=Yt(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=Oe({},e);for(;n.mult!=null;)if(re(n.mult))n=n.mult=Oe({},n.mult);else return n.mult=Yt(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function afe(e,t,n,i,r,s){const o=di(e,t),a=e.orient,u=x1(a,-1,1);let l,c,f;const d={enter:l={opacity:Ye},update:f={opacity:Qi},exit:c={opacity:Ye}};pn(d,{stroke:o("tickColor"),strokeCap:o("tickCap"),strokeDash:o("tickDash"),strokeDashOffset:o("tickDashOffset"),strokeOpacity:o("tickOpacity"),strokeWidth:o("tickWidth")});const h=tn(r);h.mult=u;const p={scale:e.scale,field:Ji,band:s.band,extra:s.extra,offset:s.offset,round:o("tickRound")};return f.y=l.y=nn(a,Ye,p),f.y2=l.y2=nn(a,h),c.x=nn(a,p),f.x=l.x=Cr(a,Ye,p),f.x2=l.x2=Cr(a,h),c.y=Cr(a,p),Ti({type:z7,role:Lue,key:Ji,from:i,encode:d},n)}function G7(e,t,n,i,r){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+i+","+r+")"}}function ufe(e,t,n,i,r,s){const o=di(e,t),a=e.orient,u=e.scale,l=x1(a,-1,1),c=ou(o("labelFlush")),f=ou(o("labelFlushOffset")),d=o("labelAlign"),h=o("labelBaseline");let p=c===0||!!c,g;const m=tn(r);m.mult=l,m.offset=tn(o("labelPadding")||0),m.offset.mult=l;const y={scale:u,field:Ji,band:.5,offset:eM(s.offset,o("labelOffset"))},b=nn(a,p?G7(u,c,'"left"','"right"','"center"'):{value:"center"},Xce(a,"left","right")),v=nn(a,gM(a,"bottom","top"),p?G7(u,c,'"top"','"bottom"','"middle"'):{value:"middle"}),x=G7(u,c,`-(${f})`,f,0);p=p&&f;const _={opacity:Ye,x:nn(a,y,m),y:Cr(a,y,m)},E={enter:_,update:g={opacity:Qi,text:{field:R7},x:_.x,y:_.y,align:b,baseline:v},exit:{opacity:Ye,x:_.x,y:_.y}};pn(E,{dx:!d&&p?nn(a,x):null,dy:!h&&p?Cr(a,x):null}),pn(E,{angle:o("labelAngle"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontWeight:o("labelFontWeight"),fontStyle:o("labelFontStyle"),limit:o("labelLimit"),lineHeight:o("labelLineHeight")},{align:d,baseline:h});const w=o("labelBound");let C=o("labelOverlap");return C=C||w?{separation:o("labelSeparation"),method:C,order:"datum.index",bound:w?{scale:u,orient:a,tolerance:w}:null}:void 0,g.align!==b&&(g.align=sc(g.align,b)),g.baseline!==v&&(g.baseline=sc(g.baseline,v)),Ti({type:uu,role:Oue,style:zd,key:Ji,from:i,encode:E,overlap:C},n)}function lfe(e,t,n,i){const r=di(e,t),s=e.orient,o=x1(s,-1,1);let a,u;const l={enter:a={opacity:Ye,anchor:tn(r("titleAnchor",null)),align:{signal:B7}},update:u=Oe({},a,{opacity:Qi,text:tn(e.title)}),exit:{opacity:Ye}},c={signal:`lerp(range("${e.scale}"), ${m1(0,1,.5)})`};return u.x=nn(s,c),u.y=Cr(s,c),a.angle=nn(s,Ye,nfe(o,90)),a.baseline=nn(s,gM(s,na,Er),{value:na}),u.angle=a.angle,u.baseline=a.baseline,pn(l,{fill:r("titleColor"),fillOpacity:r("titleOpacity"),font:r("titleFont"),fontSize:r("titleFontSize"),fontStyle:r("titleFontStyle"),fontWeight:r("titleFontWeight"),limit:r("titleLimit"),lineHeight:r("titleLineHeight")},{align:r("titleAlign"),angle:r("titleAngle"),baseline:r("titleBaseline")}),cfe(r,s,l,n),l.update.align=sc(l.update.align,a.align),l.update.angle=sc(l.update.angle,a.angle),l.update.baseline=sc(l.update.baseline,a.baseline),Ti({type:uu,role:Iue,style:O7,from:i,encode:l},n)}function cfe(e,t,n,i){const r=(a,u)=>a!=null?(n.update[u]=sc(tn(a),n.update[u]),!1):!ec(u,i),s=r(e("titleX"),"x"),o=r(e("titleY"),"y");n.enter.auto=o===s?tn(o):nn(t,tn(o),tn(s))}function ffe(e,t){const n=ife(e,t),i=e.encode||{},r=i.axis||{},s=r.name||void 0,o=r.interactive,a=r.style,u=di(e,n),l=ace(u),c={scale:e.scale,ticks:!!u("ticks"),labels:!!u("labels"),grid:!!u("grid"),domain:!!u("domain"),title:e.title!=null},f=Ee(t.add(wr({},[c]))),d=Ee(t.add(ble({scale:t.scaleRef(e.scale),extra:t.property(l.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),h=[];let p;return c.grid&&h.push(sfe(e,n,i.grid,d,l)),c.ticks&&(p=u("tickSize"),h.push(afe(e,n,i.ticks,d,p,l))),c.labels&&(p=c.ticks?p:0,h.push(ufe(e,n,i.labels,d,p,l))),c.domain&&h.push(rfe(e,n,i.domain,f)),c.title&&h.push(lfe(e,n,i.title,f)),v1(Ud({role:Mue,from:f,encode:Ql(dfe(u,e),r,Bd),marks:h,aria:u("aria"),description:u("description"),zindex:u("zindex"),name:s,interactive:o,style:a}),t)}function dfe(e,t){const n={enter:{},update:{}};return pn(n,{orient:e("orient"),offset:e("offset")||0,position:_r(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function xM(e,t,n){const i=oe(e.signals),r=oe(e.scales);return n||i.forEach(s=>LT(s,t)),oe(e.projections).forEach(s=>Kle(s,t)),r.forEach(s=>Ple(s,t)),oe(e.data).forEach(s=>Vce(s,t)),r.forEach(s=>zle(s,t)),(n||i).forEach(s=>yle(s,t)),oe(e.axes).forEach(s=>ffe(s,t)),oe(e.marks).forEach(s=>v1(s,t)),oe(e.legends).forEach(s=>Oce(s,t)),e.title&&jce(e.title,t),t.parseLambdas(),t}const hfe=e=>Ql({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function pfe(e,t){const n=t.config,i=Ee(t.root=t.add(l1())),r=gfe(e,n);r.forEach(l=>LT(l,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const s=t.add(wr()),o=t.add(jT(RT(hfe(e.encode),g1,C7,e.style,t,{pulse:Ee(s)}))),a=t.add(HT({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:i,pulse:Ee(o)}));t.operators.pop(),t.pushState(Ee(o),Ee(a),null),xM(e,t,r),t.operators.push(a);let u=t.add(BT({mark:i,pulse:Ee(a)}));return u=t.add(WT({pulse:Ee(u)})),u=t.add(au({pulse:Ee(u)})),t.addData("root",new lu(t,s,s,u)),t}function qd(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function gfe(e,t){const n=o=>_r(e[o],t[o]),i=[qd("background",n("background")),qd("autosize",Fue(n("autosize"))),qd("padding",Tue(n("padding"))),qd("width",n("width")||0),qd("height",n("height")||0)],r=i.reduce((o,a)=>(o[a.name]=a,o),{}),s={};return oe(e.signals).forEach(o=>{ue(r,o.name)?o=Oe(r[o.name],o):i.push(o),s[o.name]=o}),oe(t.signals).forEach(o=>{!ue(s,o.name)&&!ue(r,o.name)&&i.push(o)}),i}function _M(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function wM(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}_M.prototype=wM.prototype={parse(e){return xM(e,this)},fork(){return new wM(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof $7?Ee(e):e;return this.add(Mle({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(i,r,s){let o,a;i&&(o=i.data||(i.data={}),a=o[r]||(o[r]=[]),a.push(s))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const i in t.index)n(t.index[i],e,"index:"+i)}return this},pushState(e,t,n){this._encode.push(Ee(this.add(au({pulse:e})))),this._parent.push(t),this._lookup.push(n?Ee(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return Ge(this._parent)},encode(){return Ge(this._encode)},lookup(){return Ge(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(se(e))return Id(e,t);e.signal||q("Unsupported field reference: "+Q(e));const n=e.signal;let i=this.field[n];if(!i){const r={name:this.signalRef(n)};t&&(r.as=t),this.field[n]=i=Ee(this.add(wle(r)))}return i},compareRef(e){let t=!1;const n=s=>Yt(s)?(t=!0,this.signalRef(s.signal)):ale(s)?(t=!0,this.exprRef(s.expr)):s,i=oe(e.field).map(n),r=oe(e.order).map(n);return t?Ee(this.add(UT({fields:i,orders:r}))):IT(i,r)},keyRef(e,t){let n=!1;const i=s=>Yt(s)?(n=!0,Ee(r[s.signal])):s,r=this.signals;return e=oe(e).map(i),n?Ee(this.add(Ele({fields:e,flat:t}))):ile(e,t)},sortRef(e){if(!e)return e;const t=c1(e.op,e.field),n=e.order||rle;return n.signal?Ee(this.add(UT({fields:t,orders:this.signalRef(n.signal)}))):IT(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const i=this.id();this.streams.push({id:i,source:e,type:t}),this.events[n]=i}return this.events[n]},hasOwnSignal(e){return ue(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&q("Duplicate signal name: "+Q(e));const n=t instanceof $7?t:this.add(l1(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||q("Unrecognized signal name: "+Q(e)),this.signals[e]},signalRef(e){return this.signals[e]?Ee(this.signals[e]):(ue(this.lambdas,e)||(this.lambdas[e]=this.add(l1(null))),Ee(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const i=e[t],r=cs(i,this),s=this.lambdas[i];s.params=r.$params,s.update=r.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!re(e)?e:this.signalRef(e.signal||V7(e))},exprRef(e,t){const n={expr:cs(e,this)};return t&&(n.expr.$name=t),Ee(this.add(xle(n)))},addBinding(e,t){this.bindings||q("Nested signals do not support binding: "+Q(e)),this.bindings.push(Oe({signal:e},t))},addScaleProj(e,t){ue(this.scales,e)&&q("Duplicate scale or projection name: "+Q(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,Rle(t))},addProjection(e,t){this.addScaleProj(e,Tle(t))},getScale(e){return this.scales[e]||q("Unrecognized scale name: "+Q(e)),this.scales[e]},scaleRef(e){return Ee(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return ue(this.data,e)&&q("Duplicate data set name: "+Q(e)),this.data[e]=t},getData(e){return this.data[e]||q("Undefined data set name: "+Q(e)),this.data[e]},addDataPipeline(e,t){return ue(this.data,e)&&q("Duplicate data set name: "+Q(e)),this.addData(e,lu.fromEntries(this,t))}};function V7(e){return(W(e)?mfe:yfe)(e)}function mfe(e){const t=e.length;let n="[";for(let i=0;i<t;++i){const r=e[i];n+=(i>0?",":"")+(re(r)?r.signal||V7(r):Q(r))}return n+"]"}function yfe(e){let t="{",n=0,i,r;for(i in e)r=e[i],t+=(++n>1?",":"")+Q(i)+":"+(re(r)?r.signal||V7(r):Q(r));return t+"}"}function bfe(){const e="sans-serif",i="#4c78a8",r="#000",s="#888",o="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:i},area:{fill:i},image:null,line:{stroke:i,strokeWidth:2},path:{stroke:i},rect:{fill:i},rule:{stroke:r},shape:{stroke:i},symbol:{fill:i,size:64},text:{fill:r,font:e,fontSize:11},trail:{fill:i,size:2},style:{"guide-label":{fill:r,font:e,fontSize:10},"guide-title":{fill:r,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:r,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:r,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:o},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:s,grid:!1,gridWidth:1,gridColor:o,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:s,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:o,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:s,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function vfe(e,t,n){return re(e)||q("Input Vega specification must be an object."),t=nl(bfe(),t,e.config),pfe(e,new _M(t,n)).toRuntime()}var xfe="5.32.0";Oe(xl,_V,JJ,EQ,ute,nne,Fie,uie,Tie,tre,fre,bre);const _fe=Object.freeze(Object.defineProperty({__proto__:null,Bounds:Ut,CanvasHandler:Hf,CanvasRenderer:Mp,DATE:oi,DAY:$n,DAYOFYEAR:Gr,Dataflow:vl,Debug:M4,Error:b2,EventStream:v0,Gradient:Lk,GroupItem:up,HOURS:Ci,Handler:N3,HybridHandler:ZA,HybridRenderer:H3,Info:T4,Item:ap,MILLISECONDS:cr,MINUTES:ki,MONTH:An,Marks:$i,MultiPulse:py,None:D4,Operator:xt,Parameters:b0,Pulse:Fo,QUARTER:si,RenderType:Go,Renderer:qf,ResourceLoader:Vk,SECONDS:qi,SVGHandler:MA,SVGRenderer:W3,SVGStringRenderer:KA,Scenegraph:xA,TIME_UNITS:H2,Transform:P,View:vT,WEEK:Wt,Warn:v2,YEAR:cn,accessor:ii,accessorFields:wn,accessorName:Tt,array:oe,ascending:rl,bandwidthNRD:by,bin:WE,bootstrapCI:HE,boundClip:a$,boundContext:Lf,boundItem:T3,boundMark:mA,boundStroke:Bs,changeset:Ao,clampRange:W4,codegenExpression:FD,compare:C2,constant:kn,cumulativeLogNormal:Cy,cumulativeNormal:E0,cumulativeUniform:Sy,dayofyear:D8,debounce:k2,defaultLocale:ay,definition:UE,densityLogNormal:Ey,densityNormal:vy,densityUniform:$y,domChild:Gt,domClear:Vi,domCreate:Wo,domFind:M3,dotbin:GE,error:q,expressionFunction:Pt,extend:Oe,extent:qr,extentIndex:H4,falsy:vo,fastmap:sl,field:Bi,flush:G4,font:_p,fontFamily:Uf,fontSize:ns,format:f0,formatLocale:l0,formats:fy,hasOwnProperty:ue,id:Vc,identity:En,inferType:EE,inferTypes:CE,ingest:nt,inherits:ee,inrange:ol,interpolate:Jb,interpolateColors:np,interpolateRange:vk,intersect:i$,intersectBoxLine:Rl,intersectPath:m3,intersectPoint:y3,intersectRule:tA,isArray:W,isBoolean:xo,isDate:_o,isFunction:Ie,isIterable:V4,isNumber:Ze,isObject:re,isRegExp:A2,isString:se,isTuple:g0,key:$2,lerp:Y4,lineHeight:jo,loader:d0,locale:xE,logger:x2,lruCache:X4,markup:q3,merge:K4,mergeConfig:nl,multiLineOffset:S3,one:tl,pad:Z4,panLinear:P4,panLog:z4,panPow:B4,panSymlog:U4,parse:vfe,parseExpression:AD,parseSelector:ta,path:D0,pathCurves:r3,pathEqual:u$,pathParse:Tl,pathRectangle:qk,pathRender:Tf,pathSymbols:jk,pathTrail:Wk,peek:Ge,point:Ep,projection:qv,quantileLogNormal:ky,quantileNormal:C0,quantileUniform:Fy,quantiles:my,quantizeInterpolator:xk,quarter:j4,quartiles:yy,get random(){return Wi},randomInteger:kG,randomKDE:_y,randomLCG:CG,randomLogNormal:YE,randomMixture:XE,randomNormal:xy,randomUniform:KE,read:SE,regressionConstant:Dy,regressionExp:JE,regressionLinear:Ty,regressionLoess:i9,regressionLog:ZE,regressionPoly:e9,regressionPow:QE,regressionQuad:My,renderModule:Lp,repeat:Yc,resetDefaultLocale:_H,resetSVGClipId:Gk,resetSVGDefIds:mJ,responseType:$E,runtimeContext:QD,sampleCurve:A0,sampleLogNormal:wy,sampleNormal:w0,sampleUniform:Ay,scale:Qe,sceneEqual:V3,sceneFromJSON:bA,scenePickVisit:gp,sceneToJSON:yA,sceneVisit:pr,sceneZOrder:b3,scheme:Qb,serializeXML:qA,setHybridRendererOptions:dJ,setRandom:wG,span:Xc,splitAccessPath:jr,stringValue:Q,textMetrics:Ai,timeBin:X8,timeFloor:I8,timeFormatLocale:df,timeInterval:gl,timeOffset:B8,timeSequence:q8,timeUnitSpecifier:F8,timeUnits:V2,toBoolean:S2,toDate:F2,toNumber:Cn,toSet:lr,toString:D2,transform:jE,transforms:xl,truncate:J4,truthy:Ui,tupleid:_e,typeParsers:uy,utcFloor:P8,utcInterval:ml,utcOffset:U8,utcSequence:W8,utcdayofyear:N8,utcquarter:q4,utcweek:R8,version:xfe,visitArray:wo,week:T8,writeConfig:il,zero:bo,zoomLinear:_2,zoomLog:w2,zoomPow:Xh,zoomSymlog:E2},Symbol.toStringTag,{value:"Module"}));function wfe(e,t,n){let i;t.x2&&(t.x?(n&&e.x>e.x2&&(i=e.x,e.x=e.x2,e.x2=i),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(i=e.y,e.y=e.y2,e.y2=i),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}var Efe={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},Cfe={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},kfe={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const Afe=Array.prototype.slice,fu=(e,t,n)=>{const i=n?n(t[0]):t[0];return i[e].apply(i,Afe.call(t,1))},$fe=(e,t,n,i,r,s,o)=>new Date(e,t||0,n??1,i||0,r||0,s||0,o||0);var Sfe={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:$fe,date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return fu("join",arguments)},indexof:function(){return fu("indexOf",arguments)},lastindexof:function(){return fu("lastIndexOf",arguments)},slice:function(){return fu("slice",arguments)},reverse:e=>e.slice().reverse(),sort:e=>e.slice().sort(rl),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return fu("substring",arguments,String)},split:function(){return fu("split",arguments,String)},replace:function(){return fu("replace",arguments,String)},trim:e=>String(e).trim(),btoa:e=>btoa(e),atob:e=>atob(e),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)};const Ffe=["view","item","group","xy","x","y"],Y7=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&Y7.add(setImmediate);const Dfe={Literal:(e,t)=>t.value,Identifier:(e,t)=>{const n=t.name;return e.memberDepth>0?n:n==="datum"?e.datum:n==="event"?e.event:n==="item"?e.item:Efe[n]||e.params["$"+n]},MemberExpression:(e,t)=>{const n=!t.computed,i=e(t.object);n&&(e.memberDepth+=1);const r=e(t.property);if(n&&(e.memberDepth-=1),Y7.has(i[r])){console.error(`Prevented interpretation of member "${r}" which could lead to insecure code execution`);return}return i[r]},CallExpression:(e,t)=>{const n=t.arguments;let i=t.callee.name;return i.startsWith("_")&&(i=i.slice(1)),i==="if"?e(n[0])?e(n[1]):e(n[2]):(e.fn[i]||Sfe[i]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>Cfe[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>kfe[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>t.operator==="&&"?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,i)=>{e.memberDepth+=1;const r=e(i.key);return e.memberDepth-=1,Y7.has(e(i.value))?console.error(`Prevented interpretation of property "${r}" which could lead to insecure code execution`):n[r]=e(i.value),n},{})};function Wd(e,t,n,i,r,s){const o=a=>Dfe[a.type](o,a);return o.memberDepth=0,o.fn=Object.create(t),o.params=n,o.datum=i,o.event=r,o.item=s,Ffe.forEach(a=>o.fn[a]=function(){return r.vega[a](...arguments)}),o(e)}var Tfe={operator(e,t){const n=t.ast,i=e.functions;return r=>Wd(n,i,r)},parameter(e,t){const n=t.ast,i=e.functions;return(r,s)=>Wd(n,i,s,r)},event(e,t){const n=t.ast,i=e.functions;return r=>Wd(n,i,void 0,void 0,r)},handler(e,t){const n=t.ast,i=e.functions;return(r,s)=>{const o=s.item&&s.item.datum;return Wd(n,i,r,o,s)}},encode(e,t){const{marktype:n,channels:i}=t,r=e.functions,s=n==="group"||n==="image"||n==="rect";return(o,a)=>{const u=o.datum;let l=0,c;for(const f in i)c=Wd(i[f].ast,r,a,u,void 0,o),o[f]!==c&&(o[f]=c,l=1);return n!=="rule"&&wfe(o,i,s),l}}};const Mfe={version:"5.23.0"};function X7(e){return X(e,"or")}function K7(e){return X(e,"and")}function Z7(e){return X(e,"not")}function _1(e,t){if(Z7(e))_1(e.not,t);else if(K7(e))for(const n of e.and)_1(n,t);else if(X7(e))for(const n of e.or)_1(n,t);else t(e)}function ac(e,t){return Z7(e)?{not:ac(e.not,t)}:K7(e)?{and:e.and.map(n=>ac(n,t))}:X7(e)?{or:e.or.map(n=>ac(n,t))}:t(e)}const De=structuredClone;function EM(e){throw new Error(e)}function uc(e,t){const n={};for(const i of t)ue(e,i)&&(n[i]=e[i]);return n}function hi(e,t){const n={...e};for(const i of t)delete n[i];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>pt(e)).join(",")})`};function We(e){if(Ze(e))return e;const t=se(e)?e:pt(e);if(t.length<250)return t;let n=0;for(let i=0;i<t.length;i++){const r=t.charCodeAt(i);n=(n<<5)-n+r,n=n&n}return n}function J7(e){return e===!1||e===null}function qe(e,t){return e.includes(t)}function lc(e,t){let n=0;for(const[i,r]of e.entries())if(t(r,i,n++))return!0;return!1}function Q7(e,t){let n=0;for(const[i,r]of e.entries())if(!t(r,i,n++))return!1;return!0}function CM(e,...t){for(const n of t)Nfe(e,n??{});return e}function Nfe(e,t){for(const n of Y(t))il(e,n,t[n],!0)}function fs(e,t){const n=[],i={};let r;for(const s of e)r=t(s),!(r in i)&&(i[r]=1,n.push(s));return n}function Rfe(e,t){const n=Y(e),i=Y(t);if(n.length!==i.length)return!1;for(const r of n)if(e[r]!==t[r])return!1;return!0}function kM(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function e_(e,t){for(const n of e)if(t.has(n))return!0;return!1}function t_(e){const t=new Set;for(const n of e){const r=jr(n).map((o,a)=>a===0?o:`[${o}]`),s=r.map((o,a)=>r.slice(0,a+1).join(""));for(const o of s)t.add(o)}return t}function n_(e,t){return e===void 0||t===void 0?!0:e_(t_(e),t_(t))}function ht(e){return Y(e).length===0}const Y=Object.keys,gn=Object.values,ia=Object.entries;function Hd(e){return e===!0||e===!1}function At(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function Gd(e,t){return Z7(e)?`!(${Gd(e.not,t)})`:K7(e)?`(${e.and.map(n=>Gd(n,t)).join(") && (")})`:X7(e)?`(${e.or.map(n=>Gd(n,t)).join(") || (")})`:t(e)}function w1(e,t){if(t.length===0)return!0;const n=t.shift();return n in e&&w1(e[n],t)&&delete e[n],ht(e)}function Vd(e){return e.charAt(0).toUpperCase()+e.substr(1)}function i_(e,t="datum"){const n=jr(e),i=[];for(let r=1;r<=n.length;r++){const s=`[${n.slice(0,r).map(Q).join("][")}]`;i.push(`${t}${s}`)}return i.join(" && ")}function AM(e,t="datum"){return`${t}[${Q(jr(e).join("."))}]`}function at(e){return`datum['${e.replaceAll("'","\\'")}']`}function Ofe(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function er(e){return`${jr(e).map(Ofe).join("\\.")}`}function du(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function cc(e){return`${jr(e).join(".")}`}function fc(e){return e?jr(e).length:0}function zt(...e){return e.find(t=>t!==void 0)}let $M=42;function SM(e){const t=++$M;return e?String(e)+t:t}function Lfe(){$M=42}function FM(e){return DM(e)?e:`__${e}`}function DM(e){return e.startsWith("__")}function Yd(e){if(e!==void 0)return(e%360+360)%360}function E1(e){return Ze(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}const TM=Object.getPrototypeOf(structuredClone({}));function Mi(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor.name!==t.constructor.name)return!1;let n,i;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(i=n;i--!==0;)if(!Mi(e[i],t[i]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const s of e.entries())if(!t.has(s[0]))return!1;for(const s of e.entries())if(!Mi(s[1],t.get(s[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const s of e.entries())if(!t.has(s[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(i=n;i--!==0;)if(e[i]!==t[i])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&e.valueOf!==TM.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&e.toString!==TM.toString)return e.toString()===t.toString();const r=Object.keys(e);if(n=r.length,n!==Object.keys(t).length)return!1;for(i=n;i--!==0;)if(!Object.prototype.hasOwnProperty.call(t,r[i]))return!1;for(i=n;i--!==0;){const s=r[i];if(!Mi(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function pt(e){const t=[];return function n(i){if(i&&i.toJSON&&typeof i.toJSON=="function"&&(i=i.toJSON()),i===void 0)return;if(typeof i=="number")return isFinite(i)?""+i:"null";if(typeof i!="object")return JSON.stringify(i);let r,s;if(Array.isArray(i)){for(s="[",r=0;r<i.length;r++)r&&(s+=","),s+=n(i[r])||"null";return s+"]"}if(i===null)return"null";if(t.includes(i))throw new TypeError("Converting circular structure to JSON");const o=t.push(i)-1,a=Object.keys(i).sort();for(s="",r=0;r<a.length;r++){const u=a[r],l=n(i[u]);l&&(s&&(s+=","),s+=JSON.stringify(u)+":"+l)}return t.splice(o,1),`{${s}}`}(e)}function X(e,t){return re(e)&&ue(e,t)&&e[t]!==void 0}const Zs="row",Js="column",C1="facet",$t="x",rn="y",kr="x2",ds="y2",ra="xOffset",dc="yOffset",Ar="radius",Qs="radius2",tr="theta",eo="theta2",$r="latitude",Sr="longitude",Fr="latitude2",nr="longitude2",sa="time",pi="color",hs="fill",ps="stroke",gi="shape",to="size",hu="angle",no="opacity",oa="fillOpacity",aa="strokeOpacity",ua="strokeWidth",la="strokeDash",Xd="text",hc="order",Kd="detail",k1="key",pu="tooltip",A1="href",$1="url",S1="description",Ife={x:1,y:1,x2:1,y2:1},MM={theta:1,theta2:1,radius:1,radius2:1};function NM(e){return ue(MM,e)}const r_={longitude:1,longitude2:1,latitude:1,latitude2:1};function RM(e){switch(e){case $r:return"y";case Fr:return"y2";case Sr:return"x";case nr:return"x2"}}function OM(e){return ue(r_,e)}const Pfe=Y(r_),s_={...Ife,...MM,...r_,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,time:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function pc(e){return e===pi||e===hs||e===ps}const LM={row:1,column:1,facet:1},ir=Y(LM),o_={...s_,...LM},zfe=Y(o_),{order:w7e,detail:E7e,tooltip:C7e,...Bfe}=o_,{row:k7e,column:A7e,facet:$7e,...Ufe}=Bfe;function jfe(e){return ue(Ufe,e)}function IM(e){return ue(o_,e)}const qfe=[kr,ds,Fr,nr,eo,Qs];function PM(e){return gu(e)!==e}function gu(e){switch(e){case kr:return $t;case ds:return rn;case Fr:return $r;case nr:return Sr;case eo:return tr;case Qs:return Ar}return e}function ca(e){if(NM(e))switch(e){case tr:return"startAngle";case eo:return"endAngle";case Ar:return"outerRadius";case Qs:return"innerRadius"}return e}function gs(e){switch(e){case $t:return kr;case rn:return ds;case $r:return Fr;case Sr:return nr;case tr:return eo;case Ar:return Qs}}function mi(e){switch(e){case $t:case kr:return"width";case rn:case ds:return"height"}}function zM(e){switch(e){case $t:return"xOffset";case rn:return"yOffset";case kr:return"x2Offset";case ds:return"y2Offset";case tr:return"thetaOffset";case Ar:return"radiusOffset";case eo:return"theta2Offset";case Qs:return"radius2Offset"}}function a_(e){switch(e){case $t:return"xOffset";case rn:return"yOffset"}}function Wfe(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const Hfe=Y(s_),{x:S7e,y:F7e,x2:D7e,y2:T7e,xOffset:M7e,yOffset:N7e,latitude:R7e,longitude:O7e,latitude2:L7e,longitude2:I7e,theta:P7e,theta2:z7e,radius:B7e,radius2:U7e,...u_}=s_,Gfe=Y(u_),l_={x:1,y:1},io=Y(l_);function Bt(e){return ue(l_,e)}const c_={theta:1,radius:1},Vfe=Y(c_);function F1(e){return e==="width"?$t:rn}const BM={xOffset:1,yOffset:1};function Zd(e){return ue(BM,e)}const Yfe={time:1};function f_(e){return e in Yfe}const{text:j7e,tooltip:q7e,href:W7e,url:H7e,description:G7e,detail:V7e,key:Y7e,order:X7e,...UM}=u_,Xfe=Y(UM);function Kfe(e){return ue(u_,e)}function Zfe(e){switch(e){case pi:case hs:case ps:case to:case gi:case no:case ua:case la:return!0;case oa:case aa:case hu:case sa:return!1}}const jM={...l_,...c_,...BM,...UM},d_=Y(jM);function ms(e){return ue(jM,e)}function Jfe(e,t){return ede(e)[t]}const qM={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:K7e,...Qfe}=qM;function ede(e){switch(e){case pi:case hs:case ps:case S1:case Kd:case k1:case pu:case A1:case hc:case no:case oa:case aa:case ua:case C1:case Zs:case Js:return qM;case $t:case rn:case ra:case dc:case $r:case Sr:case sa:return Qfe;case kr:case ds:case Fr:case nr:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case to:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case la:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case gi:return{point:"always",geoshape:"always"};case Xd:return{text:"always"};case hu:return{point:"always",square:"always",text:"always"};case $1:return{image:"always"};case tr:return{text:"always",arc:"always"};case Ar:return{text:"always",arc:"always"};case eo:case Qs:return{arc:"always"}}}function h_(e){switch(e){case $t:case rn:case tr:case Ar:case ra:case dc:case to:case hu:case ua:case no:case oa:case aa:case sa:case kr:case ds:case eo:case Qs:return;case C1:case Zs:case Js:case gi:case la:case Xd:case pu:case A1:case $1:case S1:return"discrete";case pi:case hs:case ps:return"flexible";case $r:case Sr:case Fr:case nr:case Kd:case k1:case hc:return}}const tde={argmax:1,argmin:1,average:1,count:1,distinct:1,exponential:1,exponentialb:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},nde={count:1,min:1,max:1};function ro(e){return X(e,"argmin")}function fa(e){return X(e,"argmax")}function p_(e){return se(e)&&ue(tde,e)}const ide=new Set(["count","valid","missing","distinct"]);function D1(e){return se(e)&&ide.has(e)}function rde(e){return se(e)&&qe(["min","max"],e)}const sde=new Set(["count","sum","distinct","valid","missing"]),ode=new Set(["mean","average","median","q1","q3","min","max"]);function WM(e){return xo(e)&&(e=X1(e,void 0)),"bin"+Y(e).map(t=>T1(e[t])?At(`_${t}_${ia(e[t])}`):At(`_${t}_${e[t]}`)).join("")}function _t(e){return e===!0||mu(e)&&!e.binned}function mn(e){return e==="binned"||mu(e)&&e.binned===!0}function mu(e){return re(e)}function T1(e){return X(e,"param")}function HM(e){switch(e){case Zs:case Js:case to:case pi:case hs:case ps:case ua:case no:case oa:case aa:case gi:return 6;case la:return 4;default:return 10}}function Jd(e){return X(e,"expr")}function yn(e,{level:t}={level:0}){const n=Y(e||{}),i={};for(const r of n)i[r]=t===0?Ni(e[r]):yn(e[r],{level:t-1});return i}function GM(e){const{anchor:t,frame:n,offset:i,orient:r,angle:s,limit:o,color:a,subtitleColor:u,subtitleFont:l,subtitleFontSize:c,subtitleFontStyle:f,subtitleFontWeight:d,subtitleLineHeight:h,subtitlePadding:p,...g}=e,m={...g,...a?{fill:a}:{}},y={...t?{anchor:t}:{},...n?{frame:n}:{},...i?{offset:i}:{},...r?{orient:r}:{},...s!==void 0?{angle:s}:{},...o!==void 0?{limit:o}:{}},b={...u?{subtitleColor:u}:{},...l?{subtitleFont:l}:{},...c?{subtitleFontSize:c}:{},...f?{subtitleFontStyle:f}:{},...d?{subtitleFontWeight:d}:{},...h?{subtitleLineHeight:h}:{},...p?{subtitlePadding:p}:{}},v=uc(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:m,subtitleMarkConfig:v,nonMarkTitleProperties:y,subtitle:b}}function da(e){return se(e)||W(e)&&se(e[0])}function me(e){return X(e,"signal")}function yu(e){return X(e,"step")}function ade(e){return W(e)?!1:X(e,"fields")&&!X(e,"data")}function ude(e){return W(e)?!1:X(e,"fields")&&X(e,"data")}function so(e){return W(e)?!1:X(e,"field")&&X(e,"data")}const lde=Y({aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1}),cde={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},g_=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function VM(e){const t=W(e.condition)?e.condition.map(YM):YM(e.condition);return{...Ni(e),condition:t}}function Ni(e){if(Jd(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function YM(e){if(Jd(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function Et(e){if(Jd(e)){const{expr:t,...n}=e;return{signal:t,...n}}return me(e)?e:e!==void 0?{value:e}:void 0}function fde(e){return me(e)?e.signal:Q(e)}function XM(e){return me(e)?e.signal:Q(e.value)}function Dr(e){return me(e)?e.signal:e==null?null:Q(e)}function dde(e,t,n){for(const i of n){const r=ys(i,t.markDef,t.config);r!==void 0&&(e[i]=Et(r))}return e}function KM(e){return[].concat(e.type,e.style??[])}function gt(e,t,n,i={}){const{vgChannel:r,ignoreVgConfig:s}=i;return r&&X(t,r)?t[r]:t[e]!==void 0?t[e]:s&&(!r||r===e)?void 0:ys(e,t,n,i)}function ys(e,t,n,{vgChannel:i}={}){const r=m_(e,t,n.style);return zt(i?r:void 0,r,i?n[t.type][i]:void 0,n[t.type][e],i?n.mark[i]:n.mark[e])}function m_(e,t,n){return ZM(e,KM(t),n)}function ZM(e,t,n){t=oe(t);let i;for(const r of t){const s=n[r];X(s,e)&&(i=s[e])}return i}function JM(e,t){return oe(e).reduce((n,i)=>(n.field.push(te(i,t)),n.order.push(i.sort??"ascending"),n),{field:[],order:[]})}function QM(e,t){const n=[...e];return t.forEach(i=>{for(const r of n)if(Mi(r,i))return;n.push(i)}),n}function eN(e,t){return Mi(e,t)||!t?e:e?[...oe(e),...oe(t)].join(", "):t}function tN(e,t){const n=e.value,i=t.value;if(n==null||i===null)return{explicit:e.explicit,value:null};if((da(n)||me(n))&&(da(i)||me(i)))return{explicit:e.explicit,value:eN(n,i)};if(da(n)||me(n))return{explicit:e.explicit,value:n};if(da(i)||me(i))return{explicit:e.explicit,value:i};if(!da(n)&&!me(n)&&!da(i)&&!me(i))return{explicit:e.explicit,value:QM(n,i)};throw new Error("It should never reach here")}function y_(e){return`Invalid specification ${pt(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const hde='Autosize "fit" only works for single views and layered views.';function nN(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function iN(e){const t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function rN(e){return e?`Dropping "fit-${e}" because spec has discrete ${mi(e)}.`:'Dropping "fit" because spec has discrete size.'}function b_(e){return`Unknown field for ${e}. Cannot calculate view size.`}function sN(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function pde(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function gde(e){return`The "nearest" transform is not supported for ${e} marks.`}function oN(e){return`Selection not supported for ${e} yet.`}function mde(e){return`Cannot find a selection named "${e}".`}const yde="Scale bindings are currently only supported for scales with unbinned, continuous domains.",bde="Sequntial scales are deprecated. The available quantitative scale type values are linear, log, pow, sqrt, symlog, time and utc",vde="Legend bindings are only supported for selections over an individual field or encoding channel.";function xde(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function _de(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}const wde="The same selection must be used to override scale domains in a layered view.",Ede='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function Cde(e){return`Unknown repeated value "${e}".`}function aN(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}const kde="Multiple timer selections in one unit spec are not supported. Ignoring all but the first.",v_="Animation involving facet, layer, or concat is currently unsupported.";function Ade(e){return`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${Q(e)}.`}function $de(e,t,n,i){return(e.length?"Multiple ":"No ")+`matching ${Q(t)} encoding found for selection ${Q(n.param)}. Using "field": ${Q(i)}.`}const Sde="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function Fde(e){return`Unrecognized parse "${e}".`}function uN(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}const Dde="Attempt to add the same child twice.";function Tde(e){return`Ignoring an invalid transform: ${pt(e)}.`}const Mde='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function lN(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function Nde(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${pt(t)} is overridden by a child projection ${pt(n)}.`}const Rde="Arc marks uses theta channel rather than angle, replacing angle with theta.";function Ode(e){return`${e}Offset dropped because ${e} is continuous`}function Lde(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${pt(n)}}.`}function cN(e){return`Invalid field type "${e}".`}function Ide(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function Pde(e){return`Invalid aggregation operator "${e}".`}function fN(e,t){const{fill:n,stroke:i}=t;return`Dropping color ${e} as the plot also has ${n&&i?"fill and stroke":n?"fill":"stroke"}.`}function zde(e){return`Position range does not support relative band size for ${e}.`}function x_(e,t){return`Dropping ${pt(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}const Bde="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function M1(e,t,n){return`${e} dropped as it is incompatible with "${t}".`}function Ude(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function jde(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function qde(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function Wde(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function __(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function Hde(e){return`The ${e} for range marks cannot be an expression`}function Gde(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function Vde(e,t){return`Specified orient "${e}" overridden with "${t}".`}function Yde(e){return`Cannot use the scale property "${e}" with non-color channel.`}function Xde(e){return`Cannot use the relative band size with ${e} scale.`}function Kde(e){return`Using unaggregated domain with raw field has no effect (${pt(e)}).`}function Zde(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function Jde(e){return`Unaggregated domain is currently unsupported for log scale (${pt(e)}).`}function Qde(e){return`Cannot apply size to non-oriented mark "${e}".`}function ehe(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function the(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function dN(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function hN(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function nhe(e,t,n,i){return`Conflicting ${t.toString()} property "${e.toString()}" (${pt(n)} and ${pt(i)}). Using ${pt(n)}.`}function ihe(e,t,n,i){return`Conflicting ${t.toString()} property "${e.toString()}" (${pt(n)} and ${pt(i)}). Using the union of the two domains.`}function rhe(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function she(e){return`Dropping sort property ${pt(e)} as unioned domains only support boolean or op "count", "min", and "max".`}const pN="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",ohe="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",ahe="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",uhe="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function lhe(e){return`Cannot stack "${e}" if there is already "${e}2".`}function che(e){return`Stack is applied to a non-linear scale (${e}).`}function fhe(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function N1(e,t){return`Invalid ${e}: ${pt(t)}.`}function dhe(e){return`Dropping day from datetime ${pt(e)} as day cannot be combined with other units.`}function hhe(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function phe(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function ghe(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function gN(e){return`1D error band does not support ${e}.`}function mN(e){return`Channel ${e} is required for "binned" bin.`}function mhe(e){return`Channel ${e} should not be used with "binned" bin.`}function yhe(e){return`Domain for ${e} is required for threshold scale.`}const yN=x2(v2);let bu=yN;function bhe(e){return bu=e,bu}function vhe(){return bu=yN,bu}function w_(...e){bu.error(...e)}function Z(...e){bu.warn(...e)}function xhe(...e){bu.debug(...e)}function vu(e){if(e&&re(e)){for(const t of C_)if(X(e,t))return!0}return!1}const bN=["january","february","march","april","may","june","july","august","september","october","november","december"],_he=bN.map(e=>e.substr(0,3)),vN=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],whe=vN.map(e=>e.substr(0,3));function Ehe(e){if(E1(e)&&(e=+e),Ze(e))return e>4&&Z(N1("quarter",e)),e-1;throw new Error(N1("quarter",e))}function Che(e){if(E1(e)&&(e=+e),Ze(e))return e-1;{const t=e.toLowerCase(),n=bN.indexOf(t);if(n!==-1)return n;const i=t.substr(0,3),r=_he.indexOf(i);if(r!==-1)return r;throw new Error(N1("month",e))}}function khe(e){if(E1(e)&&(e=+e),Ze(e))return e%7;{const t=e.toLowerCase(),n=vN.indexOf(t);if(n!==-1)return n;const i=t.substr(0,3),r=whe.indexOf(i);if(r!==-1)return r;throw new Error(N1("day",e))}}function E_(e,t){const n=[];if(t&&e.day!==void 0&&Y(e).length>1&&(Z(dhe(e)),e=De(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){const i=t?Che(e.month):e.month;n.push(i)}else if(e.quarter!==void 0){const i=t?Ehe(e.quarter):e.quarter;n.push(Ze(i)?i*3:`${i}*3`)}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){const i=t?khe(e.day):e.day;n.push(Ze(i)?i+1:`${i}+1`)}else n.push(1);for(const i of["hours","minutes","seconds","milliseconds"]){const r=e[i];n.push(typeof r>"u"?0:r)}return n}function xu(e){const n=E_(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function Ahe(e){const n=E_(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function $he(e){const t=E_(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}const xN={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},C_=Y(xN);function She(e){return ue(xN,e)}function _u(e){return re(e)?e.binned:_N(e)}function _N(e){return e&&e.startsWith("binned")}function k_(e){return e.startsWith("utc")}function Fhe(e){return e.substring(3)}const Dhe={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function R1(e){return C_.filter(t=>EN(e,t))}function wN(e){const t=R1(e);return t[t.length-1]}function EN(e,t){const n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function The(e,t,{end:n}={end:!1}){const i=i_(t),r=k_(e)?"utc":"";function s(u){return u==="quarter"?`(${r}quarter(${i})-1)`:`${r}${u}(${i})`}let o;const a={};for(const u of C_)EN(e,u)&&(a[u]=s(u),o=u);return n&&(a[o]+="+1"),Ahe(a)}function CN(e){if(!e)return;const t=R1(e);return`timeUnitSpecifier(${pt(t)}, ${pt(Dhe)})`}function Mhe(e,t,n){if(!e)return;const i=CN(e);return`${n||k_(e)?"utc":"time"}Format(${t}, ${i})`}function sn(e){if(!e)return;let t;return se(e)?_N(e)?t={unit:e.substring(6),binned:!0}:t={unit:e}:re(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),k_(t.unit)&&(t.utc=!0,t.unit=Fhe(t.unit)),t}function Nhe(e){const{utc:t,...n}=sn(e);return n.unit?(t?"utc":"")+Y(n).map(i=>At(`${i==="unit"?"":`_${i}_`}${n[i]}`)).join(""):(t?"utc":"")+"timeunit"+Y(n).map(i=>At(`_${i}_${n[i]}`)).join("")}function kN(e,t=n=>n){const n=sn(e),i=wN(n.unit);if(i&&i!=="day"){const r={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:s,part:o}=AN(i,n.step),a={...r,[o]:+r[o]+s};return`${t(xu(a))} - ${t(xu(r))}`}}const Rhe={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function Ohe(e){return ue(Rhe,e)}function AN(e,t=1){if(Ohe(e))return{part:e,step:t};switch(e){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:t*3};case"week":return{part:"date",step:t*7}}}function Lhe(e){return X(e,"param")}function A_(e){return!!(e!=null&&e.field)&&e.equal!==void 0}function $_(e){return!!(e!=null&&e.field)&&e.lt!==void 0}function S_(e){return!!(e!=null&&e.field)&&e.lte!==void 0}function F_(e){return!!(e!=null&&e.field)&&e.gt!==void 0}function D_(e){return!!(e!=null&&e.field)&&e.gte!==void 0}function T_(e){if(e!=null&&e.field){if(W(e.range)&&e.range.length===2)return!0;if(me(e.range))return!0}return!1}function M_(e){return!!(e!=null&&e.field)&&(W(e.oneOf)||W(e.in))}function Ihe(e){return!!(e!=null&&e.field)&&e.valid!==void 0}function $N(e){return M_(e)||A_(e)||T_(e)||$_(e)||F_(e)||S_(e)||D_(e)}function bs(e,t){return K1(e,{timeUnit:t,wrapTime:!0})}function Phe(e,t){return e.map(n=>bs(n,t))}function SN(e,t=!0){const{field:n}=e,i=sn(e.timeUnit),{unit:r,binned:s}=i||{},o=te(e,{expr:"datum"}),a=r?`time(${s?o:The(r,n)})`:o;if(A_(e))return`${a}===${bs(e.equal,r)}`;if($_(e)){const u=e.lt;return`${a}<${bs(u,r)}`}else if(F_(e)){const u=e.gt;return`${a}>${bs(u,r)}`}else if(S_(e)){const u=e.lte;return`${a}<=${bs(u,r)}`}else if(D_(e)){const u=e.gte;return`${a}>=${bs(u,r)}`}else{if(M_(e))return`indexof([${Phe(e.oneOf,r).join(",")}], ${a}) !== -1`;if(Ihe(e))return O1(a,e.valid);if(T_(e)){const{range:u}=yn(e),l=me(u)?{signal:`${u.signal}[0]`}:u[0],c=me(u)?{signal:`${u.signal}[1]`}:u[1];if(l!==null&&c!==null&&t)return"inrange("+a+", ["+bs(l,r)+", "+bs(c,r)+"])";const f=[];return l!==null&&f.push(`${a} >= ${bs(l,r)}`),c!==null&&f.push(`${a} <= ${bs(c,r)}`),f.length>0?f.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${pt(e)}`)}function O1(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function zhe(e){return $N(e)&&e.timeUnit?{...e,timeUnit:sn(e.timeUnit)}:e}const Qd={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function Bhe(e){return e==="quantitative"||e==="temporal"}function FN(e){return e==="ordinal"||e==="nominal"}const wu=Qd.quantitative,N_=Qd.ordinal,gc=Qd.temporal,R_=Qd.nominal,mc=Qd.geojson;function Uhe(e){if(e)switch(e=e.toLowerCase(),e){case"q":case wu:return"quantitative";case"t":case gc:return"temporal";case"o":case N_:return"ordinal";case"n":case R_:return"nominal";case mc:return"geojson"}}const bn={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",TIME:"time",UTC:"utc",POINT:"point",BAND:"band"},O_={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function jhe(e,t){const n=O_[e],i=O_[t];return n===i||n==="ordinal-position"&&i==="time"||i==="ordinal-position"&&n==="time"}const qhe={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function DN(e){return qhe[e]}const TN=new Set(["linear","log","pow","sqrt","symlog"]),MN=new Set([...TN,"time","utc"]);function NN(e){return TN.has(e)}const RN=new Set(["quantile","quantize","threshold"]),Whe=new Set([...MN,...RN,"sequential","identity"]),Hhe=new Set(["ordinal","bin-ordinal","point","band"]);function on(e){return Hhe.has(e)}function Tr(e){return Whe.has(e)}function vs(e){return MN.has(e)}function yc(e){return RN.has(e)}const Ghe={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,tickBandPaddingInner:.25,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:4,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0,framesPerSecond:2,animationDuration:5};function Vhe(e){return!se(e)&&X(e,"name")}function ON(e){return X(e,"param")}function Yhe(e){return X(e,"unionWith")}function Xhe(e){return re(e)&&"field"in e}const Khe={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:J7e,domain:Q7e,range:e_e,rangeMax:t_e,rangeMin:n_e,scheme:i_e,...Zhe}=Khe,Jhe=Y(Zhe);function L_(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return vs(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return vs(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return vs(e);case"nice":return vs(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return Tr(e)&&!qe(["log","time","utc","threshold","quantile"],e)}}function LN(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return pc(e)?void 0:Yde(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function Qhe(e,t){return qe([N_,R_],t)?e===void 0||on(e):t===gc?qe([bn.TIME,bn.UTC,void 0],e):t===wu?NN(e)||yc(e)||e===void 0:!0}function e0e(e,t,n=!1){if(!ms(e))return!1;switch(e){case $t:case rn:case ra:case dc:case tr:case Ar:return vs(t)||t==="band"?!0:t==="point"?!n:!1;case sa:return qe(["linear","band"],t);case to:case ua:case no:case oa:case aa:case hu:return vs(t)||yc(t)||qe(["band","point","ordinal"],t);case pi:case hs:case ps:return t!=="band";case la:case gi:return t==="ordinal"||yc(t)}}function t0e(e){return re(e)&&"value"in e}const Qn={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},IN=Qn.arc,L1=Qn.area,I1=Qn.bar,n0e=Qn.image,P1=Qn.line,z1=Qn.point,i0e=Qn.rect,B1=Qn.rule,PN=Qn.text,I_=Qn.tick,r0e=Qn.trail,P_=Qn.circle,z_=Qn.square,zN=Qn.geoshape;function ha(e){return["line","area","trail"].includes(e)}function eh(e){return["rect","bar","image","arc","tick"].includes(e)}const s0e=new Set(Y(Qn));function xs(e){return X(e,"type")}const o0e=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],a0e=["fill","fillOpacity"],u0e=[...o0e,...a0e],BN=Y({color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1}),B_=["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],l0e={area:["line","point"],bar:B_,rect:B_,line:["point"],tick:["bandSize","thickness",...B_]},c0e={color:"#4c78a8",invalid:"break-paths-show-path-domains",timeUnitBandSize:1},UN=Y({mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1});function Eu(e){return X(e,"band")}const f0e={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},U_={binSpacing:0,continuousBandSize:5,minBandSize:.25,timeUnitBandPosition:.5},d0e={...U_,binSpacing:1},h0e={...U_,thickness:1};function p0e(e){return xs(e)?e.type:e}function jN(e,{isPath:t}){return e===void 0||e==="break-paths-show-path-domains"?t?"break-paths-show-domains":"filter":e===null?"show":e}function j_({markDef:e,config:t,scaleChannel:n,scaleType:i,isCountAggregate:r}){var a,u;if(!i||!Tr(i)||r)return"always-valid";const s=jN(gt("invalid",e,t),{isPath:ha(e.type)});return((u=(a=t.scale)==null?void 0:a.invalid)==null?void 0:u[n])!==void 0?"show":s}function g0e(e){return e==="break-paths-filter-domains"||e==="break-paths-show-domains"}function qN({scaleName:e,scale:t,mode:n}){const i=`domain('${e}')`;if(!t||!e)return;const r=`${i}[0]`,s=`peek(${i})`,o=t.domainHasZero();return o==="definitely"?{scale:e,value:0}:o==="maybe"?{signal:`scale('${e}', inrange(0, ${i}) ? 0 : ${n==="zeroOrMin"?r:s})`}:{signal:`scale('${e}', ${n==="zeroOrMin"?r:s})`}}function WN({scaleChannel:e,channelDef:t,scale:n,scaleName:i,markDef:r,config:s}){var c;const o=n==null?void 0:n.get("type"),a=Rr(t),u=D1(a==null?void 0:a.aggregate),l=j_({scaleChannel:e,markDef:r,config:s,scaleType:o,isCountAggregate:u});if(a&&l==="show"){const f=((c=s.scale.invalid)==null?void 0:c[e])??"zero-or-min";return{test:O1(te(a,{expr:"datum"}),!1),...m0e(f,n,i)}}}function m0e(e,t,n){if(t0e(e)){const{value:i}=e;return me(i)?{signal:i.signal}:{value:i}}return qN({scale:t,scaleName:n,mode:"zeroOrMin"})}function q_(e){const{channel:t,channelDef:n,markDef:i,scale:r,scaleName:s,config:o}=e,a=gu(t),u=W_(e),l=WN({scaleChannel:a,channelDef:n,scale:r,scaleName:s,markDef:i,config:o});return l!==void 0?[l,u]:u}function y0e(e){const{datum:t}=e;return vu(t)?xu(t):`${pt(t)}`}function Cu(e,t,n,i){const r={};if(t&&(r.scale=t),_s(e)){const{datum:s}=e;vu(s)?r.signal=xu(s):me(s)?r.signal=s.signal:Jd(s)?r.signal=s.expr:r.value=s}else r.field=te(e,n);if(i){const{offset:s,band:o}=i;s&&(r.offset=s),o&&(r.band=o)}return r}function U1({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:i,startSuffix:r,endSuffix:s="end",bandPosition:o=.5}){const a=!me(o)&&0<o&&o<1?"datum":void 0,u=te(t,{expr:a,suffix:r}),l=n!==void 0?te(n,{expr:a}):te(t,{suffix:s,expr:a}),c={};if(o===0||o===1){c.scale=e;const f=o===0?u:l;c.field=f}else{const f=me(o)?`(1-${o.signal}) * ${u} + ${o.signal} * ${l}`:`${1-o} * ${u} + ${o} * ${l}`;c.signal=`scale("${e}", ${f})`}return i&&(c.offset=i),c}function b0e({scaleName:e,fieldDef:t}){const n=te(t,{expr:"datum"}),i=te(t,{expr:"datum",suffix:"end"});return`abs(scale("${e}", ${i}) - scale("${e}", ${n}))`}function W_({channel:e,channelDef:t,channel2Def:n,markDef:i,config:r,scaleName:s,scale:o,stack:a,offset:u,defaultRef:l,bandPosition:c}){if(t){if(Me(t)){const f=o==null?void 0:o.get("type");if(ei(t)){c??(c=pa({fieldDef:t,fieldDef2:n,markDef:i,config:r}));const{bin:d,timeUnit:h,type:p}=t;if(_t(d)||c&&h&&p===gc)return a!=null&&a.impute?Cu(t,s,{binSuffix:"mid"},{offset:u}):c&&!on(f)?U1({scaleName:s,fieldOrDatumDef:t,bandPosition:c,offset:u}):Cu(t,s,oh(t,e)?{binSuffix:"range"}:{},{offset:u});if(mn(d)){if(J(n))return U1({scaleName:s,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:c,offset:u});Z(mN(e===$t?kr:ds))}}return Cu(t,s,on(f)?{binSuffix:"range"}:{},{offset:u,band:f==="band"?c??t.bandPosition??.5:void 0})}else if(Nr(t)){const f=t.value,d=u?{offset:u}:{};return{...th(e,f),...d}}}return Ie(l)&&(l=l()),l&&{...l,...u?{offset:u}:{}}}function th(e,t){return qe(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:qe(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:Et(t)}function ku(e){return e&&e!=="number"&&e!=="time"}function HN(e,t,n){return`${e}(${t}${n?`, ${pt(n)}`:""})`}const v0e="  ";function H_({fieldOrDatumDef:e,format:t,formatType:n,expr:i,normalizeStack:r,config:s}){var u,l;if(ku(n))return Mr({fieldOrDatumDef:e,format:t,formatType:n,expr:i,config:s});const o=GN(e,i,r),a=bc(e);if(t===void 0&&n===void 0&&s.customFormatTypes){if(a==="quantitative"){if(r&&s.normalizedNumberFormatType)return Mr({fieldOrDatumDef:e,format:s.normalizedNumberFormat,formatType:s.normalizedNumberFormatType,expr:i,config:s});if(s.numberFormatType)return Mr({fieldOrDatumDef:e,format:s.numberFormat,formatType:s.numberFormatType,expr:i,config:s})}if(a==="temporal"&&s.timeFormatType&&J(e)&&e.timeUnit===void 0)return Mr({fieldOrDatumDef:e,format:s.timeFormat,formatType:s.timeFormatType,expr:i,config:s})}if(wc(e)){const c=_0e({field:o,timeUnit:J(e)?(u=sn(e.timeUnit))==null?void 0:u.unit:void 0,format:t,formatType:s.timeFormatType,rawTimeFormat:s.timeFormat,isUTCScale:Au(e)&&((l=e.scale)==null?void 0:l.type)===bn.UTC});return c?{signal:c}:void 0}if(t=G_({type:a,specifiedFormat:t,config:s,normalizeStack:r}),J(e)&&_t(e.bin)){const c=te(e,{expr:i,binSuffix:"end"});return{signal:nh(o,c,t,n,s)}}else return t||bc(e)==="quantitative"?{signal:`${XN(o,t)}`}:{signal:`isValid(${o}) ? ${o} : ""+${o}`}}function GN(e,t,n){return J(e)?n?`${te(e,{expr:t,suffix:"end"})}-${te(e,{expr:t,suffix:"start"})}`:te(e,{expr:t}):y0e(e)}function Mr({fieldOrDatumDef:e,format:t,formatType:n,expr:i,normalizeStack:r,config:s,field:o}){if(o??(o=GN(e,i,r)),o!=="datum.value"&&J(e)&&_t(e.bin)){const a=te(e,{expr:i,binSuffix:"end"});return{signal:nh(o,a,t,n,s)}}return{signal:HN(n,o,t)}}function VN(e,t,n,i,r,s){var o;if(!(se(i)&&ku(i))&&!(n===void 0&&i===void 0&&r.customFormatTypes&&bc(e)==="quantitative"&&(r.normalizedNumberFormatType&&vc(e)&&e.stack==="normalize"||r.numberFormatType))){if(vc(e)&&e.stack==="normalize"&&r.normalizedNumberFormat)return G_({type:"quantitative",config:r,normalizeStack:!0});if(wc(e)){const a=J(e)?(o=sn(e.timeUnit))==null?void 0:o.unit:void 0;return a===void 0&&r.customFormatTypes&&r.timeFormatType?void 0:x0e({specifiedFormat:n,timeUnit:a,config:r,omitTimeFormatConfig:s})}return G_({type:t,specifiedFormat:n,config:r})}}function YN(e,t,n){var i;if(e&&(me(e)||e==="number"||e==="time"))return e;if(wc(t)&&n!=="time"&&n!=="utc")return J(t)&&((i=sn(t==null?void 0:t.timeUnit))!=null&&i.utc)?"utc":"time"}function G_({type:e,specifiedFormat:t,config:n,normalizeStack:i}){if(se(t))return t;if(e===wu)return i?n.normalizedNumberFormat:n.numberFormat}function x0e({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:i}){return e||(t?{signal:CN(t)}:i?void 0:n.timeFormat)}function XN(e,t){return`format(${e}, "${t||""}")`}function KN(e,t,n,i){return ku(n)?HN(n,e,t):XN(e,(se(t)?t:void 0)??i.numberFormat)}function nh(e,t,n,i,r){if(n===void 0&&i===void 0&&r.customFormatTypes&&r.numberFormatType)return nh(e,t,r.numberFormat,r.numberFormatType,r);const s=KN(e,n,i,r),o=KN(t,n,i,r);return`${O1(e,!1)} ? "null" : ${s} + "${v0e}" + ${o}`}function _0e({field:e,timeUnit:t,format:n,formatType:i,rawTimeFormat:r,isUTCScale:s}){return!t||n?!t&&i?`${i}(${e}, '${n}')`:(n=se(n)?n:r,`${s?"utc":"time"}Format(${e}, '${n}')`):Mhe(t,e,s)}const j1="min",w0e={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function ZN(e){return ue(w0e,e)}function E0e(e){return X(e,"encoding")}function oo(e){return e&&(e.op==="count"||X(e,"field"))}function JN(e){return e&&W(e)}function ih(e){return X(e,"row")||X(e,"column")}function V_(e){return X(e,"header")}function q1(e){return X(e,"facet")}function C0e(e){return X(e,"param")}function k0e(e){return!se(e)&&X(e,"repeat")}function QN(e){const{field:t,timeUnit:n,bin:i,aggregate:r}=e;return{...n?{timeUnit:n}:{},...i?{bin:i}:{},...r?{aggregate:r}:{},field:t}}function Y_(e){return X(e,"sort")}function pa({fieldDef:e,fieldDef2:t,markDef:n,config:i}){if(Me(e)&&e.bandPosition!==void 0)return e.bandPosition;if(J(e)){const{timeUnit:r,bin:s}=e;if(r&&!t)return ys("timeUnitBandPosition",n,i);if(_t(s))return .5}}function eR({channel:e,fieldDef:t,fieldDef2:n,markDef:i,config:r,scaleType:s,useVlSizeChannel:o}){var l,c,f;const a=mi(e),u=gt(o?"size":a,i,r,{vgChannel:a});if(u!==void 0)return u;if(J(t)){const{timeUnit:d,bin:h}=t;if(d&&!n)return{band:ys("timeUnitBandSize",i,r)};if(_t(h)&&!on(s))return{band:1}}if(eh(i.type))return s?on(s)?((l=r[i.type])==null?void 0:l.discreteBandSize)||{band:1}:(c=r[i.type])==null?void 0:c.continuousBandSize:(f=r[i.type])==null?void 0:f.discreteBandSize}function tR(e,t,n,i){return _t(e.bin)||e.timeUnit&&ei(e)&&e.type==="temporal"?pa({fieldDef:e,fieldDef2:t,markDef:n,config:i})!==void 0:!1}function nR(e){return X(e,"sort")&&!X(e,"field")}function rh(e){return X(e,"condition")}function W1(e){const t=e==null?void 0:e.condition;return!!t&&!W(t)&&J(t)}function sh(e){const t=e==null?void 0:e.condition;return!!t&&!W(t)&&Me(t)}function A0e(e){const t=e==null?void 0:e.condition;return!!t&&(W(t)||Nr(t))}function J(e){return X(e,"field")||(e==null?void 0:e.aggregate)==="count"}function bc(e){return e==null?void 0:e.type}function _s(e){return X(e,"datum")}function ga(e){return ei(e)&&!G1(e)||H1(e)}function iR(e){return ei(e)&&e.type==="quantitative"&&!e.bin||H1(e)}function H1(e){return _s(e)&&Ze(e.datum)}function Me(e){return J(e)||_s(e)}function ei(e){return e&&(X(e,"field")||e.aggregate==="count")&&X(e,"type")}function Nr(e){return X(e,"value")}function Au(e){return X(e,"scale")||X(e,"sort")}function vc(e){return X(e,"axis")||X(e,"stack")||X(e,"impute")}function rR(e){return X(e,"legend")}function sR(e){return X(e,"format")||X(e,"formatType")}function $0e(e){return hi(e,["legend","axis","header","scale"])}function S0e(e){return X(e,"op")}function te(e,t={}){let n=e.field;const i=t.prefix;let r=t.suffix,s="";if(D0e(e))n=FM("count");else{let o;if(!t.nofn)if(S0e(e))o=e.op;else{const{bin:a,aggregate:u,timeUnit:l}=e;_t(a)?(o=WM(a),r=(t.binSuffix??"")+(t.suffix??"")):u?fa(u)?(s=`["${n}"]`,n=`argmax_${u.argmax}`):ro(u)?(s=`["${n}"]`,n=`argmin_${u.argmin}`):o=String(u):l&&!_u(l)&&(o=Nhe(l),r=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}o&&(n=n?`${o}_${n}`:o)}return r&&(n=`${n}_${r}`),i&&(n=`${i}_${n}`),t.forAs?cc(n):t.expr?AM(n,t.expr)+s:er(n)+s}function G1(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return J(e)&&!!e.bin;case"temporal":return!1}throw new Error(cN(e.type))}function F0e(e){var t;return Au(e)&&yc((t=e.scale)==null?void 0:t.type)}function D0e(e){return e.aggregate==="count"}function T0e(e,t){var o;const{field:n,bin:i,timeUnit:r,aggregate:s}=e;if(s==="count")return t.countTitle;if(_t(i))return`${n} (binned)`;if(r&&!_u(r)){const a=(o=sn(r))==null?void 0:o.unit;if(a)return`${n} (${R1(a).join("-")})`}else if(s)return fa(s)?`${n} for max ${s.argmax}`:ro(s)?`${n} for min ${s.argmin}`:`${Vd(s)} of ${n}`;return n}function M0e(e){const{aggregate:t,bin:n,timeUnit:i,field:r}=e;if(fa(t))return`${r} for argmax(${t.argmax})`;if(ro(t))return`${r} for argmin(${t.argmin})`;const s=i&&!_u(i)?sn(i):void 0,o=t||(s==null?void 0:s.unit)||(s==null?void 0:s.maxbins)&&"timeunit"||_t(n)&&"bin";return o?`${o.toUpperCase()}(${r})`:r}const oR=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return M0e(e);default:return T0e(e,t)}};let aR=oR;function uR(e){aR=e}function N0e(){uR(oR)}function xc(e,t,{allowDisabling:n,includeDefault:i=!0}){var a;const r=(a=X_(e))==null?void 0:a.title;if(!J(e))return r??e.title;const s=e,o=i?K_(s,t):void 0;return n?zt(r,s.title,o):r??s.title??o}function X_(e){if(vc(e)&&e.axis)return e.axis;if(rR(e)&&e.legend)return e.legend;if(V_(e)&&e.header)return e.header}function K_(e,t){return aR(e,t)}function V1(e){if(sR(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n}}else{const t=X_(e)??{},{format:n,formatType:i}=t;return{format:n,formatType:i}}}function R0e(e,t){var s;switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(Y_(e)&&W(e.sort))return"ordinal";const{aggregate:n,bin:i,timeUnit:r}=e;if(r)return"temporal";if(i||n&&!fa(n)&&!ro(n))return"quantitative";if(Au(e)&&((s=e.scale)!=null&&s.type))switch(O_[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function Rr(e){if(J(e))return e;if(W1(e))return e.condition}function Xt(e){if(Me(e))return e;if(sh(e))return e.condition}function lR(e,t,n,i={}){if(se(e)||Ze(e)||xo(e)){const r=se(e)?"string":Ze(e)?"number":"boolean";return Z(Lde(t,r,e)),{value:e}}return Me(e)?Y1(e,t,n,i):sh(e)?{...e,condition:Y1(e.condition,t,n,i)}:e}function Y1(e,t,n,i){if(sR(e)){const{format:r,formatType:s,...o}=e;if(ku(s)&&!n.customFormatTypes)return Z(lN(t)),Y1(o,t,n,i)}else{const r=vc(e)?"axis":rR(e)?"legend":V_(e)?"header":null;if(r&&e[r]){const{format:s,formatType:o,...a}=e[r];if(ku(o)&&!n.customFormatTypes)return Z(lN(t)),Y1({...e,[r]:a},t,n,i)}}return J(e)?Z_(e,t,i):O0e(e)}function O0e(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=Ze(n)?"quantitative":se(n)?"nominal":vu(n)?"temporal":void 0,{...e,type:t}}function Z_(e,t,{compositeMark:n=!1}={}){const{aggregate:i,timeUnit:r,bin:s,field:o}=e,a={...e};if(!n&&i&&!p_(i)&&!fa(i)&&!ro(i)&&(Z(Pde(i)),delete a.aggregate),r&&(a.timeUnit=sn(r)),o&&(a.field=`${o}`),_t(s)&&(a.bin=X1(s,t)),mn(s)&&!Bt(t)&&Z(mhe(t)),ei(a)){const{type:u}=a,l=Uhe(u);u!==l&&(a.type=l),u!=="quantitative"&&D1(i)&&(Z(Ide(u,i)),a.type="quantitative")}else if(!PM(t)){const u=R0e(a,t);a.type=u}if(ei(a)){const{compatible:u,warning:l}=L0e(a,t)||{};u===!1&&Z(l)}if(Y_(a)&&se(a.sort)){const{sort:u}=a;if(ZN(u))return{...a,sort:{encoding:u}};const l=u.substring(1);if(u.charAt(0)==="-"&&ZN(l))return{...a,sort:{encoding:l,order:"descending"}}}if(V_(a)){const{header:u}=a;if(u){const{orient:l,...c}=u;if(l)return{...a,header:{...c,labelOrient:u.labelOrient||l,titleOrient:u.titleOrient||l}}}}return a}function X1(e,t){return xo(e)?{maxbins:HM(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?{...e,maxbins:HM(t)}:e}const _c={compatible:!0};function L0e(e,t){const n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case Zs:case Js:case C1:return G1(e)?_c:{compatible:!1,warning:jde(t)};case $t:case rn:case ra:case dc:case pi:case hs:case ps:case Xd:case Kd:case k1:case pu:case A1:case $1:case hu:case tr:case Ar:case S1:return _c;case Sr:case nr:case $r:case Fr:return n!==wu?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:_c;case no:case oa:case aa:case ua:case to:case eo:case Qs:case kr:case ds:case sa:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:_c;case gi:case la:return!G1(e)&&!F0e(e)?{compatible:!1,warning:qde(t)}:_c;case hc:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:_c}}function wc(e){const{formatType:t}=V1(e);return t==="time"||!t&&I0e(e)}function I0e(e){return e&&(e.type==="temporal"||J(e)&&!!e.timeUnit)}function K1(e,{timeUnit:t,type:n,wrapTime:i,undefinedIfExprNotRequired:r}){var u;const s=t&&((u=sn(t))==null?void 0:u.unit);let o=s||n==="temporal",a;return Jd(e)?a=e.expr:me(e)?a=e.signal:vu(e)?(o=!0,a=xu(e)):(se(e)||Ze(e))&&o&&(a=`datetime(${pt(e)})`,She(s)&&(Ze(e)&&e<1e4||se(e)&&isNaN(Date.parse(e)))&&(a=xu({[s]:e}))),a?i&&o?`time(${a})`:a:r?void 0:pt(e)}function cR(e,t){const{type:n}=e;return t.map(i=>{const r=J(e)&&!_u(e.timeUnit)?e.timeUnit:void 0,s=K1(i,{timeUnit:r,type:n,undefinedIfExprNotRequired:!0});return s!==void 0?{signal:s}:i})}function oh(e,t){return _t(e.bin)?ms(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const fR={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function ah(e){return e==null?void 0:e.condition}const dR=["domain","grid","labels","ticks","title"],P0e={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},hR={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},z0e={...hR,style:1,labelExpr:1,encoding:1};function pR(e){return ue(z0e,e)}const gR=Y({axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1});function ao(e){return X(e,"mark")}class Z1{constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return ao(t)?p0e(t.mark)===this.name:!1}}function $u(e,t){const n=e&&e[t];return n?W(n)?lc(n,i=>!!i.field):J(n)||W1(n):!1}function mR(e,t){const n=e&&e[t];return n?W(n)?lc(n,i=>!!i.field):J(n)||_s(n)||sh(n):!1}function yR(e,t){if(Bt(t)){const n=e[t];if((J(n)||_s(n))&&(FN(n.type)||J(n)&&n.timeUnit)){const i=a_(t);return mR(e,i)}}return!1}function bR(e){return lc(zfe,t=>{if($u(e,t)){const n=e[t];if(W(n))return lc(n,i=>!!i.aggregate);{const i=Rr(n);return i&&!!i.aggregate}}return!1})}function vR(e,t){const n=[],i=[],r=[],s=[],o={};return J_(e,(a,u)=>{if(J(a)){const{field:l,aggregate:c,bin:f,timeUnit:d,...h}=a;if(c||d||f){const p=X_(a),g=p==null?void 0:p.title;let m=te(a,{forAs:!0});const y={...g?[]:{title:xc(a,t,{allowDisabling:!0})},...h,field:m};if(c){let b;if(fa(c)?(b="argmax",m=te({op:"argmax",field:c.argmax},{forAs:!0}),y.field=`${m}.${l}`):ro(c)?(b="argmin",m=te({op:"argmin",field:c.argmin},{forAs:!0}),y.field=`${m}.${l}`):c!=="boxplot"&&c!=="errorbar"&&c!=="errorband"&&(b=c),b){const v={op:b,as:m};l&&(v.field=l),s.push(v)}}else if(n.push(m),ei(a)&&_t(f)){if(i.push({bin:f,field:l,as:m}),n.push(te(a,{binSuffix:"end"})),oh(a,u)&&n.push(te(a,{binSuffix:"range"})),Bt(u)){const b={field:`${m}_end`};o[`${u}2`]=b}y.bin="binned",PM(u)||(y.type=wu)}else if(d&&!_u(d)){r.push({timeUnit:d,field:l,as:m});const b=ei(a)&&a.type!==gc&&"time";b&&(u===Xd||u===pu?y.formatType=b:Kfe(u)?y.legend={formatType:b,...y.legend}:Bt(u)&&(y.axis={formatType:b,...y.axis}))}o[u]=y}else n.push(l),o[u]=e[u]}else o[u]=e[u]}),{bins:i,timeUnits:r,aggregate:s,groupby:n,encoding:o}}function B0e(e,t,n){const i=Jfe(t,n);if(i){if(i==="binned"){const r=e[t===kr?$t:rn];return!!(J(r)&&J(e[t])&&mn(r.bin))}}else return!1;return!0}function U0e(e,t,n,i){const r={};for(const s of Y(e))IM(s)||Z(Ude(s));for(let s of Hfe){if(!e[s])continue;const o=e[s];if(Zd(s)){const a=Wfe(s),u=r[a];if(J(u)&&Bhe(u.type)&&J(o)&&!u.timeUnit){Z(Ode(a));continue}}if(s==="angle"&&t==="arc"&&!e.theta&&(Z(Rde),s=tr),!B0e(e,s,t)){Z(M1(s,t));continue}if(s===to&&t==="line"){const a=Rr(e[s]);if(a!=null&&a.aggregate){Z(Bde);continue}}if(s===pi&&(n?"fill"in e:"stroke"in e)){Z(fN("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue}if(s===Kd||s===hc&&!W(o)&&!Nr(o)||s===pu&&W(o)){if(o){if(s===hc){const a=e[s];if(nR(a)){r[s]=a;continue}}r[s]=oe(o).reduce((a,u)=>(J(u)?a.push(Z_(u,s)):Z(x_(u,s)),a),[])}}else{if(s===pu&&o===null)r[s]=null;else if(!J(o)&&!_s(o)&&!Nr(o)&&!rh(o)&&!me(o)){Z(x_(o,s));continue}r[s]=lR(o,s,i)}}return r}function J1(e,t){const n={};for(const i of Y(e)){const r=lR(e[i],i,t,{compositeMark:!0});n[i]=r}return n}function j0e(e){const t=[];for(const n of Y(e))if($u(e,n)){const i=e[n],r=oe(i);for(const s of r)J(s)?t.push(s):W1(s)&&t.push(s.condition)}return t}function J_(e,t,n){if(e)for(const i of Y(e)){const r=e[i];if(W(r))for(const s of r)t.call(n,s,i);else t.call(n,r,i)}}function q0e(e,t,n,i){return e?Y(e).reduce((r,s)=>{const o=e[s];return W(o)?o.reduce((a,u)=>t.call(i,a,u,s),r):t.call(i,r,o,s)},n):n}function xR(e,t){return Y(t).reduce((n,i)=>{switch(i){case $t:case rn:case A1:case S1:case $1:case kr:case ds:case ra:case dc:case tr:case eo:case Ar:case Qs:case sa:case $r:case Sr:case Fr:case nr:case Xd:case gi:case hu:case pu:return n;case hc:if(e==="line"||e==="trail")return n;case Kd:case k1:{const r=t[i];if(W(r)||J(r))for(const s of oe(r))s.aggregate||n.push(te(s,{}));return n}case to:if(e==="trail")return n;case pi:case hs:case ps:case no:case oa:case aa:case la:case ua:{const r=Rr(t[i]);return r&&!r.aggregate&&n.push(te(r,{})),n}}},[])}function W0e(e){const{tooltip:t,...n}=e;if(!t)return{filteredEncoding:n};let i,r;if(W(t)){for(const s of t)s.aggregate?(i||(i=[]),i.push(s)):(r||(r=[]),r.push(s));i&&(n.tooltip=i)}else t.aggregate?n.tooltip=t:r=t;return W(r)&&r.length===1&&(r=r[0]),{customTooltipWithoutAggregatedField:r,filteredEncoding:n}}function Q_(e,t,n,i=!0){if("tooltip"in n)return{tooltip:n.tooltip};const r=e.map(({fieldPrefix:o,titlePrefix:a})=>{const u=i?` of ${ew(t)}`:"";return{field:o+t.field,type:t.type,title:me(a)?{signal:`${a}"${escape(u)}"`}:a+u}}),s=j0e(n).map($0e);return{tooltip:[...r,...fs(s,We)]}}function ew(e){const{title:t,field:n}=e;return zt(t,n)}function tw(e,t,n,i,r){const{scale:s,axis:o}=n;return({partName:a,mark:u,positionPrefix:l,endPositionPrefix:c=void 0,extraEncoding:f={}})=>{const d=ew(n);return _R(e,a,r,{mark:u,encoding:{[t]:{field:`${l}_${n.field}`,type:n.type,...d!==void 0?{title:d}:{},...s!==void 0?{scale:s}:{},...o!==void 0?{axis:o}:{}},...se(c)?{[`${t}2`]:{field:`${c}_${n.field}`}}:{},...i,...f}})}}function _R(e,t,n,i){const{clip:r,color:s,opacity:o}=e,a=e.type;return e[t]||e[t]===void 0&&n[t]?[{...i,mark:{...n[t],...r?{clip:r}:{},...s?{color:s}:{},...o?{opacity:o}:{},...xs(i.mark)?i.mark:{type:i.mark},style:`${a}-${String(t)}`,...xo(e[t])?{}:e[t]}}]:[]}function wR(e,t,n){const{encoding:i}=e,r=t==="vertical"?"y":"x",s=i[r],o=i[`${r}2`],a=i[`${r}Error`],u=i[`${r}Error2`];return{continuousAxisChannelDef:Q1(s,n),continuousAxisChannelDef2:Q1(o,n),continuousAxisChannelDefError:Q1(a,n),continuousAxisChannelDefError2:Q1(u,n),continuousAxis:r}}function Q1(e,t){if(e!=null&&e.aggregate){const{aggregate:n,...i}=e;return n!==t&&Z(ghe(n,t)),i}else return e}function ER(e,t){const{mark:n,encoding:i}=e,{x:r,y:s}=i;if(xs(n)&&n.orient)return n.orient;if(ga(r)){if(ga(s)){const o=J(r)&&r.aggregate,a=J(s)&&s.aggregate;if(!o&&a===t)return"vertical";if(!a&&o===t)return"horizontal";if(o===t&&a===t)throw new Error("Both x and y cannot have aggregate");return wc(s)&&!wc(r)?"horizontal":"vertical"}return"horizontal"}else{if(ga(s))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}const em="boxplot",H0e=["box","median","outliers","rule","ticks"],G0e=new Z1(em,kR);function CR(e){return Ze(e)?"tukey":e}function kR(e,{config:t}){e={...e,encoding:J1(e.encoding,t)};const{mark:n,encoding:i,params:r,projection:s,...o}=e,a=xs(n)?n:{type:n};r&&Z(oN("boxplot"));const u=a.extent??t.boxplot.extent,l=gt("size",a,t),c=a.invalid,f=CR(u),{bins:d,timeUnits:h,transform:p,continuousAxisChannelDef:g,continuousAxis:m,groupby:y,aggregate:b,encodingWithoutContinuousAxis:v,ticksOrient:x,boxOrient:_,customTooltipWithoutAggregatedField:E}=V0e(e,u,t),w=cc(g.field),{color:C,size:k,...S}=v,$=r2=>tw(a,m,g,r2,t.boxplot),O=$(S),R=$(v),F=(re(t.boxplot.box)?t.boxplot.box.color:t.mark.color)||"#4c78a8",A=$({...S,...k?{size:k}:{},color:{condition:{test:`${at(`lower_box_${g.field}`)} >= ${at(`upper_box_${g.field}`)}`,...C||{value:F}}}}),T=Q_([{fieldPrefix:f==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:f==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],g,v),B={type:"tick",color:"black",opacity:1,orient:x,invalid:c,aria:!1},H=f==="min-max"?T:Q_([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],g,v),z=[...O({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:H}),...O({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:H}),...O({partName:"ticks",mark:B,positionPrefix:"lower_whisker",extraEncoding:H}),...O({partName:"ticks",mark:B,positionPrefix:"upper_whisker",extraEncoding:H})],ne=[...f!=="tukey"?z:[],...R({partName:"box",mark:{type:"bar",...l?{size:l}:{},orient:_,invalid:c,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:T}),...A({partName:"median",mark:{type:"tick",invalid:c,...re(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...l?{size:l}:{},orient:x,aria:!1},positionPrefix:"mid_box",extraEncoding:T})];if(f==="min-max")return{...o,transform:(o.transform??[]).concat(p),layer:ne};const be=at(`lower_box_${g.field}`),de=at(`upper_box_${g.field}`),Te=`(${de} - ${be})`,ct=`${be} - ${u} * ${Te}`,$e=`${de} + ${u} * ${Te}`,Ot=at(g.field),or={joinaggregate:AR(g.field),groupby:y},Ii={transform:[{filter:`(${ct} <= ${Ot}) && (${Ot} <= ${$e})`},{aggregate:[{op:"min",field:g.field,as:`lower_whisker_${w}`},{op:"max",field:g.field,as:`upper_whisker_${w}`},{op:"min",field:`lower_box_${g.field}`,as:`lower_box_${w}`},{op:"max",field:`upper_box_${g.field}`,as:`upper_box_${w}`},...b],groupby:y}],layer:z},{tooltip:le,...Re}=S,{scale:Le,axis:K}=g,Kt=ew(g),Xe=hi(K,["title"]),Pn=_R(a,"outliers",t.boxplot,{transform:[{filter:`(${Ot} < ${ct}) || (${Ot} > ${$e})`}],mark:"point",encoding:{[m]:{field:g.field,type:g.type,...Kt!==void 0?{title:Kt}:{},...Le!==void 0?{scale:Le}:{},...ht(Xe)?{}:{axis:Xe}},...Re,...C?{color:C}:{},...E?{tooltip:E}:{}}})[0];let ln;const Fs=[...d,...h,or];return Pn?ln={transform:Fs,layer:[Pn,Ii]}:(ln=Ii,ln.transform.unshift(...Fs)),{...o,layer:[ln,{transform:p,layer:ne}]}}function AR(e){const t=cc(e);return[{op:"q1",field:e,as:`lower_box_${t}`},{op:"q3",field:e,as:`upper_box_${t}`}]}function V0e(e,t,n){const i=ER(e,em),{continuousAxisChannelDef:r,continuousAxis:s}=wR(e,i,em),o=r.field,a=cc(o),u=CR(t),l=[...AR(o),{op:"median",field:o,as:`mid_box_${a}`},{op:"min",field:o,as:(u==="min-max"?"lower_whisker_":"min_")+a},{op:"max",field:o,as:(u==="min-max"?"upper_whisker_":"max_")+a}],c=u==="min-max"||u==="tukey"?[]:[{calculate:`${at(`upper_box_${a}`)} - ${at(`lower_box_${a}`)}`,as:`iqr_${a}`},{calculate:`min(${at(`upper_box_${a}`)} + ${at(`iqr_${a}`)} * ${t}, ${at(`max_${a}`)})`,as:`upper_whisker_${a}`},{calculate:`max(${at(`lower_box_${a}`)} - ${at(`iqr_${a}`)} * ${t}, ${at(`min_${a}`)})`,as:`lower_whisker_${a}`}],{[s]:f,...d}=e.encoding,{customTooltipWithoutAggregatedField:h,filteredEncoding:p}=W0e(d),{bins:g,timeUnits:m,aggregate:y,groupby:b,encoding:v}=vR(p,n),x=i==="vertical"?"horizontal":"vertical",_=i,E=[...g,...m,{aggregate:[...y,...l],groupby:b},...c];return{bins:g,timeUnits:m,transform:E,groupby:b,aggregate:y,continuousAxisChannelDef:r,continuousAxis:s,encodingWithoutContinuousAxis:v,ticksOrient:x,boxOrient:_,customTooltipWithoutAggregatedField:h}}const nw="errorbar",Y0e=["ticks","rule"],X0e=new Z1(nw,$R);function $R(e,{config:t}){e={...e,encoding:J1(e.encoding,t)};const{transform:n,continuousAxisChannelDef:i,continuousAxis:r,encodingWithoutContinuousAxis:s,ticksOrient:o,markDef:a,outerSpec:u,tooltipEncoding:l}=SR(e,nw,t);delete s.size;const c=tw(a,r,i,s,t.errorbar),f=a.thickness,d=a.size,h={type:"tick",orient:o,aria:!1,...f!==void 0?{thickness:f}:{},...d!==void 0?{size:d}:{}},p=[...c({partName:"ticks",mark:h,positionPrefix:"lower",extraEncoding:l}),...c({partName:"ticks",mark:h,positionPrefix:"upper",extraEncoding:l}),...c({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...f!==void 0?{size:f}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l})];return{...u,transform:n,...p.length>1?{layer:p}:{...p[0]}}}function K0e(e,t){const{encoding:n}=e;if(Z0e(n))return{orient:ER(e,t),inputType:"raw"};const i=J0e(n),r=Q0e(n),s=n.x,o=n.y;if(i){if(r)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const a=n.x2,u=n.y2;if(Me(a)&&Me(u))throw new Error(`${t} cannot have both x2 and y2`);if(Me(a)){if(ga(s))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(Me(u)){if(ga(o))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{const a=n.xError,u=n.xError2,l=n.yError,c=n.yError2;if(Me(u)&&!Me(a))throw new Error(`${t} cannot have xError2 without xError`);if(Me(c)&&!Me(l))throw new Error(`${t} cannot have yError2 without yError`);if(Me(a)&&Me(l))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(Me(a)){if(ga(s))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(Me(l)){if(ga(o))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function Z0e(e){return(Me(e.x)||Me(e.y))&&!Me(e.x2)&&!Me(e.y2)&&!Me(e.xError)&&!Me(e.xError2)&&!Me(e.yError)&&!Me(e.yError2)}function J0e(e){return Me(e.x2)||Me(e.y2)}function Q0e(e){return Me(e.xError)||Me(e.xError2)||Me(e.yError)||Me(e.yError2)}function SR(e,t,n){const{mark:i,encoding:r,params:s,projection:o,...a}=e,u=xs(i)?i:{type:i};s&&Z(oN(t));const{orient:l,inputType:c}=K0e(e,t),{continuousAxisChannelDef:f,continuousAxisChannelDef2:d,continuousAxisChannelDefError:h,continuousAxisChannelDefError2:p,continuousAxis:g}=wR(e,l,t),{errorBarSpecificAggregate:m,postAggregateCalculates:y,tooltipSummary:b,tooltipTitleWithFieldName:v}=epe(u,f,d,h,p,c,t,n),{[g]:x,[g==="x"?"x2":"y2"]:_,[g==="x"?"xError":"yError"]:E,[g==="x"?"xError2":"yError2"]:w,...C}=r,{bins:k,timeUnits:S,aggregate:$,groupby:O,encoding:R}=vR(C,n),F=[...$,...m],A=c!=="raw"?[]:O,T=Q_(b,f,R,v);return{transform:[...a.transform??[],...k,...S,...F.length===0?[]:[{aggregate:F,groupby:A}],...y],groupby:A,continuousAxisChannelDef:f,continuousAxis:g,encodingWithoutContinuousAxis:R,ticksOrient:l==="vertical"?"horizontal":"vertical",markDef:u,outerSpec:a,tooltipEncoding:T}}function epe(e,t,n,i,r,s,o,a){let u=[],l=[];const c=t.field;let f,d=!1;if(s==="raw"){const h=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":a.errorbar.center,p=e.extent?e.extent:h==="mean"?"stderr":"iqr";if(h==="median"!=(p==="iqr")&&Z(phe(h,p,o)),p==="stderr"||p==="stdev")u=[{op:p,field:c,as:`extent_${c}`},{op:h,field:c,as:`center_${c}`}],l=[{calculate:`${at(`center_${c}`)} + ${at(`extent_${c}`)}`,as:`upper_${c}`},{calculate:`${at(`center_${c}`)} - ${at(`extent_${c}`)}`,as:`lower_${c}`}],f=[{fieldPrefix:"center_",titlePrefix:Vd(h)},{fieldPrefix:"upper_",titlePrefix:FR(h,p,"+")},{fieldPrefix:"lower_",titlePrefix:FR(h,p,"-")}],d=!0;else{let g,m,y;p==="ci"?(g="mean",m="ci0",y="ci1"):(g="median",m="q1",y="q3"),u=[{op:m,field:c,as:`lower_${c}`},{op:y,field:c,as:`upper_${c}`},{op:g,field:c,as:`center_${c}`}],f=[{fieldPrefix:"upper_",titlePrefix:xc({field:c,aggregate:y,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:xc({field:c,aggregate:m,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:xc({field:c,aggregate:g,type:"quantitative"},a,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&Z(hhe(e.center,e.extent)),s==="aggregated-upper-lower"?(f=[],l=[{calculate:at(n.field),as:`upper_${c}`},{calculate:at(c),as:`lower_${c}`}]):s==="aggregated-error"&&(f=[{fieldPrefix:"",titlePrefix:c}],l=[{calculate:`${at(c)} + ${at(i.field)}`,as:`upper_${c}`}],r?l.push({calculate:`${at(c)} + ${at(r.field)}`,as:`lower_${c}`}):l.push({calculate:`${at(c)} - ${at(i.field)}`,as:`lower_${c}`}));for(const h of l)f.push({fieldPrefix:h.as.substring(0,6),titlePrefix:du(du(h.calculate,"datum['",""),"']","")})}return{postAggregateCalculates:l,errorBarSpecificAggregate:u,tooltipSummary:f,tooltipTitleWithFieldName:d}}function FR(e,t,n){return`${Vd(e)} ${n} ${t}`}const iw="errorband",tpe=["band","borders"],npe=new Z1(iw,DR);function DR(e,{config:t}){e={...e,encoding:J1(e.encoding,t)};const{transform:n,continuousAxisChannelDef:i,continuousAxis:r,encodingWithoutContinuousAxis:s,markDef:o,outerSpec:a,tooltipEncoding:u}=SR(e,iw,t),l=o,c=tw(l,r,i,s,t.errorband),f=e.encoding.x!==void 0&&e.encoding.y!==void 0;let d={type:f?"area":"rect"},h={type:f?"line":"rule"};const p={...l.interpolate?{interpolate:l.interpolate}:{},...l.tension&&l.interpolate?{tension:l.tension}:{}};return f?(d={...d,...p,ariaRoleDescription:"errorband"},h={...h,...p,aria:!1}):l.interpolate?Z(gN("interpolate")):l.tension&&Z(gN("tension")),{...a,transform:n,layer:[...c({partName:"band",mark:d,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"lower",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"upper",extraEncoding:u})]}}const TR={};function rw(e,t,n){const i=new Z1(e,t);TR[e]={normalizer:i,parts:n}}function ipe(){return Y(TR)}rw(em,kR,H0e),rw(nw,$R,Y0e),rw(iw,DR,tpe);const rpe=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],MR={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},NR={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},spe=Y(MR),ope=Y(NR),RR=Y({header:1,headerRow:1,headerColumn:1,headerFacet:1}),OR=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],ape={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},upe={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},Or="_vgsid_",lpe={point:{on:"click",fields:[Or],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function sw(e){return e==="legend"||!!(e!=null&&e.legend)}function ow(e){return sw(e)&&re(e)}function aw(e){return!!(e!=null&&e.select)}function LR(e){const t=[];for(const n of e||[]){if(aw(n))continue;const{expr:i,bind:r,...s}=n;if(r&&i){const o={...s,bind:r,init:i};t.push(o)}else{const o={...s,...i?{update:i}:{},...r?{bind:r}:{}};t.push(o)}}return t}function cpe(e){return tm(e)||lw(e)||uw(e)}function uw(e){return X(e,"concat")}function tm(e){return X(e,"vconcat")}function lw(e){return X(e,"hconcat")}function IR({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position"}function ws(e){return X(e,"step")}function PR(e){return X(e,"view")||X(e,"width")||X(e,"height")}const zR=20,fpe=Y({align:1,bounds:1,center:1,columns:1,spacing:1});function dpe(e,t,n){const i=n[t],r={},{spacing:s,columns:o}=i;s!==void 0&&(r.spacing=s),o!==void 0&&(q1(e)&&!ih(e.facet)||uw(e))&&(r.columns=o),tm(e)&&(r.columns=1);for(const a of fpe)if(e[a]!==void 0)if(a==="spacing"){const u=e[a];r[a]=Ze(u)?u:{row:u.row??s,column:u.column??s}}else r[a]=e[a];return r}function cw(e,t){return e[t]??e[t==="width"?"continuousWidth":"continuousHeight"]}function fw(e,t){const n=nm(e,t);return ws(n)?n.step:BR}function nm(e,t){const n=e[t]??e[t==="width"?"discreteWidth":"discreteHeight"];return zt(n,{step:e.step})}const BR=20,hpe={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:{continuousWidth:200,continuousHeight:200,step:BR},mark:c0e,arc:{},area:{},bar:d0e,circle:{},geoshape:{},image:{},line:{},point:{},rect:U_,rule:{color:"black"},square:{},text:{color:"black"},tick:h0e,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:Ghe,projection:{},legend:ape,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:lpe,style:{},title:{},facet:{spacing:zR},concat:{spacing:zR},normalizedNumberFormat:".0%"},uo=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],UR={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},jR={blue:uo[0],orange:uo[1],red:uo[2],teal:uo[3],green:uo[4],yellow:uo[5],purple:uo[6],pink:uo[7],brown:uo[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function ppe(e={}){return{signals:[{name:"color",value:re(e)?{...jR,...e}:jR}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function gpe(e){return{signals:[{name:"fontSize",value:re(e)?{...UR,...e}:UR}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function mpe(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function qR(e){const t=Y(e||{}),n={};for(const i of t){const r=e[i];n[i]=ah(r)?VM(r):Ni(r)}return n}function ype(e){const t=Y(e),n={};for(const i of t)n[i]=qR(e[i]);return n}const bpe=[...UN,...gR,...RR,"background","padding","legend","lineBreak","scale","style","title","view"];function WR(e={}){const{color:t,font:n,fontSize:i,selection:r,...s}=e,o=nl({},De(hpe),n?mpe(n):{},t?ppe(t):{},i?gpe(i):{},s||{});r&&il(o,"selection",r,!0);const a=hi(o,bpe);for(const u of["background","lineBreak","padding"])o[u]&&(a[u]=Ni(o[u]));for(const u of UN)o[u]&&(a[u]=yn(o[u]));for(const u of gR)o[u]&&(a[u]=qR(o[u]));for(const u of RR)o[u]&&(a[u]=yn(o[u]));if(o.legend&&(a.legend=yn(o.legend)),o.scale){const{invalid:u,...l}=o.scale,c=yn(u,{level:1});a.scale={...yn(l),...Y(c).length>0?{invalid:c}:{}}}return o.style&&(a.style=ype(o.style)),o.title&&(a.title=yn(o.title)),o.view&&(a.view=yn(o.view)),a}const vpe=new Set(["view",...s0e]),xpe=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],_pe={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],...l0e};function wpe(e){e=De(e);for(const t of xpe)delete e[t];if(e.axis)for(const t in e.axis)ah(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of rpe)delete e.legend[t];if(e.mark){for(const t of BN)delete e.mark[t];e.mark.tooltip&&re(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(LR(e.params)),delete e.params);for(const t of vpe){for(const i of BN)delete e[t][i];const n=_pe[t];if(n)for(const i of n)delete e[t][i];Cpe(e,t)}for(const t of ipe())delete e[t];Epe(e);for(const t in e)re(e[t])&&ht(e[t])&&delete e[t];return ht(e)?void 0:e}function Epe(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:i}=GM(e.title);ht(t)||(e.style["group-title"]={...e.style["group-title"],...t}),ht(n)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...n}),ht(i)?delete e.title:e.title=i}function Cpe(e,t,n,i){const r=e[t];t==="view"&&(n="cell");const s={...r,...e.style[n??t]};ht(s)||(e.style[n??t]=s),delete e[t]}function im(e){return X(e,"layer")}function kpe(e){return X(e,"repeat")}function Ape(e){return!W(e.repeat)&&X(e.repeat,"layer")}class dw{map(t,n){return q1(t)?this.mapFacet(t,n):kpe(t)?this.mapRepeat(t,n):lw(t)?this.mapHConcat(t,n):tm(t)?this.mapVConcat(t,n):uw(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(im(t))return this.mapLayer(t,n);if(ao(t))return this.mapUnit(t,n);throw new Error(y_(t))}mapLayer(t,n){return{...t,layer:t.layer.map(i=>this.mapLayerOrUnit(i,n))}}mapHConcat(t,n){return{...t,hconcat:t.hconcat.map(i=>this.map(i,n))}}mapVConcat(t,n){return{...t,vconcat:t.vconcat.map(i=>this.map(i,n))}}mapConcat(t,n){const{concat:i,...r}=t;return{...r,concat:i.map(s=>this.map(s,n))}}mapFacet(t,n){return{...t,spec:this.map(t.spec,n)}}mapRepeat(t,n){return{...t,spec:this.map(t.spec,n)}}}const $pe={zero:1,center:1,normalize:1};function Spe(e){return ue($pe,e)}const Fpe=new Set([IN,I1,L1,B1,z1,P_,z_,P1,PN,I_]),Dpe=new Set([I1,L1,IN]);function Ec(e){return J(e)&&bc(e)==="quantitative"&&!e.bin}function HR(e,t,{orient:n,type:i}){const r=t==="x"?"y":"radius",s=t==="x"&&["bar","area"].includes(i),o=e[t],a=e[r];if(J(o)&&J(a))if(Ec(o)&&Ec(a)){if(o.stack)return t;if(a.stack)return r;const u=J(o)&&!!o.aggregate,l=J(a)&&!!a.aggregate;if(u!==l)return u?t:r;if(s){if(n==="vertical")return r;if(n==="horizontal")return t}}else{if(Ec(o))return t;if(Ec(a))return r}else{if(Ec(o))return s&&n==="vertical"?void 0:t;if(Ec(a))return s&&n==="horizontal"?void 0:r}}function Tpe(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function GR(e,t){var g,m;const n=xs(e)?e:{type:e},i=n.type;if(!Fpe.has(i))return null;const r=HR(t,"x",n)||HR(t,"theta",n);if(!r)return null;const s=t[r],o=J(s)?te(s,{}):void 0,a=Tpe(r),u=[],l=new Set;if(t[a]){const y=t[a],b=J(y)?te(y,{}):void 0;b&&b!==o&&(u.push(a),l.add(b))}const c=a==="x"?"xOffset":"yOffset",f=t[c],d=J(f)?te(f,{}):void 0;d&&d!==o&&(u.push(c),l.add(d));const h=Gfe.reduce((y,b)=>{if(b!=="tooltip"&&$u(t,b)){const v=t[b];for(const x of oe(v)){const _=Rr(x);if(_.aggregate)continue;const E=te(_,{});(!E||!l.has(E))&&y.push({channel:b,fieldDef:_})}}return y},[]);let p;return s.stack!==void 0?xo(s.stack)?p=s.stack?"zero":null:p=s.stack:Dpe.has(i)&&(p="zero"),!p||!Spe(p)||bR(t)&&h.length===0?null:((g=s==null?void 0:s.scale)!=null&&g.type&&((m=s==null?void 0:s.scale)==null?void 0:m.type)!==bn.LINEAR&&s!=null&&s.stack&&Z(che(s.scale.type)),Me(t[gs(r)])?(s.stack!==void 0&&Z(lhe(r)),null):(J(s)&&s.aggregate&&!sde.has(s.aggregate)&&Z(fhe(s.aggregate)),{groupbyChannels:u,groupbyFields:l,fieldChannel:r,impute:s.impute===null?!1:ha(i),stackBy:h,offset:p}))}function VR(e,t,n){const i=yn(e),r=gt("orient",i,n);if(i.orient=Ope(i.type,t,r),r!==void 0&&r!==i.orient&&Z(Vde(i.orient,r)),i.type==="bar"&&i.orient){const u=gt("cornerRadiusEnd",i,n);if(u!==void 0){const l=i.orient==="horizontal"&&t.x2||i.orient==="vertical"&&t.y2?["cornerRadius"]:f0e[i.orient];for(const c of l)i[c]=u;i.cornerRadiusEnd!==void 0&&delete i.cornerRadiusEnd}}const s=gt("opacity",i,n),o=gt("fillOpacity",i,n);return s===void 0&&o===void 0&&(i.opacity=Npe(i.type,t)),gt("cursor",i,n)===void 0&&(i.cursor=Mpe(i,t,n)),i}function Mpe(e,t,n){return t.href||e.href||gt("href",e,n)?"pointer":e.cursor}function Npe(e,t){if(qe([z1,I_,P_,z_],e)&&!bR(t))return .7}function Rpe(e,t,{graticule:n}){if(n)return!1;const i=ys("filled",e,t),r=e.type;return zt(i,r!==z1&&r!==P1&&r!==B1)}function Ope(e,t,n){switch(e){case z1:case P_:case z_:case PN:case i0e:case n0e:return}const{x:i,y:r,x2:s,y2:o}=t;switch(e){case I1:if(J(i)&&(mn(i.bin)||J(r)&&r.aggregate&&!i.aggregate))return"vertical";if(J(r)&&(mn(r.bin)||J(i)&&i.aggregate&&!r.aggregate))return"horizontal";if(o||s){if(n)return n;if(!s)return(J(i)&&i.type===wu&&!_t(i.bin)||H1(i))&&J(r)&&mn(r.bin)?"horizontal":"vertical";if(!o)return(J(r)&&r.type===wu&&!_t(r.bin)||H1(r))&&J(i)&&mn(i.bin)?"vertical":"horizontal"}case B1:if(s&&!(J(i)&&mn(i.bin))&&o&&!(J(r)&&mn(r.bin)))return;case L1:if(o)return J(r)&&mn(r.bin)?"horizontal":"vertical";if(s)return J(i)&&mn(i.bin)?"vertical":"horizontal";if(e===B1){if(i&&!r)return"vertical";if(r&&!i)return"horizontal"}case P1:case I_:{const a=iR(i),u=iR(r);if(n)return n;if(a&&!u)return e!=="tick"?"horizontal":"vertical";if(!a&&u)return e!=="tick"?"vertical":"horizontal";if(a&&u)return"vertical";{const l=ei(i)&&i.type===gc,c=ei(r)&&r.type===gc;if(l&&!c)return"vertical";if(!l&&c)return"horizontal"}return}}return"vertical"}function Lpe(e){const{point:t,line:n,...i}=e;return Y(i).length>1?i:i.type}function Ipe(e){for(const t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:hi(e[t],["point","line"])});return e}function hw(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?re(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?re(t.point)?t.point:{}:void 0}function YR(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}class Ppe{constructor(){this.name="path-overlay"}hasMatchingType(t,n){if(ao(t)){const{mark:i,encoding:r}=t,s=xs(i)?i:{type:i};switch(s.type){case"line":case"rule":case"trail":return!!hw(s,n[s.type],r);case"area":return!!hw(s,n[s.type],r)||!!YR(s,n[s.type])}}return!1}run(t,n,i){const{config:r}=n,{params:s,projection:o,mark:a,name:u,encoding:l,...c}=t,f=J1(l,r),d=xs(a)?a:{type:a},h=hw(d,r[d.type],f),p=d.type==="area"&&YR(d,r[d.type]),g=[{name:u,...s?{params:s}:{},mark:Lpe({...d.type==="area"&&d.opacity===void 0&&d.fillOpacity===void 0?{opacity:.7}:{},...d}),encoding:hi(f,["shape"])}],m=GR(VR(d,f,r),f);let y=f;if(m){const{fieldChannel:b,offset:v}=m;y={...f,[b]:{...f[b],...v?{stack:v}:{}}}}return y=hi(y,["y2","x2"]),p&&g.push({...o?{projection:o}:{},mark:{type:"line",...uc(d,["clip","interpolate","tension","tooltip"]),...p},encoding:y}),h&&g.push({...o?{projection:o}:{},mark:{type:"point",opacity:1,filled:!0,...uc(d,["clip","tooltip"]),...h},encoding:y}),i({...c,layer:g},{...n,config:Ipe(r)})}}function zpe(e,t){return t?ih(e)?JR(e,t):XR(e,t):e}function pw(e,t){return t?JR(e,t):e}function gw(e,t,n){const i=t[e];if(k0e(i)){if(i.repeat in n)return{...t,[e]:n[i.repeat]};Z(Cde(i.repeat));return}return t}function XR(e,t){if(e=gw("field",e,t),e!==void 0){if(e===null)return null;if(Y_(e)&&oo(e.sort)){const n=gw("field",e.sort,t);e={...e,...n?{sort:n}:{}}}return e}}function KR(e,t){if(J(e))return XR(e,t);{const n=gw("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function ZR(e,t){if(Me(e)){const n=KR(e,t);if(n)return n;if(rh(e))return{condition:e.condition}}else{if(sh(e)){const n=KR(e.condition,t);if(n)return{...e,condition:n};{const{condition:i,...r}=e;return r}}return e}}function JR(e,t){const n={};for(const i in e)if(X(e,i)){const r=e[i];if(W(r))n[i]=r.map(s=>ZR(s,t)).filter(s=>s);else{const s=ZR(r,t);s!==void 0&&(n[i]=s)}}return n}class Bpe{constructor(){this.name="RuleForRangedLine"}hasMatchingType(t){if(ao(t)){const{encoding:n,mark:i}=t;if(i==="line"||xs(i)&&i.type==="line")for(const r of qfe){const s=gu(r),o=n[s];if(n[r]&&(J(o)&&!mn(o.bin)||_s(o)))return!0}}return!1}run(t,n,i){const{encoding:r,mark:s}=t;return Z(Gde(!!r.x2,!!r.y2)),i({...t,mark:re(s)?{...s,type:"rule"}:"rule"},n)}}class Upe extends dw{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[G0e,X0e,npe,new Ppe,new Bpe]}map(t,n){if(ao(t)){const i=$u(t.encoding,Zs),r=$u(t.encoding,Js),s=$u(t.encoding,C1);if(i||r||s)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){const{parentEncoding:i,parentProjection:r}=n,s=pw(t.encoding,n.repeater),o={...t,...t.name?{name:[n.repeaterPrefix,t.name].filter(u=>u).join("_")}:{},...s?{encoding:s}:{}};if(i||r)return this.mapUnitWithParentEncodingOrProjection(o,n);const a=this.mapLayerOrUnit.bind(this);for(const u of this.nonFacetUnitNormalizers)if(u.hasMatchingType(o,n.config))return u.run(o,n,a);return o}mapRepeat(t,n){return Ape(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){const{repeat:i,spec:r,...s}=t,{row:o,column:a,layer:u}=i,{repeater:l={},repeaterPrefix:c=""}=n;return o||a?this.mapRepeat({...t,repeat:{...o?{row:o}:{},...a?{column:a}:{}},spec:{repeat:{layer:u},spec:r}},n):{...s,layer:u.map(f=>{const d={...l,layer:f},h=`${(r.name?`${r.name}_`:"")+c}child__layer_${At(f)}`,p=this.mapLayerOrUnit(r,{...n,repeater:d,repeaterPrefix:h});return p.name=h,p})}}mapNonLayerRepeat(t,n){const{repeat:i,spec:r,data:s,...o}=t;!W(i)&&t.columns&&(t=hi(t,["columns"]),Z(aN("repeat")));const a=[],{repeater:u={},repeaterPrefix:l=""}=n,c=!W(i)&&i.row||[u?u.row:null],f=!W(i)&&i.column||[u?u.column:null],d=W(i)&&i||[u?u.repeat:null];for(const p of d)for(const g of c)for(const m of f){const y={repeat:p,row:g,column:m,layer:u.layer},b=(r.name?`${r.name}_`:"")+l+"child__"+(W(i)?`${At(p)}`:(i.row?`row_${At(g)}`:"")+(i.column?`column_${At(m)}`:"")),v=this.map(r,{...n,repeater:y,repeaterPrefix:b});v.name=b,a.push(hi(v,["data"]))}const h=W(i)?t.columns:i.column?i.column.length:1;return{data:r.data??s,align:"all",...o,columns:h,concat:a}}mapFacet(t,n){const{facet:i}=t;return ih(i)&&t.columns&&(t=hi(t,["columns"]),Z(aN("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){const{encoding:i,projection:r}=t,{parentEncoding:s,parentProjection:o,config:a}=n,u=eO({parentProjection:o,projection:r}),l=QR({parentEncoding:s,encoding:pw(i,n.repeater)});return this.mapUnit({...t,...u?{projection:u}:{},...l?{encoding:l}:{}},{config:a})}mapFacetedUnit(t,n){const{row:i,column:r,facet:s,...o}=t.encoding,{mark:a,width:u,projection:l,height:c,view:f,params:d,encoding:h,...p}=t,{facetMapping:g,layout:m}=this.getFacetMappingAndLayout({row:i,column:r,facet:s},n),y=pw(o,n.repeater);return this.mapFacet({...p,...m,facet:g,spec:{...u?{width:u}:{},...c?{height:c}:{},...f?{view:f}:{},...l?{projection:l}:{},mark:a,encoding:y,...d?{params:d}:{}}},n)}getFacetMappingAndLayout(t,n){const{row:i,column:r,facet:s}=t;if(i||r){s&&Z(Wde([...i?[Zs]:[],...r?[Js]:[]]));const o={},a={};for(const u of[Zs,Js]){const l=t[u];if(l){const{align:c,center:f,spacing:d,columns:h,...p}=l;o[u]=p;for(const g of["align","center","spacing"])l[g]!==void 0&&(a[g]??(a[g]={}),a[g][u]=l[g])}}return{facetMapping:o,layout:a}}else{const{align:o,center:a,spacing:u,columns:l,...c}=s;return{facetMapping:zpe(c,n.repeater),layout:{...o?{align:o}:{},...a?{center:a}:{},...u?{spacing:u}:{},...l?{columns:l}:{}}}}}mapLayer(t,{parentEncoding:n,parentProjection:i,...r}){const{encoding:s,projection:o,...a}=t,u={...r,parentEncoding:QR({parentEncoding:n,encoding:s,layer:!0}),parentProjection:eO({parentProjection:i,projection:o})};return super.mapLayer({...a,...t.name?{name:[u.repeaterPrefix,t.name].filter(l=>l).join("_")}:{}},u)}}function QR({parentEncoding:e,encoding:t={},layer:n}){let i={};if(e){const r=new Set([...Y(e),...Y(t)]);for(const s of r){const o=t[s],a=e[s];if(Me(o)){const u={...a,...o};i[s]=u}else sh(o)?i[s]={...o,condition:{...a,...o.condition}}:o||o===null?i[s]=o:(n||Nr(a)||me(a)||Me(a)||W(a))&&(i[s]=a)}}else i=t;return!i||ht(i)?void 0:i}function eO(e){const{parentProjection:t,projection:n}=e;return t&&n&&Z(Nde({parentProjection:t,projection:n})),n??t}function mw(e){return X(e,"filter")}function jpe(e){return X(e,"stop")}function tO(e){return X(e,"lookup")}function qpe(e){return X(e,"data")}function Wpe(e){return X(e,"param")}function Hpe(e){return X(e,"pivot")}function Gpe(e){return X(e,"density")}function Vpe(e){return X(e,"quantile")}function Ype(e){return X(e,"regression")}function Xpe(e){return X(e,"loess")}function Kpe(e){return X(e,"sample")}function Zpe(e){return X(e,"window")}function Jpe(e){return X(e,"joinaggregate")}function Qpe(e){return X(e,"flatten")}function ege(e){return X(e,"calculate")}function nO(e){return X(e,"bin")}function tge(e){return X(e,"impute")}function nge(e){return X(e,"timeUnit")}function ige(e){return X(e,"aggregate")}function rge(e){return X(e,"stack")}function sge(e){return X(e,"fold")}function oge(e){return X(e,"extent")&&!X(e,"density")&&!X(e,"regression")}function age(e){return e.map(t=>mw(t)?{filter:ac(t.filter,zhe)}:t)}class uge extends dw{map(t,n){return n.emptySelections??(n.emptySelections={}),n.selectionPredicates??(n.selectionPredicates={}),t=iO(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if(t=iO(t,n),t.encoding){const i={};for(const[r,s]of ia(t.encoding))i[r]=rO(s,n);t={...t,encoding:i}}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){const{selection:i,...r}=t;return i?{...r,params:ia(i).map(([s,o])=>{const{init:a,bind:u,empty:l,...c}=o;c.type==="single"?(c.type="point",c.toggle=!1):c.type==="multi"&&(c.type="point"),n.emptySelections[s]=l!=="none";for(const f of gn(n.selectionPredicates[s]??{}))f.empty=l!=="none";return{name:s,value:a,select:c,bind:u}})}:t}}function iO(e,t){const{transform:n,...i}=e;if(n){const r=n.map(s=>{if(mw(s))return{filter:yw(s,t)};if(nO(s)&&mu(s.bin))return{...s,bin:sO(s.bin)};if(tO(s)){const{selection:o,...a}=s.from;return o?{...s,from:{param:o,...a}}:s}return s});return{...i,transform:r}}return e}function rO(e,t){var i,r;const n=De(e);if(J(n)&&mu(n.bin)&&(n.bin=sO(n.bin)),Au(n)&&((r=(i=n.scale)==null?void 0:i.domain)!=null&&r.selection)){const{selection:s,...o}=n.scale.domain;n.scale.domain={...o,...s?{param:s}:{}}}if(rh(n))if(W(n.condition))n.condition=n.condition.map(s=>{const{selection:o,param:a,test:u,...l}=s;return a?s:{...l,test:yw(s,t)}});else{const{selection:s,param:o,test:a,...u}=rO(n.condition,t);n.condition=o?n.condition:{...u,test:yw(n.condition,t)}}return n}function sO(e){const t=e.extent;if(t!=null&&t.selection){const{selection:n,...i}=t;return{...e,extent:{...i,param:n}}}return e}function yw(e,t){const n=i=>ac(i,r=>{var s;const o=t.emptySelections[r]??!0,a={param:r,empty:o};return(s=t.selectionPredicates)[r]??(s[r]=[]),t.selectionPredicates[r].push(a),a});return e.selection?n(e.selection):ac(e.test||e.filter,i=>i.selection?n(i.selection):i)}class bw extends dw{map(t,n){const i=n.selections??[];if(t.params&&!ao(t)){const r=[];for(const s of t.params)aw(s)?i.push(s):r.push(s);t.params=r}return n.selections=i,super.map(t,n)}mapUnit(t,n){const i=n.selections;if(!i||!i.length)return t;const r=(n.path??[]).concat(t.name),s=[];for(const o of i)if(!o.views||!o.views.length)s.push(o);else for(const a of o.views)(se(a)&&(a===t.name||r.includes(a))||W(a)&&a.map(u=>r.indexOf(u)).every((u,l,c)=>u!==-1&&(l===0||u>c[l-1])))&&s.push(o);return s.length&&(t.params=s),t}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=bw.prototype[e];bw.prototype[e]=function(n,i){return t.call(this,n,lge(n,i))}}function lge(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t}function oO(e,t){t===void 0&&(t=WR(e.config));const n=hge(e,t),{width:i,height:r}=e,s=pge(n,{width:i,height:r,autosize:e.autosize},t);return{...n,...s?{autosize:s}:{}}}const cge=new Upe,fge=new uge,dge=new bw;function hge(e,t={}){const n={config:t};return dge.map(cge.map(fge.map(e,n),n),n)}function aO(e){return se(e)?{type:e}:e??{}}function pge(e,t,n){let{width:i,height:r}=t;const s=ao(e)||im(e),o={};s?i=="container"&&r=="container"?(o.type="fit",o.contains="padding"):i=="container"?(o.type="fit-x",o.contains="padding"):r=="container"&&(o.type="fit-y",o.contains="padding"):(i=="container"&&(Z(nN("width")),i=void 0),r=="container"&&(Z(nN("height")),r=void 0));const a={type:"pad",...o,...n?aO(n.autosize):{},...aO(e.autosize)};if(a.type==="fit"&&!s&&(Z(hde),a.type="pad"),i=="container"&&!(a.type=="fit"||a.type=="fit-x")&&Z(iN("width")),r=="container"&&!(a.type=="fit"||a.type=="fit-y")&&Z(iN("height")),!Mi(a,{type:"pad"}))return a}function gge(e){return["fit","fit-x","fit-y"].includes(e)}function mge(e){return e?`fit-${F1(e)}`:"fit"}const yge=["background","padding"];function uO(e,t){const n={};for(const i of yge)e&&e[i]!==void 0&&(n[i]=Ni(e[i]));return t&&(n.params=e.params),n}class lo{constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new lo(De(this.explicit),De(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(t){return zt(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:i}){n!==void 0&&this.set(t,n,i)}set(t,n,i){return delete this[i?"implicit":"explicit"][t],this[i?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:i}){n[t]!==void 0?this.set(t,n[t],!0):i[t]!==void 0&&this.set(t,i[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(const n of Y(t.combine())){const i=t.getWithExplicit(n);this.setWithExplicit(n,i)}}}function Es(e){return{explicit:!0,value:e}}function Ri(e){return{explicit:!1,value:e}}function lO(e){return(t,n,i,r)=>{const s=e(t.value,n.value);return s>0?t:s<0?n:rm(t,n,i,r)}}function rm(e,t,n,i){return e.explicit&&t.explicit&&Z(nhe(n,i,e.value,t.value)),e}function ma(e,t,n,i,r=rm){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:Mi(e.value,t.value)?e:r(e,t,n,i)}class bge extends lo{constructor(t={},n={},i=!1){super(t,n),this.explicit=t,this.implicit=n,this.parseNothing=i}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function Cc(e){return X(e,"url")}function uh(e){return X(e,"values")}function cO(e){return X(e,"name")&&!Cc(e)&&!uh(e)&&!ya(e)}function ya(e){return e&&(fO(e)||dO(e)||vw(e))}function fO(e){return X(e,"sequence")}function dO(e){return X(e,"sphere")}function vw(e){return X(e,"graticule")}var Ft;(function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup",e[e.PreFilterInvalid=5]="PreFilterInvalid",e[e.PostFilterInvalid=6]="PostFilterInvalid"})(Ft||(Ft={}));function hO({invalid:e,isPath:t}){switch(jN(e,{isPath:t})){case"filter":return{marks:"exclude-invalid-values",scales:"exclude-invalid-values"};case"break-paths-show-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"include-invalid-values"};case"break-paths-filter-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"exclude-invalid-values"};case"show":return{marks:"include-invalid-values",scales:"include-invalid-values"}}}function vge(e){const{marks:t,scales:n}=hO(e);return t===n?Ft.Main:n==="include-invalid-values"?Ft.PreFilterInvalid:Ft.PostFilterInvalid}class ut{constructor(t,n){this.debugName=n,this._children=[],this._parent=null,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.includes(t)){Z(Dde);return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const r of this._children)r.parent=t;this._children=[],t.removeChild(this);const i=t.parent.removeChild(t);this._parent=n,n.addChild(this,i),t.parent=this}}class yi extends ut{clone(){const t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}constructor(t,n,i,r){super(t,n),this.type=i,this.refCounts=r,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${SM()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}function xw(e){return e.as!==void 0}function pO(e){return`${e}_end`}class Cs extends ut{clone(){return new Cs(null,De(this.timeUnits))}constructor(t,n){super(t),this.timeUnits=n}static makeFromEncoding(t,n){const i=n.reduceFieldDef((r,s,o)=>{const{field:a,timeUnit:u}=s;if(u){let l;if(_u(u)){if(Dt(n)){const{mark:c,markDef:f,config:d}=n,h=pa({fieldDef:s,markDef:f,config:d});(eh(c)||h)&&(l={timeUnit:sn(u),field:a})}}else l={as:te(s,{forAs:!0}),field:a,timeUnit:u};if(Dt(n)){const{mark:c,markDef:f,config:d}=n,h=pa({fieldDef:s,markDef:f,config:d});eh(c)&&Bt(o)&&h!==.5&&(l.rectBandPosition=h)}l&&(r[We(l)]=l)}return r},{});return ht(i)?null:new Cs(t,i)}static makeFromTransform(t,n){const{timeUnit:i,...r}={...n},s=sn(i),o={...r,timeUnit:s};return new Cs(t,{[We(o)]:o})}merge(t){this.timeUnits={...this.timeUnits};for(const n in t.timeUnits)this.timeUnits[n]||(this.timeUnits[n]=t.timeUnits[n]);for(const n of t.children)t.removeChild(n),n.parent=this;t.remove()}removeFormulas(t){const n={};for(const[i,r]of ia(this.timeUnits)){const s=xw(r)?r.as:`${r.field}_end`;t.has(s)||(n[i]=r)}this.timeUnits=n}producedFields(){return new Set(gn(this.timeUnits).map(t=>xw(t)?t.as:pO(t.field)))}dependentFields(){return new Set(gn(this.timeUnits).map(t=>t.field))}hash(){return`TimeUnit ${We(this.timeUnits)}`}assemble(){const t=[];for(const n of gn(this.timeUnits)){const{rectBandPosition:i}=n,r=sn(n.timeUnit);if(xw(n)){const{field:s,as:o}=n,{unit:a,utc:u,...l}=r,c=[o,`${o}_end`];t.push({field:er(s),type:"timeunit",...a?{units:R1(a)}:{},...u?{timezone:"utc"}:{},...l,as:c}),t.push(...mO(c,i,r))}else if(n){const{field:s}=n,o=s.replaceAll("\\.","."),a=gO({timeUnit:r,field:o}),u=pO(o);t.push({type:"formula",expr:a,as:u}),t.push(...mO([o,u],i,r))}}return t}}const sm="offsetted_rect_start",om="offsetted_rect_end";function gO({timeUnit:e,field:t,reverse:n}){const{unit:i,utc:r}=e,s=wN(i),{part:o,step:a}=AN(s,e.step);return`${r?"utcOffset":"timeOffset"}('${o}', ${at(t)}, ${n?-a:a})`}function mO([e,t],n,i){if(n!==void 0&&n!==.5){const r=at(e),s=at(t);return[{type:"formula",expr:yO([gO({timeUnit:i,field:e,reverse:!0}),r],n+.5),as:`${e}_${sm}`},{type:"formula",expr:yO([r,s],n+.5),as:`${e}_${om}`}]}return[]}function yO([e,t],n){return`${1-n} * ${e} + ${n} * ${t}`}const lh="_tuple_fields";class xge{constructor(...t){this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const _ge={defined:()=>!0,parse:(e,t,n)=>{const i=t.name,r=t.project??(t.project=new xge),s={},o={},a=new Set,u=(p,g)=>{const m=g==="visual"?p.channel:p.field;let y=At(`${i}_${m}`);for(let b=1;a.has(y);b++)y=At(`${i}_${m}_${b}`);return a.add(y),{[g]:y}},l=t.type,c=e.config.selection[l],f=n.value!==void 0?oe(n.value):null;let{fields:d,encodings:h}=re(n.select)?n.select:{};if(!d&&!h&&f){for(const p of f)if(re(p))for(const g of Y(p))jfe(g)?(h||(h=[])).push(g):l==="interval"?(Z(Ede),h=c.encodings):(d??(d=[])).push(g)}!d&&!h&&(h=c.encodings,"fields"in c&&(d=c.fields));for(const p of h??[]){const g=e.fieldDef(p);if(g){let m=g.field;if(g.aggregate){Z(pde(p,g.aggregate));continue}else if(!m){Z(sN(p));continue}if(g.timeUnit&&!_u(g.timeUnit)){m=e.vgField(p);const y={timeUnit:g.timeUnit,as:m,field:g.field};o[We(y)]=y}if(!s[m]){const y=l==="interval"&&ms(p)&&Tr(e.getScaleComponent(p).get("type"))?"R":g.bin?"R-RE":"E",b={field:m,channel:p,type:y,index:r.items.length};b.signals={...u(b,"data"),...u(b,"visual")},r.items.push(s[m]=b),r.hasField[m]=s[m],r.hasSelectionId=r.hasSelectionId||m===Or,OM(p)?(b.geoChannel=p,b.channel=RM(p),r.hasChannel[b.channel]=s[m]):r.hasChannel[p]=s[m]}}else Z(sN(p))}for(const p of d??[]){if(r.hasField[p])continue;const g={type:"E",field:p,index:r.items.length};g.signals={...u(g,"data")},r.items.push(g),r.hasField[p]=g,r.hasSelectionId=r.hasSelectionId||p===Or}f&&(t.init=f.map(p=>r.items.map(g=>re(p)?p[g.geoChannel||g.channel]!==void 0?p[g.geoChannel||g.channel]:p[g.field]:p))),ht(o)||(r.timeUnit=new Cs(null,o))},signals:(e,t,n)=>{const i=t.name+lh;return n.filter(s=>s.name===i).length>0||t.project.hasSelectionId?n:n.concat({name:i,value:t.project.items.map(_O)})}},bO="_curr",am="anim_value",kc="anim_clock",_w="eased_anim_clock",vO="min_extent",xO="max_range_extent",ww="last_tick_at",Ew="is_playing",wge=1/60*1e3,Ege=(e,t)=>[{name:_w,update:kc},{name:`${e}_domain`,init:`domain('${t}')`},{name:vO,init:`extent(${e}_domain)[0]`},{name:xO,init:`extent(range('${t}'))[1]`},{name:am,update:`invert('${t}', ${_w})`}],Cge={defined:e=>e.type==="point",topLevelSignals:(e,t,n)=>(ks(t)&&(n=n.concat([{name:kc,init:"0",on:[{events:{type:"timer",throttle:wge},update:`${Ew} ? (${kc} + (now() - ${ww}) > ${xO} ? 0 : ${kc} + (now() - ${ww})) : ${kc}`}]},{name:ww,init:"now()",on:[{events:[{signal:kc},{signal:Ew}],update:"now()"}]},{name:Ew,init:"true"}])),n),signals:(e,t,n)=>{const i=t.name,r=i+lh,s=t.project,o="(item().isVoronoi ? datum.datum : datum)",a=gn(e.component.selection??{}).reduce((c,f)=>f.type==="interval"?c.concat(f.name+Ac):c,[]).map(c=>`indexof(item().mark.name, '${c}') < 0`).join(" && "),u=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${a?` && ${a}`:""}`;let l=`unit: ${Du(e)}, `;if(t.project.hasSelectionId)l+=`${Or}: ${o}[${Q(Or)}]`;else if(ks(t))l+=`fields: ${r}, values: [${am} ? ${am} : ${vO}]`;else{const c=s.items.map(f=>{const d=e.fieldDef(f.channel);return d!=null&&d.bin?`[${o}[${Q(e.vgField(f.channel,{}))}], ${o}[${Q(e.vgField(f.channel,{binSuffix:"end"}))}]]`:`${o}[${Q(f.field)}]`}).join(", ");l+=`fields: ${r}, values: [${c}]`}if(ks(t))return n.concat(Ege(t.name,e.scaleName(sa)),[{name:i+ho,on:[{events:[{signal:_w},{signal:am}],update:`{${l}}`,force:!0}]}]);{const c=t.events;return n.concat([{name:i+ho,on:c?[{events:c,update:`${u} ? {${l}} : null`,force:!0}]:[]}])}}};function _O(e){const{signals:t,hasLegend:n,index:i,...r}=e;return r.field=er(r.field),r}function Su(e,t=!0,n=En){if(W(e)){const i=e.map(r=>Su(r,t,n));return t?`[${i.join(", ")}]`:i}else if(vu(e))return n(t?xu(e):$he(e));return t?n(pt(e)):e}function kge(e,t){for(const n of gn(e.component.selection??{})){const i=n.name;let r=`${i}${ho}, ${n.resolve==="global"?"true":`{unit: ${Du(e)}}`}`;for(const s of dm)s.defined(n)&&(s.signals&&(t=s.signals(e,n,t)),s.modifyExpr&&(r=s.modifyExpr(e,n,r)));t.push({name:i+Jge,on:[{events:{signal:n.name+ho},update:`modify(${Q(n.name+Fu)}, ${r})`}]})}return Cw(t)}function Age(e,t){if(e.component.selection&&Y(e.component.selection).length){const n=Q(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:ta("pointermove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return Cw(t)}function $ge(e,t){let n=!1;for(const i of gn(e.component.selection??{})){const r=i.name,s=Q(r+Fu);if(t.filter(a=>a.name===r).length===0){const a=i.resolve==="global"?"union":i.resolve,u=i.type==="point"?", true, true)":")";t.push({name:i.name,update:`${GO}(${s}, ${Q(a)}${u}`})}n=!0;for(const a of dm)a.defined(i)&&a.topLevelSignals&&(t=a.topLevelSignals(e,i,t))}return n&&t.filter(r=>r.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]}),Cw(t)}function Sge(e,t){const n=[],i=[],r=Du(e,{escape:!1});for(const s of gn(e.component.selection??{})){const o={name:s.name+Fu};if(s.project.hasSelectionId&&(o.transform=[{type:"collect",sort:{field:Or}}]),s.init){const u=s.project.items.map(_O);o.values=s.project.hasSelectionId?s.init.map(l=>({unit:r,[Or]:Su(l,!1)[0]})):s.init.map(l=>({unit:r,fields:u,values:Su(l,!1)}))}if([...n,...t].filter(u=>u.name===s.name+Fu).length||n.push(o),ks(s)&&t.length){const u=e.lookupDataSource(e.getDataName(Ft.Main)),l=t.find(f=>f.name===u),c=l.transform.find(f=>f.type==="filter"&&f.expr.includes("vlSelectionTest"));if(c){l.transform=l.transform.filter(d=>d!==c);const f={name:l.name+bO,source:l.name,transform:[c]};i.push(f)}}}return n.concat(t,i)}function wO(e,t){for(const n of gn(e.component.selection??{}))for(const i of dm)i.defined(n)&&i.marks&&(t=i.marks(e,n,t));return t}function Fge(e,t){for(const n of e.children)Dt(n)&&(t=wO(n,t));return t}function Dge(e,t,n,i){const r=cL(e,t.param,t);return{signal:Tr(n.get("type"))&&W(i)&&i[0]>i[1]?`isValid(${r}) && reverse(${r})`:r}}function Cw(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}const co={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{const n=t.scales=[];for(const i of t.project.items){const r=i.channel;if(!ms(r))continue;const s=e.getScaleComponent(r),o=s?s.get("type"):void 0;if(o=="sequential"&&Z(bde),!s||!Tr(o)){Z(yde);continue}s.set("selectionExtent",{param:t.name,field:i.field},!0),n.push(i)}},topLevelSignals:(e,t,n)=>{const i=t.scales.filter(o=>n.filter(a=>a.name===o.signals.data).length===0);if(!e.parent||Aw(e)||i.length===0)return n;const r=n.find(o=>o.name===t.name);let s=r.update;if(s.includes(GO))r.update=`{${i.map(o=>`${Q(er(o.field))}: ${o.signals.data}`).join(", ")}}`;else{for(const o of i){const a=`${Q(er(o.field))}: ${o.signals.data}`;s.includes(a)||(s=`${s.substring(0,s.length-1)}, ${a}}`)}r.update=s}return n.concat(i.map(o=>({name:o.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!Aw(e))for(const i of t.scales){const r=n.find(s=>s.name===i.signals.data);r.push="outer",delete r.value,delete r.update}return n}};function kw(e,t){return`domain(${Q(e.scaleName(t))})`}function Aw(e){return e.parent&&Lc(e.parent)&&(!e.parent.parent||Aw(e.parent.parent))}const Ac="_brush",EO="_scale_trigger",ch="geo_interval_init_tick",CO="_init",Tge="_center",Mge={defined:e=>e.type==="interval",parse:(e,t,n)=>{var i;if(e.hasProjection){const r={...re(n.select)?n.select:{}};r.fields=[Or],r.encodings||(r.encodings=n.value?Y(n.value):[Sr,$r]),n.select={type:"interval",...r}}if(t.translate&&!co.defined(t)){const r=`!event.item || event.item.mark.name !== ${Q(t.name+Ac)}`;for(const s of t.events){if(!s.between){Z(`${s} is not an ordered event stream for interval selections.`);continue}const o=oe((i=s.between[0]).filter??(i.filter=[]));o.includes(r)||o.push(r)}}},signals:(e,t,n)=>{const i=t.name,r=i+ho,s=gn(t.project.hasChannel).filter(a=>a.channel===$t||a.channel===rn),o=t.init?t.init[0]:null;if(n.push(...s.reduce((a,u)=>a.concat(Nge(e,t,u,o&&o[u.index])),[])),e.hasProjection){const a=Q(e.projectionName()),u=e.projectionName()+Tge,{x:l,y:c}=t.project.hasChannel,f=l&&l.signals.visual,d=c&&c.signals.visual,h=l?o&&o[l.index]:`${u}[0]`,p=c?o&&o[c.index]:`${u}[1]`,g=_=>e.getSizeSignalRef(_).signal,m=`[[${f?f+"[0]":"0"}, ${d?d+"[0]":"0"}],[${f?f+"[1]":g("width")}, ${d?d+"[1]":g("height")}]]`;o&&(n.unshift({name:i+CO,init:`[scale(${a}, [${l?h[0]:h}, ${c?p[0]:p}]), scale(${a}, [${l?h[1]:h}, ${c?p[1]:p}])]`}),(!l||!c)&&(n.find(E=>E.name===u)||n.unshift({name:u,update:`invert(${a}, [${g("width")}/2, ${g("height")}/2])`})));const y=`intersect(${m}, {markname: ${Q(e.getName("marks"))}}, unit.mark)`,b=`{unit: ${Du(e)}}`,v=`vlSelectionTuples(${y}, ${b})`,x=s.map(_=>_.signals.visual);return n.concat({name:r,on:[{events:[...x.length?[{signal:x.join(" || ")}]:[],...o?[{signal:ch}]:[]],update:v}]})}else{if(!co.defined(t)){const l=i+EO,c=s.map(f=>{const d=f.channel,{data:h,visual:p}=f.signals,g=Q(e.scaleName(d)),m=e.getScaleComponent(d).get("type"),y=Tr(m)?"+":"";return`(!isArray(${h}) || (${y}invert(${g}, ${p})[0] === ${y}${h}[0] && ${y}invert(${g}, ${p})[1] === ${y}${h}[1]))`});c.length&&n.push({name:l,value:{},on:[{events:s.map(f=>({scale:e.scaleName(f.channel)})),update:c.join(" && ")+` ? ${l} : {}`}]})}const a=s.map(l=>l.signals.data),u=`unit: ${Du(e)}, fields: ${i+lh}, values`;return n.concat({name:r,...o?{init:`{${u}: ${Su(o)}}`}:{},...a.length?{on:[{events:[{signal:a.join(" || ")}],update:`${a.join(" && ")} ? {${u}: [${a}]} : null`}]}:{}})}},topLevelSignals:(e,t,n)=>(Dt(e)&&e.hasProjection&&t.init&&(n.filter(r=>r.name===ch).length||n.unshift({name:ch,value:null,on:[{events:"timer{1}",update:`${ch} === null ? {} : ${ch}`}]})),n),marks:(e,t,n)=>{const i=t.name,{x:r,y:s}=t.project.hasChannel,o=r==null?void 0:r.signals.visual,a=s==null?void 0:s.signals.visual,u=`data(${Q(t.name+Fu)})`;if(co.defined(t)||!r&&!s)return n;const l={x:r!==void 0?{signal:`${o}[0]`}:{value:0},y:s!==void 0?{signal:`${a}[0]`}:{value:0},x2:r!==void 0?{signal:`${o}[1]`}:{field:{group:"width"}},y2:s!==void 0?{signal:`${a}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(const m of Y(l))l[m]=[{test:`${u}.length && ${u}[0].unit === ${Du(e)}`,...l[m]},{value:0}];const{fill:c,fillOpacity:f,cursor:d,...h}=t.mark,p=Y(h).reduce((m,y)=>(m[y]=[{test:[r!==void 0&&`${o}[0] !== ${o}[1]`,s!==void 0&&`${a}[0] !== ${a}[1]`].filter(b=>b).join(" && "),value:h[y]},{value:null}],m),{}),g=d??(t.translate?"move":null);return[{name:`${i+Ac}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:c},fillOpacity:{value:f}},update:l}},...n,{name:i+Ac,type:"rect",clip:!0,encode:{enter:{...g?{cursor:{value:g}}:{},fill:{value:"transparent"}},update:{...l,...p}}}]}};function Nge(e,t,n,i){const r=!e.hasProjection,s=n.channel,o=n.signals.visual,a=Q(r?e.scaleName(s):e.projectionName()),u=d=>`scale(${a}, ${d})`,l=e.getSizeSignalRef(s===$t?"width":"height").signal,c=`${s}(unit)`,f=t.events.reduce((d,h)=>[...d,{events:h.between[0],update:`[${c}, ${c}]`},{events:h,update:`[${o}[0], clamp(${c}, 0, ${l})]`}],[]);if(r){const d=n.signals.data,h=co.defined(t),p=e.getScaleComponent(s),g=p?p.get("type"):void 0,m=i?{init:Su(i,!0,u)}:{value:[]};return f.push({events:{signal:t.name+EO},update:Tr(g)?`[${u(`${d}[0]`)}, ${u(`${d}[1]`)}]`:"[0, 0]"}),h?[{name:d,on:[]}]:[{name:o,...m,on:f},{name:d,...i?{init:Su(i)}:{},on:[{events:{signal:o},update:`${o}[0] === ${o}[1] ? null : invert(${a}, ${o})`}]}]}else{const d=s===$t?0:1,h=t.name+CO,p=i?{init:`[${h}[0][${d}], ${h}[1][${d}]]`}:{value:[]};return[{name:o,...p,on:f}]}}function $c({model:e,channelDef:t,vgChannel:n,invalidValueRef:i,mainRefFn:r}){const s=rh(t)&&t.condition;let o=[];s&&(o=oe(s).map(l=>{const c=r(l);if(C0e(l)){const{param:f,empty:d}=l;return{test:lL(e,{param:f,empty:d}),...c}}else return{test:vm(e,l.test),...c}})),i!==void 0&&o.push(i);const a=r(t);return a!==void 0&&o.push(a),o.length>1||o.length===1&&o[0].test?{[n]:o}:o.length===1?{[n]:o[0]}:{}}function $w(e,t="text"){const n=e.encoding[t];return $c({model:e,channelDef:n,vgChannel:t,mainRefFn:i=>um(i,e.config),invalidValueRef:void 0})}function um(e,t,n="datum"){if(e){if(Nr(e))return Et(e.value);if(Me(e)){const{format:i,formatType:r}=V1(e);return H_({fieldOrDatumDef:e,format:i,formatType:r,expr:n,config:t})}}}function kO(e,t={}){const{encoding:n,markDef:i,config:r,stack:s}=e,o=n.tooltip;if(W(o))return{tooltip:$O({tooltip:o},s,r,t)};{const a=t.reactiveGeom?"datum.datum":"datum";return $c({model:e,channelDef:o,vgChannel:"tooltip",mainRefFn:l=>{const c=um(l,r,a);if(c)return c;if(l===null)return;let f=gt("tooltip",i,r);if(f===!0&&(f={content:"encoding"}),se(f))return{value:f};if(re(f))return me(f)?f:f.content==="encoding"?$O(n,s,r,t):{signal:a}},invalidValueRef:void 0})}}function AO(e,t,n,{reactiveGeom:i}={}){const r={...n,...n.tooltipFormat},s=new Set,o=i?"datum.datum":"datum",a=[];function u(c,f){const d=gu(f),h=ei(c)?c:{...c,type:e[d].type},p=h.title||K_(h,r),g=oe(p).join(", ").replaceAll(/"/g,'\\"');let m;if(Bt(f)){const y=f==="x"?"x2":"y2",b=Rr(e[y]);if(mn(h.bin)&&b){const v=te(h,{expr:o}),x=te(b,{expr:o}),{format:_,formatType:E}=V1(h);m=nh(v,x,_,E,r),s.add(y)}}if((Bt(f)||f===tr||f===Ar)&&t&&t.fieldChannel===f&&t.offset==="normalize"){const{format:y,formatType:b}=V1(h);m=H_({fieldOrDatumDef:h,format:y,formatType:b,expr:o,config:r,normalizeStack:!0}).signal}m??(m=um(h,r,o).signal),a.push({channel:f,key:g,value:m})}J_(e,(c,f)=>{J(c)?u(c,f):W1(c)&&u(c.condition,f)});const l={};for(const{channel:c,key:f,value:d}of a)!s.has(c)&&!l[f]&&(l[f]=d);return l}function $O(e,t,n,{reactiveGeom:i}={}){const r=AO(e,t,n,{reactiveGeom:i}),s=ia(r).map(([o,a])=>`"${o}": ${a}`);return s.length>0?{signal:`{${s.join(", ")}}`}:void 0}function Rge(e){const{markDef:t,config:n}=e,i=gt("aria",t,n);return i===!1?{}:{...i?{aria:i}:{},...Oge(e),...Lge(e)}}function Oge(e){const{mark:t,markDef:n,config:i}=e;if(i.aria===!1)return{};const r=gt("ariaRoleDescription",n,i);return r!=null?{ariaRoleDescription:{value:r}}:ue(cde,t)?{}:{ariaRoleDescription:{value:t}}}function Lge(e){const{encoding:t,markDef:n,config:i,stack:r}=e,s=t.description;if(s)return $c({model:e,channelDef:s,vgChannel:"description",mainRefFn:u=>um(u,e.config),invalidValueRef:void 0});const o=gt("description",n,i);if(o!=null)return{description:Et(o)};if(i.aria===!1)return{};const a=AO(t,r,i);if(!ht(a))return{description:{signal:ia(a).map(([u,l],c)=>`"${c>0?"; ":""}${u}: " + (${l})`).join(" + ")}}}function vn(e,t,n={}){const{markDef:i,encoding:r,config:s}=t,{vgChannel:o}=n;let{defaultRef:a,defaultValue:u}=n;const l=r[e];a===void 0&&(u??(u=gt(e,i,s,{vgChannel:o,ignoreVgConfig:!rh(l)})),u!==void 0&&(a=Et(u)));const c={markDef:i,config:s,scaleName:t.scaleName(e),scale:t.getScaleComponent(e)},f=WN({...c,scaleChannel:e,channelDef:l});return $c({model:t,channelDef:l,vgChannel:o??e,invalidValueRef:f,mainRefFn:h=>W_({...c,channel:e,channelDef:h,stack:null,defaultRef:a})})}function SO(e,t={filled:void 0}){const{markDef:n,encoding:i,config:r}=e,{type:s}=n,o=t.filled??gt("filled",n,r),a=qe(["bar","point","circle","square","geoshape"],s)?"transparent":void 0,u=gt(o===!0?"color":void 0,n,r,{vgChannel:"fill"})??r.mark[o===!0&&"color"]??a,l=gt(o===!1?"color":void 0,n,r,{vgChannel:"stroke"})??r.mark[o===!1&&"color"],c=o?"fill":"stroke",f={...u?{fill:Et(u)}:{},...l?{stroke:Et(l)}:{}};return n.color&&(o?n.fill:n.stroke)&&Z(fN("property",{fill:"fill"in n,stroke:"stroke"in n})),{...f,...vn("color",e,{vgChannel:c,defaultValue:o?u:l}),...vn("fill",e,{defaultValue:i.fill?u:void 0}),...vn("stroke",e,{defaultValue:i.stroke?l:void 0})}}function Ige(e){const{encoding:t,mark:n}=e,i=t.order;return!ha(n)&&Nr(i)?$c({model:e,channelDef:i,vgChannel:"zindex",mainRefFn:r=>Et(r.value),invalidValueRef:void 0}):{}}function Sc({channel:e,markDef:t,encoding:n={},model:i,bandPosition:r}){const s=`${e}Offset`,o=t[s],a=n[s];if((s==="xOffset"||s==="yOffset")&&a)return{offsetType:"encoding",offset:W_({channel:s,channelDef:a,markDef:t,config:i==null?void 0:i.config,scaleName:i.scaleName(s),scale:i.getScaleComponent(s),stack:null,defaultRef:Et(o),bandPosition:r})};const u=t[s];return u?{offsetType:"visual",offset:u}:{}}function ti(e,t,{defaultPos:n,vgChannel:i}){const{encoding:r,markDef:s,config:o,stack:a}=t,u=r[e],l=r[gs(e)],c=t.scaleName(e),f=t.getScaleComponent(e),{offset:d,offsetType:h}=Sc({channel:e,markDef:s,encoding:r,model:t,bandPosition:.5}),p=Sw({model:t,defaultPos:n,channel:e,scaleName:c,scale:f}),g=!u&&Bt(e)&&(r.latitude||r.longitude)?{field:t.getName(e)}:Pge({channel:e,channelDef:u,channel2Def:l,markDef:s,config:o,scaleName:c,scale:f,stack:a,offset:d,defaultRef:p,bandPosition:h==="encoding"?0:void 0});return g?{[i||e]:g}:void 0}function Pge(e){const{channel:t,channelDef:n,scaleName:i,stack:r,offset:s,markDef:o}=e;if(Me(n)&&r&&t===r.fieldChannel){if(J(n)){let a=n.bandPosition;if(a===void 0&&o.type==="text"&&(t==="radius"||t==="theta")&&(a=.5),a!==void 0)return U1({scaleName:i,fieldOrDatumDef:n,startSuffix:"start",bandPosition:a,offset:s})}return Cu(n,i,{suffix:"end"},{offset:s})}return q_(e)}function Sw({model:e,defaultPos:t,channel:n,scaleName:i,scale:r}){const{markDef:s,config:o}=e;return()=>{const a=gu(n),u=ca(n),l=gt(n,s,o,{vgChannel:u});if(l!==void 0)return th(n,l);switch(t){case"zeroOrMin":return FO({scaleName:i,scale:r,mode:"zeroOrMin",mainChannel:a,config:o});case"zeroOrMax":return FO({scaleName:i,scale:r,mode:{zeroOrMax:{widthSignal:e.width.signal,heightSignal:e.height.signal}},mainChannel:a,config:o});case"mid":return{...e[mi(n)],mult:.5}}}}function FO({mainChannel:e,config:t,...n}){const i=qN(n),{mode:r}=n;if(i)return i;switch(e){case"radius":{if(r==="zeroOrMin")return{value:0};const{widthSignal:s,heightSignal:o}=r.zeroOrMax;return{signal:`min(${s},${o})/2`}}case"theta":return r==="zeroOrMin"?{value:0}:{signal:"2*PI"};case"x":return r==="zeroOrMin"?{value:0}:{field:{group:"width"}};case"y":return r==="zeroOrMin"?{field:{group:"height"}}:{value:0}}}const zge={left:"x",center:"xc",right:"x2"},Bge={top:"y",middle:"yc",bottom:"y2"};function DO(e,t,n,i="middle"){if(e==="radius"||e==="theta")return ca(e);const r=e==="x"?"align":"baseline",s=gt(r,t,n);let o;return me(s)?(Z(Hde(r)),o=void 0):o=s,e==="x"?zge[o||(i==="top"?"left":"center")]:Bge[o||i]}function lm(e,t,{defaultPos:n,defaultPos2:i,range:r}){return r?TO(e,t,{defaultPos:n,defaultPos2:i}):ti(e,t,{defaultPos:n})}function TO(e,t,{defaultPos:n,defaultPos2:i}){const{markDef:r,config:s}=t,o=gs(e),a=mi(e),u=Uge(t,i,o),l=u[a]?DO(e,r,s):ca(e);return{...ti(e,t,{defaultPos:n,vgChannel:l}),...u}}function Uge(e,t,n){const{encoding:i,mark:r,markDef:s,stack:o,config:a}=e,u=gu(n),l=mi(n),c=ca(n),f=i[u],d=e.scaleName(u),h=e.getScaleComponent(u),{offset:p}=n in i||n in s?Sc({channel:n,markDef:s,encoding:i,model:e}):Sc({channel:u,markDef:s,encoding:i,model:e});if(!f&&(n==="x2"||n==="y2")&&(i.latitude||i.longitude)){const m=mi(n),y=e.markDef[m];return y!=null?{[m]:{value:y}}:{[c]:{field:e.getName(n)}}}const g=jge({channel:n,channelDef:f,channel2Def:i[n],markDef:s,config:a,scaleName:d,scale:h,stack:o,offset:p,defaultRef:void 0});return g!==void 0?{[c]:g}:cm(n,s)||cm(n,{[n]:m_(n,s,a.style),[l]:m_(l,s,a.style)})||cm(n,a[r])||cm(n,a.mark)||{[c]:Sw({model:e,defaultPos:t,channel:n,scaleName:d,scale:h})()}}function jge({channel:e,channelDef:t,channel2Def:n,markDef:i,config:r,scaleName:s,scale:o,stack:a,offset:u,defaultRef:l}){return Me(t)&&a&&e.charAt(0)===a.fieldChannel.charAt(0)?Cu(t,s,{suffix:"start"},{offset:u}):q_({channel:e,channelDef:n,scaleName:s,scale:o,stack:a,markDef:i,config:r,offset:u,defaultRef:l})}function cm(e,t){const n=mi(e),i=ca(e);if(t[i]!==void 0)return{[i]:th(e,t[i])};if(t[e]!==void 0)return{[i]:th(e,t[e])};if(t[n]){const r=t[n];if(Eu(r))Z(zde(n));else return{[n]:th(e,r)}}}function fo(e,t){const{config:n,encoding:i,markDef:r}=e,s=r.type,o=gs(t),a=mi(t),u=i[t],l=i[o],c=e.getScaleComponent(t),f=c?c.get("type"):void 0,d=r.orient,h=i[a]??i.size??gt("size",r,n,{vgChannel:a}),p=zM(t),g=s==="bar"&&(t==="x"?d==="vertical":d==="horizontal")||s==="tick"&&(t==="y"?d==="vertical":d==="horizontal");return J(u)&&(_t(u.bin)||mn(u.bin)||u.timeUnit&&!l)&&!(h&&!Eu(h))&&!i[p]&&!on(f)?Hge({fieldDef:u,fieldDef2:l,channel:t,model:e}):(Me(u)&&on(f)||g)&&!l?Wge(u,t,e):TO(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function qge(e,t,n,i,r,s,o){if(Eu(r))if(n){const u=n.get("type");if(u==="band"){let l=`bandwidth('${t}')`;r.band!==1&&(l=`${r.band} * ${l}`);const c=ys("minBandSize",{type:o},i);return{signal:c?`max(${Dr(c)}, ${l})`:l}}else r.band!==1&&(Z(Xde(u)),r=void 0)}else return{mult:r.band,field:{group:e}};else{if(me(r))return r;if(r)return{value:r}}if(n){const u=n.get("range");if(yu(u)&&Ze(u.step))return{value:u.step-2}}if(!s){const{bandPaddingInner:u,barBandPaddingInner:l,rectBandPaddingInner:c,tickBandPaddingInner:f}=i.scale,d=zt(u,o==="tick"?f:o==="bar"?l:c);if(me(d))return{signal:`(1 - (${d.signal})) * ${e}`};if(Ze(d))return{signal:`${1-d} * ${e}`}}return{value:fw(i.view,e)-2}}function Wge(e,t,n){var k,S;const{markDef:i,encoding:r,config:s,stack:o}=n,a=i.orient,u=n.scaleName(t),l=n.getScaleComponent(t),c=mi(t),f=gs(t),d=zM(t),h=n.scaleName(d),p=n.getScaleComponent(a_(t)),g=i.type==="tick"||a==="horizontal"&&t==="y"||a==="vertical"&&t==="x";let m;(r.size||i.size)&&(g?m=vn("size",n,{vgChannel:c,defaultRef:Et(i.size)}):Z(Qde(i.type)));const y=!!m,b=eR({channel:t,fieldDef:e,markDef:i,config:s,scaleType:(k=l||p)==null?void 0:k.get("type"),useVlSizeChannel:g});m=m||{[c]:qge(c,h||u,p||l,s,b,!!e,i.type)};const v=((S=l||p)==null?void 0:S.get("type"))==="band"&&Eu(b)&&!y?"top":"middle",x=DO(t,i,s,v),_=x==="xc"||x==="yc",{offset:E,offsetType:w}=Sc({channel:t,markDef:i,encoding:r,model:n,bandPosition:_?.5:0}),C=q_({channel:t,channelDef:e,markDef:i,config:s,scaleName:u,scale:l,stack:o,offset:E,defaultRef:Sw({model:n,defaultPos:"mid",channel:t,scaleName:u,scale:l}),bandPosition:_?w==="encoding"?0:.5:me(b)?{signal:`(1-${b})/2`}:Eu(b)?(1-b.band)/2:0});if(c)return{[x]:C,...m};{const $=ca(f),O=m[c],R=E?{...O,offset:E}:O;return{[x]:C,[$]:W(C)?[C[0],{...C[1],offset:R}]:{...C,offset:R}}}}function MO(e,t,n,i,r,s,o){if(NM(e))return 0;const a=e==="x"||e==="y2",u=a?-t/2:t/2;if(me(n)||me(r)||me(i)||s){const l=Dr(n),c=Dr(r),f=Dr(i),d=Dr(s),p=s?`(${o} < ${d} ? ${a?"":"-"}0.5 * (${d} - (${o})) : ${u})`:u,g=f?`${f} + `:"",m=l?`(${l} ? -1 : 1) * `:"",y=c?`(${c} + ${p})`:p;return{signal:g+m+y}}else return r=r||0,i+(n?-r-u:+r+u)}function Hge({fieldDef:e,fieldDef2:t,channel:n,model:i}){var S;const{config:r,markDef:s,encoding:o}=i,a=i.getScaleComponent(n),u=i.scaleName(n),l=a?a.get("type"):void 0,c=a.get("reverse"),f=eR({channel:n,fieldDef:e,markDef:s,config:r,scaleType:l}),d=(S=i.component.axes[n])==null?void 0:S[0],h=(d==null?void 0:d.get("translate"))??.5,p=Bt(n)?gt("binSpacing",s,r)??0:0,g=gs(n),m=ca(n),y=ca(g),b=ys("minBandSize",s,r),{offset:v}=Sc({channel:n,markDef:s,encoding:o,model:i,bandPosition:0}),{offset:x}=Sc({channel:g,markDef:s,encoding:o,model:i,bandPosition:0}),_=b0e({fieldDef:e,scaleName:u}),E=MO(n,p,c,h,v,b,_),w=MO(g,p,c,h,x??v,b,_),C=me(f)?{signal:`(1-${f.signal})/2`}:Eu(f)?(1-f.band)/2:.5,k=pa({fieldDef:e,fieldDef2:t,markDef:s,config:r});if(_t(e.bin)||e.timeUnit){const $=e.timeUnit&&k!==.5;return{[y]:NO({fieldDef:e,scaleName:u,bandPosition:C,offset:w,useRectOffsetField:$}),[m]:NO({fieldDef:e,scaleName:u,bandPosition:me(C)?{signal:`1-${C.signal}`}:1-C,offset:E,useRectOffsetField:$})}}else if(mn(e.bin)){const $=Cu(e,u,{},{offset:w});if(J(t))return{[y]:$,[m]:Cu(t,u,{},{offset:E})};if(mu(e.bin)&&e.bin.step)return{[y]:$,[m]:{signal:`scale("${u}", ${te(e,{expr:"datum"})} + ${e.bin.step})`,offset:E}}}Z(mN(g))}function NO({fieldDef:e,scaleName:t,bandPosition:n,offset:i,useRectOffsetField:r}){return U1({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:i,...r?{startSuffix:sm,endSuffix:om}:{}})}const Gge=new Set(["aria","width","height"]);function rr(e,t){const{fill:n=void 0,stroke:i=void 0}=t.color==="include"?SO(e):{};return{...Vge(e.markDef,t),...RO("fill",n),...RO("stroke",i),...vn("opacity",e),...vn("fillOpacity",e),...vn("strokeOpacity",e),...vn("strokeWidth",e),...vn("strokeDash",e),...Ige(e),...kO(e),...$w(e,"href"),...Rge(e)}}function RO(e,t){return t?{[e]:t}:{}}function Vge(e,t){return lde.reduce((n,i)=>(!Gge.has(i)&&X(e,i)&&t[i]!=="ignore"&&(n[i]=Et(e[i])),n),{})}function Fw(e){const{config:t,markDef:n}=e,i=new Set;if(e.forEachFieldDef((r,s)=>{var l;let o;if(!ms(s)||!(o=e.getScaleType(s)))return;const a=D1(r.aggregate),u=j_({scaleChannel:s,markDef:n,config:t,scaleType:o,isCountAggregate:a});if(g0e(u)){const c=e.vgField(s,{expr:"datum",binSuffix:(l=e.stack)!=null&&l.impute?"mid":void 0});c&&i.add(c)}}),i.size>0)return{defined:{signal:[...i].map(s=>O1(s,!0)).join(" && ")}}}function OO(e,t){if(t!==void 0)return{[e]:Et(t)}}const Dw="voronoi",LO={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(Dw)},marks:(e,t,n)=>{const{x:i,y:r}=t.project.hasChannel,s=e.mark;if(ha(s))return Z(gde(s)),n;const o={name:e.getName(Dw),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...kO(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:i||!r?"datum.datum.x || 0":"0"},y:{expr:r||!i?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let a=0,u=!1;return n.forEach((l,c)=>{const f=l.name??"";f===e.component.mark[0].name?a=c:f.includes(Dw)&&(u=!0)}),u||n.splice(a+1,0,o),n}},IO={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!sw(e.bind),parse:(e,t,n)=>VO(t,n),topLevelSignals:(e,t,n)=>{const i=t.name,r=t.project,s=t.bind,o=t.init&&t.init[0],a=LO.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return r.items.forEach((u,l)=>{const c=At(`${i}_${u.field}`);n.filter(d=>d.name===c).length||n.unshift({name:c,...o?{init:Su(o[l])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${a}[${Q(u.field)}] : null`}]:[],bind:s[u.field]??s[u.channel]??s})}),n},signals:(e,t,n)=>{const i=t.name,r=t.project,s=n.find(l=>l.name===i+ho),o=i+lh,a=r.items.map(l=>At(`${i}_${l.field}`)),u=a.map(l=>`${l} !== null`).join(" && ");return a.length&&(s.update=`${u} ? {fields: ${o}, values: [${a.join(", ")}]} : null`),delete s.value,delete s.on,n}},fm="_toggle",PO={defined:e=>e.type==="point"&&!ks(e)&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+fm,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+ho,i=t.name+fm;return`${i} ? null : ${n}, `+(t.resolve==="global"?`${i} ? null : true, `:`${i} ? null : {unit: ${Du(e)}}, `)+`${i} ? ${n} : null`}},Yge={defined:e=>e.clear!==void 0&&e.clear!==!1&&!ks(e),parse:(e,t)=>{t.clear&&(t.clear=se(t.clear)?ta(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(IO.defined(t))for(const i of t.project.items){const r=n.findIndex(s=>s.name===At(`${t.name}_${i.field}`));r!==-1&&n[r].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function i(r,s){r!==-1&&n[r].on&&n[r].on.push({events:t.clear,update:s})}if(t.type==="interval")for(const r of t.project.items){const s=n.findIndex(o=>o.name===r.signals.visual);if(i(s,"[0, 0]"),s===-1){const o=n.findIndex(a=>a.name===r.signals.data);i(o,"null")}}else{let r=n.findIndex(s=>s.name===t.name+ho);i(r,"null"),PO.defined(t)&&(r=n.findIndex(s=>s.name===t.name+fm),i(r,"false"))}return n}},zO={defined:e=>{const t=e.resolve==="global"&&e.bind&&sw(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==Or;return t&&!n&&Z(vde),t&&n},parse:(e,t,n)=>{const i=De(n);if(i.select=se(i.select)?{type:i.select,toggle:t.toggle}:{...i.select,toggle:t.toggle},VO(t,i),re(n.select)&&(n.select.on||n.select.clear)){const o='event.item && indexof(event.item.mark.role, "legend") < 0';for(const a of t.events)a.filter=oe(a.filter??[]),a.filter.includes(o)||a.filter.push(o)}const r=ow(t.bind)?t.bind.legend:"click",s=se(r)?ta(r,"view"):oe(r);t.bind={legend:{merge:s}}},topLevelSignals:(e,t,n)=>{const i=t.name,r=ow(t.bind)&&t.bind.legend,s=o=>a=>{const u=De(a);return u.markname=o,u};for(const o of t.project.items){if(!o.hasLegend)continue;const a=`${At(o.field)}_legend`,u=`${i}_${a}`;if(n.filter(c=>c.name===u).length===0){const c=r.merge.map(s(`${a}_symbols`)).concat(r.merge.map(s(`${a}_labels`))).concat(r.merge.map(s(`${a}_entries`)));n.unshift({name:u,...t.init?{}:{value:null},on:[{events:c,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:r.merge,update:`!event.item || !datum ? null : ${u}`,force:!0}]})}}return n},signals:(e,t,n)=>{const i=t.name,r=t.project,s=n.find(d=>d.name===i+ho),o=i+lh,a=r.items.filter(d=>d.hasLegend).map(d=>At(`${i}_${At(d.field)}_legend`)),l=`${a.map(d=>`${d} !== null`).join(" && ")} ? {fields: ${o}, values: [${a.join(", ")}]} : null`;t.events&&a.length>0?s.on.push({events:a.map(d=>({signal:d})),update:l}):a.length>0&&(s.update=l,delete s.value,delete s.on);const c=n.find(d=>d.name===i+fm),f=ow(t.bind)&&t.bind.legend;return c&&(t.events?c.on.push({...c.on[0],events:f}):c.on[0].events=f),n}};function Xge(e,t,n){var r;const i=(r=e.fieldDef(t))==null?void 0:r.field;for(const s of gn(e.component.selection??{})){const o=s.project.hasField[i]??s.project.hasChannel[t];if(o&&zO.defined(s)){const a=n.get("selections")??[];a.push(s.name),n.set("selections",a,!1),o.hasLegend=!0}}}const BO="_translate_anchor",UO="_translate_delta",Kge={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{const i=t.name,r=co.defined(t),s=i+BO,{x:o,y:a}=t.project.hasChannel;let u=ta(t.translate,"scope");return r||(u=u.map(l=>(l.between[0].markname=i+Ac,l))),n.push({name:s,value:{},on:[{events:u.map(l=>l.between[0]),update:"{x: x(unit), y: y(unit)"+(o!==void 0?`, extent_x: ${r?kw(e,$t):`slice(${o.signals.visual})`}`:"")+(a!==void 0?`, extent_y: ${r?kw(e,rn):`slice(${a.signals.visual})`}`:"")+"}"}]},{name:i+UO,value:{},on:[{events:u,update:`{x: ${s}.x - x(unit), y: ${s}.y - y(unit)}`}]}),o!==void 0&&jO(e,t,o,"width",n),a!==void 0&&jO(e,t,a,"height",n),n}};function jO(e,t,n,i,r){const s=t.name,o=s+BO,a=s+UO,u=n.channel,l=co.defined(t),c=r.find(_=>_.name===n.signals[l?"data":"visual"]),f=e.getSizeSignalRef(i).signal,d=e.getScaleComponent(u),h=d&&d.get("type"),p=d&&d.get("reverse"),g=l?u===$t?p?"":"-":p?"-":"":"",m=`${o}.extent_${u}`,y=`${g}${a}.${u} / ${l?`${f}`:`span(${m})`}`,b=!l||!d?"panLinear":h==="log"?"panLog":h==="symlog"?"panSymlog":h==="pow"?"panPow":"panLinear",v=l?h==="pow"?`, ${d.get("exponent")??1}`:h==="symlog"?`, ${d.get("constant")??1}`:"":"",x=`${b}(${m}, ${y}${v})`;c.on.push({events:{signal:a},update:l?x:`clampRange(${x}, 0, ${f})`})}const qO="_zoom_anchor",WO="_zoom_delta",Zge={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{const i=t.name,r=co.defined(t),s=i+WO,{x:o,y:a}=t.project.hasChannel,u=Q(e.scaleName($t)),l=Q(e.scaleName(rn));let c=ta(t.zoom,"scope");return r||(c=c.map(f=>(f.markname=i+Ac,f))),n.push({name:i+qO,on:[{events:c,update:r?"{"+[u?`x: invert(${u}, x(unit))`:"",l?`y: invert(${l}, y(unit))`:""].filter(f=>f).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:s,on:[{events:c,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),o!==void 0&&HO(e,t,o,"width",n),a!==void 0&&HO(e,t,a,"height",n),n}};function HO(e,t,n,i,r){const s=t.name,o=n.channel,a=co.defined(t),u=r.find(b=>b.name===n.signals[a?"data":"visual"]),l=e.getSizeSignalRef(i).signal,c=e.getScaleComponent(o),f=c&&c.get("type"),d=a?kw(e,o):u.name,h=s+WO,p=`${s}${qO}.${o}`,g=!a||!c?"zoomLinear":f==="log"?"zoomLog":f==="symlog"?"zoomSymlog":f==="pow"?"zoomPow":"zoomLinear",m=a?f==="pow"?`, ${c.get("exponent")??1}`:f==="symlog"?`, ${c.get("constant")??1}`:"":"",y=`${g}(${d}, ${p}, ${h}${m})`;u.on.push({events:{signal:h},update:a?y:`clampRange(${y}, 0, ${l})`})}const Fu="_store",ho="_tuple",Jge="_modify",GO="vlSelectionResolve",dm=[Cge,Mge,_ge,PO,IO,co,zO,Yge,Kge,Zge,LO];function Qge(e){let t=e.parent;for(;t&&!Oi(t);)t=t.parent;return t}function Du(e,{escape:t}={escape:!0}){let n=t?Q(e.name):e.name;const i=Qge(e);if(i){const{facet:r}=i;for(const s of ir)r[s]&&(n+=` + '__facet_${s}_' + (facet[${Q(i.vgField(s))}])`)}return n}function Tw(e){return gn(e.component.selection??{}).reduce((t,n)=>t||n.project.hasSelectionId,!1)}function VO(e,t){(se(t.select)||!t.select.on)&&delete e.events,(se(t.select)||!t.select.clear)&&delete e.clear,(se(t.select)||!t.select.toggle)&&delete e.toggle}function ks(e){var t;return(t=e.events)==null?void 0:t.find(n=>"type"in n&&n.type==="timer")}const e1e="RawCode",t1e="Literal",n1e="Property",i1e="Identifier",r1e="ArrayExpression",s1e="BinaryExpression",o1e="CallExpression",a1e="ConditionalExpression",u1e="LogicalExpression",l1e="MemberExpression",c1e="ObjectExpression",f1e="UnaryExpression";function Lr(e){this.type=e}Lr.prototype.visit=function(e){let t,n,i;if(e(this))return 1;for(t=d1e(this),n=0,i=t.length;n<i;++n)if(t[n].visit(e))return 1};function d1e(e){switch(e.type){case r1e:return e.elements;case s1e:case u1e:return[e.left,e.right];case o1e:return[e.callee].concat(e.arguments);case a1e:return[e.test,e.consequent,e.alternate];case l1e:return[e.object,e.property];case c1e:return e.properties;case n1e:return[e.key,e.value];case f1e:return[e.argument];case i1e:case t1e:case e1e:default:return[]}}var As,ge,j,On,lt,hm=1,fh=2,Tu=3,ba=4,pm=5,Mu=6,bi=7,dh=8,h1e=9;As={},As[hm]="Boolean",As[fh]="<end>",As[Tu]="Identifier",As[ba]="Keyword",As[pm]="Null",As[Mu]="Numeric",As[bi]="Punctuator",As[dh]="String",As[h1e]="RegularExpression";var p1e="ArrayExpression",g1e="BinaryExpression",m1e="CallExpression",y1e="ConditionalExpression",YO="Identifier",b1e="Literal",v1e="LogicalExpression",x1e="MemberExpression",_1e="ObjectExpression",w1e="Property",E1e="UnaryExpression",an="Unexpected token %0",C1e="Unexpected number",k1e="Unexpected string",A1e="Unexpected identifier",$1e="Unexpected reserved word",S1e="Unexpected end of input",Mw="Invalid regular expression",Nw="Invalid regular expression: missing /",XO="Octal literals are not allowed in strict mode.",F1e="Duplicate data property in object literal not allowed in strict mode",xn="ILLEGAL",hh="Disabled.",D1e=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),T1e=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function gm(e,t){if(!e)throw new Error("ASSERT: "+t)}function po(e){return e>=48&&e<=57}function Rw(e){return"0123456789abcdefABCDEF".includes(e)}function ph(e){return"01234567".includes(e)}function M1e(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(e)}function gh(e){return e===10||e===13||e===8232||e===8233}function mh(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&D1e.test(String.fromCharCode(e))}function mm(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&T1e.test(String.fromCharCode(e))}const N1e={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function KO(){for(;j<On;){const e=ge.charCodeAt(j);if(M1e(e)||gh(e))++j;else break}}function Ow(e){var t,n,i,r=0;for(n=e==="u"?4:2,t=0;t<n;++t)j<On&&Rw(ge[j])?(i=ge[j++],r=r*16+"0123456789abcdef".indexOf(i.toLowerCase())):tt({},an,xn);return String.fromCharCode(r)}function R1e(){var e,t,n,i;for(e=ge[j],t=0,e==="}"&&tt({},an,xn);j<On&&(e=ge[j++],!!Rw(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&tt({},an,xn),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,i=(t-65536&1023)+56320,String.fromCharCode(n,i))}function ZO(){var e,t;for(e=ge.charCodeAt(j++),t=String.fromCharCode(e),e===92&&(ge.charCodeAt(j)!==117&&tt({},an,xn),++j,e=Ow("u"),(!e||e==="\\"||!mh(e.charCodeAt(0)))&&tt({},an,xn),t=e);j<On&&(e=ge.charCodeAt(j),!!mm(e));)++j,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),ge.charCodeAt(j)!==117&&tt({},an,xn),++j,e=Ow("u"),(!e||e==="\\"||!mm(e.charCodeAt(0)))&&tt({},an,xn),t+=e);return t}function O1e(){var e,t;for(e=j++;j<On;){if(t=ge.charCodeAt(j),t===92)return j=e,ZO();if(mm(t))++j;else break}return ge.slice(e,j)}function L1e(){var e,t,n;return e=j,t=ge.charCodeAt(j)===92?ZO():O1e(),t.length===1?n=Tu:N1e.hasOwnProperty(t)?n=ba:t==="null"?n=pm:t==="true"||t==="false"?n=hm:n=Tu,{type:n,value:t,start:e,end:j}}function Lw(){var e=j,t=ge.charCodeAt(j),n,i=ge[j],r,s,o;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++j,{type:bi,value:String.fromCharCode(t),start:e,end:j};default:if(n=ge.charCodeAt(j+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return j+=2,{type:bi,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:j};case 33:case 61:return j+=2,ge.charCodeAt(j)===61&&++j,{type:bi,value:ge.slice(e,j),start:e,end:j}}}if(o=ge.substr(j,4),o===">>>=")return j+=4,{type:bi,value:o,start:e,end:j};if(s=o.substr(0,3),s===">>>"||s==="<<="||s===">>=")return j+=3,{type:bi,value:s,start:e,end:j};if(r=s.substr(0,2),i===r[1]&&"+-<>&|".includes(i)||r==="=>")return j+=2,{type:bi,value:r,start:e,end:j};if(r==="//"&&tt({},an,xn),"<>=!+-*%&|^/".includes(i))return++j,{type:bi,value:i,start:e,end:j};tt({},an,xn)}function I1e(e){let t="";for(;j<On&&Rw(ge[j]);)t+=ge[j++];return t.length===0&&tt({},an,xn),mh(ge.charCodeAt(j))&&tt({},an,xn),{type:Mu,value:parseInt("0x"+t,16),start:e,end:j}}function P1e(e){let t="0"+ge[j++];for(;j<On&&ph(ge[j]);)t+=ge[j++];return(mh(ge.charCodeAt(j))||po(ge.charCodeAt(j)))&&tt({},an,xn),{type:Mu,value:parseInt(t,8),octal:!0,start:e,end:j}}function JO(){var e,t,n;if(n=ge[j],gm(po(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=j,e="",n!=="."){if(e=ge[j++],n=ge[j],e==="0"){if(n==="x"||n==="X")return++j,I1e(t);if(ph(n))return P1e(t);n&&po(n.charCodeAt(0))&&tt({},an,xn)}for(;po(ge.charCodeAt(j));)e+=ge[j++];n=ge[j]}if(n==="."){for(e+=ge[j++];po(ge.charCodeAt(j));)e+=ge[j++];n=ge[j]}if(n==="e"||n==="E")if(e+=ge[j++],n=ge[j],(n==="+"||n==="-")&&(e+=ge[j++]),po(ge.charCodeAt(j)))for(;po(ge.charCodeAt(j));)e+=ge[j++];else tt({},an,xn);return mh(ge.charCodeAt(j))&&tt({},an,xn),{type:Mu,value:parseFloat(e),start:t,end:j}}function z1e(){var e="",t,n,i,r,s=!1;for(t=ge[j],gm(t==="'"||t==='"',"String literal must starts with a quote"),n=j,++j;j<On;)if(i=ge[j++],i===t){t="";break}else if(i==="\\")if(i=ge[j++],!i||!gh(i.charCodeAt(0)))switch(i){case"u":case"x":ge[j]==="{"?(++j,e+=R1e()):e+=Ow(i);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:ph(i)?(r="01234567".indexOf(i),r!==0&&(s=!0),j<On&&ph(ge[j])&&(s=!0,r=r*8+"01234567".indexOf(ge[j++]),"0123".includes(i)&&j<On&&ph(ge[j])&&(r=r*8+"01234567".indexOf(ge[j++]))),e+=String.fromCharCode(r)):e+=i;break}else i==="\r"&&ge[j]===`
`&&++j;else{if(gh(i.charCodeAt(0)))break;e+=i}return t!==""&&tt({},an,xn),{type:dh,value:e,octal:s,start:n,end:j}}function B1e(e,t){let n=e;t.includes("u")&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(i,r)=>{if(parseInt(r,16)<=1114111)return"x";tt({},Mw)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{tt({},Mw)}try{return new RegExp(e,t)}catch{return null}}function U1e(){var e,t,n,i,r;for(e=ge[j],gm(e==="/","Regular expression literal must start with a slash"),t=ge[j++],n=!1,i=!1;j<On;)if(e=ge[j++],t+=e,e==="\\")e=ge[j++],gh(e.charCodeAt(0))&&tt({},Nw),t+=e;else if(gh(e.charCodeAt(0)))tt({},Nw);else if(n)e==="]"&&(n=!1);else if(e==="/"){i=!0;break}else e==="["&&(n=!0);return i||tt({},Nw),r=t.substr(1,t.length-2),{value:r,literal:t}}function j1e(){var e,t,n;for(t="",n="";j<On&&(e=ge[j],!!mm(e.charCodeAt(0)));)++j,e==="\\"&&j<On?tt({},an,xn):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&tt({},Mw,n),{value:n,literal:t}}function q1e(){var e,t,n,i;return lt=null,KO(),e=j,t=U1e(),n=j1e(),i=B1e(t.value,n.value),{literal:t.literal+n.literal,value:i,regex:{pattern:t.value,flags:n.value},start:e,end:j}}function W1e(e){return e.type===Tu||e.type===ba||e.type===hm||e.type===pm}function QO(){if(KO(),j>=On)return{type:fh,start:j,end:j};const e=ge.charCodeAt(j);return mh(e)?L1e():e===40||e===41||e===59?Lw():e===39||e===34?z1e():e===46?po(ge.charCodeAt(j+1))?JO():Lw():po(e)?JO():Lw()}function vi(){const e=lt;return j=e.end,lt=QO(),j=e.end,e}function eL(){const e=j;lt=QO(),j=e}function H1e(e){const t=new Lr(p1e);return t.elements=e,t}function tL(e,t,n){const i=new Lr(e==="||"||e==="&&"?v1e:g1e);return i.operator=e,i.left=t,i.right=n,i}function G1e(e,t){const n=new Lr(m1e);return n.callee=e,n.arguments=t,n}function V1e(e,t,n){const i=new Lr(y1e);return i.test=e,i.consequent=t,i.alternate=n,i}function Iw(e){const t=new Lr(YO);return t.name=e,t}function yh(e){const t=new Lr(b1e);return t.value=e.value,t.raw=ge.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function nL(e,t,n){const i=new Lr(x1e);return i.computed=e==="[",i.object=t,i.property=n,i.computed||(n.member=!0),i}function Y1e(e){const t=new Lr(_1e);return t.properties=e,t}function iL(e,t,n){const i=new Lr(w1e);return i.key=t,i.value=n,i.kind=e,i}function X1e(e,t){const n=new Lr(E1e);return n.operator=e,n.argument=t,n.prefix=!0,n}function tt(e,t){var n,i=Array.prototype.slice.call(arguments,2),r=t.replace(/%(\d)/g,(s,o)=>(gm(o<i.length,"Message reference must be in range"),i[o]));throw n=new Error(r),n.index=j,n.description=r,n}function ym(e){e.type===fh&&tt(e,S1e),e.type===Mu&&tt(e,C1e),e.type===dh&&tt(e,k1e),e.type===Tu&&tt(e,A1e),e.type===ba&&tt(e,$1e),tt(e,an,e.value)}function Ln(e){const t=vi();(t.type!==bi||t.value!==e)&&ym(t)}function Ct(e){return lt.type===bi&&lt.value===e}function Pw(e){return lt.type===ba&&lt.value===e}function K1e(){const e=[];for(j=lt.start,Ln("[");!Ct("]");)Ct(",")?(vi(),e.push(null)):(e.push(Nu()),Ct("]")||Ln(","));return vi(),H1e(e)}function rL(){j=lt.start;const e=vi();return e.type===dh||e.type===Mu?(e.octal&&tt(e,XO),yh(e)):Iw(e.value)}function Z1e(){var e,t,n,i;if(j=lt.start,e=lt,e.type===Tu)return n=rL(),Ln(":"),i=Nu(),iL("init",n,i);if(e.type===fh||e.type===bi)ym(e);else return t=rL(),Ln(":"),i=Nu(),iL("init",t,i)}function J1e(){var e=[],t,n,i,r={},s=String;for(j=lt.start,Ln("{");!Ct("}");)t=Z1e(),t.key.type===YO?n=t.key.name:n=s(t.key.value),i="$"+n,Object.prototype.hasOwnProperty.call(r,i)?tt({},F1e):r[i]=!0,e.push(t),Ct("}")||Ln(",");return Ln("}"),Y1e(e)}function Q1e(){Ln("(");const e=zw();return Ln(")"),e}const eme={if:1};function tme(){var e,t,n;if(Ct("("))return Q1e();if(Ct("["))return K1e();if(Ct("{"))return J1e();if(e=lt.type,j=lt.start,e===Tu||eme[lt.value])n=Iw(vi().value);else if(e===dh||e===Mu)lt.octal&&tt(lt,XO),n=yh(vi());else{if(e===ba)throw new Error(hh);e===hm?(t=vi(),t.value=t.value==="true",n=yh(t)):e===pm?(t=vi(),t.value=null,n=yh(t)):Ct("/")||Ct("/=")?(n=yh(q1e()),eL()):ym(vi())}return n}function nme(){const e=[];if(Ln("("),!Ct(")"))for(;j<On&&(e.push(Nu()),!Ct(")"));)Ln(",");return Ln(")"),e}function ime(){j=lt.start;const e=vi();return W1e(e)||ym(e),Iw(e.value)}function rme(){return Ln("."),ime()}function sme(){Ln("[");const e=zw();return Ln("]"),e}function ome(){var e,t,n;for(e=tme();;)if(Ct("."))n=rme(),e=nL(".",e,n);else if(Ct("("))t=nme(),e=G1e(e,t);else if(Ct("["))n=sme(),e=nL("[",e,n);else break;return e}function sL(){const e=ome();if(lt.type===bi&&(Ct("++")||Ct("--")))throw new Error(hh);return e}function bm(){var e,t;if(lt.type!==bi&&lt.type!==ba)t=sL();else{if(Ct("++")||Ct("--"))throw new Error(hh);if(Ct("+")||Ct("-")||Ct("~")||Ct("!"))e=vi(),t=bm(),t=X1e(e.value,t);else{if(Pw("delete")||Pw("void")||Pw("typeof"))throw new Error(hh);t=sL()}}return t}function oL(e){let t=0;if(e.type!==bi&&e.type!==ba)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function ame(){var e,t,n,i,r,s,o,a,u,l;if(e=lt,u=bm(),i=lt,r=oL(i),r===0)return u;for(i.prec=r,vi(),t=[e,lt],o=bm(),s=[u,i,o];(r=oL(lt))>0;){for(;s.length>2&&r<=s[s.length-2].prec;)o=s.pop(),a=s.pop().value,u=s.pop(),t.pop(),n=tL(a,u,o),s.push(n);i=vi(),i.prec=r,s.push(i),t.push(lt),n=bm(),s.push(n)}for(l=s.length-1,n=s[l],t.pop();l>1;)t.pop(),n=tL(s[l-1].value,s[l-2],n),l-=2;return n}function Nu(){var e,t,n;return e=ame(),Ct("?")&&(vi(),t=Nu(),Ln(":"),n=Nu(),e=V1e(e,t,n)),e}function zw(){const e=Nu();if(Ct(","))throw new Error(hh);return e}function ume(e){ge=e,j=0,On=ge.length,lt=null,eL();const t=zw();if(lt.type!==fh)throw new Error("Unexpect token after expression.");return t}function Bw(e){const t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...Bw(e.object)),t.push(...Bw(e.property))),t)}function aL(e){return e.object.type==="MemberExpression"?aL(e.object):e.object.name==="datum"}function uL(e){const t=ume(e),n=new Set;return t.visit(i=>{i.type==="MemberExpression"&&aL(i)&&n.add(Bw(i).slice(1).join("."))}),n}class Fc extends ut{clone(){return new Fc(null,this.model,De(this.filter))}constructor(t,n,i){super(t),this.model=n,this.filter=i,this.expr=vm(this.model,this.filter,this),this._dependentFields=uL(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function lme(e,t){const n={},i=e.config.selection;if(!t||!t.length)return n;let r=0;for(const s of t){const o=At(s.name),a=s.select,u=se(a)?a:a.type,l=re(a)?De(a):{type:u},c=i[u];for(const h in c)h==="fields"||h==="encodings"||(h==="mark"&&(l.mark={...c.mark,...l.mark}),(l[h]===void 0||l[h]===!0)&&(l[h]=De(c[h]??l[h])));const f=n[o]={...l,name:o,type:u,init:s.value,bind:s.bind,events:se(l.on)?ta(l.on,"scope"):oe(De(l.on))};if(ks(f)&&(r++,r>1)){delete n[o];continue}const d=De(s);for(const h of dm)h.defined(f)&&h.parse&&h.parse(e,f,d)}return r>1&&Z(kde),n}function lL(e,t,n,i="datum"){const r=se(t)?t:t.param,s=At(r),o=Q(s+Fu);let a;try{a=e.getSelectionComponent(s,r)}catch{return`!!${s}`}if(a.project.timeUnit){const d=n??e.component.data.raw,h=a.project.timeUnit.clone();d.parent?h.insertAsParentOf(d):d.parent=h}const u=a.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",l=a.resolve==="global"?")":`, ${Q(a.resolve)})`,c=`${u}${o}, ${i}${l}`,f=`length(data(${o}))`;return t.empty===!1?`${f} && ${c}`:`!${f} || ${c}`}function cL(e,t,n){const i=At(t),r=n.encoding;let s=n.field,o;try{o=e.getSelectionComponent(i,t)}catch{return i}if(!r&&!s)s=o.project.items[0].field,o.project.items.length>1&&Z(Ade(s));else if(r&&!s){const a=o.project.items.filter(u=>u.channel===r);!a.length||a.length>1?(s=o.project.items[0].field,Z($de(a,r,n,s))):s=a[0].field}return`${o.name}[${Q(er(s))}]`}function cme(e,t){for(const[n,i]of ia(e.component.selection??{})){const r=e.getName(`lookup_${n}`);e.component.data.outputNodes[r]=i.materialized=new yi(new Fc(t,e,{param:n}),r,Ft.Lookup,e.component.data.outputNodeRefCounts)}}function vm(e,t,n){return Gd(t,i=>se(i)?i:Lhe(i)?lL(e,i,n):SN(i))}function fme(e,t){if(e)return W(e)&&!da(e)?e.map(n=>K_(n,t)).join(", "):e}function Uw(e,t,n,i){var r,s;e.encode??(e.encode={}),(r=e.encode)[t]??(r[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=i}function bh(e,t,n,i={header:!1}){var f,d;const{disable:r,orient:s,scale:o,labelExpr:a,title:u,zindex:l,...c}=e.combine();if(!r){for(const h in c){const p=h,g=P0e[p],m=c[p];if(g&&g!==t&&g!=="both")delete c[p];else if(ah(m)){const{condition:y,...b}=m,v=oe(y),x=fR[p];if(x){const{vgProp:_,part:E}=x,w=[...v.map(C=>{const{test:k,...S}=C;return{test:vm(null,k),...S}}),b];Uw(c,E,_,w),delete c[p]}else if(x===null){const _={signal:v.map(E=>{const{test:w,...C}=E;return`${vm(null,w)} ? ${XM(C)} : `}).join("")+XM(b)};c[p]=_}}else if(me(m)){const y=fR[p];if(y){const{vgProp:b,part:v}=y;Uw(c,v,b,m),delete c[p]}}qe(["labelAlign","labelBaseline"],p)&&c[p]===null&&delete c[p]}if(t==="grid"){if(!c.grid)return;if(c.encode){const{grid:h}=c.encode;c.encode={...h?{grid:h}:{}},ht(c.encode)&&delete c.encode}return{scale:o,orient:s,...c,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:zt(l,0)}}else{if(!i.header&&e.mainExtracted)return;if(a!==void 0){let p=a;(d=(f=c.encode)==null?void 0:f.labels)!=null&&d.update&&me(c.encode.labels.update.text)&&(p=du(a,"datum.label",c.encode.labels.update.text.signal)),Uw(c,"labels","text",{signal:p})}if(c.labelAlign===null&&delete c.labelAlign,c.encode){for(const p of dR)e.hasAxisPart(p)||delete c.encode[p];ht(c.encode)&&delete c.encode}const h=fme(u,n);return{scale:o,orient:s,grid:!1,...h?{title:h}:{},...c,...n.aria===!1?{aria:!1}:{},zindex:zt(l,0)}}}}function fL(e){const{axes:t}=e.component,n=[];for(const i of io)if(t[i]){for(const r of t[i])if(!r.get("disable")&&!r.get("gridScale")){const s=i==="x"?"height":"width",o=e.getSizeSignalRef(s).signal;s!==o&&n.push({name:s,update:o})}}return n}function dme(e,t){const{x:n=[],y:i=[]}=e;return[...n.map(r=>bh(r,"grid",t)),...i.map(r=>bh(r,"grid",t)),...n.map(r=>bh(r,"main",t)),...i.map(r=>bh(r,"main",t))].filter(r=>r)}function dL(e,t,n,i){return Object.assign.apply(null,[{},...e.map(r=>{if(r==="axisOrient"){const s=n==="x"?"bottom":"left",o=t[n==="x"?"axisBottom":"axisLeft"]||{},a=t[n==="x"?"axisTop":"axisRight"]||{},u=new Set([...Y(o),...Y(a)]),l={};for(const c of u.values())l[c]={signal:`${i.signal} === "${s}" ? ${Dr(o[c])} : ${Dr(a[c])}`};return l}return t[r]})])}function hme(e,t,n,i){const r=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:NN(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],s=e==="x"?"axisX":"axisY",o=me(n)?"axisOrient":`axis${Vd(n)}`,a=[...r,...r.map(l=>s+l.substr(4))],u=["axis",o,s];return{vlOnlyAxisConfig:dL(a,i,e,n),vgAxisConfig:dL(u,i,e,n),axisConfigStyle:pme([...u,...a],i)}}function pme(e,t){var i;const n=[{}];for(const r of e){let s=(i=t[r])==null?void 0:i.style;if(s){s=oe(s);for(const o of s)n.push(t.style[o])}}return Object.assign.apply(null,n)}function jw(e,t,n,i={}){var s;const r=ZM(e,n,t);if(r!==void 0)return{configFrom:"style",configValue:r};for(const o of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(((s=i[o])==null?void 0:s[e])!==void 0)return{configFrom:o,configValue:i[o][e]};return{}}const hL={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??gme(n,e),gridScale:({model:e,channel:t})=>mme(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:i})=>e.labelAlign||gL(t,n,i),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:i})=>e.labelBaseline||pL(t,n,i),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??bme(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??vme(t.type,n,J(t)&&!!t.timeUnit,J(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:i,scaleType:r})=>{const s=e==="x"?"width":e==="y"?"height":void 0,o=s?t.getSizeSignalRef(s):void 0;return n.tickCount??_me({fieldOrDatumDef:i,scaleType:r,size:o,values:n.values})},tickMinStep:wme,title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;const i=mL(t,n);if(i!==void 0)return i;const r=t.typedFieldDef(n),s=n==="x"?"x2":"y2",o=t.fieldDef(s);return QM(r?[QN(r)]:[],J(o)?[QN(o)]:[])},values:({axis:e,fieldOrDatumDef:t})=>Eme(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??Cme(n,t)};function gme(e,t){return!on(e)&&J(t)&&!_t(t==null?void 0:t.bin)&&!mn(t==null?void 0:t.bin)}function mme(e,t){const n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function yme(e,t,n,i,r){const s=t==null?void 0:t.labelAngle;if(s!==void 0)return me(s)?s:Yd(s);{const{configValue:o}=jw("labelAngle",i,t==null?void 0:t.style,r);return o!==void 0?Yd(o):n===$t&&qe([R_,N_],e.type)&&!(J(e)&&e.timeUnit)?270:void 0}}function qw(e){return`(((${e.signal} % 360) + 360) % 360)`}function pL(e,t,n,i){if(e!==void 0)if(n==="x"){if(me(e)){const r=qw(e),s=me(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${r} && ${r} < 135) || (225 < ${r} && ${r} < 315) ? "middle" :(${r} <= 45 || 315 <= ${r}) === ${s} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(me(t)){const r=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${r} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if(me(e)){const r=qw(e),s=me(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${r} <= 45 || 315 <= ${r} || (135 <= ${r} && ${r} <= 225) ? ${i?'"middle"':"null"} : (45 <= ${r} && ${r} <= 135) === ${s} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return i?"middle":null;if(me(t)){const r=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${r} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function gL(e,t,n){if(e===void 0)return;const i=n==="x",r=i?0:90,s=i?"bottom":"left";if(me(e)){const o=qw(e),a=me(t)?`(${t.signal} === "${s}")`:t===s;return{signal:`(${r?`(${o} + 90)`:o} % 180 === 0) ? ${i?null:'"center"'} :(${r} < ${o} && ${o} < ${180+r}) === ${a} ? "left" : "right"`}}if((e+r)%180===0)return i?null:"center";if(me(t)){const o=r<e&&e<180+r?"===":"!==";return{signal:`${`${t.signal} ${o} "${s}"`} ? "left" : "right"`}}return(r<e&&e<180+r)==(t===s)?"left":"right"}function bme(e,t){if(t==="x"&&qe(["quantitative","temporal"],e))return!0}function vme(e,t,n,i){if(n&&!re(i)||e!=="nominal"&&e!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function xme(e){return e==="x"?"bottom":"left"}function _me({fieldOrDatumDef:e,scaleType:t,size:n,values:i}){var r;if(!i&&!on(t)&&t!=="log"){if(J(e)){if(_t(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&qe(["month","hours","day","quarter"],(r=sn(e.timeUnit))==null?void 0:r.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function wme({format:e,fieldOrDatumDef:t}){if(e==="d")return 1;if(J(t)){const{timeUnit:n}=t;if(n){const i=kN(n);if(i)return{signal:i}}}}function mL(e,t){const n=t==="x"?"x2":"y2",i=e.fieldDef(t),r=e.fieldDef(n),s=i?i.title:void 0,o=r?r.title:void 0;if(s&&o)return eN(s,o);if(s)return s;if(o)return o;if(s!==void 0)return s;if(o!==void 0)return o}function Eme(e,t){const n=e.values;if(W(n))return cR(t,n);if(me(n))return n}function Cme(e,t){return e==="rect"&&G1(t)?1:0}class Dc extends ut{clone(){return new Dc(null,De(this.transform))}constructor(t,n){super(t),this.transform=n,this._dependentFields=uL(this.transform.calculate)}static parseAllForSortIndex(t,n){return n.forEachFieldDef((i,r)=>{if(Au(i)&&JN(i.sort)){const{field:s,timeUnit:o}=i,a=i.sort,u=a.map((l,c)=>`${SN({field:s,timeUnit:o,equal:l})} ? ${c} : `).join("")+a.length;t=new Dc(t,{calculate:u,as:Tc(i,r,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${We(this.transform)}`}}function Tc(e,t,n){return te(e,{prefix:t,suffix:"sort_index",...n})}function xm(e,t){return qe(["top","bottom"],t)?"column":qe(["left","right"],t)||e==="row"?"row":"column"}function Mc(e,t,n,i){const r=i==="row"?n.headerRow:i==="column"?n.headerColumn:n.headerFacet;return zt((t||{})[e],r[e],n.header[e])}function _m(e,t,n,i){const r={};for(const s of e){const o=Mc(s,t||{},n,i);o!==void 0&&(r[s]=o)}return r}const Ww=["row","column"],Hw=["header","footer"];function kme(e,t){const n=e.component.layoutHeaders[t].title,i=e.config?e.config:void 0,r=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:s,titleAngle:o,titleOrient:a}=_m(["titleAnchor","titleAngle","titleOrient"],r.header,i,t),u=xm(t,a),l=Yd(o);return{name:`${t}-title`,type:"group",role:`${u}-title`,title:{text:n,...t==="row"?{orient:"left"}:{},style:"guide-title",...bL(l,u),...yL(u,l,s),...vL(i,r,t,spe,MR)}}}function yL(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const i=gL(t,e==="row"?"left":"top",e==="row"?"y":"x");return i?{align:i}:{}}function bL(e,t){const n=pL(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function Ame(e,t){const n=e.component.layoutHeaders[t],i=[];for(const r of Hw)if(n[r])for(const s of n[r]){const o=Sme(e,t,r,n,s);o!=null&&i.push(o)}return i}function $me(e,t){const{sort:n}=e;return oo(n)?{field:te(n,{expr:"datum"}),order:n.order??"ascending"}:W(n)?{field:Tc(e,t,{expr:"datum"}),order:"ascending"}:{field:te(e,{expr:"datum"}),order:n??"ascending"}}function Gw(e,t,n){const{format:i,formatType:r,labelAngle:s,labelAnchor:o,labelOrient:a,labelExpr:u}=_m(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),l=H_({fieldOrDatumDef:e,format:i,formatType:r,expr:"parent",config:n}).signal,c=xm(t,a);return{text:{signal:u?du(du(u,"datum.label",l),"datum.value",te(e,{expr:"parent"})):l},...t==="row"?{orient:"left"}:{},style:"guide-label",frame:"group",...bL(s,c),...yL(c,s,o),...vL(n,e,t,ope,NR)}}function Sme(e,t,n,i,r){if(r){let s=null;const{facetFieldDef:o}=i,a=e.config?e.config:void 0;if(o&&r.labels){const{labelOrient:f}=_m(["labelOrient"],o.header,a,t);(t==="row"&&!qe(["top","bottom"],f)||t==="column"&&!qe(["left","right"],f))&&(s=Gw(o,t,a))}const u=Oi(e)&&!ih(e.facet),l=r.axes,c=(l==null?void 0:l.length)>0;if(s||c){const f=t==="row"?"height":"width";return{name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`,...i.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:$me(o,t)}:{},...c&&u?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...s?{title:s}:{},...r.sizeSignal?{encode:{update:{[f]:r.sizeSignal}}}:{},...c?{axes:l}:{}}}}return null}const Fme={column:{start:0,end:1},row:{start:1,end:0}};function Dme(e,t){return Fme[t][e]}function Tme(e,t){const n={};for(const i of ir){const r=e[i];if(r!=null&&r.facetFieldDef){const{titleAnchor:s,titleOrient:o}=_m(["titleAnchor","titleOrient"],r.facetFieldDef.header,t,i),a=xm(i,o),u=Dme(s,a);u!==void 0&&(n[a]=u)}}return ht(n)?void 0:n}function vL(e,t,n,i,r){const s={};for(const o of i){if(!r[o])continue;const a=Mc(o,t==null?void 0:t.header,e,n);a!==void 0&&(s[r[o]]=a)}return s}function Vw(e){return[...wm(e,"width"),...wm(e,"height"),...wm(e,"childWidth"),...wm(e,"childHeight")]}function wm(e,t){const n=t==="width"?"x":"y",i=e.component.layoutSize.get(t);if(!i||i==="merged")return[];const r=e.getSizeSignalRef(t).signal;if(i==="step"){const s=e.getScaleComponent(n);if(s){const o=s.get("type"),a=s.get("range");if(on(o)&&yu(a)){const u=e.scaleName(n);return Oi(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[xL(u,a)]:[xL(u,a),{name:r,update:_L(u,s,`domain('${u}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(i=="container"){const s=r.endsWith("width"),o=s?"containerSize()[0]":"containerSize()[1]",a=cw(e.config.view,s?"width":"height"),u=`isFinite(${o}) ? ${o} : ${a}`;return[{name:r,init:u,on:[{update:u,events:"window:resize"}]}]}else return[{name:r,value:i}]}function xL(e,t){const n=`${e}_step`;return me(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function _L(e,t,n){const i=t.get("type"),r=t.get("padding"),s=zt(t.get("paddingOuter"),r);let o=t.get("paddingInner");return o=i==="band"?o!==void 0?o:r:1,`bandspace(${n}, ${Dr(o)}, ${Dr(s)}) * ${e}_step`}function wL(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function EL(e,t){return Y(e).reduce((n,i)=>({...n,...$c({model:t,channelDef:e[i],vgChannel:i,mainRefFn:r=>Et(r.value),invalidValueRef:void 0})}),{})}function CL(e,t){if(Oi(t))return e==="theta"?"independent":"shared";if(Lc(t))return"shared";if(l6(t))return Bt(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function Yw(e,t){const n=e.scale[t],i=Bt(t)?"axis":"legend";return n==="independent"?(e[i][t]==="shared"&&Z(rhe(t)),"independent"):e[i][t]||"shared"}const Mme={...upe,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},kL=Y(Mme);class Nme extends lo{}const AL={symbols:Rme,gradient:Ome,labels:Lme,entries:Ime};function Rme(e,{fieldOrDatumDef:t,model:n,channel:i,legendCmpt:r,legendType:s}){if(s!=="symbol")return;const{markDef:o,encoding:a,config:u,mark:l}=n,c=o.filled&&l!=="trail";let f={...dde({},n,u0e),...SO(n,{filled:c})};const d=r.get("symbolOpacity")??u.legend.symbolOpacity,h=r.get("symbolFillColor")??u.legend.symbolFillColor,p=r.get("symbolStrokeColor")??u.legend.symbolStrokeColor,g=d===void 0?$L(a.opacity)??o.opacity:void 0;if(f.fill){if(i==="fill"||c&&i===pi)delete f.fill;else if(X(f.fill,"field"))h?delete f.fill:(f.fill=Et(u.legend.symbolBaseFillColor??"black"),f.fillOpacity=Et(g??1));else if(W(f.fill)){const m=Xw(a.fill??a.color)??o.fill??(c&&o.color);m&&(f.fill=Et(m))}}if(f.stroke){if(i==="stroke"||!c&&i===pi)delete f.stroke;else if(X(f.stroke,"field")||p)delete f.stroke;else if(W(f.stroke)){const m=zt(Xw(a.stroke||a.color),o.stroke,c?o.color:void 0);m&&(f.stroke={value:m})}}if(i!==no){const m=J(t)&&FL(n,r,t);m?f.opacity=[{test:m,...Et(g??1)},Et(u.legend.unselectedOpacity)]:g&&(f.opacity=Et(g))}return f={...f,...e},ht(f)?void 0:f}function Ome(e,{model:t,legendType:n,legendCmpt:i}){if(n!=="gradient")return;const{config:r,markDef:s,encoding:o}=t;let a={};const l=(i.get("gradientOpacity")??r.legend.gradientOpacity)===void 0?$L(o.opacity)||s.opacity:void 0;return l&&(a.opacity=Et(l)),a={...a,...e},ht(a)?void 0:a}function Lme(e,{fieldOrDatumDef:t,model:n,channel:i,legendCmpt:r}){const s=n.legend(i)||{},o=n.config,a=J(t)?FL(n,r,t):void 0,u=a?[{test:a,value:1},{value:o.legend.unselectedOpacity}]:void 0,{format:l,formatType:c}=s;let f;ku(c)?f=Mr({fieldOrDatumDef:t,field:"datum.value",format:l,formatType:c,config:o}):l===void 0&&c===void 0&&o.customFormatTypes&&(t.type==="quantitative"&&o.numberFormatType?f=Mr({fieldOrDatumDef:t,field:"datum.value",format:o.numberFormat,formatType:o.numberFormatType,config:o}):t.type==="temporal"&&o.timeFormatType&&J(t)&&t.timeUnit===void 0&&(f=Mr({fieldOrDatumDef:t,field:"datum.value",format:o.timeFormat,formatType:o.timeFormatType,config:o})));const d={...u?{opacity:u}:{},...f?{text:f}:{},...e};return ht(d)?void 0:d}function Ime(e,{legendCmpt:t}){const n=t.get("selections");return n!=null&&n.length?{...e,fill:{value:"transparent"}}:e}function $L(e){return SL(e,(t,n)=>Math.max(t,n.value))}function Xw(e){return SL(e,(t,n)=>zt(t,n.value))}function SL(e,t){if(A0e(e))return oe(e.condition).reduce(t,e.value);if(Nr(e))return e.value}function FL(e,t,n){const i=t.get("selections");if(!(i!=null&&i.length))return;const r=Q(n.field);return i.map(s=>`(!length(data(${Q(At(s)+Fu)})) || (${s}[${r}] && indexof(${s}[${r}], datum.value) >= 0))`).join(" || ")}const DL={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:i,formatType:r}=t;return VN(e,e.type,i,r,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:i}=e;return YN(i,t,n)},gradientLength:e=>{const{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??Wme(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??Hme(n),symbolType:({legend:e,markDef:t,channel:n,encoding:i})=>e.symbolType??zme(t.type,n,i.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>xc(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(pc(n)&&vs(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>Pme(t,e)};function Pme(e,t){const n=e.values;if(W(n))return cR(t,n);if(me(n))return n}function zme(e,t,n,i){if(t!=="shape"){const r=Xw(n)??i;if(r)return r}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function Bme(e){const{legend:t}=e;return zt(t.type,Ume(e))}function Ume({channel:e,timeUnit:t,scaleType:n}){if(pc(e)){if(qe(["quarter","month","day"],t))return"symbol";if(vs(n))return"gradient"}return"symbol"}function jme({legendConfig:e,legendType:t,orient:n,legend:i}){return i.direction??e[t?"gradientDirection":"symbolDirection"]??qme(n,t)}function qme(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function Wme({legendConfig:e,model:t,direction:n,orient:i,scaleType:r}){const{gradientHorizontalMaxLength:s,gradientHorizontalMinLength:o,gradientVerticalMaxLength:a,gradientVerticalMinLength:u}=e;if(vs(r))return n==="horizontal"?i==="top"||i==="bottom"?TL(t,"width",o,s):o:TL(t,"height",u,a)}function TL(e,t,n,i){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${i})`}}function Hme(e){if(qe(["quantile","threshold","log","symlog"],e))return"greedy"}function ML(e){const t=Dt(e)?Gme(e):Kme(e);return e.component.legends=t,t}function Gme(e){const{encoding:t}=e,n={};for(const i of[pi,...OR]){const r=Xt(t[i]);!r||!e.getScaleComponent(i)||i===gi&&J(r)&&r.type===mc||(n[i]=Xme(e,i))}return n}function Vme(e,t){const n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function Yme(e,t,n,i){switch(t){case"disable":return n!==void 0;case"values":return!!(n!=null&&n.values);case"title":if(t==="title"&&e===(i==null?void 0:i.title))return!0}return e===(n||{})[t]}function Xme(e,t){var x;let n=e.legend(t);const{markDef:i,encoding:r,config:s}=e,o=s.legend,a=new Nme({},Vme(e,t));Xge(e,t,a);const u=n!==void 0?!n:o.disable;if(a.set("disable",u,n!==void 0),u)return a;n=n||{};const l=e.getScaleComponent(t).get("type"),c=Xt(r[t]),f=J(c)?(x=sn(c.timeUnit))==null?void 0:x.unit:void 0,d=n.orient||s.legend.orient||"right",h=Bme({legend:n,channel:t,timeUnit:f,scaleType:l}),p=jme({legend:n,legendType:h,orient:d,legendConfig:o}),g={legend:n,channel:t,model:e,markDef:i,encoding:r,fieldOrDatumDef:c,legendConfig:o,config:s,scaleType:l,orient:d,legendType:h,direction:p};for(const _ of kL){if(h==="gradient"&&_.startsWith("symbol")||h==="symbol"&&_.startsWith("gradient"))continue;const E=_ in DL?DL[_](g):n[_];if(E!==void 0){const w=Yme(E,_,n,e.fieldDef(t));(w||s.legend[_]===void 0)&&a.set(_,E,w)}}const m=(n==null?void 0:n.encoding)??{},y=a.get("selections"),b={},v={fieldOrDatumDef:c,model:e,channel:t,legendCmpt:a,legendType:h};for(const _ of["labels","legend","title","symbols","gradient","entries"]){const E=EL(m[_]??{},e),w=_ in AL?AL[_](E,v):E;w!==void 0&&!ht(w)&&(b[_]={...y!=null&&y.length&&J(c)?{name:`${At(c.field)}_legend_${_}`}:{},...y!=null&&y.length?{interactive:!!y}:{},update:w})}return ht(b)||a.set("encode",b,!!(n!=null&&n.encoding)),a}function Kme(e){const{legends:t,resolve:n}=e.component;for(const i of e.children){ML(i);for(const r of Y(i.component.legends))n.legend[r]=Yw(e.component.resolve,r),n.legend[r]==="shared"&&(t[r]=NL(t[r],i.component.legends[r]),t[r]||(n.legend[r]="independent",delete t[r]))}for(const i of Y(t))for(const r of e.children)r.component.legends[i]&&n.legend[i]==="shared"&&delete r.component.legends[i];return t}function NL(e,t){var s,o,a,u;if(!e)return t.clone();const n=e.getWithExplicit("orient"),i=t.getWithExplicit("orient");if(n.explicit&&i.explicit&&n.value!==i.value)return;let r=!1;for(const l of kL){const c=ma(e.getWithExplicit(l),t.getWithExplicit(l),l,"legend",(f,d)=>{switch(l){case"symbolType":return Zme(f,d);case"title":return tN(f,d);case"type":return r=!0,Ri("symbol")}return rm(f,d,l,"legend")});e.setWithExplicit(l,c)}return r&&((o=(s=e.implicit)==null?void 0:s.encode)!=null&&o.gradient&&w1(e.implicit,["encode","gradient"]),(u=(a=e.explicit)==null?void 0:a.encode)!=null&&u.gradient&&w1(e.explicit,["encode","gradient"])),e}function Zme(e,t){return t.value==="circle"?t:e}function Jme(e,t,n,i){var r,s;e.encode??(e.encode={}),(r=e.encode)[t]??(r[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=i}function RL(e){const t=e.component.legends,n={};for(const r of Y(t)){const s=e.getScaleComponent(r),o=pt(s.get("domains"));if(n[o])for(const a of n[o])NL(a,t[r])||n[o].push(t[r]);else n[o]=[t[r].clone()]}return gn(n).flat().map(r=>Qme(r,e.config)).filter(r=>r!==void 0)}function Qme(e,t){var o,a,u;const{disable:n,labelExpr:i,selections:r,...s}=e.combine();if(!n){if(t.aria===!1&&s.aria==null&&(s.aria=!1),(o=s.encode)!=null&&o.symbols){const l=s.encode.symbols.update;l.fill&&l.fill.value!=="transparent"&&!l.stroke&&!s.stroke&&(l.stroke={value:"transparent"});for(const c of OR)s[c]&&delete l[c]}if(s.title||delete s.title,i!==void 0){let l=i;(u=(a=s.encode)==null?void 0:a.labels)!=null&&u.update&&me(s.encode.labels.update.text)&&(l=du(i,"datum.label",s.encode.labels.update.text.signal)),Jme(s,"labels","text",{signal:l})}return s}}function e2e(e){return Lc(e)||l6(e)?t2e(e):OL(e)}function t2e(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),OL(e))}function OL(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:i}=n;if(t.data){const r={signal:`[${t.size.map(o=>o.signal).join(", ")}]`},s=t.data.reduce((o,a)=>{const u=me(a)?a.signal:`data('${e.lookupDataSource(a)}')`;return qe(o,u)||o.push(u),o},[]);if(s.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:i,size:r,fit:{signal:s.length>1?`[${s.join(", ")}]`:s[0]},...n}]}else return[{name:i,translate:{signal:"[width / 2, height / 2]"},...n}]}const n2e=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class LL extends lo{constructor(t,n,i,r){super({...n},{name:t}),this.specifiedProjection=n,this.size=i,this.data=r,this.merged=!1}get isFit(){return!!this.data}}function IL(e){e.component.projection=Dt(e)?i2e(e):o2e(e)}function i2e(e){if(e.hasProjection){const t=yn(e.specifiedProjection),n=!(t&&(t.scale!=null||t.translate!=null)),i=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,r=n?r2e(e):void 0,s=new LL(e.projectionName(!0),{...yn(e.config.projection),...t},i,r);return s.get("type")||s.set("type","equalEarth",!1),s}}function r2e(e){const t=[],{encoding:n}=e;for(const i of[[Sr,$r],[nr,Fr]])(Xt(n[i[0]])||Xt(n[i[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(gi)&&e.typedFieldDef(gi).type===mc&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(Ft.Main)),t}function s2e(e,t){const n=Q7(n2e,r=>!!(!ue(e.explicit,r)&&!ue(t.explicit,r)||ue(e.explicit,r)&&ue(t.explicit,r)&&Mi(e.get(r),t.get(r))));if(Mi(e.size,t.size)){if(n)return e;if(Mi(e.explicit,{}))return t;if(Mi(t.explicit,{}))return e}return null}function o2e(e){if(e.children.length===0)return;let t;for(const i of e.children)IL(i);const n=Q7(e.children,i=>{const r=i.component.projection;if(r)if(t){const s=s2e(t,r);return s&&(t=s),!!s}else return t=r,!0;else return!0});if(t&&n){const i=e.projectionName(!0),r=new LL(i,t.specifiedProjection,t.size,De(t.data));for(const s of e.children){const o=s.component.projection;o&&(o.isFit&&r.data.push(...s.component.projection.data),s.renameProjection(o.get("name"),i),o.merged=!0)}return r}}function a2e(e,t,n,i){if(oh(t,n)){const r=Dt(e)?e.axis(n)??e.legend(n)??{}:{},s=te(t,{expr:"datum"}),o=te(t,{expr:"datum",binSuffix:"end"});return{formulaAs:te(t,{binSuffix:"range",forAs:!0}),formula:nh(s,o,r.format,r.formatType,i)}}return{}}function PL(e,t){return`${WM(e)}_${t}`}function u2e(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function Kw(e,t,n){const i=X1(n,void 0)??{},r=PL(i,t);return e.getName(`${r}_bins`)}function l2e(e){return"as"in e}function zL(e,t,n){let i,r;l2e(e)?i=se(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:i=[te(e,{forAs:!0}),te(e,{binSuffix:"end",forAs:!0})];const s={...X1(t,void 0)},o=PL(s,e.field),{signal:a,extentSignal:u}=u2e(n,o);if(T1(s.extent)){const c=s.extent;r=cL(n,c.param,c),delete s.extent}const l={bin:s,field:e.field,as:[i],...a?{signal:a}:{},...u?{extentSignal:u}:{},...r?{span:r}:{}};return{key:o,binComponent:l}}class $s extends ut{clone(){return new $s(null,De(this.bins))}constructor(t,n){super(t),this.bins=n}static makeFromEncoding(t,n){const i=n.reduceFieldDef((r,s,o)=>{if(ei(s)&&_t(s.bin)){const{key:a,binComponent:u}=zL(s,s.bin,n);r[a]={...u,...r[a],...a2e(n,s,o,n.config)}}return r},{});return ht(i)?null:new $s(t,i)}static makeFromTransform(t,n,i){const{key:r,binComponent:s}=zL(n,n.bin,i);return new $s(t,{[r]:s})}merge(t,n){for(const i of Y(t.bins))i in this.bins?(n(t.bins[i].signal,this.bins[i].signal),this.bins[i].as=fs([...this.bins[i].as,...t.bins[i].as],We)):this.bins[i]=t.bins[i];for(const i of t.children)t.removeChild(i),i.parent=this;t.remove()}producedFields(){return new Set(gn(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(gn(this.bins).map(t=>t.field))}hash(){return`Bin ${We(this.bins)}`}assemble(){return gn(this.bins).flatMap(t=>{const n=[],[i,...r]=t.as,{extent:s,...o}=t.bin,a={type:"bin",field:er(t.field),as:i,signal:t.signal,...T1(s)?{extent:null}:{extent:s},...t.span?{span:{signal:`span(${t.span})`}}:{},...o};!s&&t.extentSignal&&(n.push({type:"extent",field:er(t.field),signal:t.extentSignal}),a.extent={signal:t.extentSignal}),n.push(a);for(const u of r)for(let l=0;l<2;l++)n.push({type:"formula",expr:te({field:i[l]},{expr:"datum"}),as:u[l]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}}function c2e(e,t,n,i){var s;const r=Dt(i)?i.encoding[gs(t)]:void 0;if(ei(n)&&Dt(i)&&tR(n,r,i.markDef,i.config)){e.add(te(n,{})),e.add(te(n,{suffix:"end"}));const{mark:o,markDef:a,config:u}=i,l=pa({fieldDef:n,markDef:a,config:u});eh(o)&&l!==.5&&Bt(t)&&(e.add(te(n,{suffix:sm})),e.add(te(n,{suffix:om}))),n.bin&&oh(n,t)&&e.add(te(n,{binSuffix:"range"}))}else if(OM(t)){const o=RM(t);e.add(i.getName(o))}else e.add(te(n));return Au(n)&&Xhe((s=n.scale)==null?void 0:s.range)&&e.add(n.scale.range.field),e}function f2e(e,t){for(const n of Y(t)){const i=t[n];for(const r of Y(i))n in e?e[n][r]=new Set([...e[n][r]??[],...i[r]]):e[n]={[r]:i[r]}}}class Ir extends ut{clone(){return new Ir(null,new Set(this.dimensions),De(this.measures))}constructor(t,n,i){super(t),this.dimensions=n,this.measures=i}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let i=!1;n.forEachFieldDef(o=>{o.aggregate&&(i=!0)});const r={},s=new Set;return!i||(n.forEachFieldDef((o,a)=>{const{aggregate:u,field:l}=o;if(u)if(u==="count")r["*"]??(r["*"]={}),r["*"].count=new Set([te(o,{forAs:!0})]);else{if(ro(u)||fa(u)){const c=ro(u)?"argmin":"argmax",f=u[c];r[f]??(r[f]={}),r[f][c]=new Set([te({op:c,field:f},{forAs:!0})])}else r[l]??(r[l]={}),r[l][u]=new Set([te(o,{forAs:!0})]);ms(a)&&n.scaleDomain(a)==="unaggregated"&&(r[l]??(r[l]={}),r[l].min=new Set([te({field:l,aggregate:"min"},{forAs:!0})]),r[l].max=new Set([te({field:l,aggregate:"max"},{forAs:!0})]))}else c2e(s,a,o,n)}),s.size+Y(r).length===0)?null:new Ir(t,s,r)}static makeFromTransform(t,n){var i;const r=new Set,s={};for(const o of n.aggregate){const{op:a,field:u,as:l}=o;a&&(a==="count"?(s["*"]??(s["*"]={}),s["*"].count=new Set([l||te(o,{forAs:!0})])):(s[u]??(s[u]={}),(i=s[u])[a]??(i[a]=new Set),s[u][a].add(l||te(o,{forAs:!0}))))}for(const o of n.groupby??[])r.add(o);return r.size+Y(s).length===0?null:new Ir(t,r,s)}merge(t){return kM(this.dimensions,t.dimensions)?(f2e(this.measures,t.measures),!0):(xhe("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...Y(this.measures)])}producedFields(){const t=new Set;for(const n of Y(this.measures))for(const i of Y(this.measures[n])){const r=this.measures[n][i];r.size===0?t.add(`${i}_${n}`):r.forEach(t.add,t)}return t}hash(){return`Aggregate ${We({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const t=[],n=[],i=[];for(const s of Y(this.measures))for(const o of Y(this.measures[s]))for(const a of this.measures[s][o])i.push(a),t.push(o),n.push(s==="*"?null:er(s));return{type:"aggregate",groupby:[...this.dimensions].map(er),ops:t,fields:n,as:i}}}class Nc extends ut{constructor(t,n,i,r){super(t),this.model=n,this.name=i,this.data=r;for(const s of ir){const o=n.facet[s];if(o){const{bin:a,sort:u}=o;this[s]={name:n.getName(`${s}_domain`),fields:[te(o),..._t(a)?[te(o,{binSuffix:"end"})]:[]],...oo(u)?{sortField:u}:W(u)?{sortIndexField:Tc(o,s)}:{}}}}this.childModel=n.child}hash(){let t="Facet";for(const n of ir)this[n]&&(t+=` ${n.charAt(0)}:${We(this[n])}`);return t}get fields(){var n;const t=[];for(const i of ir)(n=this[i])!=null&&n.fields&&t.push(...this[i].fields);return t}dependentFields(){const t=new Set(this.fields);for(const n of ir)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const n of io){const i=this.childModel.component.scales[n];if(i&&!i.merged){const r=i.get("type"),s=i.get("range");if(on(r)&&yu(s)){const o=Cm(this.childModel,n),a=a6(o);a?t[n]=a:Z(b_(n))}}}return t}assembleRowColumnHeaderData(t,n,i){const r={row:"y",column:"x",facet:void 0}[t],s=[],o=[],a=[];r&&i&&i[r]&&(n?(s.push(`distinct_${i[r]}`),o.push("max")):(s.push(i[r]),o.push("distinct")),a.push(`distinct_${i[r]}`));const{sortField:u,sortIndexField:l}=this[t];if(u){const{op:c=j1,field:f}=u;s.push(f),o.push(c),a.push(te(u,{forAs:!0}))}else l&&(s.push(l),o.push("max"),a.push(l));return{name:this[t].name,source:n??this.data,transform:[{type:"aggregate",groupby:this[t].fields,...s.length?{fields:s,ops:o,as:a}:{}}]}}assembleFacetHeaderData(t){var u;const{columns:n}=this.model.layout,{layoutHeaders:i}=this.model.component,r=[],s={};for(const l of Ww){for(const c of Hw){const f=(i[l]&&i[l][c])??[];for(const d of f)if(((u=d.axes)==null?void 0:u.length)>0){s[l]=!0;break}}if(s[l]){const c=`length(data("${this.facet.name}"))`,f=l==="row"?n?{signal:`ceil(${c} / ${n})`}:1:n?{signal:`min(${c}, ${n})`}:{signal:c};r.push({name:`${this.facet.name}_${l}`,transform:[{type:"sequence",start:0,stop:f}]})}}const{row:o,column:a}=s;return(o||a)&&r.unshift(this.assembleRowColumnHeaderData("facet",null,t)),r}assemble(){const t=[];let n=null;const i=this.getChildIndependentFieldsWithStep(),{column:r,row:s,facet:o}=this;if(r&&s&&(i.x||i.y)){n=`cross_${this.column.name}_${this.row.name}`;const a=[].concat(i.x??[],i.y??[]),u=a.map(()=>"distinct");t.push({name:n,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:a,ops:u}]})}for(const a of[Js,Zs])this[a]&&t.push(this.assembleRowColumnHeaderData(a,n,i));if(o){const a=this.assembleFacetHeaderData(i);a&&t.push(...a)}return t}}function BL(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function d2e(e,t){const n=i_(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){const i=BL(t.slice(5,t.length));return`timeParse(${n},'${i}')`}else if(t.startsWith("utc:")){const i=BL(t.slice(4,t.length));return`utcParse(${n},'${i}')`}else return Z(Fde(t)),null}function h2e(e){const t={};return _1(e.filter,n=>{if($N(n)){let i=null;A_(n)?i=Ni(n.equal):S_(n)?i=Ni(n.lte):$_(n)?i=Ni(n.lt):F_(n)?i=Ni(n.gt):D_(n)?i=Ni(n.gte):T_(n)?i=n.range[0]:M_(n)&&(i=(n.oneOf??n.in)[0]),i&&(vu(i)?t[n.field]="date":Ze(i)?t[n.field]="number":se(i)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function p2e(e){const t={};function n(i){wc(i)?t[i.field]="date":i.type==="quantitative"&&rde(i.aggregate)?t[i.field]="number":fc(i.field)>1?i.field in t||(t[i.field]="flatten"):Au(i)&&oo(i.sort)&&fc(i.sort.field)>1&&(i.sort.field in t||(t[i.sort.field]="flatten"))}if((Dt(e)||Oi(e))&&e.forEachFieldDef((i,r)=>{if(ei(i))n(i);else{const s=gu(r),o=e.fieldDef(s);n({...i,type:o.type})}}),Dt(e)){const{mark:i,markDef:r,encoding:s}=e;if(ha(i)&&!e.encoding.order){const o=r.orient==="horizontal"?"y":"x",a=s[o];J(a)&&a.type==="quantitative"&&!(a.field in t)&&(t[a.field]="number")}}return t}function g2e(e){const t={};if(Dt(e)&&e.component.selection)for(const n of Y(e.component.selection)){const i=e.component.selection[n];for(const r of i.project.items)!r.channel&&fc(r.field)>1&&(t[r.field]="flatten")}return t}class In extends ut{clone(){return new In(null,De(this._parse))}constructor(t,n){super(t),this._parse=n}hash(){return`Parse ${We(this._parse)}`}static makeExplicit(t,n,i){var o;let r={};const s=n.data;return!ya(s)&&((o=s==null?void 0:s.format)!=null&&o.parse)&&(r=s.format.parse),this.makeWithAncestors(t,r,{},i)}static makeWithAncestors(t,n,i,r){for(const a of Y(i)){const u=r.getWithExplicit(a);u.value!==void 0&&(u.explicit||u.value===i[a]||u.value==="derived"||i[a]==="flatten"?delete i[a]:Z(uN(a,i[a],u.value)))}for(const a of Y(n)){const u=r.get(a);u!==void 0&&(u===n[a]?delete n[a]:Z(uN(a,n[a],u)))}const s=new lo(n,i);r.copyAll(s);const o={};for(const a of Y(s.combine())){const u=s.get(a);u!==null&&(o[a]=u)}return Y(o).length===0||r.parseNothing?null:new In(t,o)}get parse(){return this._parse}merge(t){this._parse={...this._parse,...t.parse},t.remove()}assembleFormatParse(){const t={};for(const n of Y(this._parse)){const i=this._parse[n];fc(n)===1&&(t[n]=i)}return t}producedFields(){return new Set(Y(this._parse))}dependentFields(){return new Set(Y(this._parse))}assembleTransforms(t=!1){return Y(this._parse).filter(n=>t?fc(n)>1:!0).map(n=>{const i=d2e(n,this._parse[n]);return i?{type:"formula",expr:i,as:cc(n)}:null}).filter(n=>n!==null)}}class va extends ut{clone(){return new va(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([Or])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:Or}}}class vh extends ut{clone(){return new vh(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${We(this.params)}`}assemble(){return{type:"graticule",...this.params===!0?{}:this.params}}}class xh extends ut{clone(){return new xh(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${We(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class Ru extends ut{constructor(t){super(null),t??(t={name:"source"});let n;if(ya(t)||(n=t.format?{...hi(t.format,["parse"])}:{}),uh(t))this._data={values:t.values};else if(Cc(t)){if(this._data={url:t.url},!n.type){let i=/(?:\.([^.]+))?$/.exec(t.url)[1];qe(["json","csv","tsv","dsv","topojson"],i)||(i="json"),n.type=i}}else dO(t)?this._data={values:[{type:"Sphere"}]}:(cO(t)||ya(t))&&(this._data={});this._generator=ya(t),t.name&&(this._name=t.name),n&&!ht(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}var UL=function(e,t,n,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(e,n):r?r.value=n:t.set(e,n),n},m2e=function(e,t,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(e):i?i.value:t.get(e)},_h;function Zw(e){return e instanceof Ru||e instanceof vh||e instanceof xh}class Jw{constructor(){_h.set(this,void 0),UL(this,_h,!1,"f")}setModified(){UL(this,_h,!0,"f")}get modifiedFlag(){return m2e(this,_h,"f")}}_h=new WeakMap;class Ou extends Jw{getNodeDepths(t,n,i){i.set(t,n);for(const r of t.children)this.getNodeDepths(r,n+1,i);return i}optimize(t){const i=[...this.getNodeDepths(t,0,new Map).entries()].sort((r,s)=>s[1]-r[1]);for(const r of i)this.run(r[0]);return this.modifiedFlag}}class Qw extends Jw{optimize(t){this.run(t);for(const n of t.children)this.optimize(n);return this.modifiedFlag}}class y2e extends Qw{mergeNodes(t,n){const i=n.shift();for(const r of n)t.removeChild(r),r.parent=i,r.remove()}run(t){const n=t.children.map(r=>r.hash()),i={};for(let r=0;r<n.length;r++)i[n[r]]===void 0?i[n[r]]=[t.children[r]]:i[n[r]].push(t.children[r]);for(const r of Y(i))i[r].length>1&&(this.setModified(),this.mergeNodes(t,i[r]))}}class b2e extends Qw{constructor(t){super(),this.requiresSelectionId=t&&Tw(t)}run(t){t instanceof va&&(this.requiresSelectionId&&(Zw(t.parent)||t.parent instanceof Ir||t.parent instanceof In)||(this.setModified(),t.remove()))}}class v2e extends Jw{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let i=new Set;t instanceof Cs&&(i=t.producedFields(),e_(i,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(const r of t.children)this.run(r,new Set([...n,...i]))}}class x2e extends Qw{constructor(){super()}run(t){t instanceof yi&&!t.isRequired()&&(this.setModified(),t.remove())}}class _2e extends Ou{run(t){if(!Zw(t)&&!(t.numChildren()>1)){for(const n of t.children)if(n instanceof In)if(t instanceof In)this.setModified(),t.merge(n);else{if(n_(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}}class w2e extends Ou{run(t){const n=[...t.children],i=t.children.filter(r=>r instanceof In);if(t.numChildren()>1&&i.length>=1){const r={},s=new Set;for(const o of i){const a=o.parse;for(const u of Y(a))u in r?r[u]!==a[u]&&s.add(u):r[u]=a[u]}for(const o of s)delete r[o];if(!ht(r)){this.setModified();const o=new In(t,r);for(const a of n){if(a instanceof In)for(const u of Y(r))delete a.parse[u];t.removeChild(a),a.parent=o,a instanceof In&&Y(a.parse).length===0&&a.remove()}}}}}class E2e extends Ou{run(t){t instanceof yi||t.numChildren()>0||t instanceof Nc||t instanceof Ru||(this.setModified(),t.remove())}}class C2e extends Ou{run(t){const n=t.children.filter(r=>r instanceof Cs),i=n.pop();for(const r of n)this.setModified(),i.merge(r)}}class k2e extends Ou{run(t){const n=t.children.filter(r=>r instanceof Ir),i={};for(const r of n){const s=We(r.groupBy);s in i||(i[s]=[]),i[s].push(r)}for(const r of Y(i)){const s=i[r];if(s.length>1){const o=s.pop();for(const a of s)o.merge(a)&&(t.removeChild(a),a.parent=o,a.remove(),this.setModified())}}}}class A2e extends Ou{constructor(t){super(),this.model=t}run(t){const n=!(Zw(t)||t instanceof Fc||t instanceof In||t instanceof va),i=[],r=[];for(const s of t.children)s instanceof $s&&(n&&!n_(t.producedFields(),s.dependentFields())?i.push(s):r.push(s));if(i.length>0){const s=i.pop();for(const o of i)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof $s?t.merge(s,this.model.renameSignal.bind(this.model)):s.swapWithParent()}if(r.length>1){const s=r.pop();for(const o of r)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified()}}}class $2e extends Ou{run(t){const n=[...t.children];if(!lc(n,o=>o instanceof yi)||t.numChildren()<=1)return;const r=[];let s;for(const o of n)if(o instanceof yi){let a=o;for(;a.numChildren()===1;){const[u]=a.children;if(u instanceof yi)a=u;else break}r.push(...a.children),s?(t.removeChild(o),o.parent=s.parent,s.parent.removeChild(s),s.parent=a,this.setModified()):s=a}else r.push(o);if(r.length){this.setModified();for(const o of r)o.parent.removeChild(o),o.parent=s}}}class Lu extends ut{clone(){return new Lu(null,De(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=fs(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){return t.as??te(t)}hash(){return`JoinAggregateTransform ${We(this.transform)}`}assemble(){const t=[],n=[],i=[];for(const s of this.transform.joinaggregate)n.push(s.op),i.push(this.getDefaultName(s)),t.push(s.field===void 0?null:s.field);const r=this.transform.groupby;return{type:"joinaggregate",as:i,ops:n,fields:t,...r!==void 0?{groupby:r}:{}}}}class Rc extends ut{clone(){return new Rc(null,{...this.filter})}constructor(t,n){super(t),this.filter=n}static make(t,n,i){const{config:r,markDef:s}=n,{marks:o,scales:a}=i;if(o==="include-invalid-values"&&a==="include-invalid-values")return null;const u=n.reduceFieldDef((l,c,f)=>{const d=ms(f)&&n.getScaleComponent(f);if(d){const h=d.get("type"),{aggregate:p}=c,g=j_({scaleChannel:f,markDef:s,config:r,scaleType:h,isCountAggregate:D1(p)});g!=="show"&&g!=="always-valid"&&(l[c.field]=c)}return l},{});return Y(u).length?new Rc(t,u):null}dependentFields(){return new Set(Y(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${We(this.filter)}`}assemble(){const t=Y(this.filter).reduce((n,i)=>{const r=this.filter[i],s=te(r,{expr:"datum"});return r!==null&&(r.type==="temporal"?n.push(`(isDate(${s}) || (${e6(s)}))`):r.type==="quantitative"&&n.push(e6(s))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}function e6(e){return`isValid(${e}) && isFinite(+${e})`}function S2e(e){return e.stack.stackBy.reduce((t,n)=>{const i=n.fieldDef,r=te(i);return r&&t.push(r),t},[])}function F2e(e){return W(e)&&e.every(t=>se(t))&&e.length>1}class go extends ut{clone(){return new go(null,De(this._stack))}constructor(t,n){super(t),this._stack=n}static makeFromTransform(t,n){const{stack:i,groupby:r,as:s,offset:o="zero"}=n,a=[],u=[];if(n.sort!==void 0)for(const f of n.sort)a.push(f.field),u.push(zt(f.order,"ascending"));const l={field:a,order:u};let c;return F2e(s)?c=s:se(s)?c=[s,`${s}_end`]:c=[`${n.stack}_start`,`${n.stack}_end`],new go(t,{dimensionFieldDefs:[],stackField:i,groupby:r,offset:o,sort:l,facetby:[],as:c})}static makeFromEncoding(t,n){const i=n.stack,{encoding:r}=n;if(!i)return null;const{groupbyChannels:s,fieldChannel:o,offset:a,impute:u}=i,l=s.map(h=>{const p=r[h];return Rr(p)}).filter(h=>!!h),c=S2e(n),f=n.encoding.order;let d;if(W(f)||J(f))d=JM(f);else{const h=nR(f)?f.sort:o==="y"?"descending":"ascending";d=c.reduce((p,g)=>(p.field.includes(g)||(p.field.push(g),p.order.push(h)),p),{field:[],order:[]})}return new go(t,{dimensionFieldDefs:l,stackField:n.vgField(o),facetby:[],stackby:c,sort:d,offset:a,impute:u,as:[n.vgField(o,{suffix:"start",forAs:!0}),n.vgField(o,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${We(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:t,impute:n,groupby:i}=this._stack;return t.length>0?t.map(r=>r.bin?n?[te(r,{binSuffix:"mid"})]:[te(r,{}),te(r,{binSuffix:"end"})]:[te(r)]).flat():i??[]}assemble(){const t=[],{facetby:n,dimensionFieldDefs:i,stackField:r,stackby:s,sort:o,offset:a,impute:u,as:l}=this._stack;if(u)for(const c of i){const{bandPosition:f=.5,bin:d}=c;if(d){const h=te(c,{expr:"datum"}),p=te(c,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${e6(h)} ? ${f}*${h}+${1-f}*${p} : ${h}`,as:te(c,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:r,groupby:[...s,...n],key:te(c,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:r,sort:o,as:l,offset:a}),t}}class Oc extends ut{clone(){return new Oc(null,De(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=fs(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return(this.transform.groupby??[]).forEach(t.add,t),(this.transform.sort??[]).forEach(n=>t.add(n.field)),this.transform.window.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){return t.as??te(t)}hash(){return`WindowTransform ${We(this.transform)}`}assemble(){const t=[],n=[],i=[],r=[];for(const f of this.transform.window)n.push(f.op),i.push(this.getDefaultName(f)),r.push(f.param===void 0?null:f.param),t.push(f.field===void 0?null:f.field);const s=this.transform.frame,o=this.transform.groupby;if(s&&s[0]===null&&s[1]===null&&n.every(f=>p_(f)))return{type:"joinaggregate",as:i,ops:n,fields:t,...o!==void 0?{groupby:o}:{}};const a=[],u=[];if(this.transform.sort!==void 0)for(const f of this.transform.sort)a.push(f.field),u.push(f.order??"ascending");const l={field:a,order:u},c=this.transform.ignorePeers;return{type:"window",params:r,as:i,ops:n,fields:t,sort:l,...c!==void 0?{ignorePeers:c}:{},...o!==void 0?{groupby:o}:{},...s!==void 0?{frame:s}:{}}}}function D2e(e){function t(n){if(!(n instanceof Nc)){const i=n.clone();if(i instanceof yi){const r=n6+i.getSource();i.setSource(r),e.model.component.data.outputNodes[r]=i}else(i instanceof Ir||i instanceof go||i instanceof Oc||i instanceof Lu)&&i.addDimensions(e.fields);for(const r of n.children.flatMap(t))r.parent=i;return[i]}return n.children.flatMap(t)}return t}function t6(e){if(e instanceof Nc)if(e.numChildren()===1&&!(e.children[0]instanceof yi)){const t=e.children[0];(t instanceof Ir||t instanceof go||t instanceof Oc||t instanceof Lu)&&t.addDimensions(e.fields),t.swapWithParent(),t6(e)}else{const t=e.model.component.data.main;jL(t);const n=D2e(e),i=e.children.map(n).flat();for(const r of i)r.parent=t}else e.children.map(t6)}function jL(e){if(e instanceof yi&&e.type===Ft.Main&&e.numChildren()===1){const t=e.children[0];t instanceof Nc||(t.swapWithParent(),jL(e))}}const n6="scale_",Em=5;function i6(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return!1;if(!i6(t.children))return!1}return!0}function Pr(e,t){let n=!1;for(const i of t)n=e.optimize(i)||n;return n}function qL(e,t,n){let i=e.sources,r=!1;return r=Pr(new x2e,i)||r,r=Pr(new b2e(t),i)||r,i=i.filter(s=>s.numChildren()>0),r=Pr(new E2e,i)||r,i=i.filter(s=>s.numChildren()>0),n||(r=Pr(new _2e,i)||r,r=Pr(new A2e(t),i)||r,r=Pr(new v2e,i)||r,r=Pr(new w2e,i)||r,r=Pr(new k2e,i)||r,r=Pr(new C2e,i)||r,r=Pr(new y2e,i)||r,r=Pr(new $2e,i)||r),e.sources=i,r}function T2e(e,t){i6(e.sources);let n=0,i=0;for(let r=0;r<Em&&qL(e,t,!0);r++)n++;e.sources.map(t6);for(let r=0;r<Em&&qL(e,t,!1);r++)i++;i6(e.sources),Math.max(n,i)===Em&&Z(`Maximum optimization runs(${Em}) reached.`)}class un{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,n){return new un(()=>t(n))}}function WL(e){Dt(e)?M2e(e):N2e(e)}function M2e(e){const t=e.component.scales;for(const n of Y(t)){const i=O2e(e,n);if(t[n].setWithExplicit("domains",i),I2e(e,n),e.component.data.isFaceted){let s=e;for(;!Oi(s)&&s.parent;)s=s.parent;if(s.component.resolve.scale[n]==="shared")for(const a of i.value)so(a)&&(a.data=n6+a.data.replace(n6,""))}}}function N2e(e){for(const n of e.children)WL(n);const t=e.component.scales;for(const n of Y(t)){let i,r=null;for(const s of e.children){const o=s.component.scales[n];if(o){i===void 0?i=o.getWithExplicit("domains"):i=ma(i,o.getWithExplicit("domains"),"domains","scale",o6);const a=o.get("selectionExtent");r&&a&&r.param!==a.param&&Z(wde),r=a}}t[n].setWithExplicit("domains",i),r&&t[n].set("selectionExtent",r,!0)}}function R2e(e,t,n,i){if(e==="unaggregated"){const{valid:r,reason:s}=HL(t,n);if(!r){Z(s);return}}else if(e===void 0&&i.useUnaggregatedDomain){const{valid:r}=HL(t,n);if(r)return"unaggregated"}return e}function O2e(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:i}=e,r=R2e(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return r!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:r}),t==="x"&&Xt(i.x2)?Xt(i.x)?ma(xa(n,r,e,"x"),xa(n,r,e,"x2"),"domain","scale",o6):xa(n,r,e,"x2"):t==="y"&&Xt(i.y2)?Xt(i.y)?ma(xa(n,r,e,"y"),xa(n,r,e,"y2"),"domain","scale",o6):xa(n,r,e,"y2"):xa(n,r,e,t)}function L2e(e,t,n){return e.map(i=>({signal:`{data: ${K1(i,{timeUnit:n,type:t})}}`}))}function r6(e,t,n){var r;const i=(r=sn(n))==null?void 0:r.unit;return t==="temporal"||i?L2e(e,t,i):[e]}function xa(e,t,n,i){const{encoding:r,markDef:s,mark:o,config:a,stack:u}=n,l=Xt(r[i]),{type:c}=l,f=l.timeUnit,d=vge({invalid:ys("invalid",s,a),isPath:ha(o)});if(Yhe(t)){const g=xa(e,void 0,n,i),m=r6(t.unionWith,c,f);return Es([...m,...g.value])}else{if(me(t))return Es([t]);if(t&&t!=="unaggregated"&&!ON(t))return Es(r6(t,c,f))}if(u&&i===u.fieldChannel){if(u.offset==="normalize")return Ri([[0,1]]);const g=n.requestDataName(d);return Ri([{data:g,field:n.vgField(i,{suffix:"start"})},{data:g,field:n.vgField(i,{suffix:"end"})}])}const h=ms(i)&&J(l)?P2e(n,i,e):void 0;if(_s(l)){const g=r6([l.datum],c,f);return Ri(g)}const p=l;if(t==="unaggregated"){const{field:g}=l;return Ri([{data:n.requestDataName(d),field:te({field:g,aggregate:"min"})},{data:n.requestDataName(d),field:te({field:g,aggregate:"max"})}])}else if(_t(p.bin)){if(on(e))return Ri(e==="bin-ordinal"?[]:[{data:Hd(h)?n.requestDataName(d):n.requestDataName(Ft.Raw),field:n.vgField(i,oh(p,i)?{binSuffix:"range"}:{}),sort:h===!0||!re(h)?{field:n.vgField(i,{}),op:"min"}:h}]);{const{bin:g}=p;if(_t(g)){const m=Kw(n,p.field,g);return Ri([new un(()=>{const y=n.getSignalName(m);return`[${y}.start, ${y}.stop]`})])}else return Ri([{data:n.requestDataName(d),field:n.vgField(i,{})}])}}else if(p.timeUnit&&qe(["time","utc"],e)){const g=r[gs(i)];if(tR(p,g,s,a)){const m=n.requestDataName(d),y=pa({fieldDef:p,fieldDef2:g,markDef:s,config:a}),b=eh(o)&&y!==.5&&Bt(i);return Ri([{data:m,field:n.vgField(i,b?{suffix:sm}:{})},{data:m,field:n.vgField(i,{suffix:b?om:"end"})}])}}return Ri(h?[{data:Hd(h)?n.requestDataName(d):n.requestDataName(Ft.Raw),field:n.vgField(i),sort:h}]:[{data:n.requestDataName(d),field:n.vgField(i)}])}function s6(e,t){const{op:n,field:i,order:r}=e;return{op:n??(t?"sum":j1),...i?{field:er(i)}:{},...r?{order:r}:{}}}function I2e(e,t){var a;const n=e.component.scales[t],i=e.specifiedScales[t].domain,r=(a=e.fieldDef(t))==null?void 0:a.bin,s=ON(i)?i:void 0,o=mu(r)&&T1(r.extent)?r.extent:void 0;(s||o)&&n.set("selectionExtent",s??o,!0)}function P2e(e,t,n){if(!on(n))return;const i=e.fieldDef(t),r=i.sort;if(JN(r))return{op:"min",field:Tc(i,t),order:"ascending"};const{stack:s}=e,o=s?new Set([...s.groupbyFields,...s.stackBy.map(a=>a.fieldDef.field)]):void 0;if(oo(r)){const a=s&&!o.has(r.field);return s6(r,a)}else if(E0e(r)){const{encoding:a,order:u}=r,l=e.fieldDef(a),{aggregate:c,field:f}=l,d=s&&!o.has(f);if(ro(c)||fa(c))return s6({field:te(l),order:u},d);if(p_(c)||!c)return s6({op:c,field:f,order:u},d)}else{if(r==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if(qe(["ascending",void 0],r))return!0}}function HL(e,t){const{aggregate:n,type:i}=e;return n?se(n)&&!ode.has(n)?{valid:!1,reason:Zde(n)}:i==="quantitative"&&t==="log"?{valid:!1,reason:Jde(e)}:{valid:!0}:{valid:!1,reason:Kde(e)}}function o6(e,t,n,i){return e.explicit&&t.explicit&&Z(ihe(n,i,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function z2e(e){const t=fs(e.map(o=>{if(so(o)){const{sort:a,...u}=o;return u}return o}),We),n=fs(e.map(o=>{if(so(o)){const a=o.sort;return a!==void 0&&!Hd(a)&&("op"in a&&a.op==="count"&&delete a.field,a.order==="ascending"&&delete a.order),a}}).filter(o=>o!==void 0),We);if(t.length===0)return;if(t.length===1){const o=e[0];if(so(o)&&n.length>0){let a=n[0];if(n.length>1){Z(pN);const u=n.filter(l=>re(l)&&"op"in l&&l.op!=="min");n.every(l=>re(l)&&"op"in l)&&u.length===1?a=u[0]:a=!0}else if(re(a)&&"field"in a){const u=a.field;o.field===u&&(a=a.order?{order:a.order}:!0)}return{...o,sort:a}}return o}const i=fs(n.map(o=>Hd(o)||!("op"in o)||se(o.op)&&ue(nde,o.op)?o:(Z(she(o)),!0)),We);let r;i.length===1?r=i[0]:i.length>1&&(Z(pN),r=!0);const s=fs(e.map(o=>so(o)?o.data:null),o=>o);return s.length===1&&s[0]!==null?{data:s[0],fields:t.map(a=>a.field),...r?{sort:r}:{}}:{fields:t,...r?{sort:r}:{}}}function a6(e){if(so(e)&&se(e.field))return e.field;if(ade(e)){let t;for(const n of e.fields)if(so(n)&&se(n.field)){if(!t)t=n.field;else if(t!==n.field)return Z(ohe),t}return Z(ahe),t}else if(ude(e)){Z(uhe);const t=e.fields[0];return se(t)?t:void 0}}function Cm(e,t){const i=e.component.scales[t].get("domains").map(r=>(so(r)&&(r.data=e.lookupDataSource(r.data)),r));return z2e(i)}function GL(e){return Lc(e)||l6(e)?e.children.reduce((t,n)=>t.concat(GL(n)),VL(e)):VL(e)}function VL(e){return Y(e.component.scales).reduce((t,n)=>{const i=e.component.scales[n];if(i.merged)return t;const r=i.combine(),{name:s,type:o,selectionExtent:a,domains:u,range:l,reverse:c,...f}=r,d=B2e(r.range,s,n,e),h=Cm(e,n),p=a?Dge(e,a,i,h):null;return t.push({name:s,type:o,...h?{domain:h}:{},...p?{domainRaw:p}:{},range:d,...c!==void 0?{reverse:c}:{},...f}),t},[])}function B2e(e,t,n,i){if(Bt(n)){if(yu(e))return{step:{signal:`${t}_step`}}}else if(re(e)&&so(e))return{...e,data:i.lookupDataSource(e.data)};return e}class YL extends lo{constructor(t,n){super({},{name:t}),this.merged=!1,this.setWithExplicit("type",n)}domainHasZero(){const t=this.get("type");if(qe([bn.LOG,bn.TIME,bn.UTC],t))return"definitely-not";const n=this.get("zero");if(n===!0||n===void 0&&qe([bn.LINEAR,bn.SQRT,bn.POW],t))return"definitely";const i=this.get("domains");if(i.length>0){let r=!1,s=!1,o=!1;for(const a of i){if(W(a)){const u=a[0],l=a[a.length-1];if(Ze(u)&&Ze(l))if(u<=0&&l>=0){r=!0;continue}else{s=!0;continue}}o=!0}if(r)return"definitely";if(s&&!o)return"definitely-not"}return"maybe"}}const U2e=["range","scheme"];function j2e(e){const t=e.component.scales;for(const n of d_){const i=t[n];if(!i)continue;const r=q2e(n,e);i.setWithExplicit("range",r)}}function XL(e,t){const n=e.fieldDef(t);if(n!=null&&n.bin){const{bin:i,field:r}=n,s=mi(t),o=e.getName(s);if(re(i)&&i.binned&&i.step!==void 0)return new un(()=>{const a=e.scaleName(t),u=`(domain("${a}")[1] - domain("${a}")[0]) / ${i.step}`;return`${e.getSignalName(o)} / (${u})`});if(_t(i)){const a=Kw(e,r,i);return new un(()=>{const u=e.getSignalName(a),l=`(${u}.stop - ${u}.start) / ${u}.step`;return`${e.getSignalName(o)} / (${l})`})}}}function q2e(e,t){const n=t.specifiedScales[e],{size:i}=t,s=t.getScaleComponent(e).get("type");for(const f of U2e)if(n[f]!==void 0){const d=L_(s,f),h=LN(e,f);if(!d)Z(dN(s,f,e));else if(h)Z(h);else switch(f){case"range":{const p=n.range;if(W(p)){if(Bt(e))return Es(p.map(g=>{if(g==="width"||g==="height"){const m=t.getName(g),y=t.getSignalName.bind(t);return un.fromName(y,m)}return g}))}else if(re(p))return Es({data:t.requestDataName(Ft.Main),field:p.field,sort:{op:"min",field:t.vgField(e)}});return Es(p)}case"scheme":return Es(W2e(n[f]))}}const o=e===$t||e==="xOffset"?"width":"height",a=i[o];if(ws(a)){if(Bt(e))if(on(s)){const f=ZL(a,t,e);if(f)return Es({step:f})}else Z(hN(o));else if(Zd(e)){const f=e===ra?"x":"y";if(t.getScaleComponent(f).get("type")==="band"){const p=JL(a,s);if(p)return Es(p)}}}const{rangeMin:u,rangeMax:l}=n,c=H2e(e,t);return(u!==void 0||l!==void 0)&&L_(s,"rangeMin")&&W(c)&&c.length===2?Es([u??c[0],l??c[1]]):Ri(c)}function W2e(e){return Vhe(e)?{scheme:e.name,...hi(e,["name"])}:{scheme:e}}function KL(e,t,n,{center:i}={}){const r=mi(e),s=t.getName(r),o=t.getSignalName.bind(t);return e===rn&&Tr(n)?i?[un.fromName(a=>`${o(a)}/2`,s),un.fromName(a=>`-${o(a)}/2`,s)]:[un.fromName(o,s),0]:i?[un.fromName(a=>`-${o(a)}/2`,s),un.fromName(a=>`${o(a)}/2`,s)]:[0,un.fromName(o,s)]}function H2e(e,t){const{size:n,config:i,mark:r,encoding:s}=t,{type:o}=Xt(s[e]),u=t.getScaleComponent(e).get("type"),{domain:l,domainMid:c}=t.specifiedScales[e];switch(e){case $t:case rn:{if(qe(["point","band"],u)){const f=QL(e,n,i.view);if(ws(f))return{step:ZL(f,t,e)}}return KL(e,t,u)}case ra:case dc:return G2e(e,t,u);case to:{const f=X2e(r,i),d=K2e(r,n,t,i);return yc(u)?Y2e(f,d,V2e(u,i,l,e)):[f,d]}case tr:return[0,Math.PI*2];case hu:return[0,360];case Ar:return[0,new un(()=>{const f=t.getSignalName(Oi(t.parent)?"child_width":"width"),d=t.getSignalName(Oi(t.parent)?"child_height":"height");return`min(${f},${d})/2`})];case sa:return{step:1e3/i.scale.framesPerSecond};case ua:return[i.scale.minStrokeWidth,i.scale.maxStrokeWidth];case la:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case gi:return"symbol";case pi:case hs:case ps:return u==="ordinal"?o==="nominal"?"category":"ordinal":c!==void 0?"diverging":r==="rect"||r==="geoshape"?"heatmap":"ramp";case no:case oa:case aa:return[i.scale.minOpacity,i.scale.maxOpacity]}}function ZL(e,t,n){const{encoding:i}=t,r=t.getScaleComponent(n),s=a_(n),o=i[s];if(IR({step:e,offsetIsDiscrete:Me(o)&&FN(o.type)})==="offset"&&mR(i,s)){const u=t.getScaleComponent(s);let c=`domain('${t.scaleName(s)}').length`;if(u.get("type")==="band"){const d=u.get("paddingInner")??u.get("padding")??0,h=u.get("paddingOuter")??u.get("padding")??0;c=`bandspace(${c}, ${d}, ${h})`}const f=r.get("paddingInner")??r.get("padding");return{signal:`${e.step} * ${c} / (1-${fde(f)})`}}else return e.step}function JL(e,t){if(IR({step:e,offsetIsDiscrete:on(t)})==="offset")return{step:e.step}}function G2e(e,t,n){const i=e===ra?"x":"y",r=t.getScaleComponent(i);if(!r)return KL(i,t,n,{center:!0});const s=r.get("type"),o=t.scaleName(i),{markDef:a,config:u}=t;if(s==="band"){const l=QL(i,t.size,t.config.view);if(ws(l)){const c=JL(l,n);if(c)return c}return[0,{signal:`bandwidth('${o}')`}]}else{const l=t.encoding[i];if(J(l)&&l.timeUnit){const c=kN(l.timeUnit,p=>`scale('${o}', ${p})`),f=t.config.scale.bandWithNestedOffsetPaddingInner,d=pa({fieldDef:l,markDef:a,config:u})-.5,h=d!==0?` + ${d}`:"";if(f){const p=me(f)?`${f.signal}/2`+h:`${f/2+d}`,g=me(f)?`(1 - ${f.signal}/2)`+h:`${1-f/2+d}`;return[{signal:`${p} * (${c})`},{signal:`${g} * (${c})`}]}return[0,{signal:c}]}return EM(`Cannot use ${e} scale if ${i} scale is not discrete.`)}}function QL(e,t,n){const i=e===$t?"width":"height",r=t[i];return r||nm(n,i)}function V2e(e,t,n,i){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&W(n)?n.length+1:(Z(yhe(i)),3)}}function Y2e(e,t,n){const i=()=>{const r=Dr(t),s=Dr(e),o=`(${r} - ${s}) / (${n} - 1)`;return`sequence(${s}, ${r} + ${o}, ${o})`};return me(t)?new un(i):{signal:i()}}function X2e(e,t){switch(e){case"bar":case"tick":return t.scale.minBandSize;case"line":case"trail":case"rule":return t.scale.minStrokeWidth;case"text":return t.scale.minFontSize;case"point":case"square":case"circle":return t.scale.minSize}throw new Error(M1("size",e))}const eI=.95;function K2e(e,t,n,i){const r={x:XL(n,"x"),y:XL(n,"y")};switch(e){case"bar":case"tick":{if(i.scale.maxBandSize!==void 0)return i.scale.maxBandSize;const s=tI(t,r,i.view);return Ze(s)?s-1:new un(()=>`${s.signal} - 1`)}case"line":case"trail":case"rule":return i.scale.maxStrokeWidth;case"text":return i.scale.maxFontSize;case"point":case"square":case"circle":{if(i.scale.maxSize)return i.scale.maxSize;const s=tI(t,r,i.view);return Ze(s)?Math.pow(eI*s,2):new un(()=>`pow(${eI} * ${s.signal}, 2)`)}}throw new Error(M1("size",e))}function tI(e,t,n){const i=ws(e.width)?e.width.step:fw(n,"width"),r=ws(e.height)?e.height.step:fw(n,"height");return t.x||t.y?new un(()=>`min(${[t.x?t.x.signal:i,t.y?t.y.signal:r].join(", ")})`):Math.min(i,r)}function nI(e,t){Dt(e)?Z2e(e,t):sI(e,t)}function Z2e(e,t){const n=e.component.scales,{config:i,encoding:r,markDef:s,specifiedScales:o}=e;for(const a of Y(n)){const u=o[a],l=n[a],c=e.getScaleComponent(a),f=Xt(r[a]),d=u[t],h=c.get("type"),p=c.get("padding"),g=c.get("paddingInner"),m=L_(h,t),y=LN(a,t);if(d!==void 0&&(m?y&&Z(y):Z(dN(h,t,a))),m&&y===void 0)if(d!==void 0){const b=f.timeUnit,v=f.type;switch(t){case"domainMax":case"domainMin":vu(u[t])||v==="temporal"||b?l.set(t,{signal:K1(u[t],{type:v,timeUnit:b})},!0):l.set(t,u[t],!0);break;default:l.copyKeyFromObject(t,u)}}else{const b=X(iI,t)?iI[t]({model:e,channel:a,fieldOrDatumDef:f,scaleType:h,scalePadding:p,scalePaddingInner:g,domain:u.domain,domainMin:u.domainMin,domainMax:u.domainMax,markDef:s,config:i,hasNestedOffsetScale:yR(r,a),hasSecondaryRangeChannel:!!r[gs(a)]}):i.scale[t];b!==void 0&&l.set(t,b,!1)}}}const iI={bins:({model:e,fieldOrDatumDef:t})=>J(t)?J2e(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>Q2e(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:i,domainMax:r,fieldOrDatumDef:s})=>eye(e,t,n,i,r,s),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:i,config:r})=>tye(e,t,r.scale,n,i,r.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:i,config:r,hasNestedOffsetScale:s})=>nye(e,t,n.type,i,r.scale,s),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:i,config:r,hasNestedOffsetScale:s})=>iye(e,t,n,i,r.scale,s),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:i})=>{const r=J(e)?e.sort:void 0;return rye(t,r,n,i.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:i,scaleType:r,config:s,hasSecondaryRangeChannel:o})=>sye(e,t,n,i,r,s.scale,o)};function rI(e){Dt(e)?j2e(e):sI(e,"range")}function sI(e,t){const n=e.component.scales;for(const i of e.children)t==="range"?rI(i):nI(i,t);for(const i of Y(n)){let r;for(const s of e.children){const o=s.component.scales[i];if(o){const a=o.getWithExplicit(t);r=ma(r,a,t,"scale",lO((u,l)=>{switch(t){case"range":return u.step&&l.step?u.step-l.step:0}return 0}))}}n[i].setWithExplicit(t,r)}}function J2e(e,t){const n=t.bin;if(_t(n)){const i=Kw(e,t.field,n);return new un(()=>e.getSignalName(i))}else if(mn(n)&&mu(n)&&n.step!==void 0)return{step:n.step}}function Q2e(e,t){if(qe([pi,hs,ps],e)&&t!=="nominal")return"hcl"}function eye(e,t,n,i,r,s){var o;if(!((o=Rr(s))!=null&&o.bin||W(n)||r!=null||i!=null||qe([bn.TIME,bn.UTC],e)))return Bt(t)?!0:void 0}function tye(e,t,n,i,r,s){if(Bt(e)){if(vs(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:o,orient:a}=r;if(o==="bar"&&!(J(i)&&(i.bin||i.timeUnit))&&(a==="vertical"&&e==="x"||a==="horizontal"&&e==="y"))return s.continuousBandSize}if(t===bn.POINT)return n.pointPadding}}function nye(e,t,n,i,r,s=!1){if(e===void 0){if(Bt(t)){const{bandPaddingInner:o,barBandPaddingInner:a,rectBandPaddingInner:u,tickBandPaddingInner:l,bandWithNestedOffsetPaddingInner:c}=r;return s?c:zt(o,n==="bar"?a:n==="tick"?l:u)}else if(Zd(t)&&i===bn.BAND)return r.offsetBandPaddingInner}}function iye(e,t,n,i,r,s=!1){if(e===void 0){if(Bt(t)){const{bandPaddingOuter:o,bandWithNestedOffsetPaddingOuter:a}=r;if(s)return a;if(n===bn.BAND)return zt(o,me(i)?{signal:`${i.signal}/2`}:i/2)}else if(Zd(t)){if(n===bn.POINT)return .5;if(n===bn.BAND)return r.offsetBandPaddingOuter}}}function rye(e,t,n,i){if(n==="x"&&i.xReverse!==void 0)return Tr(e)&&t==="descending"?me(i.xReverse)?{signal:`!${i.xReverse.signal}`}:!i.xReverse:i.xReverse;if(Tr(e)&&t==="descending")return!0}function sye(e,t,n,i,r,s,o){if(!!n&&n!=="unaggregated"&&Tr(r)){if(W(n)){const u=n[0],l=n[n.length-1];if(Ze(u)&&u<=0&&Ze(l)&&l>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!yc(r))return!0;if(!(J(t)&&t.bin)&&qe([...io,...Vfe],e)){const{orient:u,type:l}=i;return qe(["bar","area","line","trail"],l)&&(u==="horizontal"&&e==="y"||u==="vertical"&&e==="x")?!1:qe(["bar","area"],l)&&!o?!0:s==null?void 0:s.zero}return!1}function oye(e,t,n,i,r=!1){const s=aye(t,n,i,r),{type:o}=e;return ms(t)?o!==void 0?e0e(t,o)?J(n)&&!Qhe(o,n.type)?(Z(the(o,s)),s):o:(Z(ehe(t,o,s)),s):s:null}function aye(e,t,n,i){var r;switch(t.type){case"nominal":case"ordinal":{if(pc(e)||h_(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&Z(__(e,"ordinal")),"ordinal";if(f_(e))return"band";if(Bt(e)||Zd(e)){if(qe(["rect","bar","image","rule","tick"],n.type)||i)return"band"}else if(n.type==="arc"&&e in c_)return"band";const s=n[mi(e)];return Eu(s)||vc(t)&&((r=t.axis)!=null&&r.tickBand)?"band":"point"}case"temporal":return pc(e)?"time":h_(e)==="discrete"?(Z(__(e,"temporal")),"ordinal"):J(t)&&t.timeUnit&&sn(t.timeUnit).utc?"utc":f_(e)?"band":"time";case"quantitative":return pc(e)?J(t)&&_t(t.bin)?"bin-ordinal":"linear":h_(e)==="discrete"?(Z(__(e,"quantitative")),"ordinal"):f_(e)?"band":"linear";case"geojson":return}throw new Error(cN(t.type))}function uye(e,{ignoreRange:t}={}){oI(e),WL(e);for(const n of Jhe)nI(e,n);t||rI(e)}function oI(e){Dt(e)?e.component.scales=lye(e):e.component.scales=fye(e)}function lye(e){const{encoding:t,mark:n,markDef:i}=e,r={};for(const s of d_){const o=Xt(t[s]);if(o&&n===zN&&s===gi&&o.type===mc)continue;let a=o&&o.scale;if(o&&a!==null&&a!==!1){a??(a={});const u=yR(t,s),l=oye(a,s,o,i,u);r[s]=new YL(e.scaleName(`${s}`,!0),{value:l,explicit:a.type===l})}}return r}const cye=lO((e,t)=>DN(e)-DN(t));function fye(e){var t;const n=e.component.scales={},i={},r=e.component.resolve;for(const s of e.children){oI(s);for(const o of Y(s.component.scales))if((t=r.scale)[o]??(t[o]=CL(o,e)),r.scale[o]==="shared"){const a=i[o],u=s.component.scales[o].getWithExplicit("type");a?jhe(a.value,u.value)?i[o]=ma(a,u,"type","scale",cye):(r.scale[o]="independent",delete i[o]):i[o]=u}}for(const s of Y(i)){const o=e.scaleName(s,!0),a=i[s];n[s]=new YL(o,a);for(const u of e.children){const l=u.component.scales[s];l&&(u.renameScale(l.get("name"),o),l.merged=!0)}}return n}class u6{constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function Dt(e){return(e==null?void 0:e.type)==="unit"}function Oi(e){return(e==null?void 0:e.type)==="facet"}function l6(e){return(e==null?void 0:e.type)==="concat"}function Lc(e){return(e==null?void 0:e.type)==="layer"}class c6{constructor(t,n,i,r,s,o,a){this.type=n,this.parent=i,this.config=s,this.parent=i,this.config=s,this.view=yn(a),this.name=t.name??r,this.title=da(t.title)?{text:t.title}:t.title?yn(t.title):void 0,this.scaleNameMap=i?i.scaleNameMap:new u6,this.projectionNameMap=i?i.projectionNameMap:new u6,this.signalNameMap=i?i.signalNameMap:new u6,this.data=t.data,this.description=t.description,this.transforms=age(t.transform??[]),this.layout=n==="layer"||n==="unit"?{}:dpe(t,n,s),this.component={data:{sources:i?i.component.data.sources:[],outputNodes:i?i.component.data.outputNodes:{},outputNodeRefCounts:i?i.component.data.outputNodeRefCounts:{},isFaceted:q1(t)||(i==null?void 0:i.component.data.isFaceted)&&t.data===void 0},layoutSize:new lo,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...o?De(o):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){uye(this)}parseProjection(){IL(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){ML(this)}assembleEncodeFromView(t){const{style:n,...i}=t,r={};for(const s of Y(i)){const o=i[s];o!==void 0&&(r[s]=Et(o))}return r}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=Et(this.description)),this.type==="unit"||this.type==="layer")?{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...n}:ht(n)?void 0:n}assembleLayout(){if(!this.layout)return;const{spacing:t,...n}=this.layout,{component:i,config:r}=this,s=Tme(i.layoutHeaders,r);return{padding:t,...this.assembleDefaultLayout(),...n,...s?{titleBand:s}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const i of ir)t[i].title&&n.push(kme(this,i));for(const i of Ww)n=n.concat(Ame(this,i));return n}assembleAxes(){return dme(this.component.axes,this.config)}assembleLegends(){return RL(this)}assembleProjections(){return e2e(this)}assembleTitle(){const{encoding:t,...n}=this.title??{},i={...GM(this.config.title).nonMarkTitleProperties,...n,...t?{encode:{update:t}}:{}};if(i.text)return qe(["unit","layer"],this.type)?qe(["middle",void 0],i.anchor)&&(i.frame??(i.frame="group")):i.anchor??(i.anchor="start"),ht(i)?void 0:i}assembleGroup(t=[]){const n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);const i=this.assembleLayout();i&&(n.layout=i),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const r=!this.parent||Oi(this.parent)?GL(this):[];r.length>0&&(n.scales=r);const s=this.assembleAxes();s.length>0&&(n.axes=s);const o=this.assembleLegends();return o.length>0&&(n.legends=o),n}getName(t){return At((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(Ft[t].toLowerCase())}requestDataName(t){const n=this.getDataName(t),i=this.component.data.outputNodeRefCounts;return i[n]=(i[n]||0)+1,n}getSizeSignalRef(t){if(Oi(this.parent)){const n=wL(t),i=F1(n),r=this.component.scales[i];if(r&&!r.merged){const s=r.get("type"),o=r.get("range");if(on(s)&&yu(o)){const a=r.get("name"),u=Cm(this,i),l=a6(u);if(l){const c=te({aggregate:"distinct",field:l},{expr:"datum"});return{signal:_L(a,r,c)}}else return Z(b_(i)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(IM(t)&&ms(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getScaleType(t){const n=this.getScaleComponent(t);return n?n.get("type"):void 0}getSelectionComponent(t,n){let i=this.component.selection[t];if(!i&&this.parent&&(i=this.parent.getSelectionComponent(t,n)),!i)throw new Error(mde(n));return i}hasAxisOrientSignalRef(){var t,n;return((t=this.component.axes.x)==null?void 0:t.some(i=>i.hasOrientSignalRef()))||((n=this.component.axes.y)==null?void 0:n.some(i=>i.hasOrientSignalRef()))}}class aI extends c6{vgField(t,n={}){const i=this.fieldDef(t);if(i)return te(i,n)}reduceFieldDef(t,n){return q0e(this.getMapping(),(i,r,s)=>{const o=Rr(r);return o?t(i,o,s):i},n)}forEachFieldDef(t,n){J_(this.getMapping(),(i,r)=>{const s=Rr(i);s&&t(s,r)},n)}}class km extends ut{clone(){return new km(null,De(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=De(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??"value",i[1]??"density"];const r=this.transform.resolve??"shared";this.transform.resolve=r}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${We(this.transform)}`}assemble(){const{density:t,...n}=this.transform,i={type:"kde",field:t,...n};return i.resolve=this.transform.resolve,i}}class Am extends ut{clone(){return new Am(null,De(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=De(n)}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${We(this.transform)}`}assemble(){const{extent:t,param:n}=this.transform;return{type:"extent",field:t,signal:n}}}class $m extends ut{clone(){return new $m(this.parent,De(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=De(n);const{flatten:i,as:r=[]}=this.transform;this.transform.as=i.map((s,o)=>r[o]??s)}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${We(this.transform)}`}assemble(){const{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}}class Sm extends ut{clone(){return new Sm(null,De(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=De(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??"key",i[1]??"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${We(this.transform)}`}assemble(){const{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}}class Ic extends ut{clone(){return new Ic(null,De(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let i=0;for(const r of[[Sr,$r],[nr,Fr]]){const s=r.map(o=>{const a=Xt(n.encoding[o]);return J(a)?a.field:_s(a)?{expr:`${a.datum}`}:Nr(a)?{expr:`${a.value}`}:void 0});(s[0]||s[1])&&(t=new Ic(t,s,null,n.getName(`geojson_${i++}`)))}if(n.channelHasField(gi)){const r=n.typedFieldDef(gi);r.type===mc&&(t=new Ic(t,null,r.field,n.getName(`geojson_${i++}`)))}return t}constructor(t,n,i,r){super(t),this.fields=n,this.geojson=i,this.signal=r}dependentFields(){const t=(this.fields??[]).filter(se);return new Set([...this.geojson?[this.geojson]:[],...t])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${We(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class wh extends ut{clone(){return new wh(null,this.projection,De(this.fields),De(this.as))}constructor(t,n,i,r){super(t),this.projection=n,this.fields=i,this.as=r}static parseAll(t,n){if(!n.projectionName())return t;for(const i of[[Sr,$r],[nr,Fr]]){const r=i.map(o=>{const a=Xt(n.encoding[o]);return J(a)?a.field:_s(a)?{expr:`${a.datum}`}:Nr(a)?{expr:`${a.value}`}:void 0}),s=i[0]===nr?"2":"";(r[0]||r[1])&&(t=new wh(t,n.projectionName(),r,[n.getName(`x${s}`),n.getName(`y${s}`)]))}return t}dependentFields(){return new Set(this.fields.filter(se))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${We(this.fields)} ${We(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class Iu extends ut{clone(){return new Iu(null,De(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:n=0,stop:i,step:r}=t;return{signal:`sequence(${[n,i,...r?[r]:[]].join(",")})`}}static makeFromTransform(t,n){return new Iu(t,n)}static makeFromEncoding(t,n){const i=n.encoding,r=i.x,s=i.y;if(J(r)&&J(s)){const o=r.impute?r:s.impute?s:void 0;if(o===void 0)return;const a=r.impute?s:s.impute?r:void 0,{method:u,value:l,frame:c,keyvals:f}=o.impute,d=xR(n.mark,i);return new Iu(t,{impute:o.field,key:a.field,...u?{method:u}:{},...l!==void 0?{value:l}:{},...c?{frame:c}:{},...f!==void 0?{keyvals:f}:{},...d.length?{groupby:d}:{}})}return null}hash(){return`Impute ${We(this.transform)}`}assemble(){const{impute:t,key:n,keyvals:i,method:r,groupby:s,value:o,frame:a=[null,null]}=this.transform,u={type:"impute",field:t,key:n,...i?{keyvals:jpe(i)?this.processSequence(i):i}:{},method:"value",...s?{groupby:s}:{},value:!r||r==="value"?o:null};if(r&&r!=="value"){const l={type:"window",as:[`imputed_${t}_value`],ops:[r],fields:[t],frame:a,ignorePeers:!1,...s?{groupby:s}:{}},c={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[u,l,c]}else return[u]}}class Fm extends ut{clone(){return new Fm(null,De(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=De(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??n.on,i[1]??n.loess]}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${We(this.transform)}`}assemble(){const{loess:t,on:n,...i}=this.transform;return{type:"loess",x:n,y:t,...i}}}class Eh extends ut{clone(){return new Eh(null,De(this.transform),this.secondary)}constructor(t,n,i){super(t),this.transform=n,this.secondary=i}static make(t,n,i,r){const s=n.component.data.sources,{from:o}=i;let a=null;if(qpe(o)){let u=fI(o.data,s);u||(u=new Ru(o.data),s.push(u));const l=n.getName(`lookup_${r}`);a=new yi(u,l,Ft.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[l]=a}else if(Wpe(o)){const u=o.param;i={as:u,...i};let l;try{l=n.getSelectionComponent(At(u),u)}catch{throw new Error(xde(u))}if(a=l.materialized,!a)throw new Error(_de(u))}return new Eh(t,i,a.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?oe(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${We({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t={values:this.transform.from.fields,...this.transform.as?{as:oe(this.transform.as)}:{}};else{let n=this.transform.as;se(n)||(Z(Mde),n="_lookup"),t={as:[n]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...t,...this.transform.default?{default:this.transform.default}:{}}}}class Dm extends ut{clone(){return new Dm(null,De(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=De(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??"prob",i[1]??"value"]}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${We(this.transform)}`}assemble(){const{quantile:t,...n}=this.transform;return{type:"quantile",field:t,...n}}}class Tm extends ut{clone(){return new Tm(null,De(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=De(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??n.on,i[1]??n.regression]}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${We(this.transform)}`}assemble(){const{regression:t,on:n,...i}=this.transform;return{type:"regression",x:n,y:t,...i}}}class Mm extends ut{clone(){return new Mm(null,De(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=fs((this.transform.groupby??[]).concat(t),n=>n)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${We(this.transform)}`}assemble(){const{pivot:t,value:n,groupby:i,limit:r,op:s}=this.transform;return{type:"pivot",field:t,value:n,...r!==void 0?{limit:r}:{},...s!==void 0?{op:s}:{},...i!==void 0?{groupby:i}:{}}}}class Nm extends ut{clone(){return new Nm(null,De(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${We(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function uI(e){let t=0;function n(i,r){if(i instanceof Ru&&!i.isGenerator&&!Cc(i.data)&&(e.push(r),r={name:null,source:r.name,transform:[]}),i instanceof In&&(i.parent instanceof Ru&&!r.source?(r.format={...r.format,parse:i.assembleFormatParse()},r.transform.push(...i.assembleTransforms(!0))):r.transform.push(...i.assembleTransforms())),i instanceof Nc){r.name||(r.name=`data_${t++}`),!r.source||r.transform.length>0?(e.push(r),i.data=r.name):i.data=r.source,e.push(...i.assemble());return}switch((i instanceof vh||i instanceof xh||i instanceof Rc||i instanceof Fc||i instanceof Dc||i instanceof wh||i instanceof Ir||i instanceof Eh||i instanceof Oc||i instanceof Lu||i instanceof Sm||i instanceof $m||i instanceof km||i instanceof Fm||i instanceof Dm||i instanceof Tm||i instanceof va||i instanceof Nm||i instanceof Mm||i instanceof Am)&&r.transform.push(i.assemble()),(i instanceof $s||i instanceof Cs||i instanceof Iu||i instanceof go||i instanceof Ic)&&r.transform.push(...i.assemble()),i instanceof yi&&(r.source&&r.transform.length===0?i.setSource(r.source):i.parent instanceof yi?i.setSource(r.name):(r.name||(r.name=`data_${t++}`),i.setSource(r.name),i.numChildren()===1&&(e.push(r),r={name:null,source:r.name,transform:[]}))),i.numChildren()){case 0:i instanceof yi&&(!r.source||r.transform.length>0)&&e.push(r);break;case 1:n(i.children[0],r);break;default:{r.name||(r.name=`data_${t++}`);let s=r.name;!r.source||r.transform.length>0?e.push(r):s=r.source;for(const o of i.children)n(o,{name:null,source:s,transform:[]});break}}}return n}function dye(e){const t=[],n=uI(t);for(const i of e.children)n(i,{source:e.name,name:null,transform:[]});return t}function hye(e,t){const n=[],i=uI(n);let r=0;for(const o of e.sources){o.hasName()||(o.dataName=`source_${r++}`);const a=o.assemble();i(o,a)}for(const o of n)o.transform.length===0&&delete o.transform;let s=0;for(const[o,a]of n.entries())(a.transform??[]).length===0&&!a.source&&n.splice(s++,0,n.splice(o,1)[0]);for(const o of n)for(const a of o.transform??[])a.type==="lookup"&&(a.from=e.outputNodes[a.from].getSource());for(const o of n)o.name in t&&(o.values=t[o.name]);return n}function pye(e){return e==="top"||e==="left"||me(e)?"header":"footer"}function gye(e){for(const t of ir)mye(e,t);cI(e,"x"),cI(e,"y")}function mye(e,t){var o;const{facet:n,config:i,child:r,component:s}=e;if(e.channelHasField(t)){const a=n[t],u=Mc("title",null,i,t);let l=xc(a,i,{allowDisabling:!0,includeDefault:u===void 0||!!u});r.component.layoutHeaders[t].title&&(l=W(l)?l.join(", "):l,l+=` / ${r.component.layoutHeaders[t].title}`,r.component.layoutHeaders[t].title=null);const c=Mc("labelOrient",a.header,i,t),f=a.header!==null?zt((o=a.header)==null?void 0:o.labels,i.header.labels,!0):!1,d=qe(["bottom","right"],c)?"footer":"header";s.layoutHeaders[t]={title:a.header!==null?l:null,facetFieldDef:a,[d]:t==="facet"?[]:[lI(e,t,f)]}}}function lI(e,t,n){const i=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(i)?e.child.getSizeSignalRef(i):void 0,axes:[]}}function cI(e,t){const{child:n}=e;if(n.component.axes[t]){const{layoutHeaders:i,resolve:r}=e.component;if(r.axis[t]=Yw(r,t),r.axis[t]==="shared"){const s=t==="x"?"column":"row",o=i[s];for(const a of n.component.axes[t]){const u=pye(a.get("orient"));o[u]??(o[u]=[lI(e,s,!1)]);const l=bh(a,"main",e.config,{header:!0});l&&o[u][0].axes.push(l),a.mainExtracted=!0}}}}function yye(e){f6(e),Rm(e,"width"),Rm(e,"height")}function bye(e){f6(e);const t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";Rm(e,t),Rm(e,n)}function f6(e){for(const t of e.children)t.parseLayoutSize()}function Rm(e,t){const n=wL(t),i=F1(n),r=e.component.resolve,s=e.component.layoutSize;let o;for(const a of e.children){const u=a.component.layoutSize.getWithExplicit(n),l=r.scale[i]??CL(i,e);if(l==="independent"&&u.value==="step"){o=void 0;break}if(o){if(l==="independent"&&o.value!==u.value){o=void 0;break}o=ma(o,u,n,"")}else o=u}if(o){for(const a of e.children)e.renameSignal(a.getName(n),e.getName(t)),a.component.layoutSize.set(n,"merged",!1);s.setWithExplicit(t,o)}else s.setWithExplicit(t,{explicit:!1,value:void 0})}function vye(e){const{size:t,component:n}=e;for(const i of io){const r=mi(i);if(t[r]){const s=t[r];n.layoutSize.set(r,ws(s)?"step":s,!0)}else{const s=xye(e,r);n.layoutSize.set(r,s,!1)}}}function xye(e,t){const n=t==="width"?"x":"y",i=e.config,r=e.getScaleComponent(n);if(r){const s=r.get("type"),o=r.get("range");if(on(s)){const a=nm(i.view,t);return yu(o)||ws(a)?"step":a}else return cw(i.view,t)}else{if(e.hasProjection||e.mark==="arc")return cw(i.view,t);{const s=nm(i.view,t);return ws(s)?s.step:s}}}function d6(e,t,n){return te(t,{suffix:`by_${te(e)}`,...n})}class Ch extends aI{constructor(t,n,i,r){super(t,"facet",n,i,r,t.resolve),this.child=y6(t.spec,this,this.getName("child"),void 0,r),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!ih(t))return{facet:this.initFacetFieldDef(t,"facet")};const n=Y(t),i={};for(const r of n){if(![Zs,Js].includes(r)){Z(M1(r,"facet"));break}const s=t[r];if(s.field===void 0){Z(x_(s,r));break}i[r]=this.initFacetFieldDef(s,r)}return i}initFacetFieldDef(t,n){const i=Z_(t,n);return i.header?i.header=yn(i.header):i.header===null&&(i.header=null),i}channelHasField(t){return X(this.facet,t)}fieldDef(t){return this.facet[t]}parseData(){this.component.data=Om(this),this.child.parseData()}parseLayoutSize(){f6(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection,Object.values(this.component.selection).some(t=>ks(t))&&w_(v_)}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),gye(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){const t={};for(const n of ir)for(const i of Hw){const r=this.component.layoutHeaders[n],s=r[i],{facetFieldDef:o}=r;if(o){const a=Mc("titleOrient",o.header,this.config,n);if(["right","bottom"].includes(a)){const u=xm(n,a);t.titleAnchor??(t.titleAnchor={}),t.titleAnchor[u]="end"}}if(s!=null&&s[0]){const a=n==="row"?"height":"width",u=i==="header"?"headerBand":"footerBand";n!=="facet"&&!this.child.component.layoutSize.get(a)&&(t[u]??(t[u]={}),t[u][n]=.5),r.title&&(t.offset??(t.offset={}),t.offset[n==="row"?"rowTitle":"columnTitle"]=10)}}return t}assembleDefaultLayout(){const{column:t,row:n}=this.facet,i=t?this.columnDistinctSignal():n?1:void 0;let r="all";return(!n&&this.component.resolve.scale.x==="independent"||!t&&this.component.resolve.scale.y==="independent")&&(r="none"),{...this.getHeaderLayoutMixins(),...i?{columns:i}:{},bounds:"full",align:r}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof Ch))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(t){return this.parent&&this.parent instanceof Ch?{...this.channelHasField("column")?{encode:{update:{columns:{field:te(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(t)}:super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],n=[],i=[];if(this.child instanceof Ch){if(this.child.channelHasField("column")){const r=te(this.child.facet.column);t.push(r),n.push("distinct"),i.push(`distinct_${r}`)}}else for(const r of io){const s=this.child.component.scales[r];if(s&&!s.merged){const o=s.get("type"),a=s.get("range");if(on(o)&&yu(a)){const u=Cm(this.child,r),l=a6(u);l?(t.push(l),n.push("distinct"),i.push(`distinct_${l}`)):Z(b_(r))}}}return{fields:t,ops:n,as:i}}assembleFacet(){const{name:t,data:n}=this.component.data.facetRoot,{row:i,column:r}=this.facet,{fields:s,ops:o,as:a}=this.getCardinalityAggregateForChild(),u=[];for(const c of ir){const f=this.facet[c];if(f){u.push(te(f));const{bin:d,sort:h}=f;if(_t(d)&&u.push(te(f,{binSuffix:"end"})),oo(h)){const{field:p,op:g=j1}=h,m=d6(f,h);i&&r?(s.push(m),o.push("max"),a.push(m)):(s.push(p),o.push(g),a.push(m))}else if(W(h)){const p=Tc(f,c);s.push(p),o.push("max"),a.push(p)}}}const l=!!i&&!!r;return{name:t,data:n,groupby:u,...l||s.length>0?{aggregate:{...l?{cross:l}:{},...s.length?{fields:s,ops:o,as:a}:{}}}:{}}}facetSortFields(t){const{facet:n}=this,i=n[t];return i?oo(i.sort)?[d6(i,i.sort,{expr:"datum"})]:W(i.sort)?[Tc(i,t,{expr:"datum"})]:[te(i,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:n}=this,i=n[t];if(i){const{sort:r}=i;return[(oo(r)?r.order:!W(r)&&r)||"ascending"]}return[]}assembleLabelTitle(){var r;const{facet:t,config:n}=this;if(t.facet)return Gw(t.facet,"facet",n);const i={row:["top","bottom"],column:["left","right"]};for(const s of Ww)if(t[s]){const o=Mc("labelOrient",(r=t[s])==null?void 0:r.header,n,s);if(i[s].includes(o))return Gw(t[s],s,n)}}assembleMarks(){const{child:t}=this,n=this.component.data.facetRoot,i=dye(n),r=t.assembleGroupEncodeEntry(!1),s=this.assembleLabelTitle()||t.assembleTitle(),o=t.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...s?{title:s}:{},...o?{style:o}:{},from:{facet:this.assembleFacet()},sort:{field:ir.map(u=>this.facetSortFields(u)).flat(),order:ir.map(u=>this.facetSortOrder(u)).flat()},...i.length>0?{data:i}:{},...r?{encode:{update:r}}:{},...t.assembleGroup(Age(this,[]))}]}getMapping(){return this.facet}}function _ye(e,t){const{row:n,column:i}=t;if(n&&i){let r=null;for(const s of[n,i])if(oo(s.sort)){const{field:o,op:a=j1}=s.sort;e=r=new Lu(e,{joinaggregate:[{op:a,field:o,as:d6(s,s.sort,{forAs:!0})}],groupby:[te(s)]})}return r}return null}function fI(e,t){var n,i,r,s;for(const o of t){const a=o.data;if(e.name&&o.hasName()&&e.name!==o.dataName)continue;const u=(n=e.format)==null?void 0:n.mesh,l=(i=a.format)==null?void 0:i.feature;if(u&&l)continue;const c=(r=e.format)==null?void 0:r.feature;if((c||l)&&c!==l)continue;const f=(s=a.format)==null?void 0:s.mesh;if(!((u||f)&&u!==f)){if(uh(e)&&uh(a)){if(Mi(e.values,a.values))return o}else if(Cc(e)&&Cc(a)){if(e.url===a.url)return o}else if(cO(e)&&e.name===o.dataName)return o}}return null}function wye(e,t){if(e.data||!e.parent){if(e.data===null){const i=new Ru({values:[]});return t.push(i),i}const n=fI(e.data,t);if(n)return ya(e.data)||(n.data.format=CM({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const i=new Ru(e.data);return t.push(i),i}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function Eye(e,t,n){let i=0;for(const r of t.transforms){let s,o;if(ege(r))o=e=new Dc(e,r),s="derived";else if(mw(r)){const a=h2e(r);o=e=In.makeWithAncestors(e,{},a,n)??e,e=new Fc(e,t,r.filter)}else if(nO(r))o=e=$s.makeFromTransform(e,r,t),s="number";else if(nge(r))s="date",n.getWithExplicit(r.field).value===void 0&&(e=new In(e,{[r.field]:s}),n.set(r.field,s,!1)),o=e=Cs.makeFromTransform(e,r);else if(ige(r))o=e=Ir.makeFromTransform(e,r),s="number",Tw(t)&&(e=new va(e));else if(tO(r))o=e=Eh.make(e,t,r,i++),s="derived";else if(Zpe(r))o=e=new Oc(e,r),s="number";else if(Jpe(r))o=e=new Lu(e,r),s="number";else if(rge(r))o=e=go.makeFromTransform(e,r),s="derived";else if(sge(r))o=e=new Sm(e,r),s="derived";else if(oge(r))o=e=new Am(e,r),s="derived";else if(Qpe(r))o=e=new $m(e,r),s="derived";else if(Hpe(r))o=e=new Mm(e,r),s="derived";else if(Kpe(r))e=new Nm(e,r);else if(tge(r))o=e=Iu.makeFromTransform(e,r),s="derived";else if(Gpe(r))o=e=new km(e,r),s="derived";else if(Vpe(r))o=e=new Dm(e,r),s="derived";else if(Ype(r))o=e=new Tm(e,r),s="derived";else if(Xpe(r))o=e=new Fm(e,r),s="derived";else{Z(Tde(r));continue}if(o&&s!==void 0)for(const a of o.producedFields()??[])n.set(a,s,!1)}return e}function Om(e){var m;let t=wye(e,e.component.data.sources);const{outputNodes:n,outputNodeRefCounts:i}=e.component.data,r=e.data,o=!(r&&(ya(r)||Cc(r)||uh(r)))&&e.parent?e.parent.component.data.ancestorParse.clone():new bge;ya(r)?(fO(r)?t=new xh(t,r.sequence):vw(r)&&(t=new vh(t,r.graticule)),o.parseNothing=!0):((m=r==null?void 0:r.format)==null?void 0:m.parse)===null&&(o.parseNothing=!0),t=In.makeExplicit(t,e,o)??t,t=new va(t);const a=e.parent&&Lc(e.parent);(Dt(e)||Oi(e))&&a&&(t=$s.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=Eye(t,e,o));const u=g2e(e),l=p2e(e);t=In.makeWithAncestors(t,{},{...u,...l},o)??t,Dt(e)&&(t=Ic.parseAll(t,e),t=wh.parseAll(t,e)),(Dt(e)||Oi(e))&&(a||(t=$s.makeFromEncoding(t,e)??t),t=Cs.makeFromEncoding(t,e)??t,t=Dc.parseAllForSortIndex(t,e));const c=t=Lm(Ft.Raw,e,t);if(Dt(e)){const y=Ir.makeFromEncoding(t,e);y&&(t=y,Tw(e)&&(t=new va(t))),t=Iu.makeFromEncoding(t,e)??t,t=go.makeFromEncoding(t,e)??t}let f,d;if(Dt(e)){const{markDef:y,mark:b,config:v}=e,x=gt("invalid",y,v),{marks:_,scales:E}=d=hO({invalid:x,isPath:ha(b)});_!==E&&E==="include-invalid-values"&&(f=t=Lm(Ft.PreFilterInvalid,e,t)),_==="exclude-invalid-values"&&(t=Rc.make(t,e,d)??t)}const h=t=Lm(Ft.Main,e,t);let p;if(Dt(e)&&d){const{marks:y,scales:b}=d;y==="include-invalid-values"&&b==="exclude-invalid-values"&&(t=Rc.make(t,e,d)??t,p=t=Lm(Ft.PostFilterInvalid,e,t))}Dt(e)&&cme(e,h);let g=null;if(Oi(e)){const y=e.getName("facet");t=_ye(t,e.facet)??t,g=new Nc(t,e,y,h.getSource()),n[y]=g}return{...e.component.data,outputNodes:n,outputNodeRefCounts:i,raw:c,main:h,facetRoot:g,ancestorParse:o,preFilterInvalid:f,postFilterInvalid:p}}function Lm(e,t,n){const{outputNodes:i,outputNodeRefCounts:r}=t.component.data,s=t.getDataName(e),o=new yi(n,s,e,r);return i[s]=o,o}class Cye extends c6{constructor(t,n,i,r){var s,o,a,u;super(t,"concat",n,i,r,t.resolve),(((o=(s=t.resolve)==null?void 0:s.axis)==null?void 0:o.x)==="shared"||((u=(a=t.resolve)==null?void 0:a.axis)==null?void 0:u.y)==="shared")&&Z(Sde),this.children=this.getChildren(t).map((l,c)=>y6(l,this,this.getName(`concat_${c}`),void 0,r))}parseData(){this.component.data=Om(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of Y(t.component.selection))this.component.selection[n]=t.component.selection[n]}Object.values(this.component.selection).some(t=>ks(t))&&w_(v_)}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return tm(t)?t.vconcat:lw(t)?t.hconcat:t.concat}parseLayoutSize(){bye(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,i)=>i.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=Vw(this);for(const n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,i)=>i.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{const n=t.assembleTitle(),i=t.assembleGroupStyle(),r=t.assembleGroupEncodeEntry(!1);return{type:"group",name:t.getName("group"),...n?{title:n}:{},...i?{style:i}:{},...r?{encode:{update:r}}:{},...t.assembleGroup()}})}assembleGroupStyle(){}assembleDefaultLayout(){const t=this.layout.columns;return{...t!=null?{columns:t}:{},bounds:"full",align:"each"}}}function kye(e){return e===!1||e===null}const Aye={disable:1,gridScale:1,scale:1,...hR,labelExpr:1,encode:1},dI=Y(Aye);class h6 extends lo{constructor(t={},n={},i=!1){super(),this.explicit=t,this.implicit=n,this.mainExtracted=i}clone(){return new h6(De(this.explicit),De(this.implicit),this.mainExtracted)}hasAxisPart(t){return t==="axis"?!0:t==="grid"||t==="title"?!!this.get(t):!kye(this.get(t))}hasOrientSignalRef(){return me(this.explicit.orient)}}function $ye(e,t,n){const{encoding:i,config:r}=e,s=Xt(i[t])??Xt(i[gs(t)]),o=e.axis(t)||{},{format:a,formatType:u}=o;if(ku(u))return{text:Mr({fieldOrDatumDef:s,field:"datum.value",format:a,formatType:u,config:r}),...n};if(a===void 0&&u===void 0&&r.customFormatTypes){if(bc(s)==="quantitative"){if(vc(s)&&s.stack==="normalize"&&r.normalizedNumberFormatType)return{text:Mr({fieldOrDatumDef:s,field:"datum.value",format:r.normalizedNumberFormat,formatType:r.normalizedNumberFormatType,config:r}),...n};if(r.numberFormatType)return{text:Mr({fieldOrDatumDef:s,field:"datum.value",format:r.numberFormat,formatType:r.numberFormatType,config:r}),...n}}if(bc(s)==="temporal"&&r.timeFormatType&&J(s)&&!s.timeUnit)return{text:Mr({fieldOrDatumDef:s,field:"datum.value",format:r.timeFormat,formatType:r.timeFormatType,config:r}),...n}}return n}function Sye(e){return io.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[Oye(n,e)]),t),{})}const Fye={bottom:"top",top:"bottom",left:"right",right:"left"};function Dye(e){const{axes:t,resolve:n}=e.component,i={top:0,bottom:0,right:0,left:0};for(const r of e.children){r.parseAxesAndHeaders();for(const s of Y(r.component.axes))n.axis[s]=Yw(e.component.resolve,s),n.axis[s]==="shared"&&(t[s]=Tye(t[s],r.component.axes[s]),t[s]||(n.axis[s]="independent",delete t[s]))}for(const r of io){for(const s of e.children)if(s.component.axes[r]){if(n.axis[r]==="independent"){t[r]=(t[r]??[]).concat(s.component.axes[r]);for(const o of s.component.axes[r]){const{value:a,explicit:u}=o.getWithExplicit("orient");if(!me(a)){if(i[a]>0&&!u){const l=Fye[a];i[a]>i[l]&&o.set("orient",l,!1)}i[a]++}}}delete s.component.axes[r]}if(n.axis[r]==="independent"&&t[r]&&t[r].length>1)for(const[s,o]of(t[r]||[]).entries())s>0&&o.get("grid")&&!o.explicit.grid&&(o.implicit.grid=!1)}}function Tye(e,t){if(e){if(e.length!==t.length)return;const n=e.length;for(let i=0;i<n;i++){const r=e[i],s=t[i];if(!!r!=!!s)return;if(r&&s){const o=r.getWithExplicit("orient"),a=s.getWithExplicit("orient");if(o.explicit&&a.explicit&&o.value!==a.value)return;e[i]=Mye(r,s)}}}else return t.map(n=>n.clone());return e}function Mye(e,t){for(const n of dI){const i=ma(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(r,s)=>{switch(n){case"title":return tN(r,s);case"gridScale":return{explicit:r.explicit,value:zt(r.value,s.value)}}return rm(r,s,n,"axis")});e.setWithExplicit(n,i)}return e}function Nye(e,t,n,i,r){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(me(n.labelAngle)?n.labelAngle:Yd(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===mL(i,r))return!0}return e===n[t]}const Rye=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function Oye(e,t){var y,b;let n=t.axis(e);const i=new h6,r=Xt(t.encoding[e]),{mark:s,config:o}=t,a=(n==null?void 0:n.orient)||((y=o[e==="x"?"axisX":"axisY"])==null?void 0:y.orient)||((b=o.axis)==null?void 0:b.orient)||xme(e),u=t.getScaleComponent(e).get("type"),l=hme(e,u,a,t.config),c=n!==void 0?!n:jw("disable",o.style,n==null?void 0:n.style,l).configValue;if(i.set("disable",c,n!==void 0),c)return i;n=n||{};const f=yme(r,n,e,o.style,l),d=YN(n.formatType,r,u),h=VN(r,r.type,n.format,n.formatType,o,!0),p={fieldOrDatumDef:r,axis:n,channel:e,model:t,scaleType:u,orient:a,labelAngle:f,format:h,formatType:d,mark:s,config:o};for(const v of dI){const x=v in hL?hL[v](p):pR(v)?n[v]:void 0,_=x!==void 0,E=Nye(x,v,n,t,e);if(_&&E)i.set(v,x,E);else{const{configValue:w=void 0,configFrom:C=void 0}=pR(v)&&v!=="values"?jw(v,o.style,n.style,l):{},k=w!==void 0;_&&!k?i.set(v,x,E):(C!=="vgAxisConfig"||Rye.has(v)&&k||ah(w)||me(w))&&i.set(v,w,!1)}}const g=n.encoding??{},m=dR.reduce((v,x)=>{if(!i.hasAxisPart(x))return v;const _=EL(g[x]??{},t),E=x==="labels"?$ye(t,e,_):_;return E!==void 0&&!ht(E)&&(v[x]={update:E}),v},{});return ht(m)||i.set("encode",m,!!n.encoding||n.labelAngle!==void 0),i}function Lye({encoding:e,size:t}){for(const n of io){const i=mi(n);ws(t[i])&&ga(e[n])&&(delete t[i],Z(hN(i)))}return t}const Iye={vgMark:"arc",encodeEntry:e=>({...rr(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...ti("x",e,{defaultPos:"mid"}),...ti("y",e,{defaultPos:"mid"}),...fo(e,"radius"),...fo(e,"theta")})},Pye={vgMark:"area",encodeEntry:e=>({...rr(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...lm("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"}),...lm("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"}),...Fw(e)})},zye={vgMark:"rect",encodeEntry:e=>({...rr(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...fo(e,"x"),...fo(e,"y")})},Bye={vgMark:"shape",encodeEntry:e=>({...rr(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[{type:"geoshape",projection:e.projectionName(),...n&&J(n)&&n.type===mc?{field:te(n,{expr:"datum"})}:{}}]}},Uye={vgMark:"image",encodeEntry:e=>({...rr(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...fo(e,"x"),...fo(e,"y"),...$w(e,"url")})},jye={vgMark:"line",encodeEntry:e=>({...rr(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...ti("x",e,{defaultPos:"mid"}),...ti("y",e,{defaultPos:"mid"}),...vn("size",e,{vgChannel:"strokeWidth"}),...Fw(e)})},qye={vgMark:"trail",encodeEntry:e=>({...rr(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...ti("x",e,{defaultPos:"mid"}),...ti("y",e,{defaultPos:"mid"}),...vn("size",e),...Fw(e)})};function p6(e,t){const{config:n}=e;return{...rr(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...ti("x",e,{defaultPos:"mid"}),...ti("y",e,{defaultPos:"mid"}),...vn("size",e),...vn("angle",e),...Wye(e,n,t)}}function Wye(e,t,n){return n?{shape:{value:n}}:vn("shape",e)}const Hye={vgMark:"symbol",encodeEntry:e=>p6(e)},Gye={vgMark:"symbol",encodeEntry:e=>p6(e,"circle")},Vye={vgMark:"symbol",encodeEntry:e=>p6(e,"square")},Yye={vgMark:"rect",encodeEntry:e=>({...rr(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...fo(e,"x"),...fo(e,"y")})},Xye={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:{...rr(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...lm("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"}),...lm("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"}),...vn("size",e,{vgChannel:"strokeWidth"})}}},Kye={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return{...rr(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...ti("x",e,{defaultPos:"mid"}),...ti("y",e,{defaultPos:"mid"}),...$w(e),...vn("size",e,{vgChannel:"fontSize"}),...vn("angle",e),...OO("align",Zye(e.markDef,n,t)),...OO("baseline",Jye(e.markDef,n,t)),...ti("radius",e,{defaultPos:null}),...ti("theta",e,{defaultPos:null})}}};function Zye(e,t,n){if(gt("align",e,n)===void 0)return"center"}function Jye(e,t,n){if(gt("baseline",e,n)===void 0)return"middle"}const Im={arc:Iye,area:Pye,bar:zye,circle:Gye,geoshape:Bye,image:Uye,line:jye,point:Hye,rect:Yye,rule:Xye,square:Vye,text:Kye,tick:{vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,i=n.orient,r=i==="horizontal"?"x":"y",s=i==="horizontal"?"y":"x",o=i==="horizontal"?"height":"width";return{...rr(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...fo(e,r),...ti(s,e,{defaultPos:"mid",vgChannel:s==="y"?"yc":"xc"}),[o]:Et(gt("thickness",n,t))}}},trail:qye};function Qye(e){if(qe([P1,L1,r0e],e.mark)){const t=xR(e.mark,e.encoding);if(t.length>0)return ebe(e,t)}else if(e.mark===I1){const t=g_.some(n=>gt(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return tbe(e)}return g6(e)}const hI="faceted_path_";function ebe(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:hI+e.requestDataName(Ft.Main),data:e.requestDataName(Ft.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:g6(e,{fromPrefix:hI})}]}const pI="stack_group_";function tbe(e){var l;const[t]=g6(e,{fromPrefix:pI}),n=e.scaleName(e.stack.fieldChannel),i=(c={})=>e.vgField(e.stack.fieldChannel,c),r=(c,f)=>{const d=[i({prefix:"min",suffix:"start",expr:f}),i({prefix:"max",suffix:"start",expr:f}),i({prefix:"min",suffix:"end",expr:f}),i({prefix:"max",suffix:"end",expr:f})];return`${c}(${d.map(h=>`scale('${n}',${h})`).join(",")})`};let s,o;e.stack.fieldChannel==="x"?(s={...uc(t.encode.update,["y","yc","y2","height",...g_]),x:{signal:r("min","datum")},x2:{signal:r("max","datum")},clip:{value:!0}},o={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...hi(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(s={...uc(t.encode.update,["x","xc","x2","width"]),y:{signal:r("min","datum")},y2:{signal:r("max","datum")},clip:{value:!0}},o={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...hi(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const c of g_){const f=ys(c,e.markDef,e.config);t.encode.update[c]?(s[c]=t.encode.update[c],delete t.encode.update[c]):f&&(s[c]=Et(f)),f&&(t.encode.update[c]={value:0})}const a=[];if(((l=e.stack.groupbyChannels)==null?void 0:l.length)>0)for(const c of e.stack.groupbyChannels){const f=e.fieldDef(c),d=te(f);d&&a.push(d),(f!=null&&f.bin||f!=null&&f.timeUnit)&&a.push(te(f,{binSuffix:"end"}))}return s=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((c,f)=>{if(t.encode.update[f])return{...c,[f]:t.encode.update[f]};{const d=ys(f,e.markDef,e.config);return d!==void 0?{...c,[f]:Et(d)}:c}},s),s.stroke&&(s.strokeForeground={value:!0},s.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(Ft.Main),name:pI+e.requestDataName(Ft.Main),groupby:a,aggregate:{fields:[i({suffix:"start"}),i({suffix:"start"}),i({suffix:"end"}),i({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:s},marks:[{type:"group",encode:{update:o},marks:[t]}]}]}function nbe(e){const{encoding:t,stack:n,mark:i,markDef:r,config:s}=e,o=t.order;if(!(!W(o)&&Nr(o)&&J7(o.value)||!o&&J7(gt("order",r,s)))){if((W(o)||J(o))&&!n)return JM(o,{expr:"datum"});if(ha(i)){const a=r.orient==="horizontal"?"y":"x",u=t[a];if(J(u))return{field:a}}}}function g6(e,t={fromPrefix:""}){const{mark:n,markDef:i,encoding:r,config:s}=e,o=zt(i.clip,ibe(e),rbe(e)),a=KM(i),u=r.key,l=nbe(e),c=sbe(e),f=gt("aria",i,s),d=Im[n].postEncodingTransform?Im[n].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:Im[n].vgMark,...o?{clip:o}:{},...a?{style:a}:{},...u?{key:u.field}:{},...l?{sort:l}:{},...c||{},...f===!1?{aria:f}:{},from:{data:t.fromPrefix+e.requestDataName(Ft.Main)},encode:{update:Im[n].encodeEntry(e)},...d?{transform:d}:{}}]}function ibe(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t!=null&&t.get("selectionExtent")||n!=null&&n.get("selectionExtent")?!0:void 0}function rbe(e){const t=e.component.projection;return t&&!t.isFit?!0:void 0}function sbe(e){if(!e.component.selection)return null;const t=Y(e.component.selection).length;let n=t,i=e.parent;for(;i&&n===0;)n=Y(i.component.selection).length,i=i.parent;return n?{interactive:t>0||e.mark==="geoshape"||!!e.encoding.tooltip||!!e.markDef.tooltip}:null}class gI extends aI{constructor(t,n,i,r={},s){super(t,"unit",n,i,s,void 0,PR(t)?t.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[],this.correctDataNames=l=>{var c,f,d;return(c=l.from)!=null&&c.data&&(l.from.data=this.lookupDataSource(l.from.data),"time"in this.encoding&&(l.from.data=l.from.data+bO)),(d=(f=l.from)==null?void 0:f.facet)!=null&&d.data&&(l.from.facet.data=this.lookupDataSource(l.from.facet.data)),l};const o=xs(t.mark)?{...t.mark}:{type:t.mark},a=o.type;o.filled===void 0&&(o.filled=Rpe(o,s,{graticule:t.data&&vw(t.data)}));const u=this.encoding=U0e(t.encoding||{},a,o.filled,s);this.markDef=VR(o,u,s),this.size=Lye({encoding:u,size:PR(t)?{...r,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}}:r}),this.stack=GR(this.markDef,u),this.specifiedScales=this.initScales(a,u),this.specifiedAxes=this.initAxes(u),this.specifiedLegends=this.initLegends(u),this.specifiedProjection=t.projection,this.selection=(t.params??[]).filter(l=>aw(l))}get hasProjection(){const{encoding:t}=this,n=this.mark===zN,i=t&&Pfe.some(r=>Me(t[r]));return n||i}scaleDomain(t){const n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return d_.reduce((i,r)=>{const s=Xt(n[r]);return s&&(i[r]=this.initScale(s.scale??{})),i},{})}initScale(t){const{domain:n,range:i}=t,r=yn(t);return W(n)&&(r.domain=n.map(Ni)),W(i)&&(r.range=i.map(Ni)),r}initAxes(t){return io.reduce((n,i)=>{const r=t[i];if(Me(r)||i===$t&&Me(t.x2)||i===rn&&Me(t.y2)){const s=Me(r)?r.axis:void 0;n[i]=s&&this.initAxis({...s})}return n},{})}initAxis(t){const n=Y(t),i={};for(const r of n){const s=t[r];i[r]=ah(s)?VM(s):Ni(s)}return i}initLegends(t){return Xfe.reduce((n,i)=>{const r=Xt(t[i]);if(r&&Zfe(i)){const s=r.legend;n[i]=s&&yn(s)}return n},{})}parseData(){this.component.data=Om(this)}parseLayoutSize(){vye(this)}parseSelections(){this.component.selection=lme(this,this.selection)}parseMarkGroup(){this.component.mark=Qye(this)}parseAxesAndHeaders(){this.component.axes=Sye(this)}assembleSelectionTopLevelSignals(t){return $ge(this,t)}assembleSignals(){return[...fL(this),...kge(this,[])]}assembleSelectionData(t){return Sge(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return Vw(this)}assembleMarks(){let t=this.component.mark??[];return(!this.parent||!Lc(this.parent))&&(t=wO(this,t)),t.map(this.correctDataNames)}assembleGroupStyle(){const{style:t}=this.view||{};return t!==void 0?t:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return $u(this.encoding,t)}fieldDef(t){const n=this.encoding[t];return Rr(n)}typedFieldDef(t){const n=this.fieldDef(t);return ei(n)?n:null}}class m6 extends c6{constructor(t,n,i,r,s){super(t,"layer",n,i,s,t.resolve,t.view);const o={...r,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}};this.children=t.layer.map((a,u)=>{if(im(a))return new m6(a,this,this.getName(`layer_${u}`),o,s);if(ao(a))return new gI(a,this,this.getName(`layer_${u}`),o,s);throw new Error(y_(a))})}parseData(){this.component.data=Om(this);for(const t of this.children)t.parseData()}parseLayoutSize(){yye(this)}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of Y(t.component.selection))this.component.selection[n]=t.component.selection[n]}Object.values(this.component.selection).some(t=>ks(t))&&w_(v_)}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){Dye(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,i)=>i.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),fL(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),Vw(this))}assembleSelectionData(t){return this.children.reduce((n,i)=>i.assembleSelectionData(n),t)}assembleGroupStyle(){const t=new Set;for(const i of this.children)for(const r of oe(i.assembleGroupStyle()))t.add(r);const n=Array.from(t);return n.length>1?n:n.length===1?n[0]:void 0}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return Fge(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),RL(this))}}function y6(e,t,n,i,r){if(q1(e))return new Ch(e,t,n,r);if(im(e))return new m6(e,t,n,i,r);if(ao(e))return new gI(e,t,n,i,r);if(cpe(e))return new Cye(e,t,n,r);throw new Error(y_(e))}function obe(e,t={}){t.logger&&bhe(t.logger),t.fieldTitle&&uR(t.fieldTitle);try{const n=WR(nl(t.config,e.config)),i=oO(e,n),r=y6(i,null,"",void 0,n);return r.parse(),T2e(r.component.data,r),{spec:ube(r,abe(e,i.autosize,n,r),e.datasets,e.usermeta),normalized:i}}finally{t.logger&&vhe(),t.fieldTitle&&N0e()}}function abe(e,t,n,i){const r=i.component.layoutSize.get("width"),s=i.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},i.hasAxisOrientSignalRef()&&(t.resize=!0)):se(t)&&(t={type:t}),r&&s&&gge(t.type)){if(r==="step"&&s==="step")Z(rN()),t.type="pad";else if(r==="step"||s==="step"){const o=r==="step"?"width":"height";Z(rN(F1(o)));const a=o==="width"?"height":"width";t.type=mge(a)}}return{...Y(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t},...uO(n,!1),...uO(e,!0)}}function ube(e,t,n={},i){const r=e.config?wpe(e.config):void 0,s=hye(e.component.data,n),o=e.assembleSelectionData(s),a=e.assembleProjections(),u=e.assembleTitle(),l=e.assembleGroupStyle(),c=e.assembleGroupEncodeEntry(!0);let f=e.assembleLayoutSignals();f=f.filter(p=>(p.name==="width"||p.name==="height")&&p.value!==void 0?(t[p.name]=+p.value,!1):!0);const{params:d,...h}=t;return{$schema:"https://vega.github.io/schema/vega/v5.json",...e.description?{description:e.description}:{},...h,...u?{title:u}:{},...l?{style:l}:{},...c?{encode:{update:c}}:{},data:o,...a.length>0?{projections:a}:{},...e.assembleGroup([...f,...e.assembleSelectionTopLevelSignals([]),...LR(d)]),...r?{config:r}:{},...i?{usermeta:i}:{}}}const lbe=Mfe.version,cbe=Object.freeze(Object.defineProperty({__proto__:null,accessPathDepth:fc,accessPathWithDatum:i_,accessWithDatumToUnescapedPath:at,compile:obe,contains:qe,deepEqual:Mi,deleteNestedProperty:w1,duplicate:De,entries:ia,every:Q7,fieldIntersection:n_,flatAccessWithDatum:AM,getFirstDefined:zt,hasIntersection:e_,hasProperty:X,hash:We,internalField:FM,isBoolean:Hd,isEmpty:ht,isEqual:Rfe,isInternalField:DM,isNullOrFalse:J7,isNumeric:E1,keys:Y,logicalExpr:Gd,mergeDeep:CM,never:EM,normalize:oO,normalizeAngle:Yd,omit:hi,pick:uc,prefixGenerator:t_,removePathFromField:cc,replaceAll:du,replacePathInField:er,resetIdCounter:Lfe,setEqual:kM,some:lc,stringify:pt,titleCase:Vd,unique:fs,uniqueId:SM,vals:gn,varName:At,version:lbe},Symbol.toStringTag,{value:"Module"}));function mI(e){const[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}}var fbe="2.15.0",dbe={version:fbe};const Pc="#fff",yI="#888",hbe={background:"#333",view:{stroke:yI},title:{color:Pc,subtitleColor:Pc},style:{"guide-label":{fill:Pc},"guide-title":{fill:Pc}},axis:{domainColor:Pc,gridColor:yI,tickColor:Pc}},Pu="#4572a7",pbe={background:"#fff",arc:{fill:Pu},area:{fill:Pu},line:{stroke:Pu,strokeWidth:2},path:{stroke:Pu},rect:{fill:Pu},shape:{stroke:Pu},symbol:{fill:Pu,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},zu="#30a2da",b6="#cbcbcb",gbe="#999",mbe="#333",bI="#f0f0f0",vI="#333",ybe={arc:{fill:zu},area:{fill:zu},axis:{domainColor:b6,grid:!0,gridColor:b6,gridWidth:1,labelColor:gbe,labelFontSize:10,titleColor:mbe,tickColor:b6,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:bI,group:{fill:bI},legend:{labelColor:vI,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:vI,titleFontSize:14,titlePadding:10},line:{stroke:zu,strokeWidth:2},path:{stroke:zu,strokeWidth:.5},rect:{fill:zu},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:zu},bar:{binSpacing:2,fill:zu,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},Bu="#000",bbe={group:{fill:"#e5e5e5"},arc:{fill:Bu},area:{fill:Bu},line:{stroke:Bu},path:{stroke:Bu},rect:{fill:Bu},shape:{stroke:Bu},symbol:{fill:Bu,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},vbe=22,xbe="normal",xI="Benton Gothic, sans-serif",_I=11.5,_be="normal",Uu="#82c6df",v6="Benton Gothic Bold, sans-serif",wI="normal",EI=13,kh={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"]},wbe={background:"#ffffff",title:{anchor:"start",color:"#000000",font:v6,fontSize:vbe,fontWeight:xbe},arc:{fill:Uu},area:{fill:Uu},line:{stroke:Uu,strokeWidth:2},path:{stroke:Uu},rect:{fill:Uu},shape:{stroke:Uu},symbol:{fill:Uu,size:30},axis:{labelFont:xI,labelFontSize:_I,labelFontWeight:_be,titleFont:v6,titleFontSize:EI,titleFontWeight:wI},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:xI,labelFontSize:_I,symbolType:"square",titleFont:v6,titleFontSize:EI,titleFontWeight:wI},range:{category:kh["category-6"],diverging:kh["fireandice-6"],heatmap:kh["fire-7"],ordinal:kh["fire-7"],ramp:kh["fire-7"]}},ju="#ab5787",Pm="#979797",Ebe={background:"#f9f9f9",arc:{fill:ju},area:{fill:ju},line:{stroke:ju},path:{stroke:ju},rect:{fill:ju},shape:{stroke:ju},symbol:{fill:ju,size:30},axis:{domainColor:Pm,domainWidth:.5,gridWidth:.2,labelColor:Pm,tickColor:Pm,tickWidth:.2,titleColor:Pm},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},qu="#3e5c69",Cbe={background:"#fff",arc:{fill:qu},area:{fill:qu},line:{stroke:qu},path:{stroke:qu},rect:{fill:qu},shape:{stroke:qu},symbol:{fill:qu},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},sr="#1696d2",CI="#000000",kbe="#FFFFFF",zm="Lato",x6="Lato",Abe="Lato",$be="#DEDDDD",Sbe=18,Ah={"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},Fbe={background:kbe,title:{anchor:"start",fontSize:Sbe,font:zm},axisX:{domain:!0,domainColor:CI,domainWidth:1,grid:!1,labelFontSize:12,labelFont:x6,labelAngle:0,tickColor:CI,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:zm},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:$be,gridWidth:1,labelFontSize:12,labelFont:x6,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:zm,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:x6,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:zm,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:Ah["six-groups-cat-1"],diverging:Ah["diverging-colors"],heatmap:Ah["diverging-colors"],ordinal:Ah["six-groups-seq"],ramp:Ah["shades-blue"]},area:{fill:sr},rect:{fill:sr},line:{color:sr,stroke:sr,strokeWidth:5},trail:{color:sr,stroke:sr,strokeWidth:0,size:1},path:{stroke:sr,strokeWidth:.5},point:{filled:!0},text:{font:Abe,color:sr,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:sr,stroke:null}},arc:{fill:sr},shape:{stroke:sr},symbol:{fill:sr,size:30}},Wu="#3366CC",kI="#ccc",Bm="Arial, sans-serif",Dbe={arc:{fill:Wu},area:{fill:Wu},path:{stroke:Wu},rect:{fill:Wu},shape:{stroke:Wu},symbol:{stroke:Wu},circle:{fill:Wu},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:Bm,fontSize:12},"guide-title":{font:Bm,fontSize:12},"group-title":{font:Bm,fontSize:12}},title:{font:Bm,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:kI,tickColor:kI,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},_6=e=>e*(1/3+1),AI=_6(9),$I=_6(10),SI=_6(12),$h="Segoe UI",FI="wf_standard-font, helvetica, arial, sans-serif",DI="#252423",Sh="#605E5C",TI="transparent",Tbe="#C8C6C4",zr="#118DFF",Mbe="#12239E",Nbe="#E66C37",Rbe="#6B007B",Obe="#E044A7",Lbe="#744EC2",Ibe="#D9B300",Pbe="#D64550",MI=zr,NI="#DEEFFF",RI=[NI,MI],zbe={view:{stroke:TI},background:TI,font:$h,header:{titleFont:FI,titleFontSize:SI,titleColor:DI,labelFont:$h,labelFontSize:$I,labelColor:Sh},axis:{ticks:!1,grid:!1,domain:!1,labelColor:Sh,labelFontSize:AI,titleFont:FI,titleColor:DI,titleFontSize:SI,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:Tbe,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:zr},line:{stroke:zr,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:$h,fontSize:AI,fill:Sh},arc:{fill:zr},area:{fill:zr,line:!0,opacity:.6},path:{stroke:zr},rect:{fill:zr},point:{fill:zr,filled:!0,size:75},shape:{stroke:zr},symbol:{fill:zr,strokeWidth:1.5,size:50},legend:{titleFont:$h,titleFontWeight:"bold",titleColor:Sh,labelFont:$h,labelFontSize:$I,labelColor:Sh,symbolType:"circle",symbolSize:75},range:{category:[zr,Mbe,Nbe,Rbe,Obe,Lbe,Ibe,Pbe],diverging:RI,heatmap:RI,ordinal:[NI,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",MI]}},w6='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',Bbe='IBM Plex Sans Condensed, system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", sans-serif',E6=400,Um={textPrimary:{g90:"#f4f4f4",g100:"#f4f4f4",white:"#161616",g10:"#161616"},textSecondary:{g90:"#c6c6c6",g100:"#c6c6c6",white:"#525252",g10:"#525252"},layerAccent01:{white:"#e0e0e0",g10:"#e0e0e0",g90:"#525252",g100:"#393939"},gridBg:{white:"#ffffff",g10:"#ffffff",g90:"#161616",g100:"#161616"}},Ube=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],jbe=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function jm({theme:e,background:t}){const n=["white","g10"].includes(e)?"light":"dark",i=Um.gridBg[e],r=Um.textPrimary[e],s=Um.textSecondary[e],o=n==="dark"?Ube:jbe,a=n==="dark"?"#d4bbff":"#6929c4";return{background:t,arc:{fill:a},area:{fill:a},path:{stroke:a},rect:{fill:a},shape:{stroke:a},symbol:{stroke:a},circle:{fill:a},view:{fill:i,stroke:i},group:{fill:i},title:{color:r,anchor:"start",dy:-15,fontSize:16,font:w6,fontWeight:600},axis:{labelColor:s,labelFontSize:12,labelFont:Bbe,labelFontWeight:E6,titleColor:r,titleFontWeight:600,titleFontSize:12,grid:!0,gridColor:Um.layerAccent01[e],labelAngle:0},axisX:{titlePadding:10},axisY:{titlePadding:2.5},style:{"guide-label":{font:w6,fill:s,fontWeight:E6},"guide-title":{font:w6,fill:s,fontWeight:E6}},range:{category:o,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const qbe=jm({theme:"white",background:"#ffffff"}),Wbe=jm({theme:"g10",background:"#f4f4f4"}),Hbe=jm({theme:"g90",background:"#262626"}),Gbe=jm({theme:"g100",background:"#161616"}),Vbe=dbe.version,Ybe=Object.freeze(Object.defineProperty({__proto__:null,carbong10:Wbe,carbong100:Gbe,carbong90:Hbe,carbonwhite:qbe,dark:hbe,excel:pbe,fivethirtyeight:ybe,ggplot2:bbe,googlecharts:Dbe,latimes:wbe,powerbi:zbe,quartz:Ebe,urbaninstitute:Fbe,version:Vbe,vox:Cbe},Symbol.toStringTag,{value:"Module"}));function Xbe(e,t,n,i){if(W(e))return`[${e.map(r=>t(se(r)?r:OI(r,n))).join(", ")}]`;if(re(e)){let r="";const{title:s,image:o,...a}=e;s&&(r+=`<h2>${t(s)}</h2>`),o&&(r+=`<img src="${new URL(t(o),i||location.href).href}">`);const u=Object.keys(a);if(u.length>0){r+="<table>";for(const l of u){let c=a[l];c!==void 0&&(re(c)&&(c=OI(c,n)),r+=`<tr><td class="key">${t(l)}</td><td class="value">${t(c)}</td></tr>`)}r+="</table>"}return r||"{}"}return t(e)}function Kbe(e){const t=[];return function(n,i){if(typeof i!="object"||i===null)return i;const r=t.indexOf(this)+1;return t.length=r,t.length>e?"[Object]":t.indexOf(i)>=0?"[Circular]":(t.push(i),i)}}function OI(e,t){return JSON.stringify(e,Kbe(t))}var Zbe=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`;const LI="vg-tooltip-element",Jbe={offsetX:10,offsetY:10,id:LI,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:Qbe,maxDepth:2,formatTooltip:Xbe,baseURL:"",anchor:"cursor",position:["top","bottom","left","right","top-left","top-right","bottom-left","bottom-right"]};function Qbe(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function e3e(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return Zbe.toString().replace(LI,e)}function II(e,t,{offsetX:n,offsetY:i}){const r=PI({x1:e.clientX,x2:e.clientX,y1:e.clientY,y2:e.clientY},t,n,i),s=["bottom-right","bottom-left","top-right","top-left"];for(const o of s)if(zI(r[o],t))return r[o];return r["top-left"]}function t3e(e,t,n,i,r){const{position:s,offsetX:o,offsetY:a}=r,u=e._el.getBoundingClientRect(),l=e._origin,c=n3e(u,l,n),f=PI(c,i,o,a),d=Array.isArray(s)?s:[s];for(const h of d)if(zI(f[h],i)&&!i3e(t,f[h],i))return f[h];return II(t,i,r)}function n3e(e,t,n){const i=n.isVoronoi?n.datum.bounds:n.bounds;let r=e.left+t[0]+i.x1,s=e.top+t[1]+i.y1,o=n;for(;o.mark.group;)o=o.mark.group,r+=o.x??0,s+=o.y??0;const a=i.x2-i.x1,u=i.y2-i.y1;return{x1:r,x2:r+a,y1:s,y2:s+u}}function PI(e,t,n,i){const r=(e.x1+e.x2)/2,s=(e.y1+e.y2)/2,o=e.x1-t.width-n,a=r-t.width/2,u=e.x2+n,l=e.y1-t.height-i,c=s-t.height/2,f=e.y2+i;return{top:{x:a,y:l},bottom:{x:a,y:f},left:{x:o,y:c},right:{x:u,y:c},"top-left":{x:o,y:l},"top-right":{x:u,y:l},"bottom-left":{x:o,y:f},"bottom-right":{x:u,y:f}}}function zI(e,t){return e.x>=0&&e.y>=0&&e.x+t.width<=window.innerWidth&&e.y+t.height<=window.innerHeight}function i3e(e,t,n){return e.clientX>=t.x&&e.clientX<=t.x+n.width&&e.clientY>=t.y&&e.clientY<=t.y+n.height}class r3e{constructor(t){this.options={...Jbe,...t};const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const i=document.createElement("style");i.setAttribute("id",this.options.styleId),i.innerHTML=e3e(n);const r=document.head;r.childNodes.length>0?r.insertBefore(i,r.childNodes[0]):r.appendChild(i)}}tooltipHandler(t,n,i,r){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),r==null||r===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(r,this.options.sanitize,this.options.maxDepth,this.options.baseURL),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:s,y:o}=this.options.anchor==="mark"?t3e(t,n,i,this.el.getBoundingClientRect(),this.options):II(n,this.el.getBoundingClientRect(),this.options);this.el.style.top=`${o}px`,this.el.style.left=`${s}px`}}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var s3e=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)r.hasOwnProperty(s)&&(i[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function i(){this.constructor=t}t.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}(),o3e=Object.prototype.hasOwnProperty;function C6(e,t){return o3e.call(e,t)}function k6(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var i=[];for(var r in e)C6(e,r)&&i.push(r);return i}function Li(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function A6(e){for(var t=0,n=e.length,i;t<n;){if(i=e.charCodeAt(t),i>=48&&i<=57){t++;continue}return!1}return!0}function Hu(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function BI(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function $6(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if($6(e[t]))return!0}else if(typeof e=="object"){for(var i=k6(e),r=i.length,s=0;s<r;s++)if($6(e[i[s]]))return!0}}return!1}function UI(e,t){var n=[e];for(var i in t){var r=typeof t[i]=="object"?JSON.stringify(t[i],null,2):t[i];typeof r<"u"&&n.push(i+": "+r)}return n.join(`
`)}var jI=function(e){s3e(t,e);function t(n,i,r,s,o){var a=this.constructor,u=e.call(this,UI(n,{name:i,index:r,operation:s,tree:o}))||this;return u.name=i,u.index=r,u.operation=s,u.tree=o,Object.setPrototypeOf(u,a.prototype),u.message=UI(n,{name:i,index:r,operation:s,tree:o}),u}return t}(Error),Rt=jI,a3e=Li,zc={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var i=e[t];return delete e[t],{newDocument:n,removed:i}},replace:function(e,t,n){var i=e[t];return e[t]=this.value,{newDocument:n,removed:i}},move:function(e,t,n){var i=qm(n,this.path);i&&(i=Li(i));var r=Gu(n,{op:"remove",path:this.from}).removed;return Gu(n,{op:"add",path:this.path,value:r}),{newDocument:n,removed:i}},copy:function(e,t,n){var i=qm(n,this.from);return Gu(n,{op:"add",path:this.path,value:Li(i)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:Fh(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},u3e={add:function(e,t,n){return A6(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var i=e.splice(t,1);return{newDocument:n,removed:i[0]}},replace:function(e,t,n){var i=e[t];return e[t]=this.value,{newDocument:n,removed:i}},move:zc.move,copy:zc.copy,test:zc.test,_get:zc._get};function qm(e,t){if(t=="")return e;var n={op:"_get",path:t};return Gu(e,n),n.value}function Gu(e,t,n,i,r,s){if(n===void 0&&(n=!1),i===void 0&&(i=!0),r===void 0&&(r=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):Hm(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=qm(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=Fh(e,t.value),o.test===!1)throw new Rt("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new Rt("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return o}}else{i||(e=Li(e));var a=t.path||"",u=a.split("/"),l=e,c=1,f=u.length,d=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=Hm;;){if(h=u[c],h&&h.indexOf("~")!=-1&&(h=BI(h)),r&&(h=="__proto__"||h=="prototype"&&c>0&&u[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[h]===void 0?d=u.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&p(t,0,e,d)),c++,Array.isArray(l)){if(h==="-")h=l.length;else{if(n&&!A6(h))throw new Rt("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);A6(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>l.length)throw new Rt("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var o=u3e[t.op].call(t,l,h,e);if(o.test===!1)throw new Rt("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}}else if(c>=f){var o=zc[t.op].call(t,l,h,e);if(o.test===!1)throw new Rt("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}if(l=l[h],n&&c<f&&(!l||typeof l!="object"))throw new Rt("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function Wm(e,t,n,i,r){if(i===void 0&&(i=!0),r===void 0&&(r=!0),n&&!Array.isArray(t))throw new Rt("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");i||(e=Li(e));for(var s=new Array(t.length),o=0,a=t.length;o<a;o++)s[o]=Gu(e,t[o],n,!0,r,o),e=s[o].newDocument;return s.newDocument=e,s}function l3e(e,t,n){var i=Gu(e,t);if(i.test===!1)throw new Rt("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return i.newDocument}function Hm(e,t,n,i){if(typeof e!="object"||e===null||Array.isArray(e))throw new Rt("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(zc[e.op]){if(typeof e.path!="string")throw new Rt("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new Rt('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new Rt("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new Rt("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&$6(e.value))throw new Rt("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var r=e.path.split("/").length,s=i.split("/").length;if(r!==s+1&&r!==s)throw new Rt("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==i)throw new Rt("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},a=qI([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new Rt("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new Rt("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function qI(e,t,n){try{if(!Array.isArray(e))throw new Rt("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)Wm(Li(t),Li(e),n||!0);else{n=n||Hm;for(var i=0;i<e.length;i++)n(e[i],i,t,void 0)}}catch(r){if(r instanceof Rt)return r;throw r}}function Fh(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),i=Array.isArray(t),r,s,o;if(n&&i){if(s=e.length,s!=t.length)return!1;for(r=s;r--!==0;)if(!Fh(e[r],t[r]))return!1;return!0}if(n!=i)return!1;var a=Object.keys(e);if(s=a.length,s!==Object.keys(t).length)return!1;for(r=s;r--!==0;)if(!t.hasOwnProperty(a[r]))return!1;for(r=s;r--!==0;)if(o=a[r],!Fh(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}var c3e=Object.freeze({__proto__:null,JsonPatchError:Rt,_areEquals:Fh,applyOperation:Gu,applyPatch:Wm,applyReducer:l3e,deepClone:a3e,getValueByPointer:qm,validate:qI,validator:Hm});/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var S6=new WeakMap,f3e=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),d3e=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function h3e(e){return S6.get(e)}function p3e(e,t){return e.observers.get(t)}function g3e(e,t){e.observers.delete(t.callback)}function m3e(e,t){t.unobserve()}function y3e(e,t){var n=[],i,r=h3e(e);if(!r)r=new f3e(e),S6.set(e,r);else{var s=p3e(r,t);i=s&&s.observer}if(i)return i;if(i={},r.value=Li(e),t){i.callback=t,i.next=null;var o=function(){F6(i)},a=function(){clearTimeout(i.next),i.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return i.patches=n,i.object=e,i.unobserve=function(){F6(i),clearTimeout(i.next),g3e(r,i),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},r.observers.set(t,new d3e(t,i)),i}function F6(e,t){t===void 0&&(t=!1);var n=S6.get(e.object);D6(n.value,e.object,e.patches,"",t),e.patches.length&&Wm(n.value,e.patches);var i=e.patches;return i.length>0&&(e.patches=[],e.callback&&e.callback(i)),i}function D6(e,t,n,i,r){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=k6(t),o=k6(e),a=!1,u=o.length-1;u>=0;u--){var l=o[u],c=e[l];if(C6(t,l)&&!(t[l]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[l];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?D6(c,f,n,i+"/"+Hu(l),r):c!==f&&(r&&n.push({op:"test",path:i+"/"+Hu(l),value:Li(c)}),n.push({op:"replace",path:i+"/"+Hu(l),value:Li(f)}))}else Array.isArray(e)===Array.isArray(t)?(r&&n.push({op:"test",path:i+"/"+Hu(l),value:Li(c)}),n.push({op:"remove",path:i+"/"+Hu(l)}),a=!0):(r&&n.push({op:"test",path:i,value:e}),n.push({op:"replace",path:i,value:t}))}if(!(!a&&s.length==o.length))for(var u=0;u<s.length;u++){var l=s[u];!C6(e,l)&&t[l]!==void 0&&n.push({op:"add",path:i+"/"+Hu(l),value:Li(t[l])})}}}function b3e(e,t,n){n===void 0&&(n=!1);var i=[];return D6(e,t,i,"",n),i}var v3e=Object.freeze({__proto__:null,compare:b3e,generate:F6,observe:y3e,unobserve:m3e});Object.assign({},c3e,v3e,{JsonPatchError:jI,deepClone:Li,escapePathComponent:Hu,unescapePathComponent:BI});function x3e(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var T6,WI;function _3e(){if(WI)return T6;WI=1;class e{constructor(){this.max=1e3,this.map=new Map}get(n){const i=this.map.get(n);if(i!==void 0)return this.map.delete(n),this.map.set(n,i),i}delete(n){return this.map.delete(n)}set(n,i){if(!this.delete(n)&&i!==void 0){if(this.map.size>=this.max){const s=this.map.keys().next().value;this.delete(s)}this.map.set(n,i)}return this}}return T6=e,T6}var M6,HI;function N6(){if(HI)return M6;HI=1;const e=Object.freeze({loose:!0}),t=Object.freeze({});return M6=i=>i?typeof i!="object"?e:i:t,M6}var Gm={exports:{}},R6,GI;function O6(){if(GI)return R6;GI=1;const e="2.0.0",t=256,n=Number.MAX_SAFE_INTEGER||9007199254740991,i=16,r=t-6;return R6={MAX_LENGTH:t,MAX_SAFE_COMPONENT_LENGTH:i,MAX_SAFE_BUILD_LENGTH:r,MAX_SAFE_INTEGER:n,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:e,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},R6}var L6,VI;function Vm(){return VI||(VI=1,L6=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{}),L6}var YI;function I6(){return YI||(YI=1,function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:i,MAX_LENGTH:r}=O6(),s=Vm();t=e.exports={};const o=t.re=[],a=t.safeRe=[],u=t.src=[],l=t.t={};let c=0;const f="[a-zA-Z0-9-]",d=[["\\s",1],["\\d",r],[f,i]],h=g=>{for(const[m,y]of d)g=g.split(`${m}*`).join(`${m}{0,${y}}`).split(`${m}+`).join(`${m}{1,${y}}`);return g},p=(g,m,y)=>{const b=h(m),v=c++;s(g,v,m),l[g]=v,u[v]=m,o[v]=new RegExp(m,y?"g":void 0),a[v]=new RegExp(b,y?"g":void 0)};p("NUMERICIDENTIFIER","0|[1-9]\\d*"),p("NUMERICIDENTIFIERLOOSE","\\d+"),p("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${f}*`),p("MAINVERSION",`(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})`),p("MAINVERSIONLOOSE",`(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})`),p("PRERELEASEIDENTIFIER",`(?:${u[l.NUMERICIDENTIFIER]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASEIDENTIFIERLOOSE",`(?:${u[l.NUMERICIDENTIFIERLOOSE]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASE",`(?:-(${u[l.PRERELEASEIDENTIFIER]}(?:\\.${u[l.PRERELEASEIDENTIFIER]})*))`),p("PRERELEASELOOSE",`(?:-?(${u[l.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${u[l.PRERELEASEIDENTIFIERLOOSE]})*))`),p("BUILDIDENTIFIER",`${f}+`),p("BUILD",`(?:\\+(${u[l.BUILDIDENTIFIER]}(?:\\.${u[l.BUILDIDENTIFIER]})*))`),p("FULLPLAIN",`v?${u[l.MAINVERSION]}${u[l.PRERELEASE]}?${u[l.BUILD]}?`),p("FULL",`^${u[l.FULLPLAIN]}$`),p("LOOSEPLAIN",`[v=\\s]*${u[l.MAINVERSIONLOOSE]}${u[l.PRERELEASELOOSE]}?${u[l.BUILD]}?`),p("LOOSE",`^${u[l.LOOSEPLAIN]}$`),p("GTLT","((?:<|>)?=?)"),p("XRANGEIDENTIFIERLOOSE",`${u[l.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),p("XRANGEIDENTIFIER",`${u[l.NUMERICIDENTIFIER]}|x|X|\\*`),p("XRANGEPLAIN",`[v=\\s]*(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:${u[l.PRERELEASE]})?${u[l.BUILD]}?)?)?`),p("XRANGEPLAINLOOSE",`[v=\\s]*(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:${u[l.PRERELEASELOOSE]})?${u[l.BUILD]}?)?)?`),p("XRANGE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAIN]}$`),p("XRANGELOOSE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAINLOOSE]}$`),p("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),p("COERCE",`${u[l.COERCEPLAIN]}(?:$|[^\\d])`),p("COERCEFULL",u[l.COERCEPLAIN]+`(?:${u[l.PRERELEASE]})?(?:${u[l.BUILD]})?(?:$|[^\\d])`),p("COERCERTL",u[l.COERCE],!0),p("COERCERTLFULL",u[l.COERCEFULL],!0),p("LONETILDE","(?:~>?)"),p("TILDETRIM",`(\\s*)${u[l.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",p("TILDE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAIN]}$`),p("TILDELOOSE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAINLOOSE]}$`),p("LONECARET","(?:\\^)"),p("CARETTRIM",`(\\s*)${u[l.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",p("CARET",`^${u[l.LONECARET]}${u[l.XRANGEPLAIN]}$`),p("CARETLOOSE",`^${u[l.LONECARET]}${u[l.XRANGEPLAINLOOSE]}$`),p("COMPARATORLOOSE",`^${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]})$|^$`),p("COMPARATOR",`^${u[l.GTLT]}\\s*(${u[l.FULLPLAIN]})$|^$`),p("COMPARATORTRIM",`(\\s*)${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]}|${u[l.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",p("HYPHENRANGE",`^\\s*(${u[l.XRANGEPLAIN]})\\s+-\\s+(${u[l.XRANGEPLAIN]})\\s*$`),p("HYPHENRANGELOOSE",`^\\s*(${u[l.XRANGEPLAINLOOSE]})\\s+-\\s+(${u[l.XRANGEPLAINLOOSE]})\\s*$`),p("STAR","(<|>)?=?\\s*\\*"),p("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),p("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}(Gm,Gm.exports)),Gm.exports}var P6,XI;function w3e(){if(XI)return P6;XI=1;const e=/^[0-9]+$/,t=(i,r)=>{const s=e.test(i),o=e.test(r);return s&&o&&(i=+i,r=+r),i===r?0:s&&!o?-1:o&&!s?1:i<r?-1:1};return P6={compareIdentifiers:t,rcompareIdentifiers:(i,r)=>t(r,i)},P6}var z6,KI;function B6(){if(KI)return z6;KI=1;const e=Vm(),{MAX_LENGTH:t,MAX_SAFE_INTEGER:n}=O6(),{safeRe:i,t:r}=I6(),s=N6(),{compareIdentifiers:o}=w3e();class a{constructor(l,c){if(c=s(c),l instanceof a){if(l.loose===!!c.loose&&l.includePrerelease===!!c.includePrerelease)return l;l=l.version}else if(typeof l!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof l}".`);if(l.length>t)throw new TypeError(`version is longer than ${t} characters`);e("SemVer",l,c),this.options=c,this.loose=!!c.loose,this.includePrerelease=!!c.includePrerelease;const f=l.trim().match(c.loose?i[r.LOOSE]:i[r.FULL]);if(!f)throw new TypeError(`Invalid Version: ${l}`);if(this.raw=l,this.major=+f[1],this.minor=+f[2],this.patch=+f[3],this.major>n||this.major<0)throw new TypeError("Invalid major version");if(this.minor>n||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>n||this.patch<0)throw new TypeError("Invalid patch version");f[4]?this.prerelease=f[4].split(".").map(d=>{if(/^[0-9]+$/.test(d)){const h=+d;if(h>=0&&h<n)return h}return d}):this.prerelease=[],this.build=f[5]?f[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(l){if(e("SemVer.compare",this.version,this.options,l),!(l instanceof a)){if(typeof l=="string"&&l===this.version)return 0;l=new a(l,this.options)}return l.version===this.version?0:this.compareMain(l)||this.comparePre(l)}compareMain(l){return l instanceof a||(l=new a(l,this.options)),o(this.major,l.major)||o(this.minor,l.minor)||o(this.patch,l.patch)}comparePre(l){if(l instanceof a||(l=new a(l,this.options)),this.prerelease.length&&!l.prerelease.length)return-1;if(!this.prerelease.length&&l.prerelease.length)return 1;if(!this.prerelease.length&&!l.prerelease.length)return 0;let c=0;do{const f=this.prerelease[c],d=l.prerelease[c];if(e("prerelease compare",c,f,d),f===void 0&&d===void 0)return 0;if(d===void 0)return 1;if(f===void 0)return-1;if(f===d)continue;return o(f,d)}while(++c)}compareBuild(l){l instanceof a||(l=new a(l,this.options));let c=0;do{const f=this.build[c],d=l.build[c];if(e("build compare",c,f,d),f===void 0&&d===void 0)return 0;if(d===void 0)return 1;if(f===void 0)return-1;if(f===d)continue;return o(f,d)}while(++c)}inc(l,c,f){switch(l){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",c,f);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",c,f);break;case"prepatch":this.prerelease.length=0,this.inc("patch",c,f),this.inc("pre",c,f);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",c,f),this.inc("pre",c,f);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const d=Number(f)?1:0;if(!c&&f===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[d];else{let h=this.prerelease.length;for(;--h>=0;)typeof this.prerelease[h]=="number"&&(this.prerelease[h]++,h=-2);if(h===-1){if(c===this.prerelease.join(".")&&f===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(d)}}if(c){let h=[c,d];f===!1&&(h=[c]),o(this.prerelease[0],c)===0?isNaN(this.prerelease[1])&&(this.prerelease=h):this.prerelease=h}break}default:throw new Error(`invalid increment argument: ${l}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return z6=a,z6}var U6,ZI;function Bc(){if(ZI)return U6;ZI=1;const e=B6();return U6=(n,i,r)=>new e(n,r).compare(new e(i,r)),U6}var j6,JI;function E3e(){if(JI)return j6;JI=1;const e=Bc();return j6=(n,i,r)=>e(n,i,r)===0,j6}var q6,QI;function C3e(){if(QI)return q6;QI=1;const e=Bc();return q6=(n,i,r)=>e(n,i,r)!==0,q6}var W6,eP;function k3e(){if(eP)return W6;eP=1;const e=Bc();return W6=(n,i,r)=>e(n,i,r)>0,W6}var H6,tP;function A3e(){if(tP)return H6;tP=1;const e=Bc();return H6=(n,i,r)=>e(n,i,r)>=0,H6}var G6,nP;function $3e(){if(nP)return G6;nP=1;const e=Bc();return G6=(n,i,r)=>e(n,i,r)<0,G6}var V6,iP;function S3e(){if(iP)return V6;iP=1;const e=Bc();return V6=(n,i,r)=>e(n,i,r)<=0,V6}var Y6,rP;function F3e(){if(rP)return Y6;rP=1;const e=E3e(),t=C3e(),n=k3e(),i=A3e(),r=$3e(),s=S3e();return Y6=(a,u,l,c)=>{switch(u){case"===":return typeof a=="object"&&(a=a.version),typeof l=="object"&&(l=l.version),a===l;case"!==":return typeof a=="object"&&(a=a.version),typeof l=="object"&&(l=l.version),a!==l;case"":case"=":case"==":return e(a,l,c);case"!=":return t(a,l,c);case">":return n(a,l,c);case">=":return i(a,l,c);case"<":return r(a,l,c);case"<=":return s(a,l,c);default:throw new TypeError(`Invalid operator: ${u}`)}},Y6}var X6,sP;function D3e(){if(sP)return X6;sP=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(c,f){if(f=n(f),c instanceof t){if(c.loose===!!f.loose)return c;c=c.value}c=c.trim().split(/\s+/).join(" "),o("comparator",c,f),this.options=f,this.loose=!!f.loose,this.parse(c),this.semver===e?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(c){const f=this.options.loose?i[r.COMPARATORLOOSE]:i[r.COMPARATOR],d=c.match(f);if(!d)throw new TypeError(`Invalid comparator: ${c}`);this.operator=d[1]!==void 0?d[1]:"",this.operator==="="&&(this.operator=""),d[2]?this.semver=new a(d[2],this.options.loose):this.semver=e}toString(){return this.value}test(c){if(o("Comparator.test",c,this.options.loose),this.semver===e||c===e)return!0;if(typeof c=="string")try{c=new a(c,this.options)}catch{return!1}return s(c,this.operator,this.semver,this.options)}intersects(c,f){if(!(c instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new u(c.value,f).test(this.value):c.operator===""?c.value===""?!0:new u(this.value,f).test(c.semver):(f=n(f),f.includePrerelease&&(this.value==="<0.0.0-0"||c.value==="<0.0.0-0")||!f.includePrerelease&&(this.value.startsWith("<0.0.0")||c.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&c.operator.startsWith(">")||this.operator.startsWith("<")&&c.operator.startsWith("<")||this.semver.version===c.semver.version&&this.operator.includes("=")&&c.operator.includes("=")||s(this.semver,"<",c.semver,f)&&this.operator.startsWith(">")&&c.operator.startsWith("<")||s(this.semver,">",c.semver,f)&&this.operator.startsWith("<")&&c.operator.startsWith(">")))}}X6=t;const n=N6(),{safeRe:i,t:r}=I6(),s=F3e(),o=Vm(),a=B6(),u=aP();return X6}var K6,oP;function aP(){if(oP)return K6;oP=1;const e=/\s+/g;class t{constructor(A,T){if(T=r(T),A instanceof t)return A.loose===!!T.loose&&A.includePrerelease===!!T.includePrerelease?A:new t(A.raw,T);if(A instanceof s)return this.raw=A.value,this.set=[[A]],this.formatted=void 0,this;if(this.options=T,this.loose=!!T.loose,this.includePrerelease=!!T.includePrerelease,this.raw=A.trim().replace(e," "),this.set=this.raw.split("||").map(B=>this.parseRange(B.trim())).filter(B=>B.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const B=this.set[0];if(this.set=this.set.filter(H=>!g(H[0])),this.set.length===0)this.set=[B];else if(this.set.length>1){for(const H of this.set)if(H.length===1&&m(H[0])){this.set=[H];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let A=0;A<this.set.length;A++){A>0&&(this.formatted+="||");const T=this.set[A];for(let B=0;B<T.length;B++)B>0&&(this.formatted+=" "),this.formatted+=T[B].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(A){const B=((this.options.includePrerelease&&h)|(this.options.loose&&p))+":"+A,H=i.get(B);if(H)return H;const z=this.options.loose,ne=z?u[l.HYPHENRANGELOOSE]:u[l.HYPHENRANGE];A=A.replace(ne,O(this.options.includePrerelease)),o("hyphen replace",A),A=A.replace(u[l.COMPARATORTRIM],c),o("comparator trim",A),A=A.replace(u[l.TILDETRIM],f),o("tilde trim",A),A=A.replace(u[l.CARETTRIM],d),o("caret trim",A);let be=A.split(" ").map($e=>b($e,this.options)).join(" ").split(/\s+/).map($e=>$($e,this.options));z&&(be=be.filter($e=>(o("loose invalid filter",$e,this.options),!!$e.match(u[l.COMPARATORLOOSE])))),o("range list",be);const de=new Map,Te=be.map($e=>new s($e,this.options));for(const $e of Te){if(g($e))return[$e];de.set($e.value,$e)}de.size>1&&de.has("")&&de.delete("");const ct=[...de.values()];return i.set(B,ct),ct}intersects(A,T){if(!(A instanceof t))throw new TypeError("a Range is required");return this.set.some(B=>y(B,T)&&A.set.some(H=>y(H,T)&&B.every(z=>H.every(ne=>z.intersects(ne,T)))))}test(A){if(!A)return!1;if(typeof A=="string")try{A=new a(A,this.options)}catch{return!1}for(let T=0;T<this.set.length;T++)if(R(this.set[T],A,this.options))return!0;return!1}}K6=t;const n=_3e(),i=new n,r=N6(),s=D3e(),o=Vm(),a=B6(),{safeRe:u,t:l,comparatorTrimReplace:c,tildeTrimReplace:f,caretTrimReplace:d}=I6(),{FLAG_INCLUDE_PRERELEASE:h,FLAG_LOOSE:p}=O6(),g=F=>F.value==="<0.0.0-0",m=F=>F.value==="",y=(F,A)=>{let T=!0;const B=F.slice();let H=B.pop();for(;T&&B.length;)T=B.every(z=>H.intersects(z,A)),H=B.pop();return T},b=(F,A)=>(o("comp",F,A),F=E(F,A),o("caret",F),F=x(F,A),o("tildes",F),F=C(F,A),o("xrange",F),F=S(F,A),o("stars",F),F),v=F=>!F||F.toLowerCase()==="x"||F==="*",x=(F,A)=>F.trim().split(/\s+/).map(T=>_(T,A)).join(" "),_=(F,A)=>{const T=A.loose?u[l.TILDELOOSE]:u[l.TILDE];return F.replace(T,(B,H,z,ne,be)=>{o("tilde",F,B,H,z,ne,be);let de;return v(H)?de="":v(z)?de=`>=${H}.0.0 <${+H+1}.0.0-0`:v(ne)?de=`>=${H}.${z}.0 <${H}.${+z+1}.0-0`:be?(o("replaceTilde pr",be),de=`>=${H}.${z}.${ne}-${be} <${H}.${+z+1}.0-0`):de=`>=${H}.${z}.${ne} <${H}.${+z+1}.0-0`,o("tilde return",de),de})},E=(F,A)=>F.trim().split(/\s+/).map(T=>w(T,A)).join(" "),w=(F,A)=>{o("caret",F,A);const T=A.loose?u[l.CARETLOOSE]:u[l.CARET],B=A.includePrerelease?"-0":"";return F.replace(T,(H,z,ne,be,de)=>{o("caret",F,H,z,ne,be,de);let Te;return v(z)?Te="":v(ne)?Te=`>=${z}.0.0${B} <${+z+1}.0.0-0`:v(be)?z==="0"?Te=`>=${z}.${ne}.0${B} <${z}.${+ne+1}.0-0`:Te=`>=${z}.${ne}.0${B} <${+z+1}.0.0-0`:de?(o("replaceCaret pr",de),z==="0"?ne==="0"?Te=`>=${z}.${ne}.${be}-${de} <${z}.${ne}.${+be+1}-0`:Te=`>=${z}.${ne}.${be}-${de} <${z}.${+ne+1}.0-0`:Te=`>=${z}.${ne}.${be}-${de} <${+z+1}.0.0-0`):(o("no pr"),z==="0"?ne==="0"?Te=`>=${z}.${ne}.${be}${B} <${z}.${ne}.${+be+1}-0`:Te=`>=${z}.${ne}.${be}${B} <${z}.${+ne+1}.0-0`:Te=`>=${z}.${ne}.${be} <${+z+1}.0.0-0`),o("caret return",Te),Te})},C=(F,A)=>(o("replaceXRanges",F,A),F.split(/\s+/).map(T=>k(T,A)).join(" ")),k=(F,A)=>{F=F.trim();const T=A.loose?u[l.XRANGELOOSE]:u[l.XRANGE];return F.replace(T,(B,H,z,ne,be,de)=>{o("xRange",F,B,H,z,ne,be,de);const Te=v(z),ct=Te||v(ne),$e=ct||v(be),Ot=$e;return H==="="&&Ot&&(H=""),de=A.includePrerelease?"-0":"",Te?H===">"||H==="<"?B="<0.0.0-0":B="*":H&&Ot?(ct&&(ne=0),be=0,H===">"?(H=">=",ct?(z=+z+1,ne=0,be=0):(ne=+ne+1,be=0)):H==="<="&&(H="<",ct?z=+z+1:ne=+ne+1),H==="<"&&(de="-0"),B=`${H+z}.${ne}.${be}${de}`):ct?B=`>=${z}.0.0${de} <${+z+1}.0.0-0`:$e&&(B=`>=${z}.${ne}.0${de} <${z}.${+ne+1}.0-0`),o("xRange return",B),B})},S=(F,A)=>(o("replaceStars",F,A),F.trim().replace(u[l.STAR],"")),$=(F,A)=>(o("replaceGTE0",F,A),F.trim().replace(u[A.includePrerelease?l.GTE0PRE:l.GTE0],"")),O=F=>(A,T,B,H,z,ne,be,de,Te,ct,$e,Ot)=>(v(B)?T="":v(H)?T=`>=${B}.0.0${F?"-0":""}`:v(z)?T=`>=${B}.${H}.0${F?"-0":""}`:ne?T=`>=${T}`:T=`>=${T}${F?"-0":""}`,v(Te)?de="":v(ct)?de=`<${+Te+1}.0.0-0`:v($e)?de=`<${Te}.${+ct+1}.0-0`:Ot?de=`<=${Te}.${ct}.${$e}-${Ot}`:F?de=`<${Te}.${ct}.${+$e+1}-0`:de=`<=${de}`,`${T} ${de}`.trim()),R=(F,A,T)=>{for(let B=0;B<F.length;B++)if(!F[B].test(A))return!1;if(A.prerelease.length&&!T.includePrerelease){for(let B=0;B<F.length;B++)if(o(F[B].semver),F[B].semver!==s.ANY&&F[B].semver.prerelease.length>0){const H=F[B].semver;if(H.major===A.major&&H.minor===A.minor&&H.patch===A.patch)return!0}return!1}return!0};return K6}var Z6,uP;function T3e(){if(uP)return Z6;uP=1;const e=aP();return Z6=(n,i,r)=>{try{i=new e(i,r)}catch{return!1}return i.test(n)},Z6}var M3e=T3e(),lP=x3e(M3e);function N3e(e,t,n){const i=e.open(t),r=250,{origin:s}=new URL(t);let o=40;function a(l){l.source===i&&(o=0,e.removeEventListener("message",a,!1))}e.addEventListener("message",a,!1);function u(){o<=0||(i.postMessage(n,s),setTimeout(u,r),o-=1)}setTimeout(u,r)}var R3e=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function cP(e,...t){for(const n of t)O3e(e,n);return e}function O3e(e,t){for(const n of Object.keys(t))il(e,n,t[n],!0)}const Ss=_fe;let Dh=cbe;const Ym=typeof window<"u"?window:void 0;Dh===void 0&&((_z=Ym==null?void 0:Ym.vl)!=null&&_z.compile)&&(Dh=Ym.vl);const L3e={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},I3e={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},Th={vega:"Vega","vega-lite":"Vega-Lite"},Xm={vega:Ss.version,"vega-lite":Dh?Dh.version:"not available"},P3e={vega:e=>e,"vega-lite":(e,t)=>Dh.compile(e,{config:t}).spec},z3e=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,B3e="chart-wrapper";function U3e(e){return typeof e=="function"}function fP(e,t,n,i){const r=`<html><head>${t}</head><body><pre><code class="json">`,s=`</code></pre>${n}</body></html>`,o=window.open("");o.document.write(r+e+s),o.document.title=`${Th[i]} JSON Source`}function j3e(e,t){if(e.$schema){const n=mI(e.$schema);t&&t!==n.library&&console.warn(`The given visualization spec is written in ${Th[n.library]}, but mode argument sets ${Th[t]??t}.`);const i=n.library;return lP(Xm[i],`^${n.version.slice(1)}`)||console.warn(`The input spec uses ${Th[i]} ${n.version}, but the current version of ${Th[i]} is v${Xm[i]}.`),i}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t??"vega"}function dP(e){return!!(e&&"load"in e)}function hP(e){return dP(e)?e:Ss.loader(e)}function q3e(e){var n;const t=((n=e.usermeta)==null?void 0:n.embedOptions)??{};return se(t.defaultStyle)&&(t.defaultStyle=!1),t}async function W3e(e,t,n={}){let i,r;se(t)?(r=hP(n.loader),i=JSON.parse(await r.load(t))):i=t;const s=q3e(i),o=s.loader;(!r||o)&&(r=hP(n.loader??o));const a=await pP(s,r),u=await pP(n,r),l={...cP(u,a),config:nl(u.config??{},a.config??{})};return await G3e(e,i,l,r)}async function pP(e,t){const n=se(e.config)?JSON.parse(await t.load(e.config)):e.config??{},i=se(e.patch)?JSON.parse(await t.load(e.patch)):e.patch;return{...e,...i?{patch:i}:{},...n?{config:n}:{}}}function H3e(e){const t=e.getRootNode?e.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:document.head??document.body}}async function G3e(e,t,n={},i){const r=n.theme?nl(Ybe[n.theme],n.config??{}):n.config,s=xo(n.actions)?n.actions:cP({},L3e,n.actions??{}),o={...I3e,...n.i18n},a=n.renderer??"canvas",u=n.logLevel??Ss.Warn,l=n.downloadFileName??"visualization",c=typeof e=="string"?document.querySelector(e):e;if(!c)throw new Error(`${e} does not exist`);if(n.defaultStyle!==!1){const _="vega-embed-style",{root:E,rootContainer:w}=H3e(c);if(!E.getElementById(_)){const C=document.createElement("style");C.id=_,C.innerHTML=n.defaultStyle===void 0||n.defaultStyle===!0?R3e.toString():n.defaultStyle,w.appendChild(C)}}const f=j3e(t,n.mode);let d=P3e[f](t,r);if(f==="vega-lite"&&d.$schema){const _=mI(d.$schema);lP(Xm.vega,`^${_.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${_.version}, but current version is v${Xm.vega}.`)}c.classList.add("vega-embed"),s&&c.classList.add("has-actions"),c.innerHTML="";let h=c;if(s){const _=document.createElement("div");_.classList.add(B3e),c.appendChild(_),h=_}const p=n.patch;if(p&&(d=p instanceof Function?p(d):Wm(d,p,!0,!1).newDocument),n.formatLocale&&Ss.formatLocale(n.formatLocale),n.timeFormatLocale&&Ss.timeFormatLocale(n.timeFormatLocale),n.expressionFunctions)for(const _ in n.expressionFunctions){const E=n.expressionFunctions[_];"fn"in E?Ss.expressionFunction(_,E.fn,E.visitor):E instanceof Function&&Ss.expressionFunction(_,E)}const{ast:g}=n,m=Ss.parse(d,f==="vega-lite"?{}:r,{ast:g}),y=new(n.viewClass||Ss.View)(m,{loader:i,logLevel:u,renderer:a,...g?{expr:Ss.expressionInterpreter??n.expr??Tfe}:{}});if(y.addSignalListener("autosize",(_,E)=>{const{type:w}=E;w=="fit-x"?(h.classList.add("fit-x"),h.classList.remove("fit-y")):w=="fit-y"?(h.classList.remove("fit-x"),h.classList.add("fit-y")):w=="fit"?h.classList.add("fit-x","fit-y"):h.classList.remove("fit-x","fit-y")}),n.tooltip!==!1){const{loader:_,tooltip:E}=n,w=_&&!dP(_)?_==null?void 0:_.baseURL:void 0,C=U3e(E)?E:new r3e({baseURL:w,...E===!0?{}:E}).call;y.tooltip(C)}let{hover:b}=n;if(b===void 0&&(b=f==="vega"),b){const{hoverSet:_,updateSet:E}=typeof b=="boolean"?{}:b;y.hover(_,E)}n&&(n.width!=null&&y.width(n.width),n.height!=null&&y.height(n.height),n.padding!=null&&y.padding(n.padding)),await y.initialize(h,n.bind).runAsync();let v;if(s!==!1){let _=c;if(n.defaultStyle!==!1||n.forceActionsMenu){const w=document.createElement("details");w.title=o.CLICK_TO_VIEW_ACTIONS,c.append(w),_=w;const C=document.createElement("summary");C.innerHTML=z3e,w.append(C),v=k=>{w.contains(k.target)||w.removeAttribute("open")},document.addEventListener("click",v)}const E=document.createElement("div");if(_.append(E),E.classList.add("vega-actions"),s===!0||s.export!==!1){for(const w of["svg","png"])if(s===!0||s.export===!0||s.export[w]){const C=o[`${w.toUpperCase()}_ACTION`],k=document.createElement("a"),S=re(n.scaleFactor)?n.scaleFactor[w]:n.scaleFactor;k.text=C,k.href="#",k.target="_blank",k.download=`${l}.${w}`,k.addEventListener("mousedown",async function($){$.preventDefault();const O=await y.toImageURL(w,S);this.href=O}),E.append(k)}}if(s===!0||s.source!==!1){const w=document.createElement("a");w.text=o.SOURCE_ACTION,w.href="#",w.addEventListener("click",function(C){fP(y2(t),n.sourceHeader??"",n.sourceFooter??"",f),C.preventDefault()}),E.append(w)}if(f==="vega-lite"&&(s===!0||s.compiled!==!1)){const w=document.createElement("a");w.text=o.COMPILED_ACTION,w.href="#",w.addEventListener("click",function(C){fP(y2(d),n.sourceHeader??"",n.sourceFooter??"","vega"),C.preventDefault()}),E.append(w)}if(s===!0||s.editor!==!1){const w=n.editorUrl??"https://vega.github.io/editor/",C=document.createElement("a");C.text=o.EDITOR_ACTION,C.href="#",C.addEventListener("click",function(k){N3e(window,w,{config:r,mode:p?"vega":f,renderer:a,spec:y2(p?d:t)}),k.preventDefault()}),E.append(C)}}function x(){v&&document.removeEventListener("click",v),y.finalize()}return{view:y,spec:t,vgSpec:d,finalize:x,embedOptions:n}}const V3e=new Set(["width","height"]);function Y3e(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var X3e=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var i,r,s;if(Array.isArray(t)){if(i=t.length,i!=n.length)return!1;for(r=i;r--!==0;)if(!e(t[r],n[r]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(s=Object.keys(t),i=s.length,i!==Object.keys(n).length)return!1;for(r=i;r--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[r]))return!1;for(r=i;r--!==0;){var o=s[r];if(!e(t[o],n[o]))return!1}return!0}return t!==t&&n!==n};const K3e=Y3e(X3e);function Z3e(e,t){for(const[n,i]of Object.entries(t))i&&(i&&{}.toString.call(i)==="[object Function]"?i(e.data(n)):e.change(n,Ao().remove(()=>!0).insert(i)))}function Km(e={},t={},n=new Set){const i=Object.keys(e),r=Object.keys(t);return e===t||i.length===r.length&&i.filter(s=>!n.has(s)).every(s=>e[s]===t[s])}function gP(e,t){const n=Object.keys(t);for(const i of n)try{e.removeSignalListener(i,t[i])}catch(r){console.warn("Cannot remove invalid signal listener.",r)}return n.length>0}function J6(e,t){const n=Object.keys(t);for(const i of n)try{e.addSignalListener(i,t[i])}catch(r){console.warn("Cannot add invalid signal listener.",r)}return n.length>0}function J3e(e){return new Set(e.flatMap(t=>Object.keys(t)))}function Q3e(e,t){if(e===t)return!1;const n={width:!1,height:!1,isExpensive:!1},i="width"in e||"width"in t,r="height"in e||"height"in t;return i&&(!("width"in e)||!("width"in t)||e.width!==t.width)&&("width"in e&&typeof e.width=="number"?n.width=e.width:n.isExpensive=!0),r&&(!("height"in e)||!("height"in t)||e.height!==t.height)&&("height"in e&&typeof e.height=="number"?n.height=e.height:n.isExpensive=!0),[...J3e([e,t])].filter(o=>o!=="width"&&o!=="height").some(o=>!(o in e)||!(o in t)||!K3e(e[o],t[o]))&&(n.isExpensive=!0),n.width!==!1||n.height!==!1||n.isExpensive?n:!1}function mP(e,t){const{width:n,height:i}=t;return typeof n<"u"&&typeof i<"u"?{...e,width:n,height:i}:typeof n<"u"?{...e,width:n}:typeof i<"u"?{...e,height:i}:e}function eve(e){let t;return{c(){t=G("div")},m(n,i){I(n,t,i),e[11](t)},p:ie,i:ie,o:ie,d(n){n&&L(t),e[11](null)}}}function tve(e,t,n){let{options:i}=t,{spec:r}=t,{view:s}=t,{signalListeners:o={}}=t,{data:a={}}=t;const u=a2();let l,c={},f={},d={},h={},p;w5(()=>{m()});async function g(){m();try{n(6,l=await W3e(p,r,i)),n(1,s=l.view),J6(s,o)&&s.runAsync(),b(s)}catch(_){y(_)}}function m(){l&&(l.finalize(),n(6,l=void 0),n(1,s=void 0))}function y(_){u("onError",{error:_}),console.warn(_)}function b(_){v(),u("onNewView",{view:_})}async function v(){a&&Object.keys(a).length>0&&l!==void 0&&(n(1,s=l.view),Z3e(s,a),await s.resize().runAsync())}function x(_){zi[_?"unshift":"push"](()=>{p=_,n(0,p)})}return e.$$set=_=>{"options"in _&&n(2,i=_.options),"spec"in _&&n(3,r=_.spec),"view"in _&&n(1,s=_.view),"signalListeners"in _&&n(4,o=_.signalListeners),"data"in _&&n(5,a=_.data)},e.$$.update=()=>{if(e.$$.dirty&1056&&(Km(a,h)||v(),n(10,h=a)),e.$$.dirty&991&&p!==void 0){if(!Km(i,c,V3e))g();else{const _=Q3e(mP(r,i),mP(d,c)),E=o,w=f;if(_){if(_.isExpensive)g();else if(l!==void 0){const C=!Km(E,w);n(1,s=l.view),_.width!==!1&&s.width(_.width),_.height!==!1&&s.height(_.height),C&&(w&&gP(s,w),E&&J6(s,E)),s.runAsync()}}else!Km(E,w)&&l!==void 0&&(n(1,s=l.view),w&&gP(s,w),E&&J6(s,E),s.runAsync())}n(7,c=i),n(8,f=o),n(9,d=r)}},[p,s,i,r,o,a,l,c,f,d,h,x]}class nve extends xe{constructor(t){super(),ve(this,t,tve,eve,ye,{options:2,spec:3,view:1,signalListeners:4,data:5})}}function ive(e){let t,n,i;function r(o){e[6](o)}let s={spec:e[1],data:e[2],signalListeners:e[3],options:e[4]};return e[0]!==void 0&&(s.view=e[0]),t=new nve({props:s}),zi.push(()=>h2(t,"view",r)),t.$on("onNewView",e[7]),t.$on("onError",e[8]),{c(){he(t.$$.fragment)},m(o,a){ce(t,o,a),i=!0},p(o,[a]){const u={};a&2&&(u.spec=o[1]),a&4&&(u.data=o[2]),a&8&&(u.signalListeners=o[3]),a&16&&(u.options=o[4]),!n&&a&1&&(n=!0,u.view=o[0],f2(()=>n=!1)),t.$set(u)},i(o){i||(D(t.$$.fragment,o),i=!0)},o(o){N(t.$$.fragment,o),i=!1},d(o){fe(t,o)}}}const rve="vega";function sve(e,t,n){let i,{spec:r}=t,{options:s={}}=t,{data:o={}}=t,{signalListeners:a={}}=t,{view:u=void 0}=t;function l(d){u=d,n(0,u)}function c(d){k5.call(this,e,d)}function f(d){k5.call(this,e,d)}return e.$$set=d=>{"spec"in d&&n(1,r=d.spec),"options"in d&&n(5,s=d.options),"data"in d&&n(2,o=d.data),"signalListeners"in d&&n(3,a=d.signalListeners),"view"in d&&n(0,u=d.view)},e.$$.update=()=>{e.$$.dirty&32&&n(4,i={...s,mode:rve})},[u,r,o,a,i,s,l,c,f]}class yP extends xe{constructor(t){super(),ve(this,t,sve,ive,ye,{spec:1,options:5,data:2,signalListeners:3,view:0})}}function ove(e){let t,n;return t=new yP({props:{spec:e[1],options:e[0]}}),{c(){he(t.$$.fragment)},m(i,r){ce(t,i,r),n=!0},p(i,r){const s={};r&2&&(s.spec=i[1]),r&1&&(s.options=i[0]),t.$set(s)},i(i){n||(D(t.$$.fragment,i),n=!0)},o(i){N(t.$$.fragment,i),n=!1},d(i){fe(t,i)}}}function ave(e){let t,n;return t=new yP({props:{data:e[2],spec:e[1],options:e[0]}}),{c(){he(t.$$.fragment)},m(i,r){ce(t,i,r),n=!0},p(i,r){const s={};r&4&&(s.data=i[2]),r&2&&(s.spec=i[1]),r&1&&(s.options=i[0]),t.$set(s)},i(i){n||(D(t.$$.fragment,i),n=!0)},o(i){N(t.$$.fragment,i),n=!1},d(i){fe(t,i)}}}function uve(e){let t,n,i,r;const s=[ave,ove],o=[];function a(u,l){return u[2]&&u[1]?0:1}return t=a(e),n=o[t]=s[t](e),{c(){n.c(),i=Ne()},m(u,l){o[t].m(u,l),I(u,i,l),r=!0},p(u,[l]){let c=t;t=a(u),t===c?o[t].p(u,l):(Se(),N(o[c],1,1,()=>{o[c]=null}),Fe(),n=o[t],n?n.p(u,l):(n=o[t]=s[t](u),n.c()),D(n,1),n.m(i.parentNode,i))},i(u){r||(D(n),r=!0)},o(u){N(n),r=!1},d(u){u&&L(i),o[t].d(u)}}}function lve(e,t,n){let i,r,s,{componentData:o}=t;return e.$$set=a=>{"componentData"in a&&n(3,o=a.componentData)},e.$$.update=()=>{e.$$.dirty&8&&n(2,{data:i,spec:r,options:s}=o,i,(n(1,r),n(3,o)),(n(0,s),n(3,o)))},[s,r,i,o]}class bP extends xe{constructor(t){super(),ve(this,t,lve,uve,ye,{componentData:3})}}function cve(e){var r;let t,n=(((r=e[0])==null?void 0:r.text)||"")+"",i;return{c(){t=G("p"),i=Be(n),M(t,"data-component","text")},m(s,o){I(s,t,o),V(t,i)},p(s,[o]){var a;o&1&&n!==(n=(((a=s[0])==null?void 0:a.text)||"")+"")&&ft(i,n)},i:ie,o:ie,d(s){s&&L(t)}}}function fve(e,t,n){let{componentData:i}=t;return e.$$set=r=>{"componentData"in r&&n(0,i=r.componentData)},[i]}class vP extends xe{constructor(t){super(),ve(this,t,fve,cve,ye,{componentData:0})}}function dve(e){let t,n,i=e[0].data+"",r,s,o;return{c(){t=G("pre"),n=G("code"),r=Be(i),s=Be(`
  `),o=Be(`
`),M(n,"class","language-python"),M(t,"data-component","pythonCode")},m(a,u){I(a,t,u),V(t,n),V(n,r),V(n,s),e[2](n),V(t,o)},p(a,[u]){u&1&&i!==(i=a[0].data+"")&&ft(r,i)},i:ie,o:ie,d(a){a&&L(t),e[2](null)}}}function hve(e,t,n){let{componentData:i}=t,r;function s(){var a;r&&((a=window==null?void 0:window.Prism)==null||a.highlightElement(r))}function o(a){zi[a?"unshift":"push"](()=>{r=a,n(1,r)})}return e.$$set=a=>{"componentData"in a&&n(0,i=a.componentData)},e.$$.update=()=>{e.$$.dirty&2&&r&&s()},[i,r,o]}class xP extends xe{constructor(t){super(),ve(this,t,hve,dve,ye,{componentData:0})}}function pve(e){let t;return{c(){t=Be(e[0])},m(n,i){I(n,t,i)},p(n,i){i&1&&ft(t,n[0])},i:ie,o:ie,d(n){n&&L(t)}}}function gve(e){let t,n,i;var r=e[1];function s(o,a){return{props:{componentData:o[0]}}}return r&&(t=Ke(r,s(e))),{c(){t&&he(t.$$.fragment),n=Ne()},m(o,a){t&&ce(t,o,a),I(o,n,a),i=!0},p(o,a){if(a&2&&r!==(r=o[1])){if(t){Se();const u=t;N(u.$$.fragment,1,0,()=>{fe(u,1)}),Fe()}r?(t=Ke(r,s(o)),he(t.$$.fragment),D(t.$$.fragment,1),ce(t,n.parentNode,n)):t=null}else if(r){const u={};a&1&&(u.componentData=o[0]),t.$set(u)}},i(o){i||(t&&D(t.$$.fragment,o),i=!0)},o(o){t&&N(t.$$.fragment,o),i=!1},d(o){o&&L(n),t&&fe(t,o)}}}function mve(e){let t,n,i,r;const s=[gve,pve],o=[];function a(u,l){return u[1]?0:1}return t=a(e),n=o[t]=s[t](e),{c(){n.c(),i=Ne()},m(u,l){o[t].m(u,l),I(u,i,l),r=!0},p(u,[l]){let c=t;t=a(u),t===c?o[t].p(u,l):(Se(),N(o[c],1,1,()=>{o[c]=null}),Fe(),n=o[t],n?n.p(u,l):(n=o[t]=s[t](u),n.c()),D(n,1),n.m(i.parentNode,i))},i(u){r||(D(n),r=!0)},o(u){N(n),r=!1},d(u){u&&L(i),o[t].d(u)}}}function yve(e,t,n){let{componentData:i}=t,r;const s={artifacts:N5,dag:W5,heading:X5,image:J5,log:Q5,markdown:w4,progressBar:A4,text:vP,vegaChart:bP,pythonCode:xP},o=i==null?void 0:i.type;return o&&(r=s==null?void 0:s[o],r||console.error("Unknown component type: ",o)),e.$$set=a=>{"componentData"in a&&n(0,i=a.componentData)},[i,r]}class _P extends xe{constructor(t){super(),ve(this,t,yve,mve,ye,{componentData:0})}}function wP(e,t,n){const i=e.slice();return i[3]=t[n],i[5]=n,i}function EP(e,t,n){const i=e.slice();return i[6]=t[n],i}function CP(e){let t,n,i,r,s=Ue(e[1]),o=[];for(let u=0;u<s.length;u+=1)o[u]=AP(wP(e,s,u));const a=u=>N(o[u],1,1,()=>{o[u]=null});return{c(){t=G("div"),n=G("table"),i=G("tbody");for(let u=0;u<o.length;u+=1)o[u].c();M(t,"class","tableContainer"),M(t,"data-component","table-vertical")},m(u,l){I(u,t,l),V(t,n),V(n,i);for(let c=0;c<o.length;c+=1)o[c]&&o[c].m(i,null);r=!0},p(u,l){if(l&3){s=Ue(u[1]);let c;for(c=0;c<s.length;c+=1){const f=wP(u,s,c);o[c]?(o[c].p(f,l),D(o[c],1)):(o[c]=AP(f),o[c].c(),D(o[c],1),o[c].m(i,null))}for(Se(),c=s.length;c<o.length;c+=1)a(c);Fe()}},i(u){if(!r){for(let l=0;l<s.length;l+=1)D(o[l]);r=!0}},o(u){o=o.filter(Boolean);for(let l=0;l<o.length;l+=1)N(o[l]);r=!1},d(u){u&&L(t),jt(o,u)}}}function kP(e){let t,n,i;return n=new _P({props:{componentData:e[6][e[5]]}}),{c(){t=G("td"),he(n.$$.fragment),M(t,"class","svelte-gl9h79")},m(r,s){I(r,t,s),ce(n,t,null),i=!0},p(r,s){const o={};s&1&&(o.componentData=r[6][r[5]]),n.$set(o)},i(r){i||(D(n.$$.fragment,r),i=!0)},o(r){N(n.$$.fragment,r),i=!1},d(r){r&&L(t),fe(n)}}}function AP(e){let t,n,i=e[3]+"",r,s,o,a,u=Ue(e[0]),l=[];for(let f=0;f<u.length;f+=1)l[f]=kP(EP(e,u,f));const c=f=>N(l[f],1,1,()=>{l[f]=null});return{c(){t=G("tr"),n=G("td"),r=Be(i),s=He();for(let f=0;f<l.length;f+=1)l[f].c();o=He(),M(n,"class","labelColumn svelte-gl9h79")},m(f,d){I(f,t,d),V(t,n),V(n,r),V(t,s);for(let h=0;h<l.length;h+=1)l[h]&&l[h].m(t,null);V(t,o),a=!0},p(f,d){if((!a||d&2)&&i!==(i=f[3]+"")&&ft(r,i),d&1){u=Ue(f[0]);let h;for(h=0;h<u.length;h+=1){const p=EP(f,u,h);l[h]?(l[h].p(p,d),D(l[h],1)):(l[h]=kP(p),l[h].c(),D(l[h],1),l[h].m(t,o))}for(Se(),h=u.length;h<l.length;h+=1)c(h);Fe()}},i(f){if(!a){for(let d=0;d<u.length;d+=1)D(l[d]);a=!0}},o(f){l=l.filter(Boolean);for(let d=0;d<l.length;d+=1)N(l[d]);a=!1},d(f){f&&L(t),jt(l,f)}}}function bve(e){let t,n,i=e[1]&&e[0]&&CP(e);return{c(){i&&i.c(),t=Ne()},m(r,s){i&&i.m(r,s),I(r,t,s),n=!0},p(r,[s]){r[1]&&r[0]?i?(i.p(r,s),s&3&&D(i,1)):(i=CP(r),i.c(),D(i,1),i.m(t.parentNode,t)):i&&(Se(),N(i,1,1,()=>{i=null}),Fe())},i(r){n||(D(i),n=!0)},o(r){N(i),n=!1},d(r){r&&L(t),i&&i.d(r)}}}function vve(e,t,n){let i,r,{componentData:s}=t;return e.$$set=o=>{"componentData"in o&&n(2,s=o.componentData)},e.$$.update=()=>{e.$$.dirty&4&&n(1,{columns:i,data:r}=s,i,(n(0,r),n(2,s)))},[r,i,s]}class xve extends xe{constructor(t){super(),ve(this,t,vve,bve,ye,{componentData:2})}}function $P(e,t,n){const i=e.slice();return i[3]=t[n],i}function SP(e,t,n){const i=e.slice();return i[6]=t[n],i}function FP(e,t,n){const i=e.slice();return i[9]=t[n],i}function DP(e){let t,n,i,r,s,o,a,u=Ue(e[1]),l=[];for(let h=0;h<u.length;h+=1)l[h]=TP(FP(e,u,h));let c=Ue(e[0]),f=[];for(let h=0;h<c.length;h+=1)f[h]=NP($P(e,c,h));const d=h=>N(f[h],1,1,()=>{f[h]=null});return{c(){t=G("div"),n=G("table"),i=G("thead"),r=G("tr");for(let h=0;h<l.length;h+=1)l[h].c();s=He(),o=G("tbody");for(let h=0;h<f.length;h+=1)f[h].c();M(t,"class","tableContainer svelte-q3hq57"),M(t,"data-component","table-horizontal")},m(h,p){I(h,t,p),V(t,n),V(n,i),V(i,r);for(let g=0;g<l.length;g+=1)l[g]&&l[g].m(r,null);V(n,s),V(n,o);for(let g=0;g<f.length;g+=1)f[g]&&f[g].m(o,null);a=!0},p(h,p){if(p&2){u=Ue(h[1]);let g;for(g=0;g<u.length;g+=1){const m=FP(h,u,g);l[g]?l[g].p(m,p):(l[g]=TP(m),l[g].c(),l[g].m(r,null))}for(;g<l.length;g+=1)l[g].d(1);l.length=u.length}if(p&1){c=Ue(h[0]);let g;for(g=0;g<c.length;g+=1){const m=$P(h,c,g);f[g]?(f[g].p(m,p),D(f[g],1)):(f[g]=NP(m),f[g].c(),D(f[g],1),f[g].m(o,null))}for(Se(),g=c.length;g<f.length;g+=1)d(g);Fe()}},i(h){if(!a){for(let p=0;p<c.length;p+=1)D(f[p]);a=!0}},o(h){f=f.filter(Boolean);for(let p=0;p<f.length;p+=1)N(f[p]);a=!1},d(h){h&&L(t),jt(l,h),jt(f,h)}}}function TP(e){let t,n=e[9]+"",i;return{c(){t=G("th"),i=Be(n),M(t,"class","svelte-q3hq57")},m(r,s){I(r,t,s),V(t,i)},p(r,s){s&2&&n!==(n=r[9]+"")&&ft(i,n)},d(r){r&&L(t)}}}function MP(e){let t,n,i;return n=new _P({props:{componentData:e[6]}}),{c(){t=G("td"),he(n.$$.fragment)},m(r,s){I(r,t,s),ce(n,t,null),i=!0},p(r,s){const o={};s&1&&(o.componentData=r[6]),n.$set(o)},i(r){i||(D(n.$$.fragment,r),i=!0)},o(r){N(n.$$.fragment,r),i=!1},d(r){r&&L(t),fe(n)}}}function NP(e){let t,n,i,r=Ue(e[3]),s=[];for(let a=0;a<r.length;a+=1)s[a]=MP(SP(e,r,a));const o=a=>N(s[a],1,1,()=>{s[a]=null});return{c(){t=G("tr");for(let a=0;a<s.length;a+=1)s[a].c();n=He()},m(a,u){I(a,t,u);for(let l=0;l<s.length;l+=1)s[l]&&s[l].m(t,null);V(t,n),i=!0},p(a,u){if(u&1){r=Ue(a[3]);let l;for(l=0;l<r.length;l+=1){const c=SP(a,r,l);s[l]?(s[l].p(c,u),D(s[l],1)):(s[l]=MP(c),s[l].c(),D(s[l],1),s[l].m(t,n))}for(Se(),l=r.length;l<s.length;l+=1)o(l);Fe()}},i(a){if(!i){for(let u=0;u<r.length;u+=1)D(s[u]);i=!0}},o(a){s=s.filter(Boolean);for(let u=0;u<s.length;u+=1)N(s[u]);i=!1},d(a){a&&L(t),jt(s,a)}}}function _ve(e){let t,n,i=e[1]&&e[0]&&DP(e);return{c(){i&&i.c(),t=Ne()},m(r,s){i&&i.m(r,s),I(r,t,s),n=!0},p(r,[s]){r[1]&&r[0]?i?(i.p(r,s),s&3&&D(i,1)):(i=DP(r),i.c(),D(i,1),i.m(t.parentNode,t)):i&&(Se(),N(i,1,1,()=>{i=null}),Fe())},i(r){n||(D(i),n=!0)},o(r){N(i),n=!1},d(r){r&&L(t),i&&i.d(r)}}}function wve(e,t,n){let i,r,{componentData:s}=t;return e.$$set=o=>{"componentData"in o&&n(2,s=o.componentData)},e.$$.update=()=>{e.$$.dirty&4&&n(1,{columns:i,data:r}=s,i,(n(0,r),n(2,s)))},[r,i,s]}class Eve extends xe{constructor(t){super(),ve(this,t,wve,_ve,ye,{componentData:2})}}function RP(e){let t,n,i;var r=e[3];function s(o,a){return{props:{componentData:o[0]}}}return r&&(t=Ke(r,s(e))),{c(){t&&he(t.$$.fragment),n=Ne()},m(o,a){t&&ce(t,o,a),I(o,n,a),i=!0},p(o,a){if(r!==(r=o[3])){if(t){Se();const u=t;N(u.$$.fragment,1,0,()=>{fe(u,1)}),Fe()}r?(t=Ke(r,s(o)),he(t.$$.fragment),D(t.$$.fragment,1),ce(t,n.parentNode,n)):t=null}else if(r){const u={};a&1&&(u.componentData=o[0]),t.$set(u)}},i(o){i||(t&&D(t.$$.fragment,o),i=!0)},o(o){t&&N(t.$$.fragment,o),i=!1},d(o){o&&L(n),t&&fe(t,o)}}}function Cve(e){let t,n,i=e[2]&&e[1]&&RP(e);return{c(){i&&i.c(),t=Ne()},m(r,s){i&&i.m(r,s),I(r,t,s),n=!0},p(r,[s]){r[2]&&r[1]?i?(i.p(r,s),s&6&&D(i,1)):(i=RP(r),i.c(),D(i,1),i.m(t.parentNode,t)):i&&(Se(),N(i,1,1,()=>{i=null}),Fe())},i(r){n||(D(i),n=!0)},o(r){N(i),n=!1},d(r){r&&L(t),i&&i.d(r)}}}function kve(e,t,n){let i,r,s,{componentData:o}=t;const a=s?xve:Eve;return e.$$set=u=>{"componentData"in u&&n(0,o=u.componentData)},e.$$.update=()=>{e.$$.dirty&1&&n(2,{columns:i,data:r,vertical:s}=o,i,(n(1,r),n(0,o)))},[o,r,i,a]}class Ave extends xe{constructor(t){super(),ve(this,t,kve,Cve,ye,{componentData:0})}}function OP(e,t,n){const i=e.slice();return i[3]=t[n],i}function $ve(e){let t,n,i,r;const s=[Fve,Sve],o=[];function a(u,l){var c;return(u[0].type==="page"||u[0].type==="section")&&((c=u[0])!=null&&c.contents)?0:1}return t=a(e),n=o[t]=s[t](e),{c(){n.c(),i=Ne()},m(u,l){o[t].m(u,l),I(u,i,l),r=!0},p(u,l){let c=t;t=a(u),t===c?o[t].p(u,l):(Se(),N(o[c],1,1,()=>{o[c]=null}),Fe(),n=o[t],n?n.p(u,l):(n=o[t]=s[t](u),n.c()),D(n,1),n.m(i.parentNode,i))},i(u){r||(D(n),r=!0)},o(u){N(n),r=!1},d(u){u&&L(i),o[t].d(u)}}}function Sve(e){let t,n,i;var r=e[1];function s(o,a){return{props:{componentData:o[0]}}}return r&&(t=Ke(r,s(e))),{c(){t&&he(t.$$.fragment),n=Ne()},m(o,a){t&&ce(t,o,a),I(o,n,a),i=!0},p(o,a){if(r!==(r=o[1])){if(t){Se();const u=t;N(u.$$.fragment,1,0,()=>{fe(u,1)}),Fe()}r?(t=Ke(r,s(o)),he(t.$$.fragment),D(t.$$.fragment,1),ce(t,n.parentNode,n)):t=null}else if(r){const u={};a&1&&(u.componentData=o[0]),t.$set(u)}},i(o){i||(t&&D(t.$$.fragment,o),i=!0)},o(o){t&&N(t.$$.fragment,o),i=!1},d(o){o&&L(n),t&&fe(t,o)}}}function Fve(e){let t,n,i;var r=e[1];function s(o,a){return{props:{componentData:o[0],$$slots:{default:[Dve]},$$scope:{ctx:o}}}}return r&&(t=Ke(r,s(e))),{c(){t&&he(t.$$.fragment),n=Ne()},m(o,a){t&&ce(t,o,a),I(o,n,a),i=!0},p(o,a){if(r!==(r=o[1])){if(t){Se();const u=t;N(u.$$.fragment,1,0,()=>{fe(u,1)}),Fe()}r?(t=Ke(r,s(o)),he(t.$$.fragment),D(t.$$.fragment,1),ce(t,n.parentNode,n)):t=null}else if(r){const u={};a&1&&(u.componentData=o[0]),a&65&&(u.$$scope={dirty:a,ctx:o}),t.$set(u)}},i(o){i||(t&&D(t.$$.fragment,o),i=!0)},o(o){t&&N(t.$$.fragment,o),i=!1},d(o){o&&L(n),t&&fe(t,o)}}}function LP(e){let t,n;return t=new Q6({props:{componentData:e[3]}}),{c(){he(t.$$.fragment)},m(i,r){ce(t,i,r),n=!0},p(i,r){const s={};r&1&&(s.componentData=i[3]),t.$set(s)},i(i){n||(D(t.$$.fragment,i),n=!0)},o(i){N(t.$$.fragment,i),n=!1},d(i){fe(t,i)}}}function Dve(e){let t,n,i=Ue(e[0].contents),r=[];for(let o=0;o<i.length;o+=1)r[o]=LP(OP(e,i,o));const s=o=>N(r[o],1,1,()=>{r[o]=null});return{c(){for(let o=0;o<r.length;o+=1)r[o].c();t=Ne()},m(o,a){for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(o,a);I(o,t,a),n=!0},p(o,a){if(a&1){i=Ue(o[0].contents);let u;for(u=0;u<i.length;u+=1){const l=OP(o,i,u);r[u]?(r[u].p(l,a),D(r[u],1)):(r[u]=LP(l),r[u].c(),D(r[u],1),r[u].m(t.parentNode,t))}for(Se(),u=i.length;u<r.length;u+=1)s(u);Fe()}},i(o){if(!n){for(let a=0;a<i.length;a+=1)D(r[a]);n=!0}},o(o){r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)N(r[a]);n=!1},d(o){o&&L(t),jt(r,o)}}}function Tve(e){let t,n,i=e[1]&&$ve(e);return{c(){i&&i.c(),t=Ne()},m(r,s){i&&i.m(r,s),I(r,t,s),n=!0},p(r,[s]){r[1]&&i.p(r,s)},i(r){n||(D(i),n=!0)},o(r){N(i),n=!1},d(r){r&&L(t),i&&i.d(r)}}}function Mve(e,t,n){let{componentData:i}=t;const r={artifacts:N5,dag:W5,heading:X5,image:J5,log:Q5,markdown:w4,page:Kj,progressBar:A4,section:tq,subtitle:G5,table:Ave,text:vP,title:H5,vegaChart:bP,pythonCode:xP};let s=r==null?void 0:r[i.type];return s||console.error("Unknown component type: ",i.type),e.$$set=o=>{"componentData"in o&&n(0,i=o.componentData)},[i,s]}class Q6 extends xe{constructor(t){super(),ve(this,t,Mve,Tve,ye,{componentData:0})}}function Nve(e){let t,n,i;const r=e[1].default,s=mt(r,e,e[0],null);return{c(){t=G("main"),n=G("div"),s&&s.c(),M(n,"class","mainContainer svelte-mqeomk"),M(t,"class","svelte-mqeomk")},m(o,a){I(o,t,a),V(t,n),s&&s.m(n,null),i=!0},p(o,[a]){s&&s.p&&(!i||a&1)&&bt(s,r,o,o[0],i?yt(r,o[0],a,null):vt(o[0]),null)},i(o){i||(D(s,o),i=!0)},o(o){N(s,o),i=!1},d(o){o&&L(t),s&&s.d(o)}}}function Rve(e,t,n){let{$$slots:i={},$$scope:r}=t;return e.$$set=s=>{"$$scope"in s&&n(0,r=s.$$scope)},[r,i]}class Ove extends xe{constructor(t){super(),ve(this,t,Rve,Nve,ye,{})}}const Mh=/^[a-z0-9]+(-[a-z0-9]+)*$/,Zm=(e,t,n,i="")=>{const r=e.split(":");if(e.slice(0,1)==="@"){if(r.length<2||r.length>3)return null;i=r.shift().slice(1)}if(r.length>3||!r.length)return null;if(r.length>1){const a=r.pop(),u=r.pop(),l={provider:r.length>0?r[0]:i,prefix:u,name:a};return t&&!Jm(l)?null:l}const s=r[0],o=s.split("-");if(o.length>1){const a={provider:i,prefix:o.shift(),name:o.join("-")};return t&&!Jm(a)?null:a}if(n&&i===""){const a={provider:i,prefix:"",name:s};return t&&!Jm(a,n)?null:a}return null},Jm=(e,t)=>e?!!((e.provider===""||e.provider.match(Mh))&&(t&&e.prefix===""||e.prefix.match(Mh))&&e.name.match(Mh)):!1,IP=Object.freeze({left:0,top:0,width:16,height:16}),Qm=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),e2=Object.freeze({...IP,...Qm}),e5=Object.freeze({...e2,body:"",hidden:!1});function Lve(e,t){const n={};!e.hFlip!=!t.hFlip&&(n.hFlip=!0),!e.vFlip!=!t.vFlip&&(n.vFlip=!0);const i=((e.rotate||0)+(t.rotate||0))%4;return i&&(n.rotate=i),n}function PP(e,t){const n=Lve(e,t);for(const i in e5)i in Qm?i in e&&!(i in n)&&(n[i]=Qm[i]):i in t?n[i]=t[i]:i in e&&(n[i]=e[i]);return n}function Ive(e,t){const n=e.icons,i=e.aliases||Object.create(null),r=Object.create(null);function s(o){if(n[o])return r[o]=[];if(!(o in r)){r[o]=null;const a=i[o]&&i[o].parent,u=a&&s(a);u&&(r[o]=[a].concat(u))}return r[o]}return Object.keys(n).concat(Object.keys(i)).forEach(s),r}function Pve(e,t,n){const i=e.icons,r=e.aliases||Object.create(null);let s={};function o(a){s=PP(i[a]||r[a],s)}return o(t),n.forEach(o),PP(e,s)}function zP(e,t){const n=[];if(typeof e!="object"||typeof e.icons!="object")return n;e.not_found instanceof Array&&e.not_found.forEach(r=>{t(r,null),n.push(r)});const i=Ive(e);for(const r in i){const s=i[r];s&&(t(r,Pve(e,r,s)),n.push(r))}return n}const zve={provider:"",aliases:{},not_found:{},...IP};function t5(e,t){for(const n in t)if(n in e&&typeof e[n]!=typeof t[n])return!1;return!0}function BP(e){if(typeof e!="object"||e===null)return null;const t=e;if(typeof t.prefix!="string"||!e.icons||typeof e.icons!="object"||!t5(e,zve))return null;const n=t.icons;for(const r in n){const s=n[r];if(!r.match(Mh)||typeof s.body!="string"||!t5(s,e5))return null}const i=t.aliases||Object.create(null);for(const r in i){const s=i[r],o=s.parent;if(!r.match(Mh)||typeof o!="string"||!n[o]&&!i[o]||!t5(s,e5))return null}return t}const UP=Object.create(null);function Bve(e,t){return{provider:e,prefix:t,icons:Object.create(null),missing:new Set}}function Vu(e,t){const n=UP[e]||(UP[e]=Object.create(null));return n[t]||(n[t]=Bve(e,t))}function n5(e,t){return BP(t)?zP(t,(n,i)=>{i?e.icons[n]=i:e.missing.add(n)}):[]}function Uve(e,t,n){try{if(typeof n.body=="string")return e.icons[t]={...n},!0}catch{}return!1}let Nh=!1;function jP(e){return typeof e=="boolean"&&(Nh=e),Nh}function jve(e){const t=typeof e=="string"?Zm(e,!0,Nh):e;if(t){const n=Vu(t.provider,t.prefix),i=t.name;return n.icons[i]||(n.missing.has(i)?null:void 0)}}function qve(e,t){const n=Zm(e,!0,Nh);if(!n)return!1;const i=Vu(n.provider,n.prefix);return Uve(i,n.name,t)}function Wve(e,t){if(typeof e!="object")return!1;if(typeof t!="string"&&(t=e.provider||""),Nh&&!t&&!e.prefix){let r=!1;return BP(e)&&(e.prefix="",zP(e,(s,o)=>{o&&qve(s,o)&&(r=!0)})),r}const n=e.prefix;if(!Jm({provider:t,prefix:n,name:"a"}))return!1;const i=Vu(t,n);return!!n5(i,e)}const qP=Object.freeze({width:null,height:null}),WP=Object.freeze({...qP,...Qm}),Hve=/(-?[0-9.]*[0-9]+[0-9.]*)/g,Gve=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function HP(e,t,n){if(t===1)return e;if(n=n||100,typeof e=="number")return Math.ceil(e*t*n)/n;if(typeof e!="string")return e;const i=e.split(Hve);if(i===null||!i.length)return e;const r=[];let s=i.shift(),o=Gve.test(s);for(;;){if(o){const a=parseFloat(s);isNaN(a)?r.push(s):r.push(Math.ceil(a*t*n)/n)}else r.push(s);if(s=i.shift(),s===void 0)return r.join("");o=!o}}function Vve(e,t="defs"){let n="";const i=e.indexOf("<"+t);for(;i>=0;){const r=e.indexOf(">",i),s=e.indexOf("</"+t);if(r===-1||s===-1)break;const o=e.indexOf(">",s);if(o===-1)break;n+=e.slice(r+1,s).trim(),e=e.slice(0,i).trim()+e.slice(o+1)}return{defs:n,content:e}}function Yve(e,t){return e?"<defs>"+e+"</defs>"+t:t}function Xve(e,t,n){const i=Vve(e);return Yve(i.defs,t+i.content+n)}const Kve=e=>e==="unset"||e==="undefined"||e==="none";function Zve(e,t){const n={...e2,...e},i={...WP,...t},r={left:n.left,top:n.top,width:n.width,height:n.height};let s=n.body;[n,i].forEach(g=>{const m=[],y=g.hFlip,b=g.vFlip;let v=g.rotate;y?b?v+=2:(m.push("translate("+(r.width+r.left).toString()+" "+(0-r.top).toString()+")"),m.push("scale(-1 1)"),r.top=r.left=0):b&&(m.push("translate("+(0-r.left).toString()+" "+(r.height+r.top).toString()+")"),m.push("scale(1 -1)"),r.top=r.left=0);let x;switch(v<0&&(v-=Math.floor(v/4)*4),v=v%4,v){case 1:x=r.height/2+r.top,m.unshift("rotate(90 "+x.toString()+" "+x.toString()+")");break;case 2:m.unshift("rotate(180 "+(r.width/2+r.left).toString()+" "+(r.height/2+r.top).toString()+")");break;case 3:x=r.width/2+r.left,m.unshift("rotate(-90 "+x.toString()+" "+x.toString()+")");break}v%2===1&&(r.left!==r.top&&(x=r.left,r.left=r.top,r.top=x),r.width!==r.height&&(x=r.width,r.width=r.height,r.height=x)),m.length&&(s=Xve(s,'<g transform="'+m.join(" ")+'">',"</g>"))});const o=i.width,a=i.height,u=r.width,l=r.height;let c,f;o===null?(f=a===null?"1em":a==="auto"?l:a,c=HP(f,u/l)):(c=o==="auto"?u:o,f=a===null?HP(c,l/u):a==="auto"?l:a);const d={},h=(g,m)=>{Kve(m)||(d[g]=m.toString())};h("width",c),h("height",f);const p=[r.left,r.top,u,l];return d.viewBox=p.join(" "),{attributes:d,viewBox:p,body:s}}const Jve=/\sid="(\S+)"/g,Qve="IconifyId"+Date.now().toString(16)+(Math.random()*16777216|0).toString(16);let exe=0;function txe(e,t=Qve){const n=[];let i;for(;i=Jve.exec(e);)n.push(i[1]);if(!n.length)return e;const r="suffix"+(Math.random()*16777216|Date.now()).toString(16);return n.forEach(s=>{const o=typeof t=="function"?t(s):t+(exe++).toString(),a=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");e=e.replace(new RegExp('([#;"])('+a+')([")]|\\.[a-z])',"g"),"$1"+o+r+"$3")}),e=e.replace(new RegExp(r,"g"),""),e}const i5=Object.create(null);function nxe(e,t){i5[e]=t}function r5(e){return i5[e]||i5[""]}function s5(e){let t;if(typeof e.resources=="string")t=[e.resources];else if(t=e.resources,!(t instanceof Array)||!t.length)return null;return{resources:t,path:e.path||"/",maxURL:e.maxURL||500,rotate:e.rotate||750,timeout:e.timeout||5e3,random:e.random===!0,index:e.index||0,dataAfterTimeout:e.dataAfterTimeout!==!1}}const o5=Object.create(null),Rh=["https://api.simplesvg.com","https://api.unisvg.com"],t2=[];for(;Rh.length>0;)Rh.length===1||Math.random()>.5?t2.push(Rh.shift()):t2.push(Rh.pop());o5[""]=s5({resources:["https://api.iconify.design"].concat(t2)});function ixe(e,t){const n=s5(t);return n===null?!1:(o5[e]=n,!0)}function a5(e){return o5[e]}let GP=(()=>{let e;try{if(e=fetch,typeof e=="function")return e}catch{}})();function rxe(e,t){const n=a5(e);if(!n)return 0;let i;if(!n.maxURL)i=0;else{let r=0;n.resources.forEach(o=>{r=Math.max(r,o.length)});const s=t+".json?icons=";i=n.maxURL-r-n.path.length-s.length}return i}function sxe(e){return e===404}const oxe=(e,t,n)=>{const i=[],r=rxe(e,t),s="icons";let o={type:s,provider:e,prefix:t,icons:[]},a=0;return n.forEach((u,l)=>{a+=u.length+1,a>=r&&l>0&&(i.push(o),o={type:s,provider:e,prefix:t,icons:[]},a=u.length),o.icons.push(u)}),i.push(o),i};function axe(e){if(typeof e=="string"){const t=a5(e);if(t)return t.path}return"/"}const uxe={prepare:oxe,send:(e,t,n)=>{if(!GP){n("abort",424);return}let i=axe(t.provider);switch(t.type){case"icons":{const s=t.prefix,a=t.icons.join(","),u=new URLSearchParams({icons:a});i+=s+".json?"+u.toString();break}case"custom":{const s=t.uri;i+=s.slice(0,1)==="/"?s.slice(1):s;break}default:n("abort",400);return}let r=503;GP(e+i).then(s=>{const o=s.status;if(o!==200){setTimeout(()=>{n(sxe(o)?"abort":"next",o)});return}return r=501,s.json()}).then(s=>{if(typeof s!="object"||s===null){setTimeout(()=>{s===404?n("abort",s):n("next",r)});return}setTimeout(()=>{n("success",s)})}).catch(()=>{n("next",r)})}};function lxe(e){const t={loaded:[],missing:[],pending:[]},n=Object.create(null);e.sort((r,s)=>r.provider!==s.provider?r.provider.localeCompare(s.provider):r.prefix!==s.prefix?r.prefix.localeCompare(s.prefix):r.name.localeCompare(s.name));let i={provider:"",prefix:"",name:""};return e.forEach(r=>{if(i.name===r.name&&i.prefix===r.prefix&&i.provider===r.provider)return;i=r;const s=r.provider,o=r.prefix,a=r.name,u=n[s]||(n[s]=Object.create(null)),l=u[o]||(u[o]=Vu(s,o));let c;a in l.icons?c=t.loaded:o===""||l.missing.has(a)?c=t.missing:c=t.pending;const f={provider:s,prefix:o,name:a};c.push(f)}),t}function VP(e,t){e.forEach(n=>{const i=n.loaderCallbacks;i&&(n.loaderCallbacks=i.filter(r=>r.id!==t))})}function cxe(e){e.pendingCallbacksFlag||(e.pendingCallbacksFlag=!0,setTimeout(()=>{e.pendingCallbacksFlag=!1;const t=e.loaderCallbacks?e.loaderCallbacks.slice(0):[];if(!t.length)return;let n=!1;const i=e.provider,r=e.prefix;t.forEach(s=>{const o=s.icons,a=o.pending.length;o.pending=o.pending.filter(u=>{if(u.prefix!==r)return!0;const l=u.name;if(e.icons[l])o.loaded.push({provider:i,prefix:r,name:l});else if(e.missing.has(l))o.missing.push({provider:i,prefix:r,name:l});else return n=!0,!0;return!1}),o.pending.length!==a&&(n||VP([e],s.id),s.callback(o.loaded.slice(0),o.missing.slice(0),o.pending.slice(0),s.abort))})}))}let fxe=0;function dxe(e,t,n){const i=fxe++,r=VP.bind(null,n,i);if(!t.pending.length)return r;const s={id:i,icons:t,callback:e,abort:r};return n.forEach(o=>{(o.loaderCallbacks||(o.loaderCallbacks=[])).push(s)}),r}function hxe(e,t=!0,n=!1){const i=[];return e.forEach(r=>{const s=typeof r=="string"?Zm(r,t,n):r;s&&i.push(s)}),i}var pxe={resources:[],index:0,timeout:2e3,rotate:750,random:!1,dataAfterTimeout:!1};function gxe(e,t,n,i){const r=e.resources.length,s=e.random?Math.floor(Math.random()*r):e.index;let o;if(e.random){let E=e.resources.slice(0);for(o=[];E.length>1;){const w=Math.floor(Math.random()*E.length);o.push(E[w]),E=E.slice(0,w).concat(E.slice(w+1))}o=o.concat(E)}else o=e.resources.slice(s).concat(e.resources.slice(0,s));const a=Date.now();let u="pending",l=0,c,f=null,d=[],h=[];typeof i=="function"&&h.push(i);function p(){f&&(clearTimeout(f),f=null)}function g(){u==="pending"&&(u="aborted"),p(),d.forEach(E=>{E.status==="pending"&&(E.status="aborted")}),d=[]}function m(E,w){w&&(h=[]),typeof E=="function"&&h.push(E)}function y(){return{startTime:a,payload:t,status:u,queriesSent:l,queriesPending:d.length,subscribe:m,abort:g}}function b(){u="failed",h.forEach(E=>{E(void 0,c)})}function v(){d.forEach(E=>{E.status==="pending"&&(E.status="aborted")}),d=[]}function x(E,w,C){const k=w!=="success";switch(d=d.filter(S=>S!==E),u){case"pending":break;case"failed":if(k||!e.dataAfterTimeout)return;break;default:return}if(w==="abort"){c=C,b();return}if(k){c=C,d.length||(o.length?_():b());return}if(p(),v(),!e.random){const S=e.resources.indexOf(E.resource);S!==-1&&S!==e.index&&(e.index=S)}u="completed",h.forEach(S=>{S(C)})}function _(){if(u!=="pending")return;p();const E=o.shift();if(E===void 0){if(d.length){f=setTimeout(()=>{p(),u==="pending"&&(v(),b())},e.timeout);return}b();return}const w={status:"pending",resource:E,callback:(C,k)=>{x(w,C,k)}};d.push(w),l++,f=setTimeout(_,e.rotate),n(E,t,w.callback)}return setTimeout(_),y}function YP(e){const t={...pxe,...e};let n=[];function i(){n=n.filter(a=>a().status==="pending")}function r(a,u,l){const c=gxe(t,a,u,(f,d)=>{i(),l&&l(f,d)});return n.push(c),c}function s(a){return n.find(u=>a(u))||null}return{query:r,find:s,setIndex:a=>{t.index=a},getIndex:()=>t.index,cleanup:i}}function XP(){}const u5=Object.create(null);function mxe(e){if(!u5[e]){const t=a5(e);if(!t)return;const n=YP(t),i={config:t,redundancy:n};u5[e]=i}return u5[e]}function yxe(e,t,n){let i,r;if(typeof e=="string"){const s=r5(e);if(!s)return n(void 0,424),XP;r=s.send;const o=mxe(e);o&&(i=o.redundancy)}else{const s=s5(e);if(s){i=YP(s);const o=e.resources?e.resources[0]:"",a=r5(o);a&&(r=a.send)}}return!i||!r?(n(void 0,424),XP):i.query(t,r,n)().abort}const KP="iconify2",Oh="iconify",ZP=Oh+"-count",JP=Oh+"-version",QP=36e5,bxe=168,vxe=50;function l5(e,t){try{return e.getItem(t)}catch{}}function c5(e,t,n){try{return e.setItem(t,n),!0}catch{}}function ez(e,t){try{e.removeItem(t)}catch{}}function f5(e,t){return c5(e,ZP,t.toString())}function d5(e){return parseInt(l5(e,ZP))||0}const n2={local:!0,session:!0},tz={local:new Set,session:new Set};let h5=!1;function xxe(e){h5=e}let i2=typeof window>"u"?{}:window;function nz(e){const t=e+"Storage";try{if(i2&&i2[t]&&typeof i2[t].length=="number")return i2[t]}catch{}n2[e]=!1}function iz(e,t){const n=nz(e);if(!n)return;const i=l5(n,JP);if(i!==KP){if(i){const a=d5(n);for(let u=0;u<a;u++)ez(n,Oh+u.toString())}c5(n,JP,KP),f5(n,0);return}const r=Math.floor(Date.now()/QP)-bxe,s=a=>{const u=Oh+a.toString(),l=l5(n,u);if(typeof l=="string"){try{const c=JSON.parse(l);if(typeof c=="object"&&typeof c.cached=="number"&&c.cached>r&&typeof c.provider=="string"&&typeof c.data=="object"&&typeof c.data.prefix=="string"&&t(c,a))return!0}catch{}ez(n,u)}};let o=d5(n);for(let a=o-1;a>=0;a--)s(a)||(a===o-1?(o--,f5(n,o)):tz[e].add(a))}function rz(){if(!h5){xxe(!0);for(const e in n2)iz(e,t=>{const n=t.data,i=t.provider,r=n.prefix,s=Vu(i,r);if(!n5(s,n).length)return!1;const o=n.lastModified||-1;return s.lastModifiedCached=s.lastModifiedCached?Math.min(s.lastModifiedCached,o):o,!0})}}function _xe(e,t){const n=e.lastModifiedCached;if(n&&n>=t)return n===t;if(e.lastModifiedCached=t,n)for(const i in n2)iz(i,r=>{const s=r.data;return r.provider!==e.provider||s.prefix!==e.prefix||s.lastModified===t});return!0}function wxe(e,t){h5||rz();function n(i){let r;if(!n2[i]||!(r=nz(i)))return;const s=tz[i];let o;if(s.size)s.delete(o=Array.from(s).shift());else if(o=d5(r),o>=vxe||!f5(r,o+1))return;const a={cached:Math.floor(Date.now()/QP),provider:e.provider,data:t};return c5(r,Oh+o.toString(),JSON.stringify(a))}t.lastModified&&!_xe(e,t.lastModified)||Object.keys(t.icons).length&&(t.not_found&&(t=Object.assign({},t),delete t.not_found),n("local")||n("session"))}function sz(){}function Exe(e){e.iconsLoaderFlag||(e.iconsLoaderFlag=!0,setTimeout(()=>{e.iconsLoaderFlag=!1,cxe(e)}))}function Cxe(e,t){e.iconsToLoad?e.iconsToLoad=e.iconsToLoad.concat(t).sort():e.iconsToLoad=t,e.iconsQueueFlag||(e.iconsQueueFlag=!0,setTimeout(()=>{e.iconsQueueFlag=!1;const{provider:n,prefix:i}=e,r=e.iconsToLoad;delete e.iconsToLoad;let s;if(!r||!(s=r5(n)))return;s.prepare(n,i,r).forEach(a=>{yxe(n,a,u=>{if(typeof u!="object")a.icons.forEach(l=>{e.missing.add(l)});else try{const l=n5(e,u);if(!l.length)return;const c=e.pendingIcons;c&&l.forEach(f=>{c.delete(f)}),wxe(e,u)}catch(l){console.error(l)}Exe(e)})})}))}const kxe=(e,t)=>{const n=hxe(e,!0,jP()),i=lxe(n);if(!i.pending.length){let u=!0;return t&&setTimeout(()=>{u&&t(i.loaded,i.missing,i.pending,sz)}),()=>{u=!1}}const r=Object.create(null),s=[];let o,a;return i.pending.forEach(u=>{const{provider:l,prefix:c}=u;if(c===a&&l===o)return;o=l,a=c,s.push(Vu(l,c));const f=r[l]||(r[l]=Object.create(null));f[c]||(f[c]=[])}),i.pending.forEach(u=>{const{provider:l,prefix:c,name:f}=u,d=Vu(l,c),h=d.pendingIcons||(d.pendingIcons=new Set);h.has(f)||(h.add(f),r[l][c].push(f))}),s.forEach(u=>{const{provider:l,prefix:c}=u;r[l][c].length&&Cxe(u,r[l][c])}),t?dxe(t,i,s):sz};function Axe(e,t){const n={...e};for(const i in t){const r=t[i],s=typeof r;i in qP?(r===null||r&&(s==="string"||s==="number"))&&(n[i]=r):s===typeof n[i]&&(n[i]=i==="rotate"?r%4:r)}return n}const $xe=/[\s,]+/;function Sxe(e,t){t.split($xe).forEach(n=>{switch(n.trim()){case"horizontal":e.hFlip=!0;break;case"vertical":e.vFlip=!0;break}})}function Fxe(e,t=0){const n=e.replace(/^-?[0-9.]*/,"");function i(r){for(;r<0;)r+=4;return r%4}if(n===""){const r=parseInt(e);return isNaN(r)?0:i(r)}else if(n!==e){let r=0;switch(n){case"%":r=25;break;case"deg":r=90}if(r){let s=parseFloat(e.slice(0,e.length-n.length));return isNaN(s)?0:(s=s/r,s%1===0?i(s):0)}}return t}function Dxe(e,t){let n=e.indexOf("xlink:")===-1?"":' xmlns:xlink="http://www.w3.org/1999/xlink"';for(const i in t)n+=" "+i+'="'+t[i]+'"';return'<svg xmlns="http://www.w3.org/2000/svg"'+n+">"+e+"</svg>"}function Txe(e){return e.replace(/"/g,"'").replace(/%/g,"%25").replace(/#/g,"%23").replace(/</g,"%3C").replace(/>/g,"%3E").replace(/\s+/g," ")}function Mxe(e){return"data:image/svg+xml,"+Txe(e)}function Nxe(e){return'url("'+Mxe(e)+'")'}const oz={...WP,inline:!1},Rxe={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","aria-hidden":!0,role:"img"},Oxe={display:"inline-block"},p5={"background-color":"currentColor"},az={"background-color":"transparent"},uz={image:"var(--svg)",repeat:"no-repeat",size:"100% 100%"},lz={"-webkit-mask":p5,mask:p5,background:az};for(const e in lz){const t=lz[e];for(const n in uz)t[e+"-"+n]=uz[n]}function Lxe(e){return e+(e.match(/^[-0-9.]+$/)?"px":"")}function Ixe(e,t){const n=Axe(oz,t),i=t.mode||"svg",r=i==="svg"?{...Rxe}:{};e.body.indexOf("xlink:")===-1&&delete r["xmlns:xlink"];let s=typeof t.style=="string"?t.style:"";for(let y in t){const b=t[y];if(b!==void 0)switch(y){case"icon":case"style":case"onLoad":case"mode":break;case"inline":case"hFlip":case"vFlip":n[y]=b===!0||b==="true"||b===1;break;case"flip":typeof b=="string"&&Sxe(n,b);break;case"color":s=s+(s.length>0&&s.trim().slice(-1)!==";"?";":"")+"color: "+b+"; ";break;case"rotate":typeof b=="string"?n[y]=Fxe(b):typeof b=="number"&&(n[y]=b);break;case"ariaHidden":case"aria-hidden":b!==!0&&b!=="true"&&delete r["aria-hidden"];break;default:if(y.slice(0,3)==="on:")break;oz[y]===void 0&&(r[y]=b)}}const o=Zve(e,n),a=o.attributes;if(n.inline&&(s="vertical-align: -0.125em; "+s),i==="svg"){Object.assign(r,a),s!==""&&(r.style=s);let y=0,b=t.id;return typeof b=="string"&&(b=b.replace(/-/g,"_")),{svg:!0,attributes:r,body:txe(o.body,b?()=>b+"ID"+y++:"iconifySvelte")}}const{body:u,width:l,height:c}=e,f=i==="mask"||(i==="bg"?!1:u.indexOf("currentColor")!==-1),d=Dxe(u,{...a,width:l+"",height:c+""}),p={"--svg":Nxe(d)},g=y=>{const b=a[y];b&&(p[y]=Lxe(b))};g("width"),g("height"),Object.assign(p,Oxe,f?p5:az);let m="";for(const y in p)m+=y+": "+p[y]+";";return r.style=m+s,{svg:!1,attributes:r}}if(jP(!0),nxe("",uxe),typeof document<"u"&&typeof window<"u"){rz();const e=window;if(e.IconifyPreload!==void 0){const t=e.IconifyPreload,n="Invalid IconifyPreload syntax.";typeof t=="object"&&t!==null&&(t instanceof Array?t:[t]).forEach(i=>{try{(typeof i!="object"||i===null||i instanceof Array||typeof i.icons!="object"||typeof i.prefix!="string"||!Wve(i))&&console.error(n)}catch{console.error(n)}})}if(e.IconifyProviders!==void 0){const t=e.IconifyProviders;if(typeof t=="object"&&t!==null)for(let n in t){const i="IconifyProviders["+n+"] is invalid.";try{const r=t[n];if(typeof r!="object"||!r||r.resources===void 0)continue;ixe(n,r)||console.error(i)}catch{console.error(i)}}}}function Pxe(e,t,n,i,r){function s(){t.loading&&(t.loading.abort(),t.loading=null)}if(typeof e=="object"&&e!==null&&typeof e.body=="string")return t.name="",s(),{data:{...e2,...e}};let o;if(typeof e!="string"||(o=Zm(e,!1,!0))===null)return s(),null;const a=jve(o);if(!a)return n&&(!t.loading||t.loading.name!==e)&&(s(),t.name="",t.loading={name:e,abort:kxe([o],i)}),null;s(),t.name!==e&&(t.name=e,r&&!t.destroyed&&r(e));const u=["iconify"];return o.prefix!==""&&u.push("iconify--"+o.prefix),o.provider!==""&&u.push("iconify--"+o.provider),{data:a,classes:u}}function zxe(e,t){return e?Ixe({...e2,...e},t):null}function cz(e){let t;function n(s,o){return s[0].svg?Uxe:Bxe}let i=n(e),r=i(e);return{c(){r.c(),t=Ne()},m(s,o){r.m(s,o),I(s,t,o)},p(s,o){i===(i=n(s))&&r?r.p(s,o):(r.d(1),r=i(s),r&&(r.c(),r.m(t.parentNode,t)))},d(s){s&&L(t),r.d(s)}}}function Bxe(e){let t,n=[e[0].attributes],i={};for(let r=0;r<n.length;r+=1)i=Pe(i,n[r]);return{c(){t=G("span"),x5(t,i)},m(r,s){I(r,t,s)},p(r,s){x5(t,i=wi(n,[s&1&&r[0].attributes]))},d(r){r&&L(t)}}}function Uxe(e){let t,n=e[0].body+"",i=[e[0].attributes],r={};for(let s=0;s<i.length;s+=1)r=Pe(r,i[s]);return{c(){t=Pi("svg"),_5(t,r)},m(s,o){I(s,t,o),t.innerHTML=n},p(s,o){o&1&&n!==(n=s[0].body+"")&&(t.innerHTML=n),_5(t,r=wi(i,[o&1&&s[0].attributes]))},d(s){s&&L(t)}}}function jxe(e){let t,n=e[0]&&cz(e);return{c(){n&&n.c(),t=Ne()},m(i,r){n&&n.m(i,r),I(i,t,r)},p(i,[r]){i[0]?n?n.p(i,r):(n=cz(i),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},i:ie,o:ie,d(i){i&&L(t),n&&n.d(i)}}}function qxe(e,t,n){const i={name:"",loading:null,destroyed:!1};let r=!1,s=0,o;const a=l=>{typeof t.onLoad=="function"&&t.onLoad(l),a2()("load",{icon:l})};function u(){n(3,s++,s)}return Wc(()=>{n(2,r=!0)}),w5(()=>{n(1,i.destroyed=!0,i),i.loading&&(i.loading.abort(),n(1,i.loading=null,i))}),e.$$set=l=>{n(6,t=Pe(Pe({},t),o2(l)))},e.$$.update=()=>{{const l=Pxe(t.icon,i,r,u,a);n(0,o=l?zxe(l.data,t):null),o&&l.classes&&n(0,o.attributes.class=(typeof t.class=="string"?t.class+" ":"")+l.classes.join(" "),o)}},t=o2(t),[o,i,r,s]}class Wxe extends xe{constructor(t){super(),ve(this,t,qxe,jxe,ye,{})}}function fz(e){let t,n,i,r,s,o,a,u,l;return i=new Wxe({props:{icon:"mdi:close"}}),o=new Q6({props:{componentData:e[1]}}),{c(){t=G("div"),n=G("span"),he(i.$$.fragment),r=He(),s=G("div"),he(o.$$.fragment),M(n,"class","cancelButton svelte-1hhf5ym"),M(s,"class","modalContainer"),M(t,"class","modal svelte-1hhf5ym"),M(t,"data-component","modal")},m(c,f){I(c,t,f),V(t,n),ce(i,n,null),V(t,r),V(t,s),ce(o,s,null),a=!0,u||(l=[Ku(s,"click",Gxe),Ku(t,"click",e[3])],u=!0)},p(c,f){const d={};f&2&&(d.componentData=c[1]),o.$set(d)},i(c){a||(D(i.$$.fragment,c),D(o.$$.fragment,c),a=!0)},o(c){N(i.$$.fragment,c),N(o.$$.fragment,c),a=!1},d(c){c&&L(t),fe(i),fe(o),u=!1,Xu(l)}}}function Hxe(e){let t,n,i,r,s=e[0]&&e[1]&&fz(e);return{c(){s&&s.c(),t=Ne()},m(o,a){s&&s.m(o,a),I(o,t,a),n=!0,i||(r=Ku(window,"keyup",e[2]),i=!0)},p(o,[a]){o[0]&&o[1]?s?(s.p(o,a),a&3&&D(s,1)):(s=fz(o),s.c(),D(s,1),s.m(t.parentNode,t)):s&&(Se(),N(s,1,1,()=>{s=null}),Fe())},i(o){n||(D(s),n=!0)},o(o){N(s),n=!1},d(o){o&&L(t),s&&s.d(o),i=!1,r()}}}const Gxe=e=>{e==null||e.stopImmediatePropagation()};function Vxe(e,t,n){let i;Ph(e,Hc,a=>n(1,i=a));let{componentData:r}=t;function s(a){a.code==="Escape"&&Hc.set(void 0)}function o(a){a.stopImmediatePropagation(),Hc.set(void 0)}return e.$$set=a=>{"componentData"in a&&n(0,r=a.componentData)},[r,i,s,o]}class Yxe extends xe{constructor(t){super(),ve(this,t,Vxe,Hxe,ye,{componentData:0})}}function dz(e,t,n){const i=e.slice();return i[2]=t[n][0],i[3]=t[n][1],i}function hz(e,t,n){const i=e.slice();return i[6]=t[n],i}function pz(e){let t,n=e[2]+"",i;return{c(){t=G("span"),i=Be(n),M(t,"class","pageId svelte-1kdpgko")},m(r,s){I(r,t,s),V(t,i)},p(r,s){s&1&&n!==(n=r[2]+"")&&ft(i,n)},d(r){r&&L(t)}}}function gz(e){let t,n,i=e[6]+"",r,s,o,a;function u(){return e[1](e[6])}return{c(){t=G("li"),n=G("button"),r=Be(i),s=He(),M(n,"class","textButton"),M(t,"class","sectionLink svelte-1kdpgko")},m(l,c){I(l,t,c),V(t,n),V(n,r),V(t,s),o||(a=Ku(n,"click",u),o=!0)},p(l,c){e=l,c&1&&i!==(i=e[6]+"")&&ft(r,i)},d(l){l&&L(t),o=!1,a()}}}function mz(e){let t,n,i,r,s=e[2]&&pz(e),o=Ue(e[3]||[]),a=[];for(let u=0;u<o.length;u+=1)a[u]=gz(hz(e,o,u));return{c(){t=G("li"),s&&s.c(),n=He(),i=G("ul");for(let u=0;u<a.length;u+=1)a[u].c();r=He(),M(i,"class","navItem svelte-1kdpgko"),M(t,"class","svelte-1kdpgko")},m(u,l){I(u,t,l),s&&s.m(t,null),V(t,n),V(t,i);for(let c=0;c<a.length;c+=1)a[c]&&a[c].m(i,null);V(t,r)},p(u,l){if(u[2]?s?s.p(u,l):(s=pz(u),s.c(),s.m(t,n)):s&&(s.d(1),s=null),l&1){o=Ue(u[3]||[]);let c;for(c=0;c<o.length;c+=1){const f=hz(u,o,c);a[c]?a[c].p(f,l):(a[c]=gz(f),a[c].c(),a[c].m(i,null))}for(;c<a.length;c+=1)a[c].d(1);a.length=o.length}},d(u){u&&L(t),s&&s.d(),jt(a,u)}}}function Xxe(e){let t,n,i=Ue(Object.entries(e[0])),r=[];for(let s=0;s<i.length;s+=1)r[s]=mz(dz(e,i,s));return{c(){t=G("nav"),n=G("ul");for(let s=0;s<r.length;s+=1)r[s].c();M(n,"class","navList svelte-1kdpgko"),M(t,"class","nav svelte-1kdpgko")},m(s,o){I(s,t,o),V(t,n);for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(n,null)},p(s,[o]){if(o&1){i=Ue(Object.entries(s[0]));let a;for(a=0;a<i.length;a+=1){const u=dz(s,i,a);r[a]?r[a].p(u,o):(r[a]=mz(u),r[a].c(),r[a].m(n,null))}for(;a<r.length;a+=1)r[a].d(1);r.length=i.length}},i:ie,o:ie,d(s){s&&L(t),jt(r,s)}}}function Kxe(e){const t=document.querySelector(`[data-section-id="${e}"]`);t==null||t.scrollIntoView({behavior:"smooth"})}function Zxe(e,t,n){let{pageHierarchy:i={}}=t;const r=s=>Kxe(s);return e.$$set=s=>{"pageHierarchy"in s&&n(0,i=s.pageHierarchy)},[i,r]}class Jxe extends xe{constructor(t){super(),ve(this,t,Zxe,Xxe,ye,{pageHierarchy:0})}}const{Boolean:Qxe}=Sz;function yz(e,t,n){const i=e.slice();return i[5]=t[n],i}function e7e(e){var i;let t,n;return t=new Jxe({props:{pageHierarchy:F5((i=e[0])==null?void 0:i.components)}}),{c(){he(t.$$.fragment)},m(r,s){ce(t,r,s),n=!0},p(r,s){var a;const o={};s&1&&(o.pageHierarchy=F5((a=r[0])==null?void 0:a.components)),t.$set(o)},i(r){n||(D(t.$$.fragment,r),n=!0)},o(r){N(t.$$.fragment,r),n=!1},d(r){fe(t,r)}}}function bz(e){let t,n;return t=new Q6({props:{componentData:e[5]}}),{c(){he(t.$$.fragment)},m(i,r){ce(t,i,r),n=!0},p(i,r){const s={};r&1&&(s.componentData=i[5]),t.$set(s)},i(i){n||(D(t.$$.fragment,i),n=!0)},o(i){N(t.$$.fragment,i),n=!1},d(i){fe(t,i)}}}function t7e(e){var o;let t,n,i=Ue(((o=e[0])==null?void 0:o.components)||[]),r=[];for(let a=0;a<i.length;a+=1)r[a]=bz(yz(e,i,a));const s=a=>N(r[a],1,1,()=>{r[a]=null});return{c(){for(let a=0;a<r.length;a+=1)r[a].c();t=Ne()},m(a,u){for(let l=0;l<r.length;l+=1)r[l]&&r[l].m(a,u);I(a,t,u),n=!0},p(a,u){var l;if(u&1){i=Ue(((l=a[0])==null?void 0:l.components)||[]);let c;for(c=0;c<i.length;c+=1){const f=yz(a,i,c);r[c]?(r[c].p(f,u),D(r[c],1)):(r[c]=bz(f),r[c].c(),D(r[c],1),r[c].m(t.parentNode,t))}for(Se(),c=i.length;c<r.length;c+=1)s(c);Fe()}},i(a){if(!n){for(let u=0;u<i.length;u+=1)D(r[u]);n=!0}},o(a){r=r.filter(Qxe);for(let u=0;u<r.length;u+=1)N(r[u]);n=!1},d(a){a&&L(t),jt(r,a)}}}function vz(e){let t,n;return t=new Yxe({props:{componentData:e[1]}}),{c(){he(t.$$.fragment)},m(i,r){ce(t,i,r),n=!0},p(i,r){const s={};r&2&&(s.componentData=i[1]),t.$set(s)},i(i){n||(D(t.$$.fragment,i),n=!0)},o(i){N(t.$$.fragment,i),n=!1},d(i){fe(t,i)}}}function n7e(e){let t,n,i,r,s,o,a;n=new Jz({props:{$$slots:{default:[e7e]},$$scope:{ctx:e}}}),r=new Ove({props:{$$slots:{default:[t7e]},$$scope:{ctx:e}}});let u=e[1]&&vz(e);return{c(){t=G("div"),he(n.$$.fragment),i=He(),he(r.$$.fragment),s=He(),u&&u.c(),o=Ne(),M(t,"class","container mf-card svelte-teyund"),ni(t,"embed",e[2])},m(l,c){I(l,t,c),ce(n,t,null),V(t,i),ce(r,t,null),I(l,s,c),u&&u.m(l,c),I(l,o,c),a=!0},p(l,[c]){const f={};c&257&&(f.$$scope={dirty:c,ctx:l}),n.$set(f);const d={};c&257&&(d.$$scope={dirty:c,ctx:l}),r.$set(d),l[1]?u?(u.p(l,c),c&2&&D(u,1)):(u=vz(l),u.c(),D(u,1),u.m(o.parentNode,o)):u&&(Se(),N(u,1,1,()=>{u=null}),Fe())},i(l){a||(D(n.$$.fragment,l),D(r.$$.fragment,l),D(u),a=!0)},o(l){N(n.$$.fragment,l),N(r.$$.fragment,l),N(u),a=!1},d(l){l&&(L(t),L(s),L(o)),fe(n),fe(r),u&&u.d(l)}}}function i7e(e,t,n){let i,r;Ph(e,wa,u=>n(0,i=u)),Ph(e,Hc,u=>n(1,r=u));let{cardDataId:s}=t;Uz(s);let a=!!new URLSearchParams(window==null?void 0:window.location.search).get("embed");return e.$$set=u=>{"cardDataId"in u&&n(3,s=u.cardDataId)},[i,r,a,s]}class r7e extends xe{constructor(t){super(),ve(this,t,i7e,n7e,ye,{cardDataId:3})}}let xz;try{const e=window.mfCardDataId,t=window.mfContainerId,n=(wz=document.querySelector(`[data-container="${t}"]`))==null?void 0:wz.querySelector(".card_app");xz=new r7e({target:n??document.querySelector(".card_app"),props:{cardDataId:e}})}catch(e){throw new Error(e)}return xz});
